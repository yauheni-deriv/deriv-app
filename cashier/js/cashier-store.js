/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory(require("@deriv/components"), require("@deriv/shared"), require("@deriv/translations"), require("mobx"), require("react"));
	else if(typeof define === 'function' && define.amd)
		define(["@deriv/components", "@deriv/shared", "@deriv/translations", "mobx", "react"], factory);
	else if(typeof exports === 'object')
		exports["@deriv/cashier"] = factory(require("@deriv/components"), require("@deriv/shared"), require("@deriv/translations"), require("mobx"), require("react"));
	else
		root["@deriv/cashier"] = factory(root["@deriv/components"], root["@deriv/shared"], root["@deriv/translations"], root["mobx"], root["react"]);
})(self, function(__WEBPACK_EXTERNAL_MODULE__deriv_components__, __WEBPACK_EXTERNAL_MODULE__deriv_shared__, __WEBPACK_EXTERNAL_MODULE__deriv_translations__, __WEBPACK_EXTERNAL_MODULE_mobx__, __WEBPACK_EXTERNAL_MODULE_react__) {
return /******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./stores/cashier-store.js":
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": () => (/* binding */ CashierStore)\n});\n\n// EXTERNAL MODULE: external \"mobx\"\nvar external_mobx_ = __webpack_require__(\"mobx\");\n// EXTERNAL MODULE: external \"@deriv/shared\"\nvar shared_ = __webpack_require__(\"@deriv/shared\");\n;// CONCATENATED MODULE: ./stores/account-prompt-dialog-store.js\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n\n\nvar AccountPromptDialogStore = /*#__PURE__*/function () {\n  function AccountPromptDialogStore(root_store) {\n    _classCallCheck(this, AccountPromptDialogStore);\n\n    this.should_show = false;\n    this.is_confirmed = false;\n    this.last_location = null;\n    this.current_location = null;\n    (0,external_mobx_.makeObservable)(this, {\n      should_show: external_mobx_.observable,\n      is_confirmed: external_mobx_.observable,\n      last_location: external_mobx_.observable,\n      current_location: external_mobx_.observable,\n      shouldNavigateAfterPrompt: external_mobx_.action.bound,\n      resetLastLocation: external_mobx_.action.bound,\n      resetIsConfirmed: external_mobx_.action.bound,\n      onConfirm: external_mobx_.action.bound,\n      onCancel: external_mobx_.action.bound,\n      continueRoute: external_mobx_.action.bound\n    });\n    this.root_store = root_store;\n  }\n\n  _createClass(AccountPromptDialogStore, [{\n    key: \"shouldNavigateAfterPrompt\",\n    value: function shouldNavigateAfterPrompt(next_location, current_location) {\n      if (!this.is_confirmed) {\n        this.last_location = next_location;\n        this.should_show = true;\n        this.current_location = current_location;\n      }\n    }\n  }, {\n    key: \"resetLastLocation\",\n    value: function resetLastLocation() {\n      this.last_location = null;\n    }\n  }, {\n    key: \"resetIsConfirmed\",\n    value: function resetIsConfirmed() {\n      this.is_confirmed = false;\n    }\n  }, {\n    key: \"onConfirm\",\n    value: function () {\n      var _onConfirm = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var client, has_fiat_account;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                client = this.root_store.client;\n                this.should_show = false;\n                this.is_confirmed = true;\n                has_fiat_account = Object.values(client.accounts).some(function (acc_settings) {\n                  return !acc_settings.is_virtual && !(0,shared_.isCryptocurrency)(acc_settings.currency);\n                });\n\n                if (!((0,shared_.isCryptocurrency)(client === null || client === void 0 ? void 0 : client.currency) && has_fiat_account)) {\n                  _context.next = 7;\n                  break;\n                }\n\n                _context.next = 7;\n                return this.doSwitch();\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function onConfirm() {\n        return _onConfirm.apply(this, arguments);\n      }\n\n      return onConfirm;\n    }()\n  }, {\n    key: \"doSwitch\",\n    value: function () {\n      var _doSwitch = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var _this$root_store, client, modules, general_store, non_crypto_account_loginid;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _this$root_store = this.root_store, client = _this$root_store.client, modules = _this$root_store.modules;\n                general_store = modules.cashier.general_store;\n                non_crypto_account_loginid = Object.entries(client.accounts).reduce(function (initial_value, _ref) {\n                  var _ref2 = _slicedToArray(_ref, 2),\n                      loginid = _ref2[0],\n                      settings = _ref2[1];\n\n                  return !settings.is_virtual && !(0,shared_.isCryptocurrency)(settings.currency) ? loginid : initial_value;\n                }, '');\n                _context2.next = 5;\n                return client.switchAccount(non_crypto_account_loginid);\n\n              case 5:\n                if (this.current_location === 'deposit') {\n                  general_store.setIsDeposit(true);\n                }\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function doSwitch() {\n        return _doSwitch.apply(this, arguments);\n      }\n\n      return doSwitch;\n    }()\n  }, {\n    key: \"onCancel\",\n    value: function onCancel() {\n      this.should_show = false;\n    }\n  }, {\n    key: \"continueRoute\",\n    value: function continueRoute() {\n      if (this.is_confirmed && this.last_location) {\n        this.root_store.common.routeTo(this.last_location);\n      }\n    }\n  }]);\n\n  return AccountPromptDialogStore;\n}();\n\n\n// EXTERNAL MODULE: external \"react\"\nvar external_react_ = __webpack_require__(\"react\");\nvar external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);\n// EXTERNAL MODULE: external \"@deriv/translations\"\nvar translations_ = __webpack_require__(\"@deriv/translations\");\n;// CONCATENATED MODULE: ./constants/constants.js\nvar containers = {\n  account_transfer: 'account_transfer',\n  deposit: 'deposit',\n  payment_agent: 'payment_agent',\n  payment_agent_transfer: 'payment_agent_transfer',\n  withdraw: 'withdraw'\n};\nvar map_action = {\n  withdraw: 'payment_withdraw',\n  payment_agent: 'payment_agent_withdraw'\n};\nvar icon_payment_methods = {\n  Alipay: ['alipay'],\n  Bank: ['bank', 'bankdeposit', 'banks', 'banktransfer', 'bankwire', 'bankwiretransfer', 'localbankwire', 'localbank', 'localbanks', 'localbanktransfer'],\n  Bankbri: ['bri', 'bankbri'],\n  Bca: ['bca', 'grupbca'],\n  Bch: ['bch'],\n  Bni: ['bni'],\n  Bitcoin: ['bitcoin', 'btc'],\n  Card: ['card', 'cards', 'visa', 'mastercard'],\n  Cimbniaga: ['cimbniaga'],\n  Crypto: ['crypto', 'cryptos', 'cryptocurrencies', 'cryptocurrency', 'weacceptcrypto'],\n  Dai: ['dai'],\n  Diamondbank: ['diamondbank'],\n  Eth: ['eth', 'ethd', 'ethereum'],\n  Ewallet: ['ewallet', 'ewallets', 'ewalletpayment', 'skrill'],\n  Firstbank: ['firstbank'],\n  Gtbank: ['gtbank'],\n  Icbc: ['icbc'],\n  Libertyreserve: ['libertyreserve'],\n  LiteCoin: ['ltc', 'litecoin'],\n  Mandiri: ['mandiri'],\n  Mandirisyariah: ['mandirisyariah'],\n  Moneygram: ['moneygram'],\n  Paypal: ['paypal'],\n  PerfectMoney: ['perfectmoneyandwebmoney', 'perfectmoney'],\n  Permatabank: ['permatabank'],\n  Tether: ['tether'],\n  Verve: ['verve'],\n  WebMoney: ['perfectmoneyandwebmoney', 'webmoney'],\n  Wechatpay: ['wechatpay'],\n  Zenithbank: ['zenithbank']\n};\nvar payment_methods = {\n  AbokiFX: ['AbokiFX', 'A BOKI FX'],\n  'ABSA Bank': ['Absa', 'ABSA', 'ABSA Bank', 'ABSABank', 'ABSABANK', 'Absabank', 'ABSA Bank Transfer', 'ABSA Cash Send', 'Absa fund transfer and orange money services', 'ABSA GHANA LIMITED', 'Direct deposit FNB and ABSA'],\n  'Access bank': ['Access bank', 'Access Bank', 'Accessbank', 'AccessBank', 'ACCESS BANK', 'Acess Bank'],\n  'Access forex': ['Access Forex', 'ACCESS FOREX', 'Access forex'],\n  'Afriland First Bank': ['Afriland First Bank', 'AFRILAND FIRST BANK'],\n  'Airtel Mobile money': ['Airtel Mobile money', 'airtel', 'Airtel', 'AIRTEL MOBILE MONEY', 'airtel money', 'Airtel money', 'Airtelmoney', 'Airtel Money', 'AirtelMoney', 'AIRTELMONEY', 'AIRTEL MONEY', 'Airtel Tigo', 'AirtelTigo cash', 'all mobile money'],\n  Airtm: ['airtm', 'Airtm'],\n  AlfalahBank: ['AlfalahBank', 'bank alfalfa', 'Alflah Bank'],\n  'All banks': ['All banks', 'All local banks', 'All local Banks', 'All local banks ZWL', 'All Local Bank transfer', 'bank', 'Bank', 'BANK', 'banks', 'Banks', 'local banks', 'Local banks', 'Local Banks', 'Pakistani Local All banks', 'Local Indian banks', 'LocalBanks'],\n  Astropay: ['astropay', 'Astropay', 'Astro Pay'],\n  'ATM transfer': ['ATM', 'ATMDeposits', 'ATMdeposit', 'ATM transfer', 'ATM Transfer', 'BanktransferATM', 'FNB ATM deposit'],\n  AzamPesa: ['AzamPesa', 'Azampesa'],\n  'Banco Bradesco': ['Banco Bradesco', 'Bradesco'],\n  'Banco de Pichincha': ['Banco de Pichincha', 'BANCO DE PICHINCHA', 'Pichincha'],\n  'Banco de Produbanco': ['Banco de Produbanco', 'BANCO DE PRODUBANCO'],\n  'Banco del Pacifico': ['Banco del Pacifico', 'BANCO DE PACIFICO', 'Pacifico'],\n  'Banco Internacional': ['Banco Internacional', 'BANCO INTERNACIONAL'],\n  'Banco Internacional de Moçambique (BIM)': ['Banco Internacional de Moçambique (BIM)', 'Bim', 'Transferencia Bim'],\n  'Bancobu Bank eNoti': ['Bancobu Bank eNoti', 'Bancobu e-noti'],\n  'Bank AL Habib': ['Bank AL Habib', 'bank al habib', 'Bank Alhabib'],\n  'Bank Negara Indonesia (BNI)': ['Bank Negara Indonesia (BNI)', 'BNI', 'BankBNI'],\n  'Bank Of Ceylon (BOC)': ['Bank Of Ceylon (BOC)', 'Bankofceylon', 'Boc Peoples Bank'],\n  'Bank Rakyat Indonesia (BRI)': ['Bank Rakyat Indonesia (BRI)', 'BankBri', 'BankBRI', 'BRI', 'BRI dan Ewallet'],\n  'Bank transfer': ['All Local Bank payment Accept', 'All local bank payments', 'All Local Bank transfer', 'bank', 'Bank', 'BANK', 'Banks BHIMUP BTC Ewallet GooglePay LocalBank Paypal Paytm Perfect Money PhonePhe', 'Bank and E-wallet', 'bank deposit', 'Bank deposit', 'Bankdeposit', 'Bank Deposit', 'Bank deposits', 'bank ewallet', 'bank payment', 'banks', 'Banks', 'Bank to Bank account transfer', 'bank transfer', 'Bank transfer', 'Banktransfer', 'Bank Transfer', 'BankTransfer', 'BANK TRANSFER', 'BANKTRANSFER', 'bank transfer and all form of E-payments', 'Bank Transfer and all Forms of E-payments', 'BanktransferATM', 'bank transfers', 'Bank transfers', 'Bank Transfers', 'Ban transfer', 'Depositos direto em conta', 'Direct deposit FNB and ABSA', 'E-wallet Bank transfer', 'Internet Banking', 'Internet transfer', 'Internet Transfer', 'LocalBank', 'local banks', 'Local banks', 'Local Banks', 'Local bank transfer', 'Local bank Transfers', 'Local deposits', 'Local deposit', 'local deposits', 'BANKTRANSFERS', 'Bank Deposits', 'Bank deposit and transfer', 'Bank transfer and e-wallets', 'BankDeposit', 'Fiat', 'LOCALBANK', 'OnlineTransfer', 'ZWbanktransfers', 'localbanktransfer', 'Bank transfer Bank wire'],\n  'Bank wire': ['bank', 'Bank', 'BANK', 'bank payment', 'banks', 'Banks', 'bank wire', 'bankwire', 'Bank wire', 'Bankwire', 'Bank Wire', 'BankWire', 'BANKWIRE', 'Bank wire and e-wallets', 'Bank wire and E-wallets', 'Bank wires', 'Bankwires', 'bank wires and e-wallet', 'Bank wires and e-wallets', 'BankWire transfer', 'E-wallets and bank wires', 'local bank wire', 'LocalBankWire', 'LocalBankwire', 'Wire Bank Transfer', 'WIRE TRANSFER', 'Bank Wire transfer', 'Fiat', 'OnlineTransfer', 'Bank transfer Bank wire'],\n  BankABC: ['BankABC', 'BANCABC BANK'],\n  'Bank BTN': ['Bank BTN', 'BTN'],\n  'Bank of the Philippine Islands (BPI)': ['Bank of the Philippine Islands (BPI)', 'BPI'],\n  'BCA bank': ['BCA bank', 'BCA', 'BankBCA', 'bca'],\n  'BDO Unibank': ['BDO Unibank', 'BDO'],\n  BHIM: ['BHIM', 'Bhim', 'Banks BHIMUP BTC Ewallet GooglePay LocalBank Paypal Paytm Perfect Money PhonePhe'],\n  'BMCE Bank': ['BMCE Bank', 'Bmce Bank'],\n  'CABS Bank': ['CABS Bank', 'Cabs bank', 'CABS transfer'],\n  Card: ['Card', 'card', 'cards', 'Cards', 'Credit card', 'Debit Card', 'Mastercard', 'MasterCard', 'visa', 'Visa', 'VISA', 'Visa card', 'Bank cards', 'Carteiras Electronicas', 'Fiat', 'Master card'],\n  Cash: ['cash', 'Cash', 'Cash deposit', 'Cash deposits', 'Cash in USD or Local', 'electronic transfers and cash deposits', 'FNB cash deposit', 'physical local and foreign bank notes', 'USD', 'USD cash', 'Cash Deposit', 'Fiat', 'INR', 'USDCash', 'Zwcash'],\n  'Cash send ABSA bank': ['Cash send ABSA bank', 'ABSA Cash Send', 'Cashsend', 'Cash Send', 'CashSend', 'cash send Absa', 'Cash send Absa bank'],\n  'Chipper Cash': ['Chipper Cash', 'Chipper', 'Chippercash', 'Chipperchash'],\n  'CIH Bank': ['CIH Bank', 'Cih Bank'],\n  CIMB: ['CIMB', 'CIMBNIAGA', 'NIAGA'],\n  'City Hopper': ['City hopper', 'City Hopper'],\n  'Co-operative Bank of Kenya': ['Co-operative Bank of Kenya', 'cooperativebank'],\n  'Commercial Bank': ['Commercial Bank', 'Commercialbank'],\n  'CRDB Bank': ['CRDB Bank', 'CRDBBANK'],\n  Crypto: ['Banks BHIMUP BTC Ewallet GooglePay LocalBank Paypal Paytm Perfect Money PhonePhe', 'bitcoin', 'Bitcoin', 'BITCOIN', 'bitcoins', 'Bitcoins', 'btc', 'BTC', 'btc smega', 'Cripto', 'crypto', 'Crypto', 'Cyptocurrency', 'cryptocurrencies', 'Cryptocurrencies', 'Crypto Currencies', 'CRYPTOCURRENCIES', 'cryptocurrency', 'Cryptocurrency', 'CRYPTOCURRENCY', 'Cryptos', 'ETH', 'eUSDT', 'EUSDT', 'LTC', 'Tether', 'TRON', 'USDC', 'USDT', 'UST', 'We accept Crypto', 'BCH', 'Btc', 'Criptomoedas', 'Crypto Payment', 'Crypto transfer', 'CryptoTransfer', 'E-Wallets and Crypto', 'E-wallets and Crypto', 'Ethereum', 'Etherium', 'Litecoin', 'Skrill Neteller Crypto', 'SkrillCrypto', 'Tether ERC20', 'Tether Omni', 'Thether', 'Usdt', 'cryptos', 'ethereum', 'litecoin'],\n  'Diamond Bank': ['Diamond bank', 'Diamond Bank', 'DiamondBank'],\n  'E-Mola': ['E-Mola', 'E-mola', 'Emola'],\n  'E-money': ['E-money', 'e money'],\n  'E-payment': ['E-payment', 'all form of E-payments', 'All form of E-payments', 'all forms of E-payments', 'and all other forms of Epayment', 'bank transfer and all form of E-payments', 'Bank Transfer and all Forms of E-payments', 'E-payments', 'Epayments', 'All forms of E-Payments', 'DigitalPayment', 'OnlineTransfer', 'all forms of E-Payment'],\n  'E-transfer': ['E-transfer', 'electronic transfers and cash deposits', 'E-Transfers', 'OnlineTransfer'],\n  'E-wallet': ['Banks BHIMUP BTC Ewallet GooglePay LocalBank Paypal Paytm Perfect Money PhonePhe', 'Bank and E-wallet', 'bank ewallet', 'Bank wire and e-wallets', 'Bank wire and E-wallets', 'bank wires and e-wallet', 'Bank wires and e-wallets', 'Digital Wallets', 'electronic wallets', 'e-wallers', 'e-wallet', 'ewallet', 'eWallet', 'E-wallet', 'Ewallet', 'EWALLET', 'E-wallet Bank transfer', 'E wallet FNB', 'E-wallet payment', 'Ewallet payment', 'e-wallets', 'ewallets', 'e-Wallets', 'e-WALLETS', 'E- wallets', 'E-wallets', 'Ewallets', 'E-Wallets', 'E-wallets and bank wires', 'fnb ewallet', 'MY WALLET', 'wallet', 'Bank transfer and e-wallets', 'E-Wallets and Crypto', 'E-wallets and Crypto', 'E-Wallet', 'EWallets', 'Fiat', 'OnlineTransfer', 'ewalllets', 'ewalltets', 'local bank wallets and Orange money'],\n  Easypaisa: ['easypaisa', 'Easy paisa', 'Easypaisa', 'Easy Paisa', 'EasyPaisaTransfer'],\n  Ecobank: ['Ecobank', 'Eco Bank', 'ECO BANK', 'Eco bank Transfers'],\n  EcoCash: ['Eco cash', 'Ecocash', 'EcoCash', 'ECOCASH', 'Ecocash FCA', 'Ecocash method', 'ECOCASH WALLET', 'Ecocash ZWL', 'EcocashMobileMoney', 'Zwecocash'],\n  'Electronic Funds Transfer (EFT)': ['Electronic Funds Transfer (EFT)', 'EFT'],\n  'Equity Bank': ['Equity bank', 'Equity Bank', 'equitybankmoneytransfer'],\n  'EU Mobile Money': ['EU Mobile Money', 'all mobile money', 'EU MONEY'],\n  EzyPesa: ['EzyPesa', 'Ezypesa', 'Ezzy pesa', 'Ezzy Pesa', 'EzzyPesa'],\n  FasaPay: ['fasapay', 'Fasa pay', 'FasaPay'],\n  'Fast Payment': ['Fast payment', 'Fast Payment'],\n  'Faysal Bank': ['Faysal Bank', 'FaysalBank'],\n  'FBC Bank': ['FBC Bank', 'FBC BANK'],\n  'Fidelity Bank': ['Fidelity Bank', 'fidelitybank'],\n  Finbank: ['Finbank', 'Fin bank', 'FinBank'],\n  'First Bank of Nigeria': ['First Bank of Nigeria', 'First bank', 'First Bank', 'FirstBank', 'FIRST BANK', 'Firstbank'],\n  'First City Monument Bank (FCMB)': ['First City Monument Bank (FCMB)', 'FCMB', 'fcmb'],\n  'First MicroFinanceBank (FMFB)': ['First MicroFinanceBank (FMFB)', 'FMFB'],\n  'First National Bank (FNB)': ['First National Bank (FNB)', 'Direct deposit FNB and ABSA', 'E wallet FNB', 'First National Bank', 'fnb', 'FNB', 'FNB ATM deposit', 'Fnbbank', 'FNB Bank', 'FNBB Bank Transfer', 'FNB cash deposit', 'fnb ewallet', 'FNB First National Bank', 'FNB pay2cell', 'FNB pay to cell', 'FNB pay to sell', 'Pay to cell FNB', 'FNB bank transfer', 'FNBB', 'FNBBank', 'FirNationalBank', 'First National Bank of Botswana', 'Firstnationalbank', 'Fnb'],\n  Gmoney: ['Gmoney', 'GMONEY'],\n  'Google Pay': ['Google Pay', 'Banks BHIMUP BTC Ewallet GooglePay LocalBank Paypal Paytm Perfect Money PhonePhe', 'Google pay', 'gpay', 'Gpay', 'GPay'],\n  'Grup BCA': ['Grup BCA', 'GrupBCA'],\n  'GT bank': ['GT bank', 'Gtb', 'GTB', 'Gt Bank', 'GT Bank', 'GTBank', 'GT BANK', 'Gtbank', 'Guarantee Trust Bank', 'GuarantyTrustBank'],\n  Halopesa: ['halopesa', 'Halo pesa', 'Halopesa', 'Halo Pesa', 'HaloPesa', 'HALOPESA'],\n  'Hatton National Bank': ['Hatton National Bank', 'HattonNationalBank'],\n  HBL: ['HBL', 'HBLMFB', 'KONNET HBL'],\n  Help2Pay: ['Help2Pay', 'help2pay'],\n  'HNB Bank': ['HNB Bank', 'HNB'],\n  'IMPS Transfer': ['imps', 'Imps', 'IMPS', 'IMPS Transfer'],\n  'ING Bank': ['ING Bank', 'ING'],\n  Innbucks: ['Innbucks', 'INNBUCKS'],\n  'Instant Money': ['Instant Money', 'InstantMoney', 'Instant money stambic bank', 'Instant money stanbic', 'Instant money'],\n  'Inter Bank Fund Transfer': ['Inter Bank Fund Transfer', 'InterBankfundtransfer', 'Interbank Transfer'],\n  'Itau Bank': ['Itau Bank', 'Itau'],\n  IZI: ['IZI', 'Izzy'],\n  JazzCash: ['JazzCash', 'jazzcash', 'Jazz cash', 'Jazzcash', 'Jazz-Cash', 'JazzCashTransfer'],\n  JENIUS: ['JENIUS', 'Jenius'],\n  Jeton: ['Jeton', 'jeton', 'JetonWallet'],\n  'Key Stone Bank': ['Key Stone Bank', 'Keystone'],\n  'Kuda Bank': ['Kuda Bank', 'KUDA BANK', 'Kuda MFB', 'KudaMFB', 'KUDA MICROFINANCE BANK 2014563937', 'Kuda Microfinance', 'KUDA'],\n  'Luno Wallet': ['Luno Wallet', 'Luno', 'Luno crypto wallet', 'Luno e-wallet', 'Luno ewallet', 'luno'],\n  'Mandiri Bank': ['Mandiri Bank', 'Mandiri', 'MANDIRI', 'MandiriSyariah', 'BankMandiri'],\n  'Meezan Bank': ['Meezan Bank', 'MeezanBank'],\n  'Millenium Bim Visa': ['Millenium Bim Visa', 'Millenium Bim'],\n  MIX: ['mix', 'Mix', 'MIX', 'Mixed'],\n  'Mobile money': ['all mobile money', 'mobile banking', 'Mobile banking', 'Mobile money', 'Mobile Money', 'MobileMoney', 'Mobile money MTN', 'Mobile Money transfer', 'MOBILE MONEY TRANSFER', 'Mobile money transfers', 'Mobilemoneyoption', 'OnlineTransfer'],\n  'Mojo Mula': ['Mojo money', 'Mojo Mula', 'MOJO MULA', 'MoMo pay', 'Mojo Moolah'],\n  MoMo: ['MoMo', 'MOMO', 'MoMo pay', 'MTN MOMO', 'MTNMOMO'],\n  MoneyGram: ['Moneygram', 'Money Gram', 'MoneyGram', 'Money grame'],\n  'M-PESA': ['AbesafaricomMpesa Transfers', 'mpesa', 'M pesa', 'M-pesa', 'Mpesa', 'M Pesa', 'M-Pesa', 'MPesa', 'M PESA', 'M-PESA', 'MPESA', 'M-Pesa Tigo-Pesa T-Pesa', 'Pesa', 'safaricom mpesa', 'MPESA 0710393947 Albert Kyalo', 'VodacomMpesa'],\n  'MTN MOMO': ['all mobile money', 'Mobile money MTN', 'MoMo', 'MOMO', 'MTN', 'MTN mobile money', 'MTN Mobile money', 'MTN Mobile Money', 'MTN MOBILE MONEY', 'MTNMOBILEMONEY', 'MTN MOMO', 'MTNMOMO', 'MTN MONEY'],\n  'Mukuru money transfers': ['Mukuru', 'Mukuru money transfers', 'MukuruMoneyTransfer', 'USDMukurutransfer'],\n  'MyZaka Mascom Money': ['MyZaka Mascom Money', 'mascom', 'mascom myZaka', 'Mascom MyZaka', 'myzaka', 'My zaka', 'Myzaka', 'MyZaka', 'My zaka mascom money', 'my Zaka', 'myzaaka'],\n  Neft: ['neft', 'Neft', 'NEFT'],\n  Nequi: ['Nequi', 'Nequi o Daviplata al 300 6839026'],\n  Neteller: ['neTeller', 'Neteller', 'NETELLER', 'NETelle', 'Skrill Neteller Crypto', 'neteller', 'netteller'],\n  'Nigeria local bank': ['Nigeria Local', 'Nigeria local bank', 'NIGERIA LOCAL BANK'],\n  'NMB Bank': ['NMB Bank', 'NATIONALMICROFINANCEBANK', 'Nmb bank'],\n  'One Money': ['OM', 'Onemoney', 'One Money', 'One money service', 'OneMoney', 'OneMoneyMobileMoney'],\n  Opay: ['Opay', 'OPAY'],\n  'Orange Money Transfer': ['Absa fund transfer and orange money services', 'Orange Cameroon', 'orange money', 'orangemoney', 'Orange money', 'Orangemoney', 'Orange Money', 'OrangeMoney', 'ORANGE MONEY', 'Orange Money Transfer', 'local bank wallets and Orange money'],\n  PalmPay: ['PalmPay', 'PALMPAY'],\n  'Pay safe Card': ['paysafecard', 'Pay safe Card'],\n  Pay2Cell: ['FNB pay2cell', 'FNB pay to cell', 'FNB pay to sell', 'Pay2cell', 'Pay2Cell', 'PAY2CELL', 'pay to cell', 'Pay to cell', 'Paytocell', 'Pay to Cell', 'Pay to cell FNB', 'PayToCell', 'pay2cell'],\n  'Payment Checks': ['Payment checks', 'Payment Checks'],\n  PayPal: ['Banks BHIMUP BTC Ewallet GooglePay LocalBank Paypal Paytm Perfect Money PhonePhe', 'Paypal', 'PayPal', 'PAYPAL', 'paypal'],\n  PayTM: ['Banks BHIMUP BTC Ewallet GooglePay LocalBank Paypal Paytm Perfect Money PhonePhe', 'Paytm', 'PayTM'],\n  'Perfect Money': ['Banks BHIMUP BTC Ewallet GooglePay LocalBank Paypal Paytm Perfect Money PhonePhe', 'perfect money', 'perfectmoney', 'Perfect money', 'Perfectmoney', 'Perfect Money', 'PerfectMoney', 'PERFECT MONEY', 'Perfect Money and Webmoney', 'PM', 'PERFECTMONEY', 'PERFECT'],\n  'Permata Bank': ['Permata Bank', 'PermataBank', 'PERMATA'],\n  PhonePhe: ['PhonePhe', 'Banks BHIMUP BTC Ewallet GooglePay LocalBank Paypal Paytm Perfect Money PhonePhe', 'Phonepay', 'phonepe', 'Phonepe', 'PhonePe', 'Phone pay', 'PhonePay'],\n  Pix: ['Pix', 'PIX'],\n  'Polaris Bank': ['Polaris Bank', 'Polaris'],\n  'Ponto 24': ['Conta movel', 'Conta Movel', 'ContamovelBCI', 'Ponto 24', 'Ponto24'],\n  'Pos deposit': ['Pos', 'POS', 'Pos deposit'],\n  'Postal transfer': ['Postal transfer', 'Egyptian postal transfers'],\n  RIA: ['Ria', 'RIA'],\n  'RTGS Transfers': ['RTGS Transfers', 'rtgs', 'RTGS', 'Rtgs bank transfer', 'RTGS transfers', 'Rtgs'],\n  Safaricom: ['Safaricom', 'AbesafaricomMpesa Transfers', 'AbeSafaricomMpesaTransfers', 'safaricom mpesa'],\n  'Sama Money': ['Sama Money', 'Sama money'],\n  ShopeePay: ['ShopeePay', 'SHOPEEPAY'],\n  Skrill: ['Skrill', 'Skill', 'Skril', 'skrill', 'SKRILL', 'skrillpayments', 'Skrll', 'SkrillCrypto', 'Skrill Neteller Crypto'],\n  Smega: ['btc smega', 'smega', 'Smega'],\n  'Standard Bank Namibia': ['Standard Bank Namibia', 'Standard Bank', 'StandardBank'],\n  'Stanbic Bank': ['Instant money stambic bank', 'Instant money stanbic', 'stanbic', 'Stanbic', 'Stanbic Bank', 'StanbicBank', 'Stanbic Bank Transfer', 'Stanbic Money Transfer', 'Standbic', 'Stanbic IBTC', 'Stanbic bank'],\n  'Standard Charted Bank': ['STANCHART', 'Standard Charted Bank', 'Standard chartered', 'Standard chartered bank', 'Standard Chartered Bank Transfer', 'Standard Chatterd Bank'],\n  'Steward remit': ['Steward remit', 'Steward Remmitt'],\n  'T-pesa': ['M-Pesa Tigo-Pesa T-Pesa', 'Pesa', 'T-pesa', 'Tpesa', 'T PESA', 'TTCLpesa'],\n  'Tigo Cash': ['Tigo', 'Tigo Cash', 'AirtelTigo cash'],\n  'Tigo Mobile Money': ['Tigo Mobile Money', 'Airtel Tigo', 'all mobile money', 'Tigo', 'TIGO MOBILE MONEY', 'TIGOMOBILEMONEY', 'AirtelTigo cash'],\n  'Tigo Pesa': ['M-Pesa Tigo-Pesa T-Pesa', 'Pesa', 'Tigo', 'tigopesa', 'Tigo pesa', 'Tigopesa', 'Tigo Pesa', 'TigoPesa', 'TIGO PESA', 'TTCLpesa', 'TIGOPESA'],\n  'Transferencia bancaria': ['Transferencia bancaria', 'Transferencia Eletronica TED', 'Transferencias bancarias', 'Ted', 'Transferencia Bancaria'],\n  'UBA Bank': ['UBA', 'UBA Bank', 'UBA BANK'],\n  'Union Bank': ['Union Bank', 'Unionbank', 'Union'],\n  'United Bank Limited (UBL)': ['United Bank Limited (UBL)', 'UBL Bank'],\n  UPI: ['All UPI Transfer', 'Banks BHIMUP BTC Ewallet GooglePay LocalBank Paypal Paytm Perfect Money PhonePhe', 'upi', 'UPI', 'UPI transfer', 'AmazonUPI', 'PaytmUPI', 'Upi'],\n  'USSD code transfer': ['USSD code transfer', 'Or USSD transfer from all Nigeria banks', 'USSD Code', 'USSD CODE', 'Ussd code Transfer from all Nigerian banks', 'Ussd transfer', 'USSD transfer', 'USSD Transfer', 'ussd transfer'],\n  Vodacom: ['Vodacom', 'VodacomMpesa'],\n  'Vodafone Cash': ['Vodafon Cash Methods', 'Vodafone cash', 'Vodafone Cash', 'VODAFONE CASH', 'VODAFONECASH'],\n  Webmoney: ['Perfect Money and Webmoney', 'Webmoney', 'WebMoney', 'Web Money', 'Web money'],\n  'WeChat Pay': ['WeChat Pay', 'WeChatPay'],\n  'Wema Bank': ['Wema Bank', 'Wema'],\n  WesternUnion: ['Western union', 'Western Union', 'WesternUnion', 'westernunion'],\n  Wise: ['Wise', 'transferwise'],\n  'World Remit': ['World remit', 'World Remit', 'CoinbaseworldRemit'],\n  'Zanaco bank': ['ZANACO', 'Zanaco bank'],\n  'Zenith bank': ['Zenith bank', 'Zenithbank', 'Zenith Bank', 'ZenithBank', 'ZENITH BANK', 'Zenith', 'zenithbank'],\n  Zipit: ['Zipit', 'ZIPIT', 'ZIPIT bank transfers']\n};\n/* harmony default export */ const constants = ({\n  containers: containers,\n  map_action: map_action,\n  icon_payment_methods: icon_payment_methods,\n  payment_methods: payment_methods\n});\n;// CONCATENATED MODULE: ./stores/error-store.ts\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction error_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction error_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction error_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) error_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) error_store_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n\n\nvar ErrorStore = /*#__PURE__*/function () {\n  function ErrorStore() {\n    error_store_classCallCheck(this, ErrorStore);\n\n    this.message = '';\n    this.code = '';\n    this.fields = '';\n    this.is_show_full_page = false;\n    this.onClickButton = null;\n    this.is_ask_uk_funds_protection = false;\n    this.is_self_exclusion_max_turnover_set = false;\n    this.is_ask_authentication = false;\n    this.is_ask_financial_risk_approval = false;\n    (0,external_mobx_.makeObservable)(this, {\n      message: external_mobx_.observable,\n      code: external_mobx_.observable,\n      fields: external_mobx_.observable,\n      is_show_full_page: external_mobx_.observable,\n      onClickButton: external_mobx_.observable,\n      is_ask_uk_funds_protection: external_mobx_.observable,\n      is_self_exclusion_max_turnover_set: external_mobx_.observable,\n      is_ask_authentication: external_mobx_.observable,\n      is_ask_financial_risk_approval: external_mobx_.observable,\n      setErrorMessage: external_mobx_.action.bound,\n      handleCashierError: external_mobx_.action.bound,\n      setMessage: external_mobx_.action.bound,\n      setIsAskUkFundsProtection: external_mobx_.action.bound,\n      setIsSelfExclusionMaxTurnoverSet: external_mobx_.action.bound,\n      setIsAskAuthentication: external_mobx_.action.bound,\n      setIsAskFinancialRiskApproval: external_mobx_.action.bound\n    });\n  }\n\n  error_store_createClass(ErrorStore, [{\n    key: \"setErrorMessage\",\n    value: function setErrorMessage(error, onClickButton, is_show_full_page) {\n      var _error$details;\n\n      // for errors that need to show a button, reset the form\n      var error_object = _objectSpread({\n        onClickButton: onClickButton,\n        code: error.code,\n        message: error.message,\n        is_show_full_page: is_show_full_page || /InvalidToken|WrongResponse/.test(error.code)\n      }, (0,shared_.getPropertyValue)(error, ['details', 'fields']) && {\n        fields: (_error$details = error.details) === null || _error$details === void 0 ? void 0 : _error$details.fields\n      });\n\n      this.onClickButton = error_object.onClickButton;\n      this.code = error_object.code;\n      this.message = error_object.message;\n      this.is_show_full_page = error_object.is_show_full_page;\n      this.fields = error_object.fields;\n      this.is_ask_uk_funds_protection = error_object === null || error_object === void 0 ? void 0 : error_object.is_ask_uk_funds_protection;\n      this.is_self_exclusion_max_turnover_set = error_object === null || error_object === void 0 ? void 0 : error_object.is_self_exclusion_max_turnover_set;\n      this.is_ask_authentication = error_object === null || error_object === void 0 ? void 0 : error_object.is_ask_authentication;\n      this.is_ask_financial_risk_approval = error_object === null || error_object === void 0 ? void 0 : error_object.is_ask_financial_risk_approval;\n    }\n  }, {\n    key: \"handleCashierError\",\n    value: function handleCashierError(error) {\n      switch (error.code) {\n        case 'ASK_TNC_APPROVAL':\n          this.setErrorMessage(error, null, true);\n          break;\n\n        case 'ASK_FIX_DETAILS':\n          this.setErrorMessage(error, null, true);\n          break;\n\n        case 'ASK_UK_FUNDS_PROTECTION':\n          this.setIsAskUkFundsProtection(true);\n          break;\n\n        case 'ASK_SELF_EXCLUSION_MAX_TURNOVER_SET':\n          this.setIsSelfExclusionMaxTurnoverSet(true);\n          break;\n\n        case 'ASK_AUTHENTICATE':\n        case 'ASK_AGE_VERIFICATION':\n          this.setIsAskAuthentication(true);\n          break;\n\n        case 'ASK_FINANCIAL_RISK_APPROVAL':\n          this.setIsAskFinancialRiskApproval(true);\n          break;\n\n        default:\n          this.setErrorMessage(error);\n          this.setIsAskUkFundsProtection(false);\n          this.setIsSelfExclusionMaxTurnoverSet(false);\n          this.setIsAskAuthentication(false);\n          this.setIsAskFinancialRiskApproval(false);\n      }\n    }\n  }, {\n    key: \"setMessage\",\n    value: function setMessage(value) {\n      this.message = value;\n    }\n  }, {\n    key: \"setIsAskUkFundsProtection\",\n    value: function setIsAskUkFundsProtection(value) {\n      this.is_ask_uk_funds_protection = value;\n    }\n  }, {\n    key: \"setIsSelfExclusionMaxTurnoverSet\",\n    value: function setIsSelfExclusionMaxTurnoverSet(value) {\n      this.is_self_exclusion_max_turnover_set = value;\n    }\n  }, {\n    key: \"setIsAskAuthentication\",\n    value: function setIsAskAuthentication(value) {\n      this.is_ask_authentication = value;\n    }\n  }, {\n    key: \"setIsAskFinancialRiskApproval\",\n    value: function setIsAskFinancialRiskApproval(value) {\n      this.is_ask_financial_risk_approval = value;\n    }\n  }]);\n\n  return ErrorStore;\n}();\n\n\n;// CONCATENATED MODULE: ./stores/account-transfer-store.js\nfunction account_transfer_store_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction account_transfer_store_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? account_transfer_store_ownKeys(Object(source), !0).forEach(function (key) { account_transfer_store_defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : account_transfer_store_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction account_transfer_store_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction account_transfer_store_slicedToArray(arr, i) { return account_transfer_store_arrayWithHoles(arr) || account_transfer_store_iterableToArrayLimit(arr, i) || account_transfer_store_unsupportedIterableToArray(arr, i) || account_transfer_store_nonIterableRest(); }\n\nfunction account_transfer_store_nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction account_transfer_store_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return account_transfer_store_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return account_transfer_store_arrayLikeToArray(o, minLen); }\n\nfunction account_transfer_store_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction account_transfer_store_iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction account_transfer_store_arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction account_transfer_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction account_transfer_store_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { account_transfer_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { account_transfer_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction account_transfer_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction account_transfer_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction account_transfer_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) account_transfer_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) account_transfer_store_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n\n\n\n\n\n\nvar hasTransferNotAllowedLoginid = function hasTransferNotAllowedLoginid(loginid) {\n  return loginid.startsWith('MX');\n};\n\nvar getSelectedError = function getSelectedError(selected_value, is_from_account) {\n  if (is_from_account) {\n    return /*#__PURE__*/external_react_default().createElement(translations_.Localize, {\n      i18n_default_text: \"Transfer from {{selected_value}} is not allowed, Please choose another account from dropdown\",\n      values: {\n        selected_value: selected_value\n      }\n    });\n  }\n\n  return /*#__PURE__*/external_react_default().createElement(translations_.Localize, {\n    i18n_default_text: \"Transfer to {{selected_value}} is not allowed, Please choose another account from dropdown\",\n    values: {\n      selected_value: selected_value\n    }\n  });\n};\n\nvar AccountTransferStore = /*#__PURE__*/function () {\n  function AccountTransferStore(_ref) {\n    var _this = this;\n\n    var WS = _ref.WS,\n        root_store = _ref.root_store;\n\n    account_transfer_store_classCallCheck(this, AccountTransferStore);\n\n    this.accounts_list = [];\n    this.container = constants.containers.account_transfer;\n    this.error = new ErrorStore();\n    this.has_no_account = false;\n    this.has_no_accounts_balance = false;\n    this.is_transfer_confirm = false;\n    this.is_transfer_successful = false;\n    this.is_mt5_transfer_in_progress = false;\n    this.minimum_fee = null;\n    this.receipt = {};\n    this.selected_from = {};\n    this.selected_to = {};\n    this.account_transfer_amount = '';\n    this.transfer_fee = null;\n    this.transfer_limit = {};\n\n    this.requestTransferBetweenAccounts = /*#__PURE__*/function () {\n      var _ref3 = account_transfer_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(_ref2) {\n        var amount, _this$root_store, client, modules, common, setLoading, is_from_derivgo, is_logged_in, responseMt5LoginList, responseTradingPlatformAccountsList, setAccountStatus, setBalanceOtherAccounts, is_mt_transfer, currency, transfer_between_accounts, account_status_response;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                amount = _ref2.amount;\n                _this$root_store = _this.root_store, client = _this$root_store.client, modules = _this$root_store.modules, common = _this$root_store.common;\n                setLoading = modules.cashier.general_store.setLoading;\n                is_from_derivgo = common.is_from_derivgo;\n                is_logged_in = client.is_logged_in, responseMt5LoginList = client.responseMt5LoginList, responseTradingPlatformAccountsList = client.responseTradingPlatformAccountsList, setAccountStatus = client.setAccountStatus, setBalanceOtherAccounts = client.setBalanceOtherAccounts;\n\n                if (is_logged_in) {\n                  _context.next = 7;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", null);\n\n              case 7:\n                setLoading(true);\n\n                _this.error.setErrorMessage('');\n\n                is_mt_transfer = _this.selected_from.is_mt || _this.selected_to.is_mt;\n                if (is_mt_transfer) _this.setIsMT5TransferInProgress(true);\n                currency = _this.selected_from.currency;\n                _context.next = 14;\n                return _this.WS.authorized.transferBetweenAccounts(_this.selected_from.value, _this.selected_to.value, currency, amount);\n\n              case 14:\n                transfer_between_accounts = _context.sent;\n\n                if (!is_from_derivgo && transfer_between_accounts && Array.isArray(transfer_between_accounts.accounts)) {\n                  transfer_between_accounts.accounts = transfer_between_accounts.accounts.filter(function (account) {\n                    return account.account_type !== shared_.CFD_PLATFORMS.DERIVEZ;\n                  });\n                }\n\n                if (is_mt_transfer) _this.setIsMT5TransferInProgress(false);\n\n                if (!transfer_between_accounts.error) {\n                  _context.next = 26;\n                  break;\n                }\n\n                if (!(transfer_between_accounts.error.code === 'Fiat2CryptoTransferOverLimit')) {\n                  _context.next = 23;\n                  break;\n                }\n\n                _context.next = 21;\n                return _this.WS.authorized.getAccountStatus();\n\n              case 21:\n                account_status_response = _context.sent;\n\n                if (!account_status_response.error) {\n                  setAccountStatus(account_status_response.get_account_status);\n                }\n\n              case 23:\n                _this.error.setErrorMessage(transfer_between_accounts.error);\n\n                _context.next = 30;\n                break;\n\n              case 26:\n                _this.setReceiptTransfer({\n                  amount: (0,shared_.formatMoney)(currency, amount, true)\n                });\n\n                transfer_between_accounts.accounts.forEach(function (account) {\n                  _this.setBalanceByLoginId(account.loginid, account.balance);\n\n                  if (account.loginid === _this.selected_from.value) {\n                    _this.setBalanceSelectedFrom(account.balance);\n                  } else if (account.loginid === _this.selected_to.value) {\n                    _this.setBalanceSelectedTo(account.balance);\n                  } // if one of the accounts was mt5\n\n\n                  if (account.account_type === shared_.CFD_PLATFORMS.MT5) {\n                    Promise.all([_this.WS.mt5LoginList(), _this.WS.balanceAll()]).then(function (_ref4) {\n                      var _ref5 = account_transfer_store_slicedToArray(_ref4, 2),\n                          mt5_login_list_response = _ref5[0],\n                          balance_response = _ref5[1];\n\n                      // update the balance for account switcher by renewing the mt5_login_list response\n                      responseMt5LoginList(mt5_login_list_response); // update total balance since MT5 total only comes in non-stream balance call\n\n                      setBalanceOtherAccounts(balance_response.balance);\n                    });\n                  } // if one of the accounts was dxtrade\n\n\n                  if (account.account_type === shared_.CFD_PLATFORMS.DXTRADE) {\n                    Promise.all([_this.WS.tradingPlatformAccountsList(shared_.CFD_PLATFORMS.DXTRADE), _this.WS.balanceAll()]).then(function (_ref6) {\n                      var _ref7 = account_transfer_store_slicedToArray(_ref6, 2),\n                          dxtrade_login_list_response = _ref7[0],\n                          balance_response = _ref7[1];\n\n                      // update the balance for account switcher by renewing the dxtrade_login_list_response\n                      responseTradingPlatformAccountsList(dxtrade_login_list_response); // update total balance since Dxtrade total only comes in non-stream balance call\n\n                      setBalanceOtherAccounts(balance_response.balance);\n                    });\n                  }\n                });\n\n                _this.setAccountTransferAmount(null);\n\n                _this.setIsTransferConfirm(true);\n\n              case 30:\n                setLoading(false);\n                return _context.abrupt(\"return\", transfer_between_accounts);\n\n              case 32:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    this.resetAccountTransfer = /*#__PURE__*/account_transfer_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n      return regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this.setIsTransferConfirm(false);\n\n              _this.setTransferLimit();\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    (0,external_mobx_.makeObservable)(this, {\n      accounts_list: external_mobx_.observable,\n      container: external_mobx_.observable,\n      error: external_mobx_.observable,\n      has_no_account: external_mobx_.observable,\n      has_no_accounts_balance: external_mobx_.observable,\n      is_transfer_confirm: external_mobx_.observable,\n      is_transfer_successful: external_mobx_.observable,\n      is_mt5_transfer_in_progress: external_mobx_.observable,\n      minimum_fee: external_mobx_.observable,\n      receipt: external_mobx_.observable,\n      selected_from: external_mobx_.observable,\n      selected_to: external_mobx_.observable,\n      account_transfer_amount: external_mobx_.observable,\n      transfer_fee: external_mobx_.observable,\n      transfer_limit: external_mobx_.observable,\n      is_account_transfer_visible: external_mobx_.computed,\n      is_transfer_locked: external_mobx_.computed,\n      setBalanceByLoginId: external_mobx_.action.bound,\n      setBalanceSelectedFrom: external_mobx_.action.bound,\n      setBalanceSelectedTo: external_mobx_.action.bound,\n      onMountAccountTransfer: external_mobx_.action.bound,\n      setHasNoAccountsBalance: external_mobx_.action.bound,\n      setHasNoAccount: external_mobx_.action.bound,\n      setTransferFee: external_mobx_.action.bound,\n      setMinimumFee: external_mobx_.action.bound,\n      setTransferLimit: external_mobx_.action.bound,\n      sortAccountsTransfer: external_mobx_.action.bound,\n      setSelectedFrom: external_mobx_.action.bound,\n      setSelectedTo: external_mobx_.action.bound,\n      setAccounts: external_mobx_.action.bound,\n      setIsTransferConfirm: external_mobx_.action.bound,\n      setAccountTransferAmount: external_mobx_.action.bound,\n      setIsTransferSuccessful: external_mobx_.action.bound,\n      setIsMT5TransferInProgress: external_mobx_.action.bound,\n      setReceiptTransfer: external_mobx_.action.bound,\n      onChangeTransferFrom: external_mobx_.action.bound,\n      onChangeTransferTo: external_mobx_.action.bound,\n      resetAccountTransfer: external_mobx_.action.bound,\n      setTransferPercentageSelectorResult: external_mobx_.action.bound,\n      validateTransferFromAmount: external_mobx_.action.bound,\n      validateTransferToAmount: external_mobx_.action.bound\n    });\n    this.root_store = root_store;\n    this.WS = WS;\n  }\n\n  account_transfer_store_createClass(AccountTransferStore, [{\n    key: \"is_account_transfer_visible\",\n    get: function get() {\n      var _this$root_store$clie = this.root_store.client,\n          has_maltainvest_account = _this$root_store$clie.has_maltainvest_account,\n          landing_company_shortcode = _this$root_store$clie.landing_company_shortcode,\n          residence = _this$root_store$clie.residence; // cashier Transfer account tab is hidden for iom clients\n      // check for residence to hide the tab before creating a real money account\n\n      return residence !== 'im' && (landing_company_shortcode !== 'malta' || has_maltainvest_account);\n    }\n  }, {\n    key: \"is_transfer_locked\",\n    get: function get() {\n      var _this$root_store$clie2 = this.root_store.client,\n          is_financial_account = _this$root_store$clie2.is_financial_account,\n          is_financial_information_incomplete = _this$root_store$clie2.is_financial_information_incomplete,\n          is_trading_experience_incomplete = _this$root_store$clie2.is_trading_experience_incomplete,\n          account_status = _this$root_store$clie2.account_status;\n      if (!account_status.status) return false;\n      var need_financial_assessment = is_financial_account && (is_financial_information_incomplete || is_trading_experience_incomplete);\n      return need_financial_assessment && this.error.is_ask_financial_risk_approval;\n    }\n  }, {\n    key: \"setBalanceByLoginId\",\n    value: function setBalanceByLoginId(loginid, balance) {\n      this.accounts_list.find(function (acc) {\n        return loginid === acc.value;\n      }).balance = balance;\n    }\n  }, {\n    key: \"setBalanceSelectedFrom\",\n    value: function setBalanceSelectedFrom(balance) {\n      this.selected_from.balance = balance;\n    }\n  }, {\n    key: \"setBalanceSelectedTo\",\n    value: function setBalanceSelectedTo(balance) {\n      this.selected_to.balance = balance;\n    } // possible transfers:\n    // 1. fiat to crypto & vice versa\n    // 2. fiat to mt & vice versa\n    // 3. crypto to mt & vice versa\n\n  }, {\n    key: \"onMountAccountTransfer\",\n    value: function () {\n      var _onMountAccountTransfer = account_transfer_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var _this$root_store2, client, common, modules, _modules$cashier$gene, onMountCommon, setLoading, setOnRemount, active_accounts, is_logged_in, is_from_derivgo, has_updated_account_balance, _this$accounts_list, transfer_between_accounts, cfd_transfer_to_login_id, obj_values;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _this$root_store2 = this.root_store, client = _this$root_store2.client, common = _this$root_store2.common, modules = _this$root_store2.modules;\n                _modules$cashier$gene = modules.cashier.general_store, onMountCommon = _modules$cashier$gene.onMountCommon, setLoading = _modules$cashier$gene.setLoading, setOnRemount = _modules$cashier$gene.setOnRemount;\n                active_accounts = client.active_accounts, is_logged_in = client.is_logged_in;\n                is_from_derivgo = common.is_from_derivgo;\n                setLoading(true);\n                setOnRemount(this.onMountAccountTransfer);\n                _context3.next = 8;\n                return onMountCommon();\n\n              case 8:\n                _context3.next = 10;\n                return this.WS.wait('website_status');\n\n              case 10:\n                // check if some balance update has come in since the last mount\n                has_updated_account_balance = this.has_no_accounts_balance && Object.keys(active_accounts).find(function (account) {\n                  return !active_accounts[account].is_virtual && active_accounts[account].balance;\n                });\n\n                if (has_updated_account_balance) {\n                  this.setHasNoAccountsBalance(false);\n                } // various issues happen when loading from cache\n                // e.g. new account may have been created, transfer may have been done elsewhere, etc\n                // so on load of this page just call it again\n\n\n                if (!is_logged_in) {\n                  _context3.next = 29;\n                  break;\n                }\n\n                _context3.next = 15;\n                return this.WS.authorized.transferBetweenAccounts();\n\n              case 15:\n                transfer_between_accounts = _context3.sent;\n\n                if (!transfer_between_accounts.error) {\n                  _context3.next = 20;\n                  break;\n                }\n\n                this.error.setErrorMessage(transfer_between_accounts.error, this.onMountAccountTransfer);\n                setLoading(false);\n                return _context3.abrupt(\"return\");\n\n              case 20:\n                if (!is_from_derivgo) {\n                  transfer_between_accounts.accounts = transfer_between_accounts.accounts.filter(function (account) {\n                    return account.account_type !== shared_.CFD_PLATFORMS.DERIVEZ;\n                  });\n                }\n\n                if (this.canDoAccountTransfer(transfer_between_accounts.accounts)) {\n                  _context3.next = 23;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\");\n\n              case 23:\n                _context3.next = 25;\n                return this.sortAccountsTransfer(transfer_between_accounts, is_from_derivgo);\n\n              case 25:\n                this.setTransferFee();\n                this.setMinimumFee();\n                this.setTransferLimit();\n\n                if (((_this$accounts_list = this.accounts_list) === null || _this$accounts_list === void 0 ? void 0 : _this$accounts_list.length) > 0) {\n                  cfd_transfer_to_login_id = sessionStorage.getItem('cfd_transfer_to_login_id');\n                  sessionStorage.removeItem('cfd_transfer_to_login_id');\n                  obj_values = this.accounts_list.find(function (account) {\n                    return account.value === cfd_transfer_to_login_id;\n                  });\n\n                  if (obj_values) {\n                    if (hasTransferNotAllowedLoginid(obj_values.value)) {\n                      // check if selected to is not allowed account\n                      obj_values.error = getSelectedError(obj_values.value);\n                    }\n\n                    this.setSelectedTo(obj_values);\n                  }\n                }\n\n              case 29:\n                setLoading(false);\n\n              case 30:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function onMountAccountTransfer() {\n        return _onMountAccountTransfer.apply(this, arguments);\n      }\n\n      return onMountAccountTransfer;\n    }()\n  }, {\n    key: \"canDoAccountTransfer\",\n    value: function canDoAccountTransfer(accounts) {\n      var can_transfer = true; // should have at least one account with balance\n\n      if (!accounts.find(function (account) {\n        return +account.balance > 0;\n      })) {\n        can_transfer = false;\n        this.setHasNoAccountsBalance(true);\n      } else {\n        this.setHasNoAccountsBalance(false);\n      } // should have at least two real-money accounts\n\n\n      if (accounts.length <= 1) {\n        can_transfer = false;\n        this.setHasNoAccount(true);\n      } else {\n        this.setHasNoAccount(false);\n      }\n\n      if (!can_transfer) {\n        this.root_store.modules.cashier.general_store.setLoading(false);\n      }\n\n      return can_transfer;\n    }\n  }, {\n    key: \"setHasNoAccountsBalance\",\n    value: function setHasNoAccountsBalance(has_no_accounts_balance) {\n      this.has_no_accounts_balance = has_no_accounts_balance;\n    }\n  }, {\n    key: \"setHasNoAccount\",\n    value: function setHasNoAccount(has_no_account) {\n      this.has_no_account = has_no_account;\n    }\n  }, {\n    key: \"setTransferFee\",\n    value: function setTransferFee() {\n      var transfer_fee = (0,shared_.getPropertyValue)((0,shared_.getCurrencies)(), [this.selected_from.currency, 'transfer_between_accounts', 'fees', this.selected_to.currency]);\n      this.transfer_fee = Number(transfer_fee || 0);\n    }\n  }, {\n    key: \"setMinimumFee\",\n    value: function setMinimumFee() {\n      var decimals = (0,shared_.getDecimalPlaces)(this.selected_from.currency); // we need .toFixed() so that it doesn't display in scientific notation, e.g. 1e-8 for currencies with 8 decimal places\n\n      this.minimum_fee = (1 / Math.pow(10, decimals)).toFixed(decimals);\n    }\n  }, {\n    key: \"setTransferLimit\",\n    value: function setTransferLimit() {\n      var is_mt_transfer = this.selected_from.is_mt || this.selected_to.is_mt;\n      var is_dxtrade_transfer = this.selected_from.is_dxtrade || this.selected_to.is_dxtrade;\n      var is_derivez_transfer = this.selected_from.is_derivez || this.selected_to.is_derivez;\n      var limits_key;\n\n      if (is_mt_transfer) {\n        limits_key = 'limits_mt5';\n      } else if (is_dxtrade_transfer) {\n        limits_key = 'limits_dxtrade';\n      } else if (is_derivez_transfer) {\n        limits_key = 'limits_derivez';\n      } else {\n        limits_key = 'limits';\n      }\n\n      var transfer_limit = (0,shared_.getPropertyValue)((0,shared_.getCurrencies)(), [this.selected_from.currency, 'transfer_between_accounts', limits_key]);\n      var balance = this.selected_from.balance;\n      var decimal_places = (0,shared_.getDecimalPlaces)(this.selected_from.currency); // we need .toFixed() so that it doesn't display in scientific notation, e.g. 1e-8 for currencies with 8 decimal places\n\n      this.transfer_limit = {\n        max: !(transfer_limit !== null && transfer_limit !== void 0 && transfer_limit.max) || +balance >= ((transfer_limit === null || transfer_limit === void 0 ? void 0 : transfer_limit.min) || 0) && +balance <= (transfer_limit === null || transfer_limit === void 0 ? void 0 : transfer_limit.max) ? balance : transfer_limit === null || transfer_limit === void 0 ? void 0 : transfer_limit.max.toFixed(decimal_places),\n        min: transfer_limit !== null && transfer_limit !== void 0 && transfer_limit.min ? (+(transfer_limit === null || transfer_limit === void 0 ? void 0 : transfer_limit.min)).toFixed(decimal_places) : null\n      };\n    }\n  }, {\n    key: \"sortAccountsTransfer\",\n    value: function () {\n      var _sortAccountsTransfer = account_transfer_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(response_accounts, is_from_derivgo) {\n        var _yield$this$WS$storag,\n            _yield$this$WS$tradin,\n            _yield$this$WS$tradin2,\n            _this2 = this;\n\n        var transfer_between_accounts, mt5_login_list, dxtrade_accounts_list, derivez_accounts_list, accounts, arr_accounts;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.t0 = response_accounts;\n\n                if (_context4.t0) {\n                  _context4.next = 5;\n                  break;\n                }\n\n                _context4.next = 4;\n                return this.WS.authorized.transferBetweenAccounts();\n\n              case 4:\n                _context4.t0 = _context4.sent;\n\n              case 5:\n                transfer_between_accounts = _context4.t0;\n\n                if (this.accounts_list.length) {\n                  _context4.next = 9;\n                  break;\n                }\n\n                if (!transfer_between_accounts.error) {\n                  _context4.next = 9;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\");\n\n              case 9:\n                if (!is_from_derivgo && transfer_between_accounts && Array.isArray(transfer_between_accounts.accounts)) {\n                  transfer_between_accounts.accounts = transfer_between_accounts.accounts.filter(function (account) {\n                    return account.account_type !== shared_.CFD_PLATFORMS.DERIVEZ;\n                  });\n                }\n\n                _context4.next = 12;\n                return this.WS.storage.mt5LoginList();\n\n              case 12:\n                _context4.t2 = _yield$this$WS$storag = _context4.sent;\n                _context4.t1 = _context4.t2 === null;\n\n                if (_context4.t1) {\n                  _context4.next = 16;\n                  break;\n                }\n\n                _context4.t1 = _yield$this$WS$storag === void 0;\n\n              case 16:\n                if (!_context4.t1) {\n                  _context4.next = 20;\n                  break;\n                }\n\n                _context4.t3 = void 0;\n                _context4.next = 21;\n                break;\n\n              case 20:\n                _context4.t3 = _yield$this$WS$storag.mt5_login_list;\n\n              case 21:\n                mt5_login_list = _context4.t3;\n                _context4.next = 24;\n                return this.WS.tradingPlatformAccountsList(shared_.CFD_PLATFORMS.DXTRADE);\n\n              case 24:\n                _context4.t5 = _yield$this$WS$tradin = _context4.sent;\n                _context4.t4 = _context4.t5 === null;\n\n                if (_context4.t4) {\n                  _context4.next = 28;\n                  break;\n                }\n\n                _context4.t4 = _yield$this$WS$tradin === void 0;\n\n              case 28:\n                if (!_context4.t4) {\n                  _context4.next = 32;\n                  break;\n                }\n\n                _context4.t6 = void 0;\n                _context4.next = 33;\n                break;\n\n              case 32:\n                _context4.t6 = _yield$this$WS$tradin.trading_platform_accounts;\n\n              case 33:\n                dxtrade_accounts_list = _context4.t6;\n                _context4.next = 36;\n                return this.WS.tradingPlatformAccountsList(shared_.CFD_PLATFORMS.DERIVEZ);\n\n              case 36:\n                _context4.t8 = _yield$this$WS$tradin2 = _context4.sent;\n                _context4.t7 = _context4.t8 === null;\n\n                if (_context4.t7) {\n                  _context4.next = 40;\n                  break;\n                }\n\n                _context4.t7 = _yield$this$WS$tradin2 === void 0;\n\n              case 40:\n                if (!_context4.t7) {\n                  _context4.next = 44;\n                  break;\n                }\n\n                _context4.t9 = void 0;\n                _context4.next = 45;\n                break;\n\n              case 44:\n                _context4.t9 = _yield$this$WS$tradin2.trading_platform_accounts;\n\n              case 45:\n                derivez_accounts_list = _context4.t9;\n                // TODO: remove this temporary mapping when API adds market_type and sub_account_type to transfer_between_accounts\n                accounts = transfer_between_accounts.accounts.map(function (account) {\n                  if (account.account_type === shared_.CFD_PLATFORMS.MT5 && Array.isArray(mt5_login_list) && mt5_login_list.length) {\n                    // account_type in transfer_between_accounts (mt5|binary)\n                    // gets overridden by account_type in mt5_login_list (demo|real)\n                    // since in cashier all these are real accounts, the mt5 account type is what we want to keep\n                    var found_account = mt5_login_list.find(function (acc) {\n                      return acc.login === account.loginid;\n                    });\n                    if (found_account === undefined) return account;\n                    return account_transfer_store_objectSpread(account_transfer_store_objectSpread(account_transfer_store_objectSpread({}, account), found_account), {}, {\n                      account_type: shared_.CFD_PLATFORMS.MT5\n                    });\n                  }\n\n                  if (account.account_type === shared_.CFD_PLATFORMS.DXTRADE && Array.isArray(dxtrade_accounts_list) && dxtrade_accounts_list.length) {\n                    // account_type in transfer_between_accounts (mt5|binary)\n                    // gets overridden by account_type in dxtrade_accounts_list (demo|real)\n                    // since in cashier all these are real accounts, the mt5 account type is what we want to keep\n                    var _found_account = dxtrade_accounts_list.find(function (acc) {\n                      return acc.account_id === account.loginid;\n                    });\n\n                    if (_found_account === undefined) return account;\n                    return account_transfer_store_objectSpread(account_transfer_store_objectSpread(account_transfer_store_objectSpread({}, account), _found_account), {}, {\n                      account_type: shared_.CFD_PLATFORMS.DXTRADE\n                    });\n                  }\n\n                  if (account.account_type === shared_.CFD_PLATFORMS.DERIVEZ && Array.isArray(derivez_accounts_list) && derivez_accounts_list.length) {\n                    var _found_account2 = derivez_accounts_list.find(function (acc) {\n                      return acc.login === account.loginid;\n                    });\n\n                    if (_found_account2 === undefined) return account;\n                    return account_transfer_store_objectSpread(account_transfer_store_objectSpread(account_transfer_store_objectSpread({}, account), _found_account2), {}, {\n                      account_type: shared_.CFD_PLATFORMS.DERIVEZ\n                    });\n                  }\n\n                  return account;\n                }); // sort accounts as follows:\n                // for MT5, synthetic, financial, financial stp\n                // for non-MT5, fiat, crypto (alphabetically by currency)\n                // should have more than one account\n\n                if (transfer_between_accounts.accounts.length > 1) {\n                  accounts.sort(function (a, b) {\n                    var a_is_mt = a.account_type === shared_.CFD_PLATFORMS.MT5;\n                    var b_is_mt = b.account_type === shared_.CFD_PLATFORMS.MT5;\n                    var a_is_derivez = a.account_type === shared_.CFD_PLATFORMS.DERIVEZ;\n                    var b_is_derivez = b.account_type === shared_.CFD_PLATFORMS.DERIVEZ;\n                    var a_is_crypto = !a_is_mt && (0,shared_.isCryptocurrency)(a.currency);\n                    var b_is_crypto = !b_is_mt && (0,shared_.isCryptocurrency)(b.currency);\n                    var a_is_fiat = !a_is_mt && !a_is_crypto;\n                    var b_is_fiat = !b_is_mt && !b_is_crypto;\n\n                    if (a_is_mt && b_is_mt) {\n                      if (a.market_type === 'gaming' || a.market_type === 'synthetic') {\n                        return -1;\n                      }\n\n                      if (a.sub_account_type === 'financial') {\n                        return b.market_type === 'gaming' || b.market_type === 'synthetic' ? 1 : -1;\n                      }\n\n                      return 1;\n                    } else if (a_is_crypto && b_is_derivez || a_is_fiat && b_is_derivez || a_is_derivez && b_is_mt) {\n                      return -1;\n                    } else if (a_is_crypto && b_is_crypto || a_is_fiat && b_is_fiat) {\n                      return a.currency < b.currency ? -1 : 1;\n                    } else if (a_is_crypto && b_is_mt || a_is_fiat && b_is_crypto || a_is_fiat && b_is_mt) {\n                      return -1;\n                    }\n\n                    return a_is_mt ? -1 : 1;\n                  });\n                }\n\n                arr_accounts = [];\n                this.setSelectedTo({}); // set selected to empty each time so we can redetermine its value on reload\n\n                accounts.forEach(function (account) {\n                  var _cfd_platforms$accoun, _cfd_platforms$accoun2, _cfd_platforms$accoun3, _account$landing_comp, _account$landing_comp2, _account$landing_comp3;\n\n                  var cfd_platforms = {\n                    mt5: {\n                      name: 'Deriv MT5',\n                      icon: 'IcMt5'\n                    },\n                    dxtrade: {\n                      name: 'Deriv X',\n                      icon: 'IcDxtrade'\n                    },\n                    derivez: {\n                      name: 'Deriv EZ',\n                      icon: 'IcDerivez'\n                    }\n                  };\n                  var is_cfd = Object.keys(cfd_platforms).includes(account.account_type);\n                  var cfd_text_display = (_cfd_platforms$accoun = cfd_platforms[account.account_type]) === null || _cfd_platforms$accoun === void 0 ? void 0 : _cfd_platforms$accoun.name;\n                  var cfd_icon_display = account.account_type === shared_.CFD_PLATFORMS.DERIVEZ ? \"\".concat((_cfd_platforms$accoun2 = cfd_platforms[account.account_type]) === null || _cfd_platforms$accoun2 === void 0 ? void 0 : _cfd_platforms$accoun2.icon) : \"\".concat((_cfd_platforms$accoun3 = cfd_platforms[account.account_type]) === null || _cfd_platforms$accoun3 === void 0 ? void 0 : _cfd_platforms$accoun3.icon, \"-\").concat((0,shared_.getCFDAccount)({\n                    market_type: account.market_type,\n                    sub_account_type: account.sub_account_type,\n                    platform: account.account_type,\n                    is_eu: _this2.root_store.client.is_eu\n                  }));\n                  var non_eu_accounts = account.landing_company_short && account.landing_company_short !== 'svg' && account.landing_company_short !== 'bvi' ? ((_account$landing_comp = account.landing_company_short) === null || _account$landing_comp === void 0 ? void 0 : _account$landing_comp.charAt(0).toUpperCase()) + ((_account$landing_comp2 = account.landing_company_short) === null || _account$landing_comp2 === void 0 ? void 0 : _account$landing_comp2.slice(1)) : (_account$landing_comp3 = account.landing_company_short) === null || _account$landing_comp3 === void 0 ? void 0 : _account$landing_comp3.toUpperCase();\n                  var account_text_display = is_cfd ? account.account_type === 'mt5' ? \"\".concat((0,shared_.getCFDAccountDisplay)({\n                    market_type: account.market_type,\n                    sub_account_type: account.sub_account_type,\n                    platform: account.account_type,\n                    is_eu: _this2.root_store.client.is_eu\n                  }), \" \").concat(_this2.root_store.client.is_eu ? '' : non_eu_accounts) : \"\".concat(cfd_text_display, \" \").concat((0,shared_.getCFDAccountDisplay)({\n                    market_type: account.market_type,\n                    sub_account_type: account.sub_account_type,\n                    platform: account.account_type,\n                    is_eu: _this2.root_store.client.is_eu,\n                    is_transfer_form: true\n                  })) : (0,shared_.getCurrencyDisplayCode)(account.currency !== 'eUSDT' ? account.currency.toUpperCase() : account.currency);\n\n                  var obj_values = account_transfer_store_objectSpread({\n                    text: account_text_display,\n                    value: account.loginid,\n                    balance: account.balance,\n                    currency: account.currency,\n                    is_crypto: (0,shared_.isCryptocurrency)(account.currency),\n                    is_mt: account.account_type === shared_.CFD_PLATFORMS.MT5,\n                    is_dxtrade: account.account_type === shared_.CFD_PLATFORMS.DXTRADE,\n                    is_derivez: account.account_type === shared_.CFD_PLATFORMS.DERIVEZ\n                  }, is_cfd && {\n                    platform_icon: cfd_icon_display,\n                    status: account === null || account === void 0 ? void 0 : account.status,\n                    market_type: (0,shared_.getCFDAccount)({\n                      market_type: account.market_type,\n                      sub_account_type: account.sub_account_type,\n                      platform: account.account_type,\n                      is_eu: _this2.root_store.client.is_eu\n                    })\n                  }); // set current logged in client as the default transfer from account\n\n\n                  if (account.loginid === _this2.root_store.client.loginid) {\n                    // check if selected from is not allowed account\n                    if (hasTransferNotAllowedLoginid(obj_values.value)) {\n                      obj_values.error = getSelectedError(obj_values.value, true);\n                    }\n\n                    _this2.setSelectedFrom(obj_values);\n                  } else if ((0,shared_.isEmptyObject)(_this2.selected_to)) {\n                    if (hasTransferNotAllowedLoginid(obj_values.value)) {\n                      // check if selected to is not allowed account\n                      obj_values.error = getSelectedError(obj_values.value);\n                    } // set the first available account as the default transfer to account\n\n\n                    _this2.setSelectedTo(obj_values);\n                  }\n\n                  arr_accounts.push(obj_values);\n                });\n                this.setAccounts(arr_accounts);\n\n              case 52:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function sortAccountsTransfer(_x2, _x3) {\n        return _sortAccountsTransfer.apply(this, arguments);\n      }\n\n      return sortAccountsTransfer;\n    }()\n  }, {\n    key: \"setSelectedFrom\",\n    value: function setSelectedFrom(obj_values) {\n      this.selected_from = obj_values;\n    }\n  }, {\n    key: \"setSelectedTo\",\n    value: function setSelectedTo(obj_values) {\n      this.selected_to = obj_values;\n    }\n  }, {\n    key: \"setAccounts\",\n    value: function setAccounts(arr_accounts) {\n      this.accounts_list = arr_accounts;\n    }\n  }, {\n    key: \"setIsTransferConfirm\",\n    value: function setIsTransferConfirm(is_transfer_confirm) {\n      this.is_transfer_confirm = is_transfer_confirm;\n    }\n  }, {\n    key: \"setAccountTransferAmount\",\n    value: function setAccountTransferAmount(amount) {\n      this.account_transfer_amount = amount;\n    }\n  }, {\n    key: \"setIsTransferSuccessful\",\n    value: function setIsTransferSuccessful(is_transfer_successful) {\n      this.is_transfer_successful = is_transfer_successful;\n    }\n  }, {\n    key: \"setIsMT5TransferInProgress\",\n    value: function setIsMT5TransferInProgress(is_mt5_transfer_in_progress) {\n      this.is_mt5_transfer_in_progress = is_mt5_transfer_in_progress;\n    }\n  }, {\n    key: \"setReceiptTransfer\",\n    value: function setReceiptTransfer(_ref9) {\n      var amount = _ref9.amount;\n      this.receipt = {\n        amount_transferred: amount\n      };\n    }\n  }, {\n    key: \"onChangeTransferFrom\",\n    value: function onChangeTransferFrom(_ref10) {\n      var target = _ref10.target;\n      this.error.setErrorMessage('');\n      this.selected_from.error = '';\n      var accounts = this.accounts_list;\n      var selected_from = accounts.find(function (account) {\n        return account.value === target.value;\n      }); // if new value of selected_from is the same as the current selected_to\n      // switch the value of selected_from and selected_to\n\n      if (selected_from.value === this.selected_to.value) {\n        this.onChangeTransferTo({\n          target: {\n            value: this.selected_from.value\n          }\n        });\n      } else if (selected_from.is_mt && this.selected_to.is_mt || selected_from.is_dxtrade && this.selected_to.is_dxtrade || selected_from.is_dxtrade && (this.selected_to.is_mt || this.selected_to.is_derivez) || selected_from.is_mt && (this.selected_to.is_dxtrade || this.selected_to.is_derivez) || selected_from.is_derivez && this.selected_to.is_derivez || selected_from.is_derivez && (this.selected_to.is_dxtrade || this.selected_to.is_mt)) {\n        // not allowed to transfer from MT to MT\n        // not allowed to transfer from Dxtrade to Dxtrade\n        // not allowed to transfer between MT and Dxtrade\n        var first_non_cfd = this.accounts_list.find(function (account) {\n          return !account.is_mt && !account.is_dxtrade && !account.is_derivez;\n        });\n        this.onChangeTransferTo({\n          target: {\n            value: first_non_cfd.value\n          }\n        });\n      }\n\n      if (hasTransferNotAllowedLoginid(selected_from.value)) {\n        selected_from.error = getSelectedError(selected_from.value, true);\n      }\n\n      this.selected_from = selected_from;\n      this.setTransferFee();\n      this.setMinimumFee();\n      this.setTransferLimit();\n    }\n  }, {\n    key: \"onChangeTransferTo\",\n    value: function onChangeTransferTo(_ref11) {\n      var target = _ref11.target;\n      this.error.setErrorMessage('');\n      this.selected_to.error = '';\n      var accounts = this.accounts_list;\n      this.selected_to = accounts.find(function (account) {\n        return account.value === target.value;\n      }) || {};\n\n      if (hasTransferNotAllowedLoginid(this.selected_to.value)) {\n        this.selected_to.error = getSelectedError(this.selected_to.value);\n      }\n\n      this.setTransferFee();\n      this.setMinimumFee();\n      this.setTransferLimit();\n    }\n  }, {\n    key: \"setTransferPercentageSelectorResult\",\n    value: function setTransferPercentageSelectorResult(amount) {\n      var _this$root_store$modu = this.root_store.modules.cashier,\n          crypto_fiat_converter = _this$root_store$modu.crypto_fiat_converter,\n          general_store = _this$root_store$modu.general_store;\n      var selected_from_currency = this.selected_from.currency;\n      var selected_to_currency = this.selected_to.currency;\n\n      if (amount > 0 || +this.selected_from.balance === 0) {\n        crypto_fiat_converter.setConverterFromAmount(amount);\n        this.validateTransferFromAmount();\n        crypto_fiat_converter.onChangeConverterFromAmount({\n          target: {\n            value: amount\n          }\n        }, selected_from_currency, selected_to_currency);\n      } else {\n        crypto_fiat_converter.resetConverter();\n      }\n\n      crypto_fiat_converter.setIsTimerVisible(false);\n      general_store.percentageSelectorSelectionStatus(false);\n    }\n  }, {\n    key: \"validateTransferFromAmount\",\n    value: function validateTransferFromAmount() {\n      var _this$root_store$modu2 = this.root_store.modules.cashier.crypto_fiat_converter,\n          converter_from_amount = _this$root_store$modu2.converter_from_amount,\n          setConverterFromError = _this$root_store$modu2.setConverterFromError;\n\n      if (!converter_from_amount) {\n        setConverterFromError((0,translations_.localize)('This field is required.'));\n      } else {\n        var _validNumber = (0,shared_.validNumber)(converter_from_amount, {\n          type: 'float',\n          decimals: (0,shared_.getDecimalPlaces)(this.selected_from.currency),\n          min: this.transfer_limit.min,\n          max: this.transfer_limit.max\n        }),\n            is_ok = _validNumber.is_ok,\n            message = _validNumber.message;\n\n        if (!is_ok) {\n          setConverterFromError(message);\n        } else if (+this.selected_from.balance < +converter_from_amount) {\n          setConverterFromError((0,translations_.localize)('Insufficient funds'));\n        } else {\n          setConverterFromError('');\n        }\n      }\n    }\n  }, {\n    key: \"validateTransferToAmount\",\n    value: function validateTransferToAmount() {\n      var _this$root_store$modu3 = this.root_store.modules.cashier.crypto_fiat_converter,\n          converter_to_amount = _this$root_store$modu3.converter_to_amount,\n          setConverterToError = _this$root_store$modu3.setConverterToError;\n\n      if (converter_to_amount) {\n        var currency = this.selected_to.currency;\n\n        var _validNumber2 = (0,shared_.validNumber)(converter_to_amount, {\n          type: 'float',\n          decimals: (0,shared_.getDecimalPlaces)(currency)\n        }),\n            is_ok = _validNumber2.is_ok,\n            message = _validNumber2.message;\n\n        if (!is_ok) {\n          setConverterToError(message);\n        } else {\n          setConverterToError('');\n        }\n      }\n    }\n  }]);\n\n  return AccountTransferStore;\n}();\n\n\n;// CONCATENATED MODULE: ./stores/crypto-fiat-converter-store.js\nfunction crypto_fiat_converter_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction crypto_fiat_converter_store_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { crypto_fiat_converter_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { crypto_fiat_converter_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction crypto_fiat_converter_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction crypto_fiat_converter_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction crypto_fiat_converter_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) crypto_fiat_converter_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) crypto_fiat_converter_store_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n\n\nvar CryptoFiatConverterStore = /*#__PURE__*/function () {\n  function CryptoFiatConverterStore(_ref) {\n    var WS = _ref.WS,\n        root_store = _ref.root_store;\n\n    crypto_fiat_converter_store_classCallCheck(this, CryptoFiatConverterStore);\n\n    this.converter_from_amount = '';\n    this.converter_to_amount = '';\n    this.converter_from_error = '';\n    this.converter_to_error = '';\n    this.is_timer_visible = false;\n    (0,external_mobx_.makeObservable)(this, {\n      converter_from_amount: external_mobx_.observable,\n      converter_to_amount: external_mobx_.observable,\n      converter_from_error: external_mobx_.observable,\n      converter_to_error: external_mobx_.observable,\n      is_timer_visible: external_mobx_.observable,\n      setConverterFromAmount: external_mobx_.action.bound,\n      setConverterToAmount: external_mobx_.action.bound,\n      setConverterFromError: external_mobx_.action.bound,\n      setConverterToError: external_mobx_.action.bound,\n      setIsTimerVisible: external_mobx_.action.bound,\n      resetTimer: external_mobx_.action.bound,\n      getExchangeRate: external_mobx_.action.bound,\n      validateFromAmount: external_mobx_.action.bound,\n      validateToAmount: external_mobx_.action.bound,\n      onChangeConverterFromAmount: external_mobx_.action.bound,\n      onChangeConverterToAmount: external_mobx_.action.bound,\n      resetConverter: external_mobx_.action.bound\n    });\n    this.root_store = root_store;\n    this.WS = WS;\n  }\n\n  crypto_fiat_converter_store_createClass(CryptoFiatConverterStore, [{\n    key: \"setConverterFromAmount\",\n    value: function setConverterFromAmount(amount) {\n      this.converter_from_amount = amount;\n    }\n  }, {\n    key: \"setConverterToAmount\",\n    value: function setConverterToAmount(amount) {\n      this.converter_to_amount = amount;\n    }\n  }, {\n    key: \"setConverterFromError\",\n    value: function setConverterFromError(error) {\n      this.converter_from_error = error;\n    }\n  }, {\n    key: \"setConverterToError\",\n    value: function setConverterToError(error) {\n      this.converter_to_error = error;\n    }\n  }, {\n    key: \"setIsTimerVisible\",\n    value: function setIsTimerVisible(is_timer_visible) {\n      this.is_timer_visible = is_timer_visible;\n    }\n  }, {\n    key: \"resetTimer\",\n    value: function resetTimer() {\n      this.setIsTimerVisible(false);\n    }\n  }, {\n    key: \"getExchangeRate\",\n    value: function () {\n      var _getExchangeRate = crypto_fiat_converter_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(from_currency, to_currency) {\n        var _yield$this$WS$send, exchange_rates;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.WS.send({\n                  exchange_rates: 1,\n                  base_currency: from_currency\n                });\n\n              case 2:\n                _yield$this$WS$send = _context.sent;\n                exchange_rates = _yield$this$WS$send.exchange_rates;\n                return _context.abrupt(\"return\", exchange_rates.rates[to_currency]);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getExchangeRate(_x, _x2) {\n        return _getExchangeRate.apply(this, arguments);\n      }\n\n      return getExchangeRate;\n    }()\n  }, {\n    key: \"validateFromAmount\",\n    value: function validateFromAmount() {\n      var _this$root_store$modu = this.root_store.modules.cashier,\n          account_transfer = _this$root_store$modu.account_transfer,\n          general_store = _this$root_store$modu.general_store,\n          withdraw = _this$root_store$modu.withdraw;\n\n      if (general_store.active_container === account_transfer.container) {\n        account_transfer.validateTransferFromAmount();\n      } else {\n        withdraw.validateWithdrawFromAmount();\n      }\n    }\n  }, {\n    key: \"validateToAmount\",\n    value: function validateToAmount() {\n      var _this$root_store$modu2 = this.root_store.modules.cashier,\n          account_transfer = _this$root_store$modu2.account_transfer,\n          general_store = _this$root_store$modu2.general_store,\n          withdraw = _this$root_store$modu2.withdraw;\n\n      if (general_store.active_container === account_transfer.container) {\n        account_transfer.validateTransferToAmount();\n      } else {\n        withdraw.validateWithdrawToAmount();\n      }\n    }\n  }, {\n    key: \"onChangeConverterFromAmount\",\n    value: function () {\n      var _onChangeConverterFromAmount = crypto_fiat_converter_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(_ref2, from_currency, to_currency) {\n        var target, _this$root_store$modu3, account_transfer, general_store, rate, decimals, amount;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                target = _ref2.target;\n                _this$root_store$modu3 = this.root_store.modules.cashier, account_transfer = _this$root_store$modu3.account_transfer, general_store = _this$root_store$modu3.general_store;\n                this.resetTimer();\n\n                if (!target.value) {\n                  _context2.next = 27;\n                  break;\n                }\n\n                this.setConverterFromAmount(target.value);\n                this.validateFromAmount();\n                general_store.percentageSelectorSelectionStatus(true);\n                general_store.calculatePercentage();\n\n                if (!this.converter_from_error) {\n                  _context2.next = 15;\n                  break;\n                }\n\n                this.setConverterToAmount('');\n                this.setConverterToError('');\n                this.setIsTimerVisible(false);\n                account_transfer.setAccountTransferAmount('');\n                _context2.next = 25;\n                break;\n\n              case 15:\n                _context2.next = 17;\n                return this.getExchangeRate(from_currency, to_currency);\n\n              case 17:\n                rate = _context2.sent;\n                decimals = (0,shared_.getDecimalPlaces)(to_currency);\n                amount = (rate * target.value).toFixed(decimals);\n\n                if (+amount || this.converter_from_amount) {\n                  this.setConverterToAmount(amount);\n                } else {\n                  this.setConverterToAmount('');\n                }\n\n                this.validateToAmount();\n                this.setConverterToError('');\n                this.setIsTimerVisible(true);\n                account_transfer.setAccountTransferAmount(target.value);\n\n              case 25:\n                _context2.next = 28;\n                break;\n\n              case 27:\n                this.resetConverter();\n\n              case 28:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function onChangeConverterFromAmount(_x3, _x4, _x5) {\n        return _onChangeConverterFromAmount.apply(this, arguments);\n      }\n\n      return onChangeConverterFromAmount;\n    }()\n  }, {\n    key: \"onChangeConverterToAmount\",\n    value: function () {\n      var _onChangeConverterToAmount = crypto_fiat_converter_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(_ref3, from_currency, to_currency) {\n        var target, _this$root_store$modu4, account_transfer, general_store, rate, decimals, amount;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                target = _ref3.target;\n                _this$root_store$modu4 = this.root_store.modules.cashier, account_transfer = _this$root_store$modu4.account_transfer, general_store = _this$root_store$modu4.general_store;\n                this.resetTimer();\n\n                if (!target.value) {\n                  _context3.next = 25;\n                  break;\n                }\n\n                this.setConverterToAmount(target.value);\n                this.validateToAmount();\n\n                if (!this.converter_to_error) {\n                  _context3.next = 13;\n                  break;\n                }\n\n                this.setConverterFromAmount('');\n                this.setConverterFromError('');\n                this.setIsTimerVisible(false);\n                account_transfer.setAccountTransferAmount('');\n                _context3.next = 23;\n                break;\n\n              case 13:\n                _context3.next = 15;\n                return this.getExchangeRate(from_currency, to_currency);\n\n              case 15:\n                rate = _context3.sent;\n                decimals = (0,shared_.getDecimalPlaces)(to_currency);\n                amount = (rate * target.value).toFixed(decimals);\n\n                if (+amount || this.converter_to_amount) {\n                  this.setConverterFromAmount(amount);\n                } else {\n                  this.setConverterFromAmount('');\n                }\n\n                general_store.percentageSelectorSelectionStatus(true);\n                general_store.calculatePercentage();\n                this.validateFromAmount();\n\n                if (this.converter_from_error) {\n                  this.setIsTimerVisible(false);\n                  account_transfer.setAccountTransferAmount('');\n                } else {\n                  this.setConverterFromError('');\n                  this.setIsTimerVisible(true);\n                  account_transfer.setAccountTransferAmount(amount);\n                }\n\n              case 23:\n                _context3.next = 26;\n                break;\n\n              case 25:\n                this.resetConverter();\n\n              case 26:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function onChangeConverterToAmount(_x6, _x7, _x8) {\n        return _onChangeConverterToAmount.apply(this, arguments);\n      }\n\n      return onChangeConverterToAmount;\n    }()\n  }, {\n    key: \"resetConverter\",\n    value: function resetConverter() {\n      this.setConverterFromAmount('');\n      this.setConverterToAmount('');\n      this.setConverterFromError('');\n      this.setConverterToError('');\n      this.setIsTimerVisible(false);\n      this.root_store.modules.cashier.general_store.percentageSelectorSelectionStatus(true);\n    }\n  }]);\n\n  return CryptoFiatConverterStore;\n}();\n\n\n;// CONCATENATED MODULE: ./stores/deposit-store.ts\nfunction deposit_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction deposit_store_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { deposit_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { deposit_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction deposit_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction deposit_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction deposit_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) deposit_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) deposit_store_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n\n\n\nvar DepositStore = /*#__PURE__*/function () {\n  function DepositStore(WS, root_store) {\n    deposit_store_classCallCheck(this, DepositStore);\n\n    this.WS = WS;\n    this.root_store = root_store;\n    this.container = constants.containers.deposit;\n    this.error = new ErrorStore();\n    (0,external_mobx_.makeObservable)(this, {\n      container: external_mobx_.observable,\n      error: external_mobx_.observable,\n      onMountDeposit: external_mobx_.action.bound\n    });\n    this.root_store = root_store;\n    this.WS = WS;\n  }\n\n  deposit_store_createClass(DepositStore, [{\n    key: \"onMountDeposit\",\n    value: function () {\n      var _onMountDeposit = deposit_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _account_status$statu;\n\n        var _this$root_store, client, modules, _modules$cashier$gene, active_container, is_crypto, onMountCommon, setLoading, setOnRemount, _modules$cashier$ifra, checkIframeLoaded, clearTimeoutCashierUrl, is_session_timeout, setContainerHeight, setIframeUrl, setSessionTimeout, setTimeoutCashierUrl, account_status, is_virtual, updateAccountStatus, current_container, response_cashier;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$root_store = this.root_store, client = _this$root_store.client, modules = _this$root_store.modules;\n                _modules$cashier$gene = modules.cashier.general_store, active_container = _modules$cashier$gene.active_container, is_crypto = _modules$cashier$gene.is_crypto, onMountCommon = _modules$cashier$gene.onMountCommon, setLoading = _modules$cashier$gene.setLoading, setOnRemount = _modules$cashier$gene.setOnRemount;\n                _modules$cashier$ifra = modules.cashier.iframe, checkIframeLoaded = _modules$cashier$ifra.checkIframeLoaded, clearTimeoutCashierUrl = _modules$cashier$ifra.clearTimeoutCashierUrl, is_session_timeout = _modules$cashier$ifra.is_session_timeout, setContainerHeight = _modules$cashier$ifra.setContainerHeight, setIframeUrl = _modules$cashier$ifra.setIframeUrl, setSessionTimeout = _modules$cashier$ifra.setSessionTimeout, setTimeoutCashierUrl = _modules$cashier$ifra.setTimeoutCashierUrl;\n                account_status = client.account_status, is_virtual = client.is_virtual, updateAccountStatus = client.updateAccountStatus;\n                current_container = active_container;\n                setOnRemount(this.onMountDeposit);\n                _context.next = 8;\n                return onMountCommon();\n\n              case 8:\n                this.error.setErrorMessage({\n                  code: '',\n                  message: ''\n                }, null, false);\n                setContainerHeight(0);\n\n                if (is_session_timeout) {\n                  _context.next = 13;\n                  break;\n                }\n\n                checkIframeLoaded();\n                return _context.abrupt(\"return\");\n\n              case 13:\n                // if session has timed out reset everything\n                setIframeUrl('');\n\n                if (!is_virtual) {\n                  _context.next = 17;\n                  break;\n                }\n\n                setLoading(false); // if virtual, clear everything and don't proceed further\n                // if no verification code, we should request again\n\n                return _context.abrupt(\"return\");\n\n              case 17:\n                if (is_crypto) {\n                  _context.next = 35;\n                  break;\n                }\n\n                _context.next = 20;\n                return this.WS.authorized.cashier(active_container, {\n                  verification_code: 'undefined'\n                });\n\n              case 20:\n                response_cashier = _context.sent;\n\n                if (!(current_container !== active_container)) {\n                  _context.next = 24;\n                  break;\n                }\n\n                setLoading(false);\n                return _context.abrupt(\"return\");\n\n              case 24:\n                if (!response_cashier.error) {\n                  _context.next = 30;\n                  break;\n                }\n\n                this.error.handleCashierError(response_cashier.error);\n                setSessionTimeout(true);\n                clearTimeoutCashierUrl();\n                _context.next = 35;\n                break;\n\n              case 30:\n                _context.next = 32;\n                return checkIframeLoaded();\n\n              case 32:\n                setIframeUrl(response_cashier.cashier);\n                setSessionTimeout(false);\n                setTimeoutCashierUrl();\n\n              case 35:\n                if (account_status !== null && account_status !== void 0 && (_account_status$statu = account_status.status) !== null && _account_status$statu !== void 0 && _account_status$statu.includes('deposit_attempt')) {\n                  _context.next = 38;\n                  break;\n                }\n\n                _context.next = 38;\n                return updateAccountStatus();\n\n              case 38:\n                setLoading(false);\n\n              case 39:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function onMountDeposit() {\n        return _onMountDeposit.apply(this, arguments);\n      }\n\n      return onMountDeposit;\n    }()\n  }]);\n\n  return DepositStore;\n}();\n\n\n;// CONCATENATED MODULE: ./stores/error-dialog-store.js\nfunction error_dialog_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction error_dialog_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction error_dialog_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) error_dialog_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) error_dialog_store_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n\nvar ErrorDialogStore = /*#__PURE__*/function () {\n  function ErrorDialogStore() {\n    error_dialog_store_classCallCheck(this, ErrorDialogStore);\n\n    this.confirm_button_text = '';\n    this.error_message = '';\n    this.has_no_close_icon = false;\n    this.should_show = false;\n    this.should_not_show_title = false;\n    (0,external_mobx_.makeObservable)(this, {\n      confirm_button_text: external_mobx_.observable,\n      error_message: external_mobx_.observable,\n      has_no_close_icon: external_mobx_.observable,\n      should_show: external_mobx_.observable,\n      should_not_show_title: external_mobx_.observable,\n      setShouldShow: external_mobx_.action.bound,\n      setErrorMessage: external_mobx_.action.bound,\n      setConfirmButtonText: external_mobx_.action.bound,\n      setShouldNotShowTitle: external_mobx_.action.bound,\n      setHasNoCloseIcon: external_mobx_.action.bound,\n      openReadMoreDialog: external_mobx_.action.bound,\n      reset: external_mobx_.action.bound\n    });\n  }\n\n  error_dialog_store_createClass(ErrorDialogStore, [{\n    key: \"setShouldShow\",\n    value: function setShouldShow(value) {\n      this.should_show = value;\n    }\n  }, {\n    key: \"setErrorMessage\",\n    value: function setErrorMessage(message) {\n      this.error_message = message;\n      this.setShouldShow(true);\n    }\n  }, {\n    key: \"setConfirmButtonText\",\n    value: function setConfirmButtonText(text) {\n      this.confirm_button_text = text;\n    }\n  }, {\n    key: \"setShouldNotShowTitle\",\n    value: function setShouldNotShowTitle(value) {\n      this.should_not_show_title = value;\n    }\n  }, {\n    key: \"setHasNoCloseIcon\",\n    value: function setHasNoCloseIcon(value) {\n      this.has_no_close_icon = value;\n    }\n  }, {\n    key: \"openReadMoreDialog\",\n    value: function openReadMoreDialog(error_content, confirm_button_text) {\n      this.setErrorMessage(error_content);\n      this.setConfirmButtonText(confirm_button_text);\n      this.setHasNoCloseIcon(true);\n      this.setShouldNotShowTitle(true);\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.setConfirmButtonText('');\n      this.setShouldNotShowTitle(false);\n      this.setHasNoCloseIcon(false);\n    }\n  }]);\n\n  return ErrorDialogStore;\n}();\n\n\n// EXTERNAL MODULE: external \"@deriv/components\"\nvar components_ = __webpack_require__(\"@deriv/components\");\n;// CONCATENATED MODULE: ./components/cashier-notifications/cashier-notifications.tsx\n\n\n\nvar CashierNotifications = function CashierNotifications(_ref) {\n  var p2p_notification_count = _ref.p2p_notification_count;\n  return /*#__PURE__*/external_react_default().createElement((external_react_default()).Fragment, null, /*#__PURE__*/external_react_default().createElement(components_.Icon, {\n    icon: \"IcCashier\",\n    className: \"header__icon\"\n  }), !!p2p_notification_count && /*#__PURE__*/external_react_default().createElement(components_.Counter, {\n    className: \"cashier__counter\",\n    count: p2p_notification_count\n  }));\n};\n\n/* harmony default export */ const cashier_notifications = (CashierNotifications);\n;// CONCATENATED MODULE: ./components/cashier-notifications/index.ts\n\n/* harmony default export */ const components_cashier_notifications = (cashier_notifications);\n;// CONCATENATED MODULE: ./utils/utility.js\nfunction utility_slicedToArray(arr, i) { return utility_arrayWithHoles(arr) || utility_iterableToArrayLimit(arr, i) || utility_unsupportedIterableToArray(arr, i) || utility_nonIterableRest(); }\n\nfunction utility_nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction utility_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return utility_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return utility_arrayLikeToArray(o, minLen); }\n\nfunction utility_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction utility_iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction utility_arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction utility_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction utility_createClass(Constructor, protoProps, staticProps) { if (protoProps) utility_defineProperties(Constructor.prototype, protoProps); if (staticProps) utility_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction utility_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar template = function template(string, content) {\n  var to_replace = content;\n\n  if (content && !Array.isArray(content)) {\n    to_replace = [content];\n  }\n\n  return string.replace(/\\[_(\\d+)]/g, function (s, index) {\n    return to_replace[+index - 1];\n  });\n};\n/**\n * Creates a DOM element and adds any attributes to it.\n *\n * @param {String} tag_name: the tag to create, e.g. 'div', 'a', etc\n * @param {Object} attributes: all the attributes to assign, e.g. { id: '...', class: '...', html: '...', ... }\n * @return the created DOM element\n */\n\n\nvar createElement = function createElement(tag_name) {\n  var attributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var el = document.createElement(tag_name);\n  Object.keys(attributes).forEach(function (attr) {\n    var value = attributes[attr];\n\n    if (attr === 'text') {\n      el.textContent = value;\n    } else if (attr === 'html') {\n      el.html(value);\n    } else {\n      el.setAttribute(attr, value);\n    }\n  });\n  return el;\n};\n\nvar static_hash;\n\nvar getStaticHash = function getStaticHash() {\n  static_hash = static_hash || (document.querySelector('script[src*=\"main\"]').getAttribute('src') || '').split('.')[1];\n  return static_hash;\n};\n\nvar PromiseClass = /*#__PURE__*/(/* unused pure expression or super */ null && (utility_createClass(function PromiseClass() {\n  var _this = this;\n\n  utility_classCallCheck(this, PromiseClass);\n\n  this.promise = new Promise(function (resolve, reject) {\n    _this.reject = reject;\n    _this.resolve = resolve;\n  });\n}))); // TODO: [duplicate_code] - Move this to shared package\n// eu countries to support\n\n\nvar eu_countries = (/* unused pure expression or super */ null && (['it', 'de', 'fr', 'lu', 'gr', 'mf', 'es', 'sk', 'lt', 'nl', 'at', 'bg', 'si', 'cy', 'be', 'ro', 'hr', 'pt', 'pl', 'lv', 'ee', 'cz', 'fi', 'hu', 'dk', 'se', 'ie', 'im', 'gb', 'mt'])); // TODO: [duplicate_code] - Move this to shared package\n// check if client is from EU\n\nvar isEuCountry = function isEuCountry(country) {\n  return eu_countries.includes(country);\n}; // check if mlt or dxtrade for account text\n\n\nvar getAccountText = function getAccountText(account) {\n  var account_text = '';\n\n  if (account.is_dxtrade || account.is_mt) {\n    account_text = account.text;\n  } else {\n    account_text = getCurrencyDisplayCode(account.text);\n  }\n\n  return account_text;\n};\n\nvar getNormalizedPaymentMethod = function getNormalizedPaymentMethod(payment_method, constants) {\n  var is_for_icon = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var method = is_for_icon ? payment_method.replace(/[' ',-]/g, '').toLowerCase() : payment_method;\n  var normalized_payment_method = Object.entries(constants).reduce(function (pay_method, _ref) {\n    var _ref2 = utility_slicedToArray(_ref, 2),\n        key = _ref2[0],\n        value = _ref2[1];\n\n    return value.some(function (el) {\n      return el === method;\n    }) ? key : pay_method;\n  }, '');\n  return is_for_icon ? normalized_payment_method : normalized_payment_method || payment_method;\n};\n\n\n;// CONCATENATED MODULE: ./utils/validator/errors.js\nfunction errors_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction errors_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction errors_createClass(Constructor, protoProps, staticProps) { if (protoProps) errors_defineProperties(Constructor.prototype, protoProps); if (staticProps) errors_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nvar Errors = /*#__PURE__*/function () {\n  function Errors() {\n    errors_classCallCheck(this, Errors);\n\n    this.errors = {};\n  }\n\n  errors_createClass(Errors, [{\n    key: \"add\",\n    value: function add(attribute, message) {\n      if (!this.has(attribute)) {\n        this.errors[attribute] = [];\n      }\n\n      if (this.errors[attribute].indexOf(message) === -1) {\n        this.errors[attribute].push(message);\n      }\n    }\n  }, {\n    key: \"all\",\n    value: function all() {\n      return this.errors;\n    }\n  }, {\n    key: \"first\",\n    value: function first(attribute) {\n      if (this.has(attribute)) {\n        return this.errors[attribute][0];\n      }\n\n      return null;\n    }\n  }, {\n    key: \"get\",\n    value: function get(attribute) {\n      if (this.has(attribute)) {\n        return this.errors[attribute];\n      }\n\n      return [];\n    }\n  }, {\n    key: \"has\",\n    value: function has(attribute) {\n      return Object.prototype.hasOwnProperty.call(this.errors, attribute);\n    }\n  }]);\n\n  return Errors;\n}();\n\n/* harmony default export */ const errors = (Errors);\n;// CONCATENATED MODULE: ./utils/validator/validator.js\nfunction validator_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction validator_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction validator_createClass(Constructor, protoProps, staticProps) { if (protoProps) validator_defineProperties(Constructor.prototype, protoProps); if (staticProps) validator_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n\n\n\nvar Validator = /*#__PURE__*/function () {\n  function Validator(input, rules) {\n    var store = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n    validator_classCallCheck(this, Validator);\n\n    this.input = input;\n    this.rules = rules;\n    this.store = store;\n    this.errors = new errors();\n    this.error_count = 0;\n  }\n  /**\n   * Add failure and error message for given rule\n   *\n   * @param {string} attribute\n   * @param {object} rule\n   */\n\n\n  validator_createClass(Validator, [{\n    key: \"addFailure\",\n    value: function addFailure(attribute, rule, error_message) {\n      var message = error_message || rule.options.message || (0,shared_.getPreBuildDVRs)()[rule.name].message();\n\n      if (rule.name === 'length') {\n        message = template(message, [rule.options.min === rule.options.max ? rule.options.min : \"\".concat(rule.options.min, \"-\").concat(rule.options.max)]);\n      } else if (rule.name === 'min') {\n        message = template(message, [rule.options.min]);\n      } else if (rule.name === 'not_equal') {\n        message = template(message, [rule.options.name1, rule.options.name2]);\n      }\n\n      this.errors.add(attribute, message);\n      this.error_count++;\n    }\n    /**\n     * Runs validator\n     *\n     * @return {boolean} Whether it passes; true = passes, false = fails\n     */\n\n  }, {\n    key: \"check\",\n    value: function check() {\n      var _this = this;\n\n      Object.keys(this.input).forEach(function (attribute) {\n        if (!Object.prototype.hasOwnProperty.call(_this.rules, attribute)) {\n          return;\n        }\n\n        _this.rules[attribute].forEach(function (rule) {\n          var ruleObject = Validator.getRuleObject(rule);\n\n          if (!ruleObject.validator && typeof ruleObject.validator !== 'function') {\n            return;\n          }\n\n          if (ruleObject.options.condition && !ruleObject.options.condition(_this.store)) {\n            return;\n          }\n\n          if (_this.input[attribute] === '' && ruleObject.name !== 'req') {\n            return;\n          }\n\n          var is_valid, error_message;\n\n          if (ruleObject.name === 'number') {\n            var _ruleObject$validator = ruleObject.validator(_this.input[attribute], ruleObject.options, _this.store, _this.input),\n                is_ok = _ruleObject$validator.is_ok,\n                message = _ruleObject$validator.message;\n\n            is_valid = is_ok;\n            error_message = message;\n          } else {\n            is_valid = ruleObject.validator(_this.input[attribute], ruleObject.options, _this.store, _this.input);\n          }\n\n          if (!is_valid) {\n            _this.addFailure(attribute, ruleObject, error_message);\n          }\n        });\n      });\n      return !this.error_count;\n    }\n    /**\n     * Determine if validation passes\n     *\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"isPassed\",\n    value: function isPassed() {\n      return this.check();\n    }\n    /**\n     * Converts the rule array to an object\n     *\n     * @param {array} rule\n     * @return {object}\n     */\n\n  }], [{\n    key: \"getRuleObject\",\n    value: function getRuleObject(rule) {\n      var is_rule_string = typeof rule === 'string';\n      var rule_object = {\n        name: is_rule_string ? rule : rule[0],\n        options: is_rule_string ? {} : rule[1] || {}\n      };\n      rule_object.validator = rule_object.name === 'custom' ? rule[1].func : (0,shared_.getPreBuildDVRs)()[rule_object.name].func;\n      return rule_object;\n    }\n  }]);\n\n  return Validator;\n}();\n\n/* harmony default export */ const validator_validator = (Validator);\n;// CONCATENATED MODULE: ./utils/validator/index.js\n\n\n;// CONCATENATED MODULE: ./stores/base-store.js\nfunction base_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction base_store_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { base_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { base_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction base_store_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction base_store_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? base_store_ownKeys(Object(source), !0).forEach(function (key) { base_store_defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : base_store_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction base_store_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction base_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction base_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction base_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) base_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) base_store_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n\n\n/**\n * BaseStore class is the base class for all defined stores in the application. It handles some stuff such as:\n *  1. Creating snapshot object from the store.\n *  2. Saving the store's snapshot in local/session storage and keeping them in sync.\n */\n\nvar BaseStore = /*#__PURE__*/function () {\n  /**\n   * An enum object to define LOCAL_STORAGE and SESSION_STORAGE\n   */\n\n  /**\n   * Constructor of the base class that gets properties' name of child which should be saved in storages\n   *\n   * @param {Object} options - An object that contains the following properties:\n   *     @property {Object}   root_store - An object that contains the root store of the app.\n   *     @property {String[]} local_storage_properties - A list of properties' names that should be kept in localStorage.\n   *     @property {String[]} session_storage_properties - A list of properties' names that should be kept in sessionStorage.\n   *     @property {Object}   validation_rules - An object that contains the validation rules for each property of the store.\n   *     @property {String}   store_name - Explicit store name for browser application storage (to bypass minification)\n   */\n  function BaseStore() {\n    var _this = this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    base_store_classCallCheck(this, BaseStore);\n\n    this.validation_errors = {};\n    this.validation_rules = {};\n    this.preSwitchAccountDisposer = null;\n    this.pre_switch_account_listener = null;\n    this.switchAccountDisposer = null;\n    this.switch_account_listener = null;\n    this.logoutDisposer = null;\n    this.logout_listener = null;\n    this.clientInitDisposer = null;\n    this.client_init_listener = null;\n    this.networkStatusChangeDisposer = null;\n    this.network_status_change_listener = null;\n    this.themeChangeDisposer = null;\n    this.theme_change_listener = null;\n    this.realAccountSignupEndedDisposer = null;\n    this.real_account_signup_ended_listener = null;\n    this.partial_fetch_time = 0;\n    (0,external_mobx_.makeObservable)(this, {\n      validation_errors: external_mobx_.observable,\n      validation_rules: external_mobx_.observable,\n      partial_fetch_time: external_mobx_.observable,\n      retrieveFromStorage: external_mobx_.action,\n      setValidationErrorMessages: external_mobx_.action,\n      setValidationRules: external_mobx_.action,\n      addRule: external_mobx_.action,\n      validateProperty: external_mobx_.action,\n      validateAllProperties: external_mobx_.action,\n      onSwitchAccount: external_mobx_.action.bound,\n      onPreSwitchAccount: external_mobx_.action.bound,\n      onLogout: external_mobx_.action.bound,\n      onClientInit: external_mobx_.action.bound,\n      onNetworkStatusChange: external_mobx_.action.bound,\n      onThemeChange: external_mobx_.action.bound,\n      onRealAccountSignupEnd: external_mobx_.action.bound,\n      disposePreSwitchAccount: external_mobx_.action.bound,\n      disposeSwitchAccount: external_mobx_.action.bound,\n      disposeLogout: external_mobx_.action.bound,\n      disposeClientInit: external_mobx_.action.bound,\n      disposeNetworkStatusChange: external_mobx_.action.bound,\n      disposeThemeChange: external_mobx_.action.bound,\n      disposeRealAccountSignupEnd: external_mobx_.action.bound,\n      onUnmount: external_mobx_.action.bound,\n      assertHasValidCache: external_mobx_.action.bound\n    });\n    var root_store = options.root_store,\n        local_storage_properties = options.local_storage_properties,\n        session_storage_properties = options.session_storage_properties,\n        validation_rules = options.validation_rules,\n        store_name = options.store_name;\n    Object.defineProperty(this, 'root_store', {\n      enumerable: false,\n      writable: true\n    });\n    Object.defineProperty(this, 'local_storage_properties', {\n      enumerable: false,\n      writable: true\n    });\n    Object.defineProperty(this, 'session_storage_properties', {\n      enumerable: false,\n      writable: true\n    });\n    var has_local_or_session_storage = local_storage_properties && local_storage_properties.length || session_storage_properties && session_storage_properties.length;\n\n    if (has_local_or_session_storage) {\n      if (!store_name) {\n        throw new Error('store_name is required for local/session storage');\n      }\n\n      Object.defineProperty(this, 'store_name', {\n        value: store_name,\n        enumerable: false,\n        writable: false\n      });\n    }\n\n    this.root_store = root_store;\n    this.local_storage_properties = local_storage_properties || [];\n    this.session_storage_properties = session_storage_properties || [];\n    setTimeout(function () {\n      _this.setValidationRules(validation_rules);\n\n      _this.setupReactionForLocalStorage();\n\n      _this.setupReactionForSessionStorage();\n\n      _this.retrieveFromStorage();\n    }, 0);\n  }\n  /**\n   * Returns an snapshot of the current store\n   *\n   * @param {String[]} properties - A list of properties' names that should be in the snapshot.\n   *\n   * @return {Object} Returns a cloned object of the store.\n   */\n\n\n  base_store_createClass(BaseStore, [{\n    key: \"getSnapshot\",\n    value: function getSnapshot(properties) {\n      var snapshot = (0,external_mobx_.toJS)(this);\n\n      if (!(0,shared_.isEmptyObject)(this.root_store)) {\n        snapshot.root_store = this.root_store;\n      }\n\n      if (properties && properties.length) {\n        snapshot = properties.reduce(function (result, p) {\n          return Object.assign(result, base_store_defineProperty({}, p, snapshot[p]));\n        }, {});\n      }\n\n      return snapshot;\n    }\n    /**\n     * Sets up a reaction on properties which are mentioned in `local_storage_properties`\n     *  and invokes `saveToStorage` when there are any changes on them.\n     *\n     */\n\n  }, {\n    key: \"setupReactionForLocalStorage\",\n    value: function setupReactionForLocalStorage() {\n      var _this2 = this;\n\n      if (this.local_storage_properties.length) {\n        (0,external_mobx_.reaction)(function () {\n          return _this2.local_storage_properties.map(function (i) {\n            return _this2[i];\n          });\n        }, function () {\n          return _this2.saveToStorage(_this2.local_storage_properties, BaseStore.STORAGES.LOCAL_STORAGE);\n        });\n      }\n    }\n    /**\n     * Sets up a reaction on properties which are mentioned in `session_storage_properties`\n     *  and invokes `saveToStorage` when there are any changes on them.\n     *\n     */\n\n  }, {\n    key: \"setupReactionForSessionStorage\",\n    value: function setupReactionForSessionStorage() {\n      var _this3 = this;\n\n      if (this.session_storage_properties.length) {\n        (0,external_mobx_.reaction)(function () {\n          return _this3.session_storage_properties.map(function (i) {\n            return _this3[i];\n          });\n        }, function () {\n          return _this3.saveToStorage(_this3.session_storage_properties, BaseStore.STORAGES.SESSION_STORAGE);\n        });\n      }\n    }\n    /**\n     * Removes properties that are not passed from the snapshot of the store and saves it to the passed storage\n     *\n     * @param {String[]} properties - A list of the store's properties' names which should be saved in the storage.\n     * @param {Symbol}   storage    - A symbol object that defines the storage which the snapshot should be stored in it.\n     *\n     */\n\n  }, {\n    key: \"saveToStorage\",\n    value: function saveToStorage(properties, storage) {\n      var snapshot = JSON.stringify(this.getSnapshot(properties), function (key, value) {\n        if (value !== null) return value;\n        return undefined;\n      });\n\n      if (storage === BaseStore.STORAGES.LOCAL_STORAGE) {\n        localStorage.setItem(this.store_name, snapshot);\n      } else if (storage === BaseStore.STORAGES.SESSION_STORAGE) {\n        sessionStorage.setItem(this.store_name, snapshot);\n      }\n    }\n    /**\n     * Retrieves saved snapshot of the store and assigns to the current instance.\n     *\n     */\n\n  }, {\n    key: \"retrieveFromStorage\",\n    value: function retrieveFromStorage() {\n      var _this4 = this;\n\n      var local_storage_snapshot = JSON.parse(localStorage.getItem(this.store_name, {}));\n      var session_storage_snapshot = JSON.parse(sessionStorage.getItem(this.store_name, {}));\n\n      var snapshot = base_store_objectSpread(base_store_objectSpread({}, local_storage_snapshot), session_storage_snapshot);\n\n      Object.keys(snapshot).forEach(function (k) {\n        return _this4[k] = snapshot[k];\n      });\n    }\n    /**\n     * Sets validation error messages for an observable property of the store\n     *\n     * @param {String} propertyName - The observable property's name\n     * @param [{String}] messages - An array of strings that contains validation error messages for the particular property.\n     *\n     */\n\n  }, {\n    key: \"setValidationErrorMessages\",\n    value: function setValidationErrorMessages(propertyName, messages) {\n      var _this5 = this;\n\n      var is_different = function is_different() {\n        return !!_this5.validation_errors[propertyName].filter(function (x) {\n          return !messages.includes(x);\n        }).concat(messages.filter(function (x) {\n          return !_this5.validation_errors[propertyName].includes(x);\n        })).length;\n      };\n\n      if (!this.validation_errors[propertyName] || is_different()) {\n        this.validation_errors[propertyName] = messages;\n      }\n    }\n    /**\n     * Sets validation rules\n     *\n     * @param {object} rules\n     *\n     */\n\n  }, {\n    key: \"setValidationRules\",\n    value: function setValidationRules() {\n      var _this6 = this;\n\n      var rules = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      Object.keys(rules).forEach(function (key) {\n        _this6.addRule(key, rules[key]);\n      });\n    }\n    /**\n     * Adds rules to the particular property\n     *\n     * @param {String} property\n     * @param {String} rules\n     *\n     */\n\n  }, {\n    key: \"addRule\",\n    value: function addRule(property, rules) {\n      var _this7 = this;\n\n      this.validation_rules[property] = rules;\n      (0,external_mobx_.intercept)(this, property, function (change) {\n        _this7.validateProperty(property, change.newValue);\n\n        return change;\n      });\n    }\n    /**\n     * Validates a particular property of the store\n     *\n     * @param {String} property - The name of the property in the store\n     * @param {object} value    - The value of the property, it can be undefined.\n     *\n     */\n\n  }, {\n    key: \"validateProperty\",\n    value: function validateProperty(property, value) {\n      var _this8 = this;\n\n      var trigger = this.validation_rules[property].trigger;\n\n      var inputs = base_store_defineProperty({}, property, value !== undefined ? value : this[property]);\n\n      var validation_rules = base_store_defineProperty({}, property, this.validation_rules[property].rules || []);\n\n      if (!!trigger && Object.hasOwnProperty.call(this, trigger)) {\n        inputs[trigger] = this[trigger];\n        validation_rules[trigger] = this.validation_rules[trigger].rules || [];\n      }\n\n      var validator = new validator_validator(inputs, validation_rules, this);\n      validator.isPassed();\n      Object.keys(inputs).forEach(function (key) {\n        _this8.setValidationErrorMessages(key, validator.errors.get(key));\n      });\n    }\n    /**\n     * Validates all properties which validation rule has been set for.\n     *\n     */\n\n  }, {\n    key: \"validateAllProperties\",\n    value: function validateAllProperties() {\n      var _this9 = this;\n\n      var validation_rules = Object.keys(this.validation_rules);\n      var validation_errors = Object.keys(this.validation_errors);\n      validation_rules.forEach(function (p) {\n        _this9.validateProperty(p, _this9[p]);\n      }); // Remove keys that are present in error, but not in rules:\n\n      validation_errors.forEach(function (error) {\n        if (!validation_rules.includes(error)) {\n          delete _this9.validation_errors[error];\n        }\n      });\n    }\n  }, {\n    key: \"onSwitchAccount\",\n    value: function onSwitchAccount(listener) {\n      var _this10 = this;\n\n      if (listener) {\n        this.switch_account_listener = listener;\n        this.switchAccountDisposer = (0,external_mobx_.when)(function () {\n          return _this10.root_store.client.switch_broadcast;\n        }, function () {\n          try {\n            var result = _this10.switch_account_listener();\n\n            if (result && result.then && typeof result.then === 'function') {\n              result.then(function () {\n                _this10.root_store.client.switchEndSignal();\n\n                _this10.onSwitchAccount(_this10.switch_account_listener);\n              });\n            } else {\n              throw new Error('Switching account listeners are required to return a promise.');\n            }\n          } catch (error) {\n            // there is no listener currently active. so we can just ignore the error raised from treating\n            // a null object as a function. Although, in development mode, we throw a console error.\n            if (!(0,shared_.isProduction)()) {\n              console.error(error); // eslint-disable-line\n            }\n          }\n        });\n      }\n    }\n  }, {\n    key: \"onPreSwitchAccount\",\n    value: function onPreSwitchAccount(listener) {\n      var _this11 = this;\n\n      if (listener) {\n        this.pre_switch_account_listener = listener;\n        this.preSwitchAccountDisposer = (0,external_mobx_.when)(function () {\n          return _this11.root_store.client.pre_switch_broadcast;\n        }, function () {\n          try {\n            var result = _this11.pre_switch_account_listener();\n\n            if (result && result.then && typeof result.then === 'function') {\n              result.then(function () {\n                _this11.root_store.client.setPreSwitchAccount(false);\n\n                _this11.onPreSwitchAccount(_this11.pre_switch_account_listener);\n              });\n            } else {\n              throw new Error('Pre-switch account listeners are required to return a promise.');\n            }\n          } catch (error) {\n            // there is no listener currently active. so we can just ignore the error raised from treating\n            // a null object as a function. Although, in development mode, we throw a console error.\n            if (!(0,shared_.isProduction)()) {\n              console.error(error); // eslint-disable-line\n            }\n          }\n        });\n      }\n    }\n  }, {\n    key: \"onLogout\",\n    value: function onLogout(listener) {\n      var _this12 = this;\n\n      this.logoutDisposer = (0,external_mobx_.when)(function () {\n        return _this12.root_store.client.has_logged_out;\n      }, /*#__PURE__*/base_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var result;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                result = _this12.logout_listener();\n\n                if (!(result && result.then && typeof result.then === 'function')) {\n                  _context.next = 6;\n                  break;\n                }\n\n                result.then(function () {\n                  _this12.root_store.client.setLogout(false);\n\n                  _this12.onLogout(_this12.logout_listener);\n                });\n                _context.next = 7;\n                break;\n\n              case 6:\n                throw new Error('Logout listeners are required to return a promise.');\n\n              case 7:\n                _context.next = 12;\n                break;\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](0);\n\n                // there is no listener currently active. so we can just ignore the error raised from treating\n                // a null object as a function. Although, in development mode, we throw a console error.\n                if (!(0,shared_.isProduction)()) {\n                  console.error(_context.t0); // eslint-disable-line\n                }\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 9]]);\n      })));\n      this.logout_listener = listener;\n    }\n  }, {\n    key: \"onClientInit\",\n    value: function onClientInit(listener) {\n      var _this13 = this;\n\n      this.clientInitDisposer = (0,external_mobx_.when)(function () {\n        return _this13.root_store.client.initialized_broadcast;\n      }, /*#__PURE__*/base_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var result;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                result = _this13.client_init_listener();\n\n                if (!(result && result.then && typeof result.then === 'function')) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                result.then(function () {\n                  _this13.root_store.client.setInitialized(false);\n\n                  _this13.onClientInit(_this13.client_init_listener);\n                });\n                _context2.next = 7;\n                break;\n\n              case 6:\n                throw new Error('Client init listeners are required to return a promise.');\n\n              case 7:\n                _context2.next = 12;\n                break;\n\n              case 9:\n                _context2.prev = 9;\n                _context2.t0 = _context2[\"catch\"](0);\n\n                // there is no listener currently active. so we can just ignore the error raised from treating\n                // a null object as a function. Although, in development mode, we throw a console error.\n                if (!(0,shared_.isProduction)()) {\n                  console.error(_context2.t0); // eslint-disable-line\n                }\n\n              case 12:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 9]]);\n      })));\n      this.client_init_listener = listener;\n    }\n  }, {\n    key: \"onNetworkStatusChange\",\n    value: function onNetworkStatusChange(listener) {\n      var _this14 = this;\n\n      this.networkStatusChangeDisposer = (0,external_mobx_.reaction)(function () {\n        return _this14.root_store.common.is_network_online;\n      }, function (is_online) {\n        try {\n          _this14.network_status_change_listener(is_online);\n        } catch (error) {\n          // there is no listener currently active. so we can just ignore the error raised from treating\n          // a null object as a function. Although, in development mode, we throw a console error.\n          if (!(0,shared_.isProduction)()) {\n            console.error(error); // eslint-disable-line\n          }\n        }\n      });\n      this.network_status_change_listener = listener;\n    }\n  }, {\n    key: \"onThemeChange\",\n    value: function onThemeChange(listener) {\n      var _this15 = this;\n\n      this.themeChangeDisposer = (0,external_mobx_.reaction)(function () {\n        return _this15.root_store.ui.is_dark_mode_on;\n      }, function (is_dark_mode_on) {\n        try {\n          _this15.theme_change_listener(is_dark_mode_on);\n        } catch (error) {\n          // there is no listener currently active. so we can just ignore the error raised from treating\n          // a null object as a function. Although, in development mode, we throw a console error.\n          if (!(0,shared_.isProduction)()) {\n            console.error(error); // eslint-disable-line\n          }\n        }\n      });\n      this.theme_change_listener = listener;\n    }\n  }, {\n    key: \"onRealAccountSignupEnd\",\n    value: function onRealAccountSignupEnd(listener) {\n      var _this16 = this;\n\n      this.realAccountSignupEndedDisposer = (0,external_mobx_.when)(function () {\n        return _this16.root_store.ui.has_real_account_signup_ended;\n      }, function () {\n        try {\n          var result = _this16.real_account_signup_ended_listener();\n\n          if (result && result.then && typeof result.then === 'function') {\n            result.then(function () {\n              _this16.root_store.ui.setRealAccountSignupEnd(false);\n\n              _this16.onRealAccountSignupEnd(_this16.real_account_signup_ended_listener);\n            });\n          } else {\n            throw new Error('Real account signup listeners are required to return a promise.');\n          }\n        } catch (error) {\n          // there is no listener currently active. so we can just ignore the error raised from treating\n          // a null object as a function. Although, in development mode, we throw a console error.\n          if (!(0,shared_.isProduction)()) {\n            console.error(error); // eslint-disable-line\n          }\n        }\n      });\n      this.real_account_signup_ended_listener = listener;\n    }\n  }, {\n    key: \"disposePreSwitchAccount\",\n    value: function disposePreSwitchAccount() {\n      if (typeof this.preSwitchAccountDisposer === 'function') {\n        this.preSwitchAccountDisposer();\n      }\n\n      this.pre_switch_account_listener = null;\n    }\n  }, {\n    key: \"disposeSwitchAccount\",\n    value: function disposeSwitchAccount() {\n      if (typeof this.switchAccountDisposer === 'function') {\n        this.switchAccountDisposer();\n      }\n\n      this.switch_account_listener = null;\n    }\n  }, {\n    key: \"disposeLogout\",\n    value: function disposeLogout() {\n      if (typeof this.logoutDisposer === 'function') {\n        this.logoutDisposer();\n      }\n\n      this.logout_listener = null;\n    }\n  }, {\n    key: \"disposeClientInit\",\n    value: function disposeClientInit() {\n      if (typeof this.clientInitDisposer === 'function') {\n        this.clientInitDisposer();\n      }\n\n      this.client_init_listener = null;\n    }\n  }, {\n    key: \"disposeNetworkStatusChange\",\n    value: function disposeNetworkStatusChange() {\n      if (typeof this.networkStatusChangeDisposer === 'function') {\n        this.networkStatusChangeDisposer();\n      }\n\n      this.network_status_change_listener = null;\n    }\n  }, {\n    key: \"disposeThemeChange\",\n    value: function disposeThemeChange() {\n      if (typeof this.themeChangeDisposer === 'function') {\n        this.themeChangeDisposer();\n      }\n\n      this.theme_change_listener = null;\n    }\n  }, {\n    key: \"disposeRealAccountSignupEnd\",\n    value: function disposeRealAccountSignupEnd() {\n      if (typeof this.realAccountSignupEndedDisposer === 'function') {\n        this.realAccountSignupEndedDisposer();\n      }\n\n      this.real_account_signup_ended_listener = null;\n    }\n  }, {\n    key: \"onUnmount\",\n    value: function onUnmount() {\n      this.disposePreSwitchAccount();\n      this.disposeSwitchAccount();\n      this.disposeLogout();\n      this.disposeClientInit();\n      this.disposeNetworkStatusChange();\n      this.disposeThemeChange();\n      this.disposeRealAccountSignupEnd();\n    }\n  }, {\n    key: \"assertHasValidCache\",\n    value: function assertHasValidCache(loginid) {\n      // account was changed when this was unmounted.\n      if (this.root_store.client.loginid !== loginid) {\n        for (var _len = arguments.length, reactions = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          reactions[_key - 1] = arguments[_key];\n        }\n\n        reactions.forEach(function (act) {\n          return act();\n        });\n        this.partial_fetch_time = false;\n      }\n    }\n  }]);\n\n  return BaseStore;\n}();\n\nBaseStore.STORAGES = Object.freeze({\n  LOCAL_STORAGE: Symbol('LOCAL_STORAGE'),\n  SESSION_STORAGE: Symbol('SESSION_STORAGE')\n});\n\n;// CONCATENATED MODULE: ./stores/general-store.js\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction general_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction general_store_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { general_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { general_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction general_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction general_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction general_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) general_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) general_store_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\n\n\n\n\nvar GeneralStore = /*#__PURE__*/function (_BaseStore) {\n  _inherits(GeneralStore, _BaseStore);\n\n  var _super = _createSuper(GeneralStore);\n\n  function GeneralStore(_ref) {\n    var _this;\n\n    var root_store = _ref.root_store,\n        WS = _ref.WS;\n\n    general_store_classCallCheck(this, GeneralStore);\n\n    _this = _super.call(this, {\n      root_store: root_store\n    });\n    _this.is_loading = false;\n    _this.is_p2p_visible = false;\n    _this.p2p_notification_count = 0;\n    _this.cashier_route_tab_index = 0;\n    _this.is_deposit = false;\n    _this.should_show_all_available_currencies = false;\n    _this.is_cashier_onboarding = true;\n    _this.deposit_target = '';\n    _this.should_set_currency_modal_title_change = false;\n    _this.p2p_advertiser_error = undefined;\n    _this.has_set_currency = false;\n    _this.should_percentage_reset = false;\n    _this.percentage = 0;\n    _this.show_p2p_in_cashier_onboarding = false;\n\n    _this.onRemount = function () {};\n\n    _this.p2p_completed_orders = null;\n    _this.active_container = constants.containers.deposit;\n    _this.is_populating_values = false;\n    (0,external_mobx_.makeObservable)(_assertThisInitialized(_this), {\n      is_loading: external_mobx_.observable,\n      is_p2p_visible: external_mobx_.observable,\n      p2p_notification_count: external_mobx_.observable,\n      cashier_route_tab_index: external_mobx_.observable,\n      is_deposit: external_mobx_.observable,\n      should_show_all_available_currencies: external_mobx_.observable,\n      is_cashier_onboarding: external_mobx_.observable,\n      deposit_target: external_mobx_.observable,\n      should_set_currency_modal_title_change: external_mobx_.observable,\n      p2p_advertiser_error: external_mobx_.observable,\n      has_set_currency: external_mobx_.observable,\n      should_percentage_reset: external_mobx_.observable,\n      percentage: external_mobx_.observable,\n      show_p2p_in_cashier_onboarding: external_mobx_.observable,\n      onRemount: external_mobx_.observable,\n      p2p_completed_orders: external_mobx_.observable,\n      setOnRemount: external_mobx_.action.bound,\n      is_crypto: external_mobx_.computed,\n      is_p2p_enabled: external_mobx_.computed,\n      p2p_unseen_notifications: external_mobx_.computed,\n      showP2pInCashierOnboarding: external_mobx_.action.bound,\n      attachCashierToMenu: external_mobx_.action.bound,\n      replaceCashierMenuOnclick: external_mobx_.action.bound,\n      setHasSetCurrency: external_mobx_.action.bound,\n      changeSetCurrencyModalTitle: external_mobx_.action.bound,\n      onMountCashierOnboarding: external_mobx_.action.bound,\n      calculatePercentage: external_mobx_.action.bound,\n      percentageSelectorSelectionStatus: external_mobx_.action.bound,\n      setIsDeposit: external_mobx_.action.bound,\n      setShouldShowAllAvailableCurrencies: external_mobx_.action.bound,\n      setIsCashierOnboarding: external_mobx_.action.bound,\n      setDepositTarget: external_mobx_.action.bound,\n      continueRoute: external_mobx_.action.bound,\n      setAccountSwitchListener: external_mobx_.action.bound,\n      init: external_mobx_.action.bound,\n      getAdvertizerError: external_mobx_.action.bound,\n      setP2pAdvertiserError: external_mobx_.action.bound,\n      checkP2pStatus: external_mobx_.action.bound,\n      setP2pCompletedOrders: external_mobx_.action.bound,\n      getP2pCompletedOrders: external_mobx_.action.bound,\n      onMountCommon: external_mobx_.action.bound,\n      setCashierTabIndex: external_mobx_.action.bound,\n      setNotificationCount: external_mobx_.action.bound,\n      setIsP2pVisible: external_mobx_.action.bound,\n      is_cashier_locked: external_mobx_.computed,\n      is_system_maintenance: external_mobx_.computed,\n      setLoading: external_mobx_.action.bound,\n      setActiveTab: external_mobx_.action.bound\n    });\n    _this.WS = WS;\n    _this.root_store = root_store;\n    (0,external_mobx_.when)(function () {\n      return _this.root_store.client.is_logged_in;\n    }, function () {\n      _this.setHasSetCurrency();\n\n      _this.attachCashierToMenu();\n    });\n\n    if (!_this.has_set_currency) {\n      _this.changeSetCurrencyModalTitle();\n    }\n\n    (0,external_mobx_.reaction)(function () {\n      return [_this.root_store.client.switched, _this.root_store.client.is_logged_in, _this.root_store.client.currency];\n    }, function () {\n      _this.init();\n    });\n    return _this;\n  }\n\n  general_store_createClass(GeneralStore, [{\n    key: \"setOnRemount\",\n    value: function setOnRemount(func) {\n      this.onRemount = func;\n    }\n  }, {\n    key: \"is_crypto\",\n    get: function get() {\n      var currency = this.root_store.client.currency;\n      return !!currency && (0,shared_.isCryptocurrency)(currency);\n    }\n  }, {\n    key: \"is_p2p_enabled\",\n    get: function get() {\n      return this.is_p2p_visible && !this.root_store.client.is_eu;\n    }\n    /**\n     * Gets the notifications from local storage, within p2p_settings, where it checks which notification has\n     * been seen. The number of unseen notifications is displayed in vertical tab, notifications count, for P2P.\n     *\n     * @returns {number} Notifications that have not been seen by the user.\n     */\n\n  }, {\n    key: \"p2p_unseen_notifications\",\n    get: function get() {\n      var p2p_settings = JSON.parse(localStorage.getItem('p2p_settings') || '{}');\n      var local_storage_settings = p2p_settings[this.root_store.client.loginid];\n\n      if ((0,shared_.isEmptyObject)(local_storage_settings)) {\n        return 0;\n      }\n\n      var unseen_notifications = local_storage_settings.notifications.filter(function (notification) {\n        return !notification.is_seen;\n      });\n      return unseen_notifications.length;\n    }\n  }, {\n    key: \"showP2pInCashierOnboarding\",\n    value: function showP2pInCashierOnboarding() {\n      var _this$root_store$clie = this.root_store.client,\n          account_list = _this$root_store$clie.account_list,\n          is_virtual = _this$root_store$clie.is_virtual;\n      var is_p2p_restricted = this.p2p_advertiser_error === 'RestrictedCountry';\n      var has_usd_currency = account_list.some(function (account) {\n        return account.title === 'USD';\n      });\n      var has_user_fiat_currency = account_list.some(function (account) {\n        return !(0,shared_.isCryptocurrency)(account.title) && account.title !== 'Real';\n      });\n\n      if (is_p2p_restricted || is_virtual || has_user_fiat_currency && !has_usd_currency) {\n        this.show_p2p_in_cashier_onboarding = false;\n      } else {\n        this.show_p2p_in_cashier_onboarding = true;\n      }\n    }\n  }, {\n    key: \"attachCashierToMenu\",\n    value: function attachCashierToMenu() {\n      var _this$root_store = this.root_store,\n          menu = _this$root_store.menu,\n          ui = _this$root_store.ui;\n\n      if (!this.has_set_currency) {\n        this.setHasSetCurrency();\n      }\n\n      menu.attach({\n        id: 'dt_cashier_tab',\n        icon: /*#__PURE__*/external_react_default().createElement(components_cashier_notifications, {\n          p2p_notification_count: this.p2p_notification_count\n        }),\n        text: function text() {\n          return (0,translations_.localize)('Cashier');\n        },\n        link_to: this.has_set_currency && shared_.routes.cashier,\n        onClick: !this.has_set_currency && ui.toggleSetCurrencyModal,\n        login_only: true\n      });\n    }\n  }, {\n    key: \"replaceCashierMenuOnclick\",\n    value: function replaceCashierMenuOnclick() {\n      var _this$root_store2 = this.root_store,\n          menu = _this$root_store2.menu,\n          ui = _this$root_store2.ui;\n      this.setHasSetCurrency();\n      menu.update({\n        id: 'dt_cashier_tab',\n        icon: /*#__PURE__*/external_react_default().createElement(components_cashier_notifications, {\n          p2p_notification_count: this.p2p_notification_count\n        }),\n        text: function text() {\n          return (0,translations_.localize)('Cashier');\n        },\n        link_to: this.has_set_currency && shared_.routes.cashier,\n        onClick: !this.has_set_currency ? ui.toggleSetCurrencyModal : false,\n        login_only: true\n      }, 1);\n    }\n  }, {\n    key: \"setHasSetCurrency\",\n    value: function setHasSetCurrency() {\n      var _this$root_store$clie2 = this.root_store.client,\n          account_list = _this$root_store$clie2.account_list,\n          has_active_real_account = _this$root_store$clie2.has_active_real_account;\n      this.has_set_currency = account_list.filter(function (account) {\n        return !account.is_virtual;\n      }).some(function (account) {\n        return account.title !== 'Real';\n      }) || !has_active_real_account;\n    }\n  }, {\n    key: \"changeSetCurrencyModalTitle\",\n    value: function changeSetCurrencyModalTitle() {\n      this.should_set_currency_modal_title_change = true;\n    }\n  }, {\n    key: \"onMountCashierOnboarding\",\n    value: function () {\n      var _onMountCashierOnboarding = general_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _payment_agent$all_pa, _payment_agent$all_pa2;\n\n        var _this$root_store$modu, account_prompt_dialog, payment_agent, agent_list;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$root_store$modu = this.root_store.modules.cashier, account_prompt_dialog = _this$root_store$modu.account_prompt_dialog, payment_agent = _this$root_store$modu.payment_agent;\n\n                if (!this.has_set_currency) {\n                  this.setHasSetCurrency();\n                }\n\n                this.setIsCashierOnboarding(true);\n                account_prompt_dialog.resetIsConfirmed();\n                this.setLoading(true);\n\n                if ((_payment_agent$all_pa = payment_agent.all_payment_agent_list) !== null && _payment_agent$all_pa !== void 0 && (_payment_agent$all_pa2 = _payment_agent$all_pa.paymentagent_list) !== null && _payment_agent$all_pa2 !== void 0 && _payment_agent$all_pa2.list) {\n                  _context.next = 10;\n                  break;\n                }\n\n                _context.next = 8;\n                return payment_agent.getAllPaymentAgentList();\n\n              case 8:\n                agent_list = _context.sent;\n                payment_agent.setAllPaymentAgentList(agent_list);\n\n              case 10:\n                this.setLoading(false);\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function onMountCashierOnboarding() {\n        return _onMountCashierOnboarding.apply(this, arguments);\n      }\n\n      return onMountCashierOnboarding;\n    }()\n  }, {\n    key: \"calculatePercentage\",\n    value: function calculatePercentage() {\n      var amount = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.root_store.modules.cashier.crypto_fiat_converter.converter_from_amount;\n      var _this$root_store3 = this.root_store,\n          client = _this$root_store3.client,\n          modules = _this$root_store3.modules;\n      var account_transfer = modules.cashier.account_transfer;\n\n      if (this.active_container === account_transfer.container) {\n        this.percentage = +(amount / +account_transfer.selected_from.balance * 100).toFixed(0);\n      } else {\n        this.percentage = +(amount / +client.balance * 100).toFixed(0);\n      }\n\n      if (!isFinite(this.percentage)) {\n        this.percentage = 0;\n      }\n    }\n  }, {\n    key: \"percentageSelectorSelectionStatus\",\n    value: function percentageSelectorSelectionStatus(should_percentage_reset) {\n      this.should_percentage_reset = should_percentage_reset;\n\n      if (should_percentage_reset) {\n        this.percentage = 0;\n      }\n    }\n  }, {\n    key: \"setIsDeposit\",\n    value: function setIsDeposit(is_deposit) {\n      this.is_deposit = is_deposit;\n    }\n  }, {\n    key: \"setShouldShowAllAvailableCurrencies\",\n    value: function setShouldShowAllAvailableCurrencies(value) {\n      this.should_show_all_available_currencies = value;\n    }\n  }, {\n    key: \"setIsCashierOnboarding\",\n    value: function setIsCashierOnboarding(is_cashier_onboarding) {\n      this.is_cashier_onboarding = is_cashier_onboarding;\n    }\n  }, {\n    key: \"setDepositTarget\",\n    value: function setDepositTarget(target) {\n      this.deposit_target = target;\n    }\n  }, {\n    key: \"continueRoute\",\n    value: function continueRoute() {\n      this.root_store.common.routeTo(this.deposit_target);\n    }\n  }, {\n    key: \"setAccountSwitchListener\",\n    value: function setAccountSwitchListener() {\n      // cashier inits once and tries to stay active until switching account\n      // since cashier calls take a long time to respond or display in iframe\n      // so we don't have any unmount function here and everything gets reset on switch instead\n      this.disposeSwitchAccount();\n      this.onSwitchAccount(this.accountSwitcherListener);\n    } // Initialise P2P attributes on app load without mounting the entire cashier\n\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = general_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var _this$root_store4, _this$root_store4$cli, is_logged_in, switched, modules, _modules$cashier, payment_agent, payment_agent_transfer, withdraw;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!this.root_store.modules.cashier) {\n                  _context2.next = 14;\n                  break;\n                }\n\n                _this$root_store4 = this.root_store, _this$root_store4$cli = _this$root_store4.client, is_logged_in = _this$root_store4$cli.is_logged_in, switched = _this$root_store4$cli.switched, modules = _this$root_store4.modules;\n                _modules$cashier = modules.cashier, payment_agent = _modules$cashier.payment_agent, payment_agent_transfer = _modules$cashier.payment_agent_transfer, withdraw = _modules$cashier.withdraw; // wait for client settings to be populated in client-store\n\n                _context2.next = 5;\n                return this.WS.wait('get_settings');\n\n              case 5:\n                if (!is_logged_in) {\n                  _context2.next = 14;\n                  break;\n                }\n\n                _context2.next = 8;\n                return this.getAdvertizerError();\n\n              case 8:\n                if (switched) {\n                  _context2.next = 14;\n                  break;\n                }\n\n                this.checkP2pStatus();\n                payment_agent.setPaymentAgentList().then(payment_agent.filterPaymentAgentList);\n\n                if (!payment_agent_transfer.is_payment_agent) {\n                  payment_agent_transfer.checkIsPaymentAgent();\n                } // check if withdrawal limit is reached\n                // if yes, this will trigger to show a notification\n\n\n                _context2.next = 14;\n                return withdraw.check10kLimit();\n\n              case 14:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: \"getAdvertizerError\",\n    value: function () {\n      var _getAdvertizerError = general_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var advertiser_info;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.WS.authorized.p2pAdvertiserInfo();\n\n              case 2:\n                advertiser_info = _context3.sent;\n                this.setP2pAdvertiserError((0,shared_.getPropertyValue)(advertiser_info, ['error', 'code']));\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getAdvertizerError() {\n        return _getAdvertizerError.apply(this, arguments);\n      }\n\n      return getAdvertizerError;\n    }()\n  }, {\n    key: \"setP2pAdvertiserError\",\n    value: function setP2pAdvertiserError(value) {\n      this.p2p_advertiser_error = value;\n    }\n  }, {\n    key: \"checkP2pStatus\",\n    value: function checkP2pStatus() {\n      var advertiser_error = this.p2p_advertiser_error;\n      var is_p2p_restricted = advertiser_error === 'RestrictedCountry' || advertiser_error === 'RestrictedCurrency';\n      this.setIsP2pVisible(!(is_p2p_restricted || this.root_store.client.is_virtual));\n    }\n  }, {\n    key: \"setP2pCompletedOrders\",\n    value: function setP2pCompletedOrders(p2p_completed_orders) {\n      this.p2p_completed_orders = p2p_completed_orders;\n    }\n  }, {\n    key: \"getP2pCompletedOrders\",\n    value: function () {\n      var _getP2pCompletedOrders = general_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {\n        var _this2 = this;\n\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.WS.authorized.send({\n                  p2p_order_list: 1,\n                  active: 0\n                }).then(function (response) {\n                  if (!(response !== null && response !== void 0 && response.error)) {\n                    var p2p_order_list = response.p2p_order_list;\n\n                    _this2.setP2pCompletedOrders(p2p_order_list.list);\n                  }\n                });\n\n              case 2:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function getP2pCompletedOrders() {\n        return _getP2pCompletedOrders.apply(this, arguments);\n      }\n\n      return getP2pCompletedOrders;\n    }()\n  }, {\n    key: \"onMountCommon\",\n    value: function () {\n      var _onMountCommon = general_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(should_remount) {\n        var _this$root_store5, client, common, modules, is_from_derivgo, routeTo, _modules$cashier2, account_transfer, onramp, payment_agent, payment_agent_transfer, transaction_history;\n\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _this$root_store5 = this.root_store, client = _this$root_store5.client, common = _this$root_store5.common, modules = _this$root_store5.modules;\n                is_from_derivgo = common.is_from_derivgo, routeTo = common.routeTo;\n                _modules$cashier2 = modules.cashier, account_transfer = _modules$cashier2.account_transfer, onramp = _modules$cashier2.onramp, payment_agent = _modules$cashier2.payment_agent, payment_agent_transfer = _modules$cashier2.payment_agent_transfer, transaction_history = _modules$cashier2.transaction_history;\n                this.setNotificationCount(this.p2p_unseen_notifications);\n\n                if (!client.is_logged_in) {\n                  _context5.next = 20;\n                  break;\n                }\n\n                if (!this.is_populating_values) {\n                  _context5.next = 7;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\");\n\n              case 7:\n                this.is_populating_values = true;\n\n                if (should_remount) {\n                  this.setOnRemount(this.onMountCommon);\n                } // we need to see if client's country has PA\n                // if yes, we can show the PA tab in cashier\n\n\n                this.setLoading(true);\n                _context5.next = 12;\n                return payment_agent.setPaymentAgentList();\n\n              case 12:\n                _context5.next = 14;\n                return payment_agent.filterPaymentAgentList();\n\n              case 14:\n                this.setLoading(false);\n\n                if (!payment_agent_transfer.is_payment_agent) {\n                  payment_agent_transfer.checkIsPaymentAgent();\n                }\n\n                if (!account_transfer.accounts_list.length) {\n                  account_transfer.sortAccountsTransfer(null, is_from_derivgo);\n                }\n\n                if (!payment_agent.is_payment_agent_visible && window.location.pathname.endsWith(shared_.routes.cashier_pa)) {\n                  routeTo(shared_.routes.cashier_deposit);\n                }\n\n                if (!onramp.is_onramp_tab_visible && window.location.pathname.endsWith(shared_.routes.cashier_onramp)) {\n                  routeTo(shared_.routes.cashier_deposit);\n                }\n\n                if (!transaction_history.is_crypto_transactions_visible && window.location.pathname.endsWith(shared_.routes.cashier_crypto_transactions)) {\n                  routeTo(shared_.routes.cashier_deposit);\n                  transaction_history.setIsCryptoTransactionsVisible(true);\n                  transaction_history.onMount();\n                }\n\n              case 20:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function onMountCommon(_x) {\n        return _onMountCommon.apply(this, arguments);\n      }\n\n      return onMountCommon;\n    }()\n  }, {\n    key: \"setCashierTabIndex\",\n    value: function setCashierTabIndex(index) {\n      this.cashier_route_tab_index = index;\n    }\n  }, {\n    key: \"setNotificationCount\",\n    value: function setNotificationCount(notification_count) {\n      this.p2p_notification_count = notification_count;\n    }\n  }, {\n    key: \"setIsP2pVisible\",\n    value: function setIsP2pVisible(is_p2p_visible) {\n      this.is_p2p_visible = is_p2p_visible;\n\n      if (!is_p2p_visible && window.location.pathname.endsWith(shared_.routes.cashier_p2p)) {\n        var _this$root_store$modu2;\n\n        this.root_store.common.routeTo((_this$root_store$modu2 = this.root_store.modules.cashier.account_prompt_dialog.last_location) !== null && _this$root_store$modu2 !== void 0 ? _this$root_store$modu2 : shared_.routes.cashier_deposit);\n      }\n    }\n  }, {\n    key: \"is_cashier_locked\",\n    get: function get() {\n      var account_status = this.root_store.client.account_status;\n      if (!(account_status !== null && account_status !== void 0 && account_status.status)) return false;\n      return account_status.status.some(function (status_name) {\n        return status_name === 'cashier_locked';\n      });\n    }\n  }, {\n    key: \"is_system_maintenance\",\n    get: function get() {\n      var account_status = this.root_store.client.account_status;\n      if (!(account_status !== null && account_status !== void 0 && account_status.cashier_validation)) return false;\n      return account_status.cashier_validation.some(function (validation) {\n        return validation === 'system_maintenance';\n      });\n    }\n  }, {\n    key: \"setLoading\",\n    value: function setLoading(is_loading) {\n      this.is_loading = is_loading;\n    }\n  }, {\n    key: \"setActiveTab\",\n    value: function setActiveTab(container) {\n      this.active_container = container;\n    }\n  }, {\n    key: \"accountSwitcherListener\",\n    value: function accountSwitcherListener() {\n      var _this$root_store6 = this.root_store,\n          client = _this$root_store6.client,\n          modules = _this$root_store6.modules;\n      var _modules$cashier3 = modules.cashier,\n          iframe = _modules$cashier3.iframe,\n          payment_agent = _modules$cashier3.payment_agent,\n          general_store = _modules$cashier3.general_store;\n      var active_container = general_store.active_container;\n      var container = constants.map_action[active_container];\n      client.setVerificationCode('', container);\n      iframe.clearIframe();\n      this.payment_agent = payment_agent;\n\n      if (payment_agent.active_tab_index === 1 && window.location.pathname.endsWith(shared_.routes.cashier_pa)) {\n        payment_agent.setActiveTab(1);\n      }\n\n      this.is_populating_values = false;\n      this.onRemount();\n      return Promise.resolve();\n    }\n  }]);\n\n  return GeneralStore;\n}(BaseStore);\n\n\n;// CONCATENATED MODULE: ./stores/iframe-store.ts\nfunction iframe_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction iframe_store_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { iframe_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { iframe_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction iframe_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction iframe_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction iframe_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) iframe_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) iframe_store_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n\n\nvar IframeStore = /*#__PURE__*/function () {\n  function IframeStore(root_store) {\n    iframe_store_classCallCheck(this, IframeStore);\n\n    this.root_store = root_store;\n    this.iframe_height = 0;\n    this.iframe_url = '';\n    this.is_session_timeout = true;\n    this.onIframeLoaded = null;\n    this.timeout_session = null;\n    (0,external_mobx_.makeObservable)(this, {\n      iframe_height: external_mobx_.observable,\n      iframe_url: external_mobx_.observable,\n      is_session_timeout: external_mobx_.observable,\n      timeout_session: external_mobx_.observable,\n      setSessionTimeout: external_mobx_.action.bound,\n      checkIframeLoaded: external_mobx_.action.bound,\n      clearTimeoutCashierUrl: external_mobx_.action.bound,\n      setTimeoutCashierUrl: external_mobx_.action.bound,\n      setIframeUrl: external_mobx_.action.bound,\n      setContainerHeight: external_mobx_.action.bound,\n      clearIframe: external_mobx_.action.bound\n    });\n    this.root_store = root_store;\n  }\n\n  iframe_store_createClass(IframeStore, [{\n    key: \"setSessionTimeout\",\n    value: function setSessionTimeout(is_session_time_out) {\n      this.is_session_timeout = is_session_time_out;\n\n      if (is_session_time_out) {\n        this.removeOnIframeLoaded();\n      }\n    }\n  }, {\n    key: \"checkIframeLoaded\",\n    value: function () {\n      var _checkIframeLoaded = iframe_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _this = this;\n\n        var _this$root_store, modules, ui;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$root_store = this.root_store, modules = _this$root_store.modules, ui = _this$root_store.ui;\n                this.removeOnIframeLoaded();\n\n                this.onIframeLoaded = function (e) {\n                  if (/cashier|doughflow/.test(e.origin)) {\n                    modules.cashier.general_store.setLoading(false); // set the height of the container after content loads so that the\n                    // loading bar stays vertically centered until the end\n\n                    if (ui.is_mobile) {\n                      _this.setContainerHeight(window.innerHeight - 100);\n                    } else {\n                      _this.setContainerHeight(window.innerHeight - 190);\n                    } // do not remove the listener\n                    // on every iframe screen change we need to update the height to more/less to match the new content\n\n                  }\n                };\n\n                window.addEventListener('message', this.onIframeLoaded, false);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function checkIframeLoaded() {\n        return _checkIframeLoaded.apply(this, arguments);\n      }\n\n      return checkIframeLoaded;\n    }()\n  }, {\n    key: \"removeOnIframeLoaded\",\n    value: function removeOnIframeLoaded() {\n      if (this.onIframeLoaded) {\n        window.removeEventListener('message', this.onIframeLoaded, false);\n        this.onIframeLoaded = null;\n      }\n    }\n  }, {\n    key: \"clearTimeoutCashierUrl\",\n    value: function clearTimeoutCashierUrl() {\n      if (this.timeout_session) {\n        clearTimeout(this.timeout_session);\n      }\n    }\n  }, {\n    key: \"setTimeoutCashierUrl\",\n    value: function setTimeoutCashierUrl(is_withdrawal) {\n      var _this2 = this;\n\n      this.clearTimeoutCashierUrl();\n\n      if (is_withdrawal) {\n        this.timeout_session = setTimeout(function () {\n          _this2.setSessionTimeout(true);\n        }, 60000);\n      }\n    }\n  }, {\n    key: \"setIframeUrl\",\n    value: function setIframeUrl(url) {\n      var _this$root_store2 = this.root_store,\n          client = _this$root_store2.client,\n          ui = _this$root_store2.ui;\n\n      if (url) {\n        this.iframe_url = \"\".concat(url, \"&theme=\").concat(ui.is_dark_mode_on ? 'dark' : 'light');\n        var container = this.root_store.modules.cashier.general_store.active_container;\n\n        if (container in constants.map_action) {\n          var container_key = container; // after we set iframe url we can clear verification code\n\n          client.setVerificationCode('', constants.map_action[container_key]);\n        }\n      } else {\n        this.iframe_url = url;\n      }\n    }\n  }, {\n    key: \"setContainerHeight\",\n    value: function setContainerHeight(height) {\n      this.iframe_height = height;\n    }\n  }, {\n    key: \"clearIframe\",\n    value: function clearIframe() {\n      this.setContainerHeight(0);\n      this.setIframeUrl('');\n      this.clearTimeoutCashierUrl();\n      this.setSessionTimeout(true);\n    }\n  }]);\n\n  return IframeStore;\n}();\n\n\n;// CONCATENATED MODULE: ./config/on-ramp-providers.js\n\n\nvar createBanxaProvider = function createBanxaProvider(store) {\n  return {\n    icon: {\n      dark: 'IcCashierBanxaDark',\n      light: 'IcCashierBanxaLight'\n    },\n    name: 'Banxa',\n    getDescription: function getDescription() {\n      return (0,translations_.localize)('A fast and secure fiat-to-crypto payment service. Deposit cryptocurrencies from anywhere in the world using your credit/debit cards and bank transfers.');\n    },\n    getAllowedResidencies: function getAllowedResidencies() {\n      return ['*'];\n    },\n    getPaymentIcons: function getPaymentIcons() {\n      return [{\n        dark: 'IcCashierVisaDark',\n        light: 'IcCashierVisaLight'\n      }, {\n        dark: 'IcCashierMastercardDark',\n        light: 'IcCashierMastercardLight'\n      }, {\n        dark: 'IcCashierBpayDark',\n        light: 'IcCashierBpayLight'\n      }, {\n        dark: 'IcCashierSepaDark',\n        light: 'IcCashierSepaLight'\n      }, {\n        dark: 'IcCashierBlueshyftDark',\n        light: 'IcCashierBlueshyftLight'\n      }, {\n        dark: 'IcCashierFlexepinDark',\n        light: 'IcCashierFlexepinLight'\n      }, {\n        dark: 'IcCashierPayIdDark',\n        light: 'IcCashierPayIdLight'\n      }, {\n        dark: 'IcCashierPoliDark',\n        light: 'IcCashierPoliLight'\n      }, {\n        dark: 'IcCashierApplePay',\n        light: 'IcCashierApplePay'\n      }, {\n        dark: 'IcCashierInteracEtransfer',\n        light: 'IcCashierInteracEtransfer'\n      }, {\n        dark: 'IcCashierIdeal',\n        light: 'IcCashierIdeal'\n      }, {\n        dark: 'IcCashierPostBillPayDark',\n        light: 'IcCashierPostBillPayLight'\n      }, {\n        dark: 'IcCashierSofort',\n        light: 'IcCashierSofort'\n      }];\n    },\n    getScriptDependencies: function getScriptDependencies() {\n      return [];\n    },\n    // None.\n    getDefaultFromCurrency: function getDefaultFromCurrency() {\n      return '';\n    },\n    getFromCurrencies: function getFromCurrencies() {\n      return ['*'];\n    },\n    getToCurrencies: function getToCurrencies() {\n      return ['*'];\n    },\n    getWidgetHtml: function getWidgetHtml() {\n      return new Promise(function (resolve, reject) {\n        store.WS.serviceToken({\n          service_token: 1,\n          service: 'banxa',\n          referrer: window.location.href\n        }).then(function (response) {\n          if (response.error) {\n            reject(response.error.message);\n          } else {\n            var url = response.service_token.banxa.url;\n\n            if (url) {\n              window.open(url);\n            } // Resolving empty will/should redirect user.\n\n\n            resolve();\n          }\n        });\n      });\n    },\n    onMountWidgetContainer: function onMountWidgetContainer() {},\n    should_show_deposit_address: false\n  };\n};\n\nvar createChangellyProvider = function createChangellyProvider(store) {\n  return {\n    icon: {\n      dark: 'IcCashierChangellyDark',\n      light: 'IcCashierChangellyLight'\n    },\n    name: 'Changelly',\n    getDescription: function getDescription() {\n      return (0,translations_.localize)('Your simple access to crypto. Fast and secure way to exchange and purchase cryptocurrencies. 24/7 live chat support.');\n    },\n    getAllowedResidencies: function getAllowedResidencies() {\n      return ['*'];\n    },\n    getPaymentIcons: function getPaymentIcons() {\n      return [{\n        dark: 'IcCashierVisaDark',\n        light: 'IcCashierVisaLight'\n      }, {\n        dark: 'IcCashierMastercardDark',\n        light: 'IcCashierMastercardLight'\n      }];\n    },\n    getScriptDependencies: function getScriptDependencies() {\n      return [];\n    },\n    getDefaultFromCurrency: function getDefaultFromCurrency() {\n      return 'usd';\n    },\n    getFromCurrencies: function getFromCurrencies() {\n      return ['usd', 'eur', 'gbp'];\n    },\n    getToCurrencies: function getToCurrencies() {\n      return ['bch', 'btc', 'etc', 'eth', 'ltc', 'ust'];\n    },\n    getWidgetHtml: function getWidgetHtml() {\n      var _this = this;\n\n      return new Promise(function (resolve) {\n        var url = new URL('https://widget.changelly.com/?v=3&theme=default');\n        url.searchParams.append('fromDefault', _this.getDefaultFromCurrency());\n        var currency = store.root_store.client.currency.toLowerCase();\n\n        if (_this.getToCurrencies().includes(currency)) {\n          var to_currency = currency === 'ust' ? 'usdt' : currency;\n          url.searchParams.append('to', to_currency);\n          url.searchParams.append('toDefault', to_currency);\n        }\n\n        url.searchParams.append('amount', 1);\n        url.searchParams.append('merchant_id', 'iiq3jdt2p44yrfbx');\n        window.open(url);\n        resolve();\n      });\n    },\n    onMountWidgetContainer: function onMountWidgetContainer() {},\n    should_show_deposit_address: true\n  };\n};\n\nvar createXanPoolProvider = function createXanPoolProvider(store) {\n  return {\n    icon: {\n      dark: 'IcCashierXanpoolDark',\n      light: 'IcCashierXanpoolLight'\n    },\n    name: 'XanPool',\n    getDescription: function getDescription() {\n      return (0,translations_.localize)('Buy cryptocurrencies in an instant. Enjoy easy, quick, and secure exchanges using your local payment methods.');\n    },\n    getAllowedResidencies: function getAllowedResidencies() {\n      return ['*'];\n    },\n    getPaymentIcons: function getPaymentIcons() {\n      return [{\n        dark: 'IcCashierFpsDark',\n        light: 'IcCashierFpsLight'\n      }, {\n        dark: 'IcCashierAliPayDark',\n        light: 'IcCashierAliPayLight'\n      }, {\n        dark: 'IcCashierGoPayDark',\n        light: 'IcCashierGoPayLight'\n      }, {\n        dark: 'IcCashierMandiriPay',\n        light: 'IcCashierMandiriPay'\n      }, {\n        dark: 'IcCashierInstaPayLight',\n        light: 'IcCashierInstaPayDark'\n      }, {\n        dark: 'IcCashierCebuanaLhuillierDark',\n        light: 'IcCashierCebuanaLhuillierLight'\n      }, {\n        dark: 'IcCashierPayNowDark',\n        light: 'IcCashierPayNowLight'\n      }, {\n        dark: 'IcCashierUpiDark',\n        light: 'IcCashierUpiLight'\n      }, {\n        dark: 'IcCashierPromptPayDark',\n        light: 'IcCashierPromptPayLight'\n      }, {\n        dark: 'IcCashierViettlePay',\n        light: 'IcCashierViettlePay'\n      }];\n    },\n    getScriptDependencies: function getScriptDependencies() {\n      return [];\n    },\n    getToCurrencies: function getToCurrencies() {\n      return ['btc', 'eth', 'ust', 'zil', 'nem'];\n    },\n    getWidgetHtml: function getWidgetHtml() {\n      return new Promise(function (resolve) {\n        var currency = store.root_store.client.currency;\n        var url = 'https://checkout.xanpool.com/';\n        url += \"?apiKey=db4ec638dff9a68abda1ef6b7638c220\";\n        url += \"&redirectUrl=\".concat(window.location.href);\n        url += \"&wallet=\".concat(store.deposit_address);\n        url += \"&cryptoCurrency=\".concat(currency === 'UST' ? 'USDT' : currency);\n        url += \"&transactionType=buy\";\n        window.open(url);\n        resolve();\n      });\n    },\n    onMountWidgetContainer: function onMountWidgetContainer() {},\n    should_show_deposit_address: false\n  };\n};\n\n/* harmony default export */ const on_ramp_providers = ({\n  createBanxaProvider: createBanxaProvider,\n  createChangellyProvider: createChangellyProvider,\n  createXanPoolProvider: createXanPoolProvider\n});\n;// CONCATENATED MODULE: ./stores/on-ramp-store.js\nfunction on_ramp_store_typeof(obj) { \"@babel/helpers - typeof\"; return on_ramp_store_typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, on_ramp_store_typeof(obj); }\n\nfunction on_ramp_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction on_ramp_store_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { on_ramp_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { on_ramp_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction on_ramp_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction on_ramp_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction on_ramp_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) on_ramp_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) on_ramp_store_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction on_ramp_store_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) on_ramp_store_setPrototypeOf(subClass, superClass); }\n\nfunction on_ramp_store_setPrototypeOf(o, p) { on_ramp_store_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return on_ramp_store_setPrototypeOf(o, p); }\n\nfunction on_ramp_store_createSuper(Derived) { var hasNativeReflectConstruct = on_ramp_store_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = on_ramp_store_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = on_ramp_store_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return on_ramp_store_possibleConstructorReturn(this, result); }; }\n\nfunction on_ramp_store_possibleConstructorReturn(self, call) { if (call && (on_ramp_store_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return on_ramp_store_assertThisInitialized(self); }\n\nfunction on_ramp_store_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction on_ramp_store_isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction on_ramp_store_getPrototypeOf(o) { on_ramp_store_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return on_ramp_store_getPrototypeOf(o); }\n\n\n\n\n\n\n\nvar OnRampStore = /*#__PURE__*/function (_BaseStore) {\n  on_ramp_store_inherits(OnRampStore, _BaseStore);\n\n  var _super = on_ramp_store_createSuper(OnRampStore);\n\n  function OnRampStore(_ref) {\n    var _this;\n\n    var WS = _ref.WS,\n        root_store = _ref.root_store;\n\n    on_ramp_store_classCallCheck(this, OnRampStore);\n\n    _this = _super.call(this, {\n      root_store: root_store\n    });\n    _this.api_error = null;\n    _this.deposit_address = null;\n    _this.is_deposit_address_loading = true;\n    _this.is_onramp_modal_open = false;\n    _this.is_requesting_widget_html = false;\n    _this.onramp_providers = [];\n    _this.selected_provider = null;\n    _this.should_show_widget = false;\n    _this.widget_error = null;\n    _this.widget_html = null;\n    (0,external_mobx_.makeObservable)(on_ramp_store_assertThisInitialized(_this), {\n      api_error: external_mobx_.observable,\n      deposit_address: external_mobx_.observable,\n      is_deposit_address_loading: external_mobx_.observable,\n      is_onramp_modal_open: external_mobx_.observable,\n      is_requesting_widget_html: external_mobx_.observable,\n      onramp_providers: external_mobx_.observable.shallow,\n      selected_provider: external_mobx_.observable.ref,\n      should_show_widget: external_mobx_.observable,\n      widget_error: external_mobx_.observable,\n      widget_html: external_mobx_.observable,\n      is_onramp_tab_visible: external_mobx_.computed,\n      filtered_onramp_providers: external_mobx_.computed,\n      onramp_popup_modal_title: external_mobx_.computed,\n      should_show_dialog: external_mobx_.computed,\n      onMountOnramp: external_mobx_.action.bound,\n      onUnmountOnramp: external_mobx_.action.bound,\n      onClickDisclaimerContinue: external_mobx_.action.bound,\n      onClickGoToDepositPage: external_mobx_.action.bound,\n      pollApiForDepositAddress: external_mobx_.action.bound,\n      resetPopup: external_mobx_.action.bound,\n      setApiError: external_mobx_.action.bound,\n      setCopyIconRef: external_mobx_.action.bound,\n      setDepositAddress: external_mobx_.action.bound,\n      setIsDepositAddressLoading: external_mobx_.action.bound,\n      setIsOnRampModalOpen: external_mobx_.action.bound,\n      setIsRequestingWidgetHtml: external_mobx_.action.bound,\n      setSelectedProvider: external_mobx_.action.bound,\n      setShouldShowWidget: external_mobx_.action.bound,\n      setOnrampProviders: external_mobx_.action.bound,\n      setWidgetError: external_mobx_.action.bound,\n      setWidgetHtml: external_mobx_.action.bound\n    });\n    _this.WS = WS;\n\n    _this.onClientInit( /*#__PURE__*/on_ramp_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this.setOnrampProviders([on_ramp_providers.createChangellyProvider(on_ramp_store_assertThisInitialized(_this)), on_ramp_providers.createXanPoolProvider(on_ramp_store_assertThisInitialized(_this)), on_ramp_providers.createBanxaProvider(on_ramp_store_assertThisInitialized(_this))]);\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    return _this;\n  }\n\n  on_ramp_store_createClass(OnRampStore, [{\n    key: \"is_onramp_tab_visible\",\n    get: function get() {\n      var client = this.root_store.client;\n      return client.is_virtual === false && (0,shared_.isCryptocurrency)(client.currency) && this.filtered_onramp_providers.length > 0;\n    }\n  }, {\n    key: \"filtered_onramp_providers\",\n    get: function get() {\n      var client = this.root_store.client;\n      return this.onramp_providers // Ensure provider supports this user's account currency.\n      .filter(function (provider) {\n        var to_currencies = provider.getToCurrencies();\n        return to_currencies.includes('*') || to_currencies.includes(client.currency.toLowerCase());\n      }) // Ensure provider supports this user's residency.\n      .filter(function (provider) {\n        var allowed_residencies = provider.getAllowedResidencies();\n        return allowed_residencies.includes('*') || allowed_residencies.includes(client.residence);\n      });\n    }\n  }, {\n    key: \"onramp_popup_modal_title\",\n    get: function get() {\n      if (this.should_show_widget) {\n        return (0,translations_.localize)('Payment channel');\n      } else if (this.selected_provider) {\n        if (this.should_show_dialog) {\n          return (0,translations_.localize)('Our server cannot retrieve an address.');\n        }\n\n        return ' '; // Empty string to render header + close icon.\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"should_show_dialog\",\n    get: function get() {\n      return !!this.api_error;\n    }\n  }, {\n    key: \"onMountOnramp\",\n    value: function onMountOnramp() {\n      var _this2 = this;\n\n      this.disposeThirdPartyJsReaction = (0,external_mobx_.reaction)(function () {\n        return _this2.selected_provider;\n      }, /*#__PURE__*/function () {\n        var _ref3 = on_ramp_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(provider) {\n          var dependencies, _yield$import, loadjs, script_name;\n\n          return regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  if (provider) {\n                    _context2.next = 2;\n                    break;\n                  }\n\n                  return _context2.abrupt(\"return\");\n\n                case 2:\n                  dependencies = provider.getScriptDependencies();\n\n                  if (!(dependencies.length === 0)) {\n                    _context2.next = 5;\n                    break;\n                  }\n\n                  return _context2.abrupt(\"return\");\n\n                case 5:\n                  _context2.next = 7;\n                  return __webpack_require__.e(/* import() | loadjs */ \"loadjs\").then(__webpack_require__.t.bind(__webpack_require__, \"../../../node_modules/loadjs/dist/loadjs.umd.js\", 23));\n\n                case 7:\n                  _yield$import = _context2.sent;\n                  loadjs = _yield$import[\"default\"];\n                  script_name = \"\".concat((0,shared_.getKebabCase)(provider.name), \"-onramp\");\n\n                  if (!loadjs.isDefined(script_name)) {\n                    loadjs(dependencies, script_name, {\n                      error: function error() {\n                        // eslint-disable-next-line no-console\n                        console.warn(\"Dependencies for onramp provider \".concat(provider.name, \" could not be loaded.\"));\n\n                        _this2.setSelectedProvider(null);\n                      }\n                    });\n                  }\n\n                case 11:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        return function (_x) {\n          return _ref3.apply(this, arguments);\n        };\n      }()); // When \"should_show_widget\", attempt to fetch \"selected_provider\"'s \"widget_html\".\n\n      this.disposeGetWidgetHtmlReaction = (0,external_mobx_.reaction)(function () {\n        return _this2.should_show_widget;\n      }, function (should_show_widget) {\n        if (should_show_widget) {\n          if (_this2.is_requesting_widget_html) {\n            return;\n          }\n\n          _this2.setIsRequestingWidgetHtml(true);\n\n          _this2.selected_provider.getWidgetHtml().then(function (widget_html) {\n            if (widget_html) {\n              // Regular providers (iframe/JS embed)\n              _this2.setWidgetHtml(widget_html);\n            } else {\n              // An empty resolve (widget_html) identifies a redirect.\n              _this2.setShouldShowWidget(false);\n            }\n          })[\"catch\"](function (error) {\n            _this2.setWidgetError(error);\n          })[\"finally\"](function () {\n            return _this2.setIsRequestingWidgetHtml(false);\n          });\n        }\n      });\n    }\n  }, {\n    key: \"onUnmountOnramp\",\n    value: function onUnmountOnramp() {\n      if (typeof this.disposeThirdPartyJsReaction === 'function') {\n        this.disposeThirdPartyJsReaction();\n      }\n\n      if (typeof this.disposeGetWidgetHtmlReaction === 'function') {\n        this.disposeGetWidgetHtmlReaction();\n      }\n    }\n  }, {\n    key: \"onClickDisclaimerContinue\",\n    value: function onClickDisclaimerContinue() {\n      this.setShouldShowWidget(true);\n    }\n  }, {\n    key: \"onClickGoToDepositPage\",\n    value: function onClickGoToDepositPage() {\n      this.pollApiForDepositAddress(false);\n      window.open((0,shared_.websiteUrl)() + shared_.routes.cashier_deposit.substring(1));\n    }\n  }, {\n    key: \"pollApiForDepositAddress\",\n    value: function pollApiForDepositAddress(should_allow_empty_address) {\n      var _this3 = this;\n\n      // should_allow_empty_address: API returns empty deposit address for legacy accounts\n      // that have never generated a deposit address. Setting this to \"true\" will allow\n      // the user to be redirected to the Deposit page (where an address will be generated).\n      // Setting this to \"false\" will start polling the API for this deposit address.\n      this.setIsDepositAddressLoading(true);\n      this.setApiError(null);\n      var deposit_address_interval = setInterval(function () {\n        return getDepositAddressFromApi;\n      }, 3000);\n\n      var getDepositAddressFromApi = function getDepositAddressFromApi() {\n        _this3.WS.authorized.cashier('deposit', {\n          provider: 'crypto',\n          type: 'api'\n        }).then(function (response) {\n          var should_clear_interval = false;\n\n          if (response.error) {\n            _this3.setApiError(response.error);\n\n            should_clear_interval = true;\n          } else {\n            var address = response.cashier.deposit.address;\n\n            if (address || should_allow_empty_address) {\n              _this3.setDepositAddress(address);\n\n              should_clear_interval = true;\n            }\n          }\n\n          if (should_clear_interval) {\n            clearInterval(deposit_address_interval);\n\n            _this3.setIsDepositAddressLoading(false);\n          }\n        });\n      };\n\n      getDepositAddressFromApi();\n      setTimeout(function () {\n        clearInterval(deposit_address_interval);\n\n        _this3.setIsDepositAddressLoading(false);\n      }, 30000);\n    }\n  }, {\n    key: \"resetPopup\",\n    value: function resetPopup() {\n      this.setApiError(null);\n      this.setDepositAddress(null);\n      this.setIsDepositAddressLoading(true);\n      this.setSelectedProvider(null);\n      this.setShouldShowWidget(false);\n      this.setWidgetError(null);\n      this.setWidgetHtml(null);\n    }\n  }, {\n    key: \"setApiError\",\n    value: function setApiError(api_error) {\n      this.api_error = api_error;\n    }\n  }, {\n    key: \"setCopyIconRef\",\n    value: function setCopyIconRef(ref) {\n      this.copy_icon_ref = ref;\n    }\n  }, {\n    key: \"setDepositAddress\",\n    value: function setDepositAddress(deposit_address) {\n      this.deposit_address = deposit_address;\n    }\n  }, {\n    key: \"setIsDepositAddressLoading\",\n    value: function setIsDepositAddressLoading(is_loading) {\n      this.is_deposit_address_loading = is_loading;\n    }\n  }, {\n    key: \"setIsOnRampModalOpen\",\n    value: function setIsOnRampModalOpen(is_open) {\n      this.is_onramp_modal_open = is_open;\n    }\n  }, {\n    key: \"setIsRequestingWidgetHtml\",\n    value: function setIsRequestingWidgetHtml(is_requesting_widget_html) {\n      this.is_requesting_widget_html = is_requesting_widget_html;\n    }\n  }, {\n    key: \"setSelectedProvider\",\n    value: function setSelectedProvider(provider) {\n      if (provider) {\n        this.selected_provider = provider;\n        this.setIsOnRampModalOpen(true);\n        this.pollApiForDepositAddress(true);\n      } else {\n        this.setIsOnRampModalOpen(false);\n        this.selected_provider = null;\n      }\n    }\n  }, {\n    key: \"setShouldShowWidget\",\n    value: function setShouldShowWidget(should_show) {\n      this.should_show_widget = should_show;\n    }\n  }, {\n    key: \"setOnrampProviders\",\n    value: function setOnrampProviders(onramp_providers) {\n      this.onramp_providers = onramp_providers.slice();\n    }\n  }, {\n    key: \"setWidgetError\",\n    value: function setWidgetError(widget_error) {\n      this.widget_error = widget_error;\n    }\n  }, {\n    key: \"setWidgetHtml\",\n    value: function setWidgetHtml(widget_html) {\n      this.widget_html = widget_html;\n    }\n  }]);\n\n  return OnRampStore;\n}(BaseStore);\n\n\n;// CONCATENATED MODULE: ./stores/payment-agent-store.js\nfunction payment_agent_store_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction payment_agent_store_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? payment_agent_store_ownKeys(Object(source), !0).forEach(function (key) { payment_agent_store_defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : payment_agent_store_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction payment_agent_store_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction payment_agent_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction payment_agent_store_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { payment_agent_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { payment_agent_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction payment_agent_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction payment_agent_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction payment_agent_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) payment_agent_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) payment_agent_store_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n\n\n\n\n\nvar PaymentAgentStore = /*#__PURE__*/function () {\n  function PaymentAgentStore(_ref) {\n    var _this = this;\n\n    var WS = _ref.WS,\n        root_store = _ref.root_store;\n\n    payment_agent_store_classCallCheck(this, PaymentAgentStore);\n\n    this.list = [];\n    this.agents = [];\n    this.container = constants.containers.payment_agent;\n    this.error = new ErrorStore();\n    this.filtered_list = [];\n    this.is_name_selected = true;\n    this.is_search_loading = false;\n    this.is_withdraw = false;\n    this.is_try_withdraw_successful = false;\n    this.is_withdraw_successful = false;\n    this.confirm = {};\n    this.receipt = {};\n    this.selected_bank = 0;\n    this.supported_banks = [];\n    this.active_tab_index = 0;\n    this.all_payment_agent_list = [];\n    this.search_term = '';\n    this.has_payment_agent_search_warning = false;\n\n    this.resetPaymentAgent = function () {\n      var _this$root_store = _this.root_store,\n          client = _this$root_store.client,\n          modules = _this$root_store.modules;\n      var active_container = modules.cashier.general_store.active_container;\n      var container = constants.map_action[active_container];\n      client.setVerificationCode('', container);\n\n      _this.error.setErrorMessage('');\n\n      _this.setIsWithdraw(false);\n\n      _this.setIsWithdrawSuccessful(false);\n\n      _this.setIsTryWithdrawSuccessful(false);\n\n      _this.setActiveTabIndex(0);\n    };\n\n    (0,external_mobx_.makeObservable)(this, {\n      list: external_mobx_.observable,\n      agents: external_mobx_.observable,\n      container: external_mobx_.observable,\n      error: external_mobx_.observable,\n      filtered_list: external_mobx_.observable,\n      is_name_selected: external_mobx_.observable,\n      is_search_loading: external_mobx_.observable,\n      is_withdraw: external_mobx_.observable,\n      is_try_withdraw_successful: external_mobx_.observable,\n      is_withdraw_successful: external_mobx_.observable,\n      confirm: external_mobx_.observable,\n      receipt: external_mobx_.observable,\n      selected_bank: external_mobx_.observable,\n      supported_banks: external_mobx_.observable,\n      active_tab_index: external_mobx_.observable,\n      all_payment_agent_list: external_mobx_.observable,\n      search_term: external_mobx_.observable,\n      has_payment_agent_search_warning: external_mobx_.observable,\n      setActiveTabIndex: external_mobx_.action.bound,\n      setActiveTab: external_mobx_.action.bound,\n      is_payment_agent_visible: external_mobx_.computed,\n      getPaymentAgentList: external_mobx_.action.bound,\n      getPaymentAgentDetails: external_mobx_.action.bound,\n      addSupportedBank: external_mobx_.action.bound,\n      clearSuppertedBanks: external_mobx_.action.bound,\n      sortSupportedBanks: external_mobx_.action.bound,\n      setList: external_mobx_.action.bound,\n      clearList: external_mobx_.action.bound,\n      setPaymentAgentList: external_mobx_.action.bound,\n      filterPaymentAgentList: external_mobx_.action.bound,\n      setSearchTerm: external_mobx_.action.bound,\n      setIsSearchLoading: external_mobx_.action.bound,\n      setPaymentAgentSearchWarning: external_mobx_.action.bound,\n      onChangePaymentMethod: external_mobx_.action.bound,\n      setIsWithdraw: external_mobx_.action.bound,\n      setIsTryWithdrawSuccessful: external_mobx_.action.bound,\n      setIsWithdrawSuccessful: external_mobx_.action.bound,\n      setConfirmation: external_mobx_.action.bound,\n      setReceipt: external_mobx_.action.bound,\n      addPaymentAgent: external_mobx_.action.bound,\n      onMountPaymentAgentWithdraw: external_mobx_.action.bound,\n      requestTryPaymentAgentWithdraw: external_mobx_.action.bound,\n      resetPaymentAgent: external_mobx_.action.bound,\n      onMountPaymentAgentList: external_mobx_.action.bound,\n      setAllPaymentAgentList: external_mobx_.action.bound,\n      is_payment_agent_visible_in_onboarding: external_mobx_.computed,\n      requestPaymentAgentWithdraw: external_mobx_.action.bound\n    });\n    this.root_store = root_store;\n    this.WS = WS;\n  }\n\n  payment_agent_store_createClass(PaymentAgentStore, [{\n    key: \"setActiveTabIndex\",\n    value: function setActiveTabIndex(index) {\n      this.active_tab_index = index;\n    }\n  }, {\n    key: \"setActiveTab\",\n    value: function setActiveTab(index) {\n      this.setActiveTabIndex(index);\n    }\n  }, {\n    key: \"is_payment_agent_visible\",\n    get: function get() {\n      return !!(this.filtered_list.length || this.agents.length || this.has_payment_agent_search_warning);\n    }\n  }, {\n    key: \"getPaymentAgentList\",\n    value: function () {\n      var _getPaymentAgentList = payment_agent_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _this$root_store$clie, residence, currency;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.WS.wait('get_settings');\n\n              case 2:\n                _this$root_store$clie = this.root_store.client, residence = _this$root_store$clie.residence, currency = _this$root_store$clie.currency;\n                return _context.abrupt(\"return\", this.WS.authorized.paymentAgentList(residence, currency));\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getPaymentAgentList() {\n        return _getPaymentAgentList.apply(this, arguments);\n      }\n\n      return getPaymentAgentList;\n    }()\n  }, {\n    key: \"getPaymentAgentDetails\",\n    value: function () {\n      var _getPaymentAgentDetails = payment_agent_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var _yield$this$WS$author, paymentagent_details;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.WS.authorized.paymentAgentDetails();\n\n              case 2:\n                _yield$this$WS$author = _context2.sent;\n                paymentagent_details = _yield$this$WS$author.paymentagent_details;\n                return _context2.abrupt(\"return\", paymentagent_details);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getPaymentAgentDetails() {\n        return _getPaymentAgentDetails.apply(this, arguments);\n      }\n\n      return getPaymentAgentDetails;\n    }()\n  }, {\n    key: \"addSupportedBank\",\n    value: function addSupportedBank(bank) {\n      var supported_bank_exists = this.supported_banks.find(function (supported_bank) {\n        return supported_bank.value === bank.toLowerCase();\n      });\n\n      if (!supported_bank_exists) {\n        this.supported_banks.push({\n          text: bank,\n          value: bank.toLowerCase()\n        });\n      }\n    }\n  }, {\n    key: \"clearSuppertedBanks\",\n    value: function clearSuppertedBanks() {\n      this.supported_banks = [];\n    }\n  }, {\n    key: \"sortSupportedBanks\",\n    value: function sortSupportedBanks() {\n      // sort supported banks alphabetically by value, the option 'All payment agents' with value 0 should be on top\n      this.supported_banks.replace(this.supported_banks.slice().sort(function (a, b) {\n        if (a.value < b.value) {\n          return -1;\n        }\n\n        if (a.value > b.value) {\n          return 1;\n        }\n\n        return 0;\n      }));\n    }\n  }, {\n    key: \"setList\",\n    value: function setList(pa_list) {\n      this.list.push(pa_list);\n    }\n  }, {\n    key: \"clearList\",\n    value: function clearList() {\n      this.list = [];\n    }\n  }, {\n    key: \"setPaymentAgentList\",\n    value: function () {\n      var _setPaymentAgentList = payment_agent_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(pa_list) {\n        var _this2 = this;\n\n        var setLoading, payment_agent_list, _payment_agent_list$p;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                setLoading = this.root_store.modules.cashier.general_store.setLoading;\n                _context3.t0 = pa_list;\n\n                if (_context3.t0) {\n                  _context3.next = 6;\n                  break;\n                }\n\n                _context3.next = 5;\n                return this.getPaymentAgentList();\n\n              case 5:\n                _context3.t0 = _context3.sent;\n\n              case 6:\n                payment_agent_list = _context3.t0;\n                this.clearList();\n                this.clearSuppertedBanks(); // TODO: Once telephone, url and supported_banks removed from paymentagent_list.list we can remove them and just use the plural ones\n\n                try {\n                  (_payment_agent_list$p = payment_agent_list.paymentagent_list) === null || _payment_agent_list$p === void 0 ? void 0 : _payment_agent_list$p.list.forEach(function (payment_agent) {\n                    _this2.setList({\n                      currency: payment_agent.currencies,\n                      deposit_commission: payment_agent.deposit_commission,\n                      email: payment_agent.email,\n                      further_information: payment_agent.further_information,\n                      max_withdrawal: payment_agent.max_withdrawal,\n                      min_withdrawal: payment_agent.min_withdrawal,\n                      name: payment_agent.name,\n                      paymentagent_loginid: payment_agent.paymentagent_loginid,\n                      phones: (payment_agent === null || payment_agent === void 0 ? void 0 : payment_agent.phone_numbers) || (payment_agent === null || payment_agent === void 0 ? void 0 : payment_agent.telephone),\n                      supported_banks: payment_agent === null || payment_agent === void 0 ? void 0 : payment_agent.supported_payment_methods,\n                      urls: (payment_agent === null || payment_agent === void 0 ? void 0 : payment_agent.urls) || (payment_agent === null || payment_agent === void 0 ? void 0 : payment_agent.url),\n                      withdrawal_commission: payment_agent.withdrawal_commission\n                    });\n\n                    var supported_banks_array = payment_agent === null || payment_agent === void 0 ? void 0 : payment_agent.supported_payment_methods.map(function (bank) {\n                      var payment_method = getNormalizedPaymentMethod(bank.payment_method, constants.payment_methods); //remove Skrill and Neteller from payment methods list (dropdown menu) as per mandate from Paysafe\n\n                      return ['Neteller', 'Skrill'].includes(payment_method) ? '' : payment_method;\n                    }).filter(Boolean);\n                    supported_banks_array.forEach(function (bank) {\n                      return _this2.addSupportedBank(bank);\n                    });\n                  });\n                  (0,shared_.shuffleArray)(this.list);\n                } catch (e) {\n                  setLoading(false); // eslint-disable-next-line no-console\n\n                  console.error(e);\n                }\n\n                this.sortSupportedBanks();\n\n              case 11:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function setPaymentAgentList(_x) {\n        return _setPaymentAgentList.apply(this, arguments);\n      }\n\n      return setPaymentAgentList;\n    }()\n  }, {\n    key: \"filterPaymentAgentList\",\n    value: function filterPaymentAgentList(bank) {\n      var _this3 = this;\n\n      this.setPaymentAgentSearchWarning(false);\n      var common = this.root_store.common;\n      this.filtered_list = [];\n\n      if (bank || this.selected_bank) {\n        this.list.forEach(function (payment_agent) {\n          var supported_banks = payment_agent === null || payment_agent === void 0 ? void 0 : payment_agent.supported_banks;\n\n          if (supported_banks) {\n            var bank_index = supported_banks.map(function (supported_bank) {\n              return getNormalizedPaymentMethod(supported_bank.payment_method, constants.payment_methods).toLowerCase();\n            }).indexOf(bank || _this3.selected_bank);\n            if (bank_index !== -1) _this3.filtered_list.push(payment_agent);\n          }\n        });\n      } else {\n        this.filtered_list = this.list;\n      }\n\n      if (this.search_term) {\n        this.filtered_list = this.filtered_list.filter(function (payment_agent) {\n          return payment_agent.name.toLocaleLowerCase().includes(_this3.search_term.toLocaleLowerCase());\n        });\n\n        if (this.filtered_list.length === 0) {\n          this.setPaymentAgentSearchWarning(true);\n        }\n      }\n\n      this.setIsSearchLoading(false);\n\n      if (!this.is_payment_agent_visible && window.location.pathname.endsWith(shared_.routes.cashier_pa)) {\n        common.routeTo(shared_.routes.cashier_deposit);\n      }\n    }\n  }, {\n    key: \"setSearchTerm\",\n    value: function setSearchTerm(search_term) {\n      this.search_term = search_term;\n    }\n  }, {\n    key: \"setIsSearchLoading\",\n    value: function setIsSearchLoading(value) {\n      this.is_search_loading = value;\n    }\n  }, {\n    key: \"setPaymentAgentSearchWarning\",\n    value: function setPaymentAgentSearchWarning(value) {\n      this.has_payment_agent_search_warning = value;\n    }\n  }, {\n    key: \"onChangePaymentMethod\",\n    value: function onChangePaymentMethod(_ref2) {\n      var target = _ref2.target;\n      var value = target.value === '0' ? parseInt(target.value) : target.value;\n      this.selected_bank = value;\n      this.filterPaymentAgentList(value);\n    }\n  }, {\n    key: \"setIsWithdraw\",\n    value: function setIsWithdraw() {\n      var is_withdraw = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !this.is_withdraw;\n      this.is_withdraw = is_withdraw;\n    }\n  }, {\n    key: \"setIsTryWithdrawSuccessful\",\n    value: function setIsTryWithdrawSuccessful(is_try_withdraw_successful) {\n      this.error.setErrorMessage('');\n      this.is_try_withdraw_successful = is_try_withdraw_successful;\n    }\n  }, {\n    key: \"setIsWithdrawSuccessful\",\n    value: function setIsWithdrawSuccessful(is_withdraw_successful) {\n      this.is_withdraw_successful = is_withdraw_successful;\n    }\n  }, {\n    key: \"setConfirmation\",\n    value: function setConfirmation(_ref3) {\n      var amount = _ref3.amount,\n          currency = _ref3.currency,\n          loginid = _ref3.loginid,\n          payment_agent_name = _ref3.payment_agent_name;\n      this.confirm = {\n        amount: amount,\n        currency: currency,\n        loginid: loginid,\n        payment_agent_name: payment_agent_name\n      };\n    }\n  }, {\n    key: \"setReceipt\",\n    value: function setReceipt(_ref4) {\n      var amount_transferred = _ref4.amount_transferred,\n          payment_agent_email = _ref4.payment_agent_email,\n          payment_agent_id = _ref4.payment_agent_id,\n          payment_agent_name = _ref4.payment_agent_name,\n          payment_agent_phone = _ref4.payment_agent_phone,\n          payment_agent_url = _ref4.payment_agent_url;\n      this.receipt = {\n        amount_transferred: amount_transferred,\n        payment_agent_email: payment_agent_email,\n        payment_agent_id: payment_agent_id,\n        payment_agent_name: payment_agent_name,\n        payment_agent_phone: payment_agent_phone,\n        payment_agent_url: payment_agent_url\n      };\n    }\n  }, {\n    key: \"addPaymentAgent\",\n    value: function addPaymentAgent(payment_agent) {\n      this.agents.push({\n        text: payment_agent.name,\n        value: payment_agent.paymentagent_loginid,\n        max_withdrawal: payment_agent.max_withdrawal,\n        min_withdrawal: payment_agent.min_withdrawal,\n        email: payment_agent.email,\n        phone: payment_agent.phone_numbers,\n        url: payment_agent.urls\n      });\n    }\n  }, {\n    key: \"onMountPaymentAgentWithdraw\",\n    value: function () {\n      var _onMountPaymentAgentWithdraw = payment_agent_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {\n        var _this4 = this;\n\n        var _this$root_store2, common, modules, _modules$cashier$gene, setLoading, onMountCommon, payment_agent_list;\n\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _this$root_store2 = this.root_store, common = _this$root_store2.common, modules = _this$root_store2.modules;\n                _modules$cashier$gene = modules.cashier.general_store, setLoading = _modules$cashier$gene.setLoading, onMountCommon = _modules$cashier$gene.onMountCommon;\n                setLoading(true);\n                this.onRemount = this.onMountPaymentAgentWithdraw;\n                onMountCommon();\n                this.setIsWithdraw(true);\n                this.setIsWithdrawSuccessful(false);\n                this.setReceipt({});\n\n                if (this.agents.length) {\n                  _context4.next = 14;\n                  break;\n                }\n\n                _context4.next = 11;\n                return this.getPaymentAgentList();\n\n              case 11:\n                payment_agent_list = _context4.sent;\n                payment_agent_list.paymentagent_list.list.forEach(function (payment_agent) {\n                  _this4.addPaymentAgent(payment_agent);\n                });\n\n                if (!payment_agent_list.paymentagent_list.list.length && window.location.pathname.endsWith(shared_.routes.cashier_pa)) {\n                  common.routeTo(shared_.routes.cashier_deposit);\n                }\n\n              case 14:\n                setLoading(false);\n\n              case 15:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function onMountPaymentAgentWithdraw() {\n        return _onMountPaymentAgentWithdraw.apply(this, arguments);\n      }\n\n      return onMountPaymentAgentWithdraw;\n    }()\n  }, {\n    key: \"requestTryPaymentAgentWithdraw\",\n    value: function () {\n      var _requestTryPaymentAgentWithdraw = payment_agent_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(_ref5) {\n        var loginid, currency, amount, verification_code, payment_agent_withdraw, selected_agent;\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                loginid = _ref5.loginid, currency = _ref5.currency, amount = _ref5.amount, verification_code = _ref5.verification_code;\n                this.error.setErrorMessage('');\n                _context5.next = 4;\n                return this.WS.authorized.paymentAgentWithdraw({\n                  loginid: loginid,\n                  currency: currency,\n                  amount: amount,\n                  verification_code: verification_code,\n                  dry_run: 1\n                });\n\n              case 4:\n                payment_agent_withdraw = _context5.sent;\n\n                if (+payment_agent_withdraw.paymentagent_withdraw === 2) {\n                  selected_agent = this.agents.find(function (agent) {\n                    return agent.value === loginid;\n                  });\n                  this.setConfirmation({\n                    amount: amount,\n                    currency: currency,\n                    loginid: loginid,\n                    payment_agent_name: (selected_agent === null || selected_agent === void 0 ? void 0 : selected_agent.text) || payment_agent_withdraw.paymentagent_name\n                  });\n                  this.setIsTryWithdrawSuccessful(true);\n                } else {\n                  this.error.setErrorMessage(payment_agent_withdraw.error, this.resetPaymentAgent);\n                }\n\n              case 6:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function requestTryPaymentAgentWithdraw(_x2) {\n        return _requestTryPaymentAgentWithdraw.apply(this, arguments);\n      }\n\n      return requestTryPaymentAgentWithdraw;\n    }()\n  }, {\n    key: \"onMountPaymentAgentList\",\n    value: function () {\n      var _onMountPaymentAgentList = payment_agent_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6() {\n        var _this$root_store$modu, setLoading, onMountCommon;\n\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _this$root_store$modu = this.root_store.modules.cashier.general_store, setLoading = _this$root_store$modu.setLoading, onMountCommon = _this$root_store$modu.onMountCommon;\n                setLoading(true);\n                this.onRemount = this.onMountPaymentAgentList;\n                _context6.next = 5;\n                return onMountCommon();\n\n              case 5:\n                _context6.next = 7;\n                return this.getPaymentAgentList();\n\n              case 7:\n                setLoading(false);\n\n              case 8:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function onMountPaymentAgentList() {\n        return _onMountPaymentAgentList.apply(this, arguments);\n      }\n\n      return onMountPaymentAgentList;\n    }()\n  }, {\n    key: \"getAllPaymentAgentList\",\n    value: function () {\n      var _getAllPaymentAgentList = payment_agent_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7() {\n        return regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.next = 2;\n                return this.WS.wait('get_settings');\n\n              case 2:\n                return _context7.abrupt(\"return\", this.WS.allPaymentAgentList(this.root_store.client.residence));\n\n              case 3:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function getAllPaymentAgentList() {\n        return _getAllPaymentAgentList.apply(this, arguments);\n      }\n\n      return getAllPaymentAgentList;\n    }()\n  }, {\n    key: \"setAllPaymentAgentList\",\n    value: function setAllPaymentAgentList(list) {\n      this.all_payment_agent_list = list;\n    }\n  }, {\n    key: \"is_payment_agent_visible_in_onboarding\",\n    get: function get() {\n      var _this$all_payment_age, _this$all_payment_age2, _this$all_payment_age3;\n\n      return !!((_this$all_payment_age = this.all_payment_agent_list) !== null && _this$all_payment_age !== void 0 && (_this$all_payment_age2 = _this$all_payment_age.paymentagent_list) !== null && _this$all_payment_age2 !== void 0 && (_this$all_payment_age3 = _this$all_payment_age2.list) !== null && _this$all_payment_age3 !== void 0 && _this$all_payment_age3.length);\n    }\n  }, {\n    key: \"requestPaymentAgentWithdraw\",\n    value: function () {\n      var _requestPaymentAgentWithdraw = payment_agent_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8(_ref6) {\n        var loginid, currency, amount, verification_code, payment_agent_withdraw, selected_agent;\n        return regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                loginid = _ref6.loginid, currency = _ref6.currency, amount = _ref6.amount, verification_code = _ref6.verification_code;\n                this.error.setErrorMessage('');\n                _context8.next = 4;\n                return this.WS.authorized.paymentAgentWithdraw({\n                  loginid: loginid,\n                  currency: currency,\n                  amount: amount,\n                  verification_code: verification_code\n                });\n\n              case 4:\n                payment_agent_withdraw = _context8.sent;\n\n                if (+payment_agent_withdraw.paymentagent_withdraw === 1) {\n                  selected_agent = this.agents.find(function (agent) {\n                    return agent.value === loginid;\n                  });\n                  this.setReceipt(payment_agent_store_objectSpread({\n                    amount_transferred: (0,shared_.formatMoney)(currency, amount, true)\n                  }, selected_agent && {\n                    payment_agent_email: selected_agent.email,\n                    payment_agent_id: selected_agent.value,\n                    payment_agent_name: selected_agent.text,\n                    payment_agent_phone: selected_agent.phone,\n                    payment_agent_url: selected_agent.url\n                  }));\n                  this.setIsWithdrawSuccessful(true);\n                  this.setIsTryWithdrawSuccessful(false);\n                  this.setConfirmation({});\n                } else {\n                  this.error.setErrorMessage(payment_agent_withdraw.error, this.resetPaymentAgent);\n                }\n\n              case 6:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function requestPaymentAgentWithdraw(_x3) {\n        return _requestPaymentAgentWithdraw.apply(this, arguments);\n      }\n\n      return requestPaymentAgentWithdraw;\n    }()\n  }]);\n\n  return PaymentAgentStore;\n}();\n\n\n;// CONCATENATED MODULE: ./stores/payment-agent-transfer-store.js\nfunction payment_agent_transfer_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction payment_agent_transfer_store_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { payment_agent_transfer_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { payment_agent_transfer_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction payment_agent_transfer_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction payment_agent_transfer_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction payment_agent_transfer_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) payment_agent_transfer_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) payment_agent_transfer_store_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n\n\n\n\nvar PaymentAgentTransferStore = /*#__PURE__*/function () {\n  function PaymentAgentTransferStore(_ref) {\n    var _this = this;\n\n    var WS = _ref.WS,\n        root_store = _ref.root_store;\n\n    payment_agent_transfer_store_classCallCheck(this, PaymentAgentTransferStore);\n\n    this.container = constants.containers.payment_agent_transfer;\n    this.error = new ErrorStore();\n    this.is_payment_agent = false;\n    this.is_try_transfer_successful = false;\n    this.is_transfer_successful = false;\n    this.confirm = {};\n    this.receipt = {};\n    this.transfer_limit = {};\n\n    this.requestTryPaymentAgentTransfer = /*#__PURE__*/function () {\n      var _ref3 = payment_agent_transfer_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(_ref2) {\n        var amount, currency, description, transfer_to, payment_agent_transfer;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                amount = _ref2.amount, currency = _ref2.currency, description = _ref2.description, transfer_to = _ref2.transfer_to;\n\n                _this.error.setErrorMessage('');\n\n                _context.next = 4;\n                return _this.WS.authorized.paymentAgentTransfer({\n                  amount: amount,\n                  currency: currency,\n                  description: description,\n                  transfer_to: transfer_to,\n                  dry_run: 1\n                });\n\n              case 4:\n                payment_agent_transfer = _context.sent;\n\n                if (+payment_agent_transfer.paymentagent_transfer === 2) {\n                  // show confirmation screen\n                  _this.setConfirmationPaymentAgentTransfer({\n                    client_id: transfer_to,\n                    client_name: payment_agent_transfer.client_to_full_name,\n                    amount: amount,\n                    description: description\n                  });\n\n                  _this.setIsTryTransferSuccessful(true);\n                } else {\n                  _this.error.setErrorMessage(payment_agent_transfer.error, _this.resetPaymentAgentTransfer);\n                }\n\n                return _context.abrupt(\"return\", payment_agent_transfer);\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    this.requestPaymentAgentTransfer = /*#__PURE__*/function () {\n      var _ref5 = payment_agent_transfer_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(_ref4) {\n        var amount, currency, description, transfer_to, payment_agent_transfer;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                amount = _ref4.amount, currency = _ref4.currency, description = _ref4.description, transfer_to = _ref4.transfer_to;\n\n                _this.error.setErrorMessage('');\n\n                _context2.next = 4;\n                return _this.WS.authorized.paymentAgentTransfer({\n                  amount: amount,\n                  currency: currency,\n                  description: description,\n                  transfer_to: transfer_to\n                });\n\n              case 4:\n                payment_agent_transfer = _context2.sent;\n\n                if (+payment_agent_transfer.paymentagent_transfer === 1) {\n                  _this.setReceiptPaymentAgentTransfer({\n                    amount_transferred: amount,\n                    client_id: transfer_to,\n                    client_name: payment_agent_transfer.client_to_full_name\n                  });\n\n                  _this.setIsTransferSuccessful(true);\n\n                  _this.setIsTryTransferSuccessful(false);\n\n                  _this.setConfirmationPaymentAgentTransfer({});\n                } else {\n                  _this.error.setErrorMessage(payment_agent_transfer.error, _this.resetPaymentAgentTransfer);\n                }\n\n                return _context2.abrupt(\"return\", payment_agent_transfer);\n\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x2) {\n        return _ref5.apply(this, arguments);\n      };\n    }();\n\n    this.resetPaymentAgentTransfer = function () {\n      _this.setIsTransferSuccessful(false);\n\n      _this.error.setErrorMessage('');\n    };\n\n    (0,external_mobx_.makeObservable)(this, {\n      container: external_mobx_.observable,\n      error: external_mobx_.observable,\n      is_payment_agent: external_mobx_.observable,\n      is_try_transfer_successful: external_mobx_.observable,\n      is_transfer_successful: external_mobx_.observable,\n      confirm: external_mobx_.observable,\n      receipt: external_mobx_.observable,\n      transfer_limit: external_mobx_.observable,\n      is_payment_agent_transfer_visible: external_mobx_.computed,\n      setIsPaymentAgent: external_mobx_.action.bound,\n      setIsTryTransferSuccessful: external_mobx_.action.bound,\n      setIsTransferSuccessful: external_mobx_.action.bound,\n      setConfirmationPaymentAgentTransfer: external_mobx_.action.bound,\n      setReceiptPaymentAgentTransfer: external_mobx_.action.bound,\n      setMinMaxPaymentAgentTransfer: external_mobx_.action.bound,\n      onMountPaymentAgentTransfer: external_mobx_.action.bound,\n      requestTryPaymentAgentTransfer: external_mobx_.action.bound,\n      requestPaymentAgentTransfer: external_mobx_.action.bound,\n      resetPaymentAgentTransfer: external_mobx_.action.bound\n    });\n    this.root_store = root_store;\n    this.WS = WS;\n  }\n\n  payment_agent_transfer_store_createClass(PaymentAgentTransferStore, [{\n    key: \"is_payment_agent_transfer_visible\",\n    get: function get() {\n      return this.is_payment_agent;\n    }\n  }, {\n    key: \"checkIsPaymentAgent\",\n    value: function () {\n      var _checkIsPaymentAgent = payment_agent_transfer_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var _get_settings$is_auth;\n\n        var get_settings;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.WS.authorized.storage.getSettings();\n\n              case 2:\n                get_settings = _context3.sent.get_settings;\n                this.setIsPaymentAgent((_get_settings$is_auth = get_settings === null || get_settings === void 0 ? void 0 : get_settings.is_authenticated_payment_agent) !== null && _get_settings$is_auth !== void 0 ? _get_settings$is_auth : false);\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function checkIsPaymentAgent() {\n        return _checkIsPaymentAgent.apply(this, arguments);\n      }\n\n      return checkIsPaymentAgent;\n    }()\n  }, {\n    key: \"setIsPaymentAgent\",\n    value: function setIsPaymentAgent(is_payment_agent) {\n      if (!is_payment_agent && window.location.pathname.endsWith(shared_.routes.cashier_pa_transfer)) {\n        this.root_store.common.routeTo(shared_.routes.cashier_deposit);\n      }\n\n      this.is_payment_agent = !!is_payment_agent;\n    }\n  }, {\n    key: \"setIsTryTransferSuccessful\",\n    value: function setIsTryTransferSuccessful(is_try_transfer_successful) {\n      this.error.setErrorMessage('');\n      this.is_try_transfer_successful = is_try_transfer_successful;\n    }\n  }, {\n    key: \"setIsTransferSuccessful\",\n    value: function setIsTransferSuccessful(is_transfer_successful) {\n      this.is_transfer_successful = is_transfer_successful;\n    }\n  }, {\n    key: \"setConfirmationPaymentAgentTransfer\",\n    value: function setConfirmationPaymentAgentTransfer(_ref6) {\n      var amount = _ref6.amount,\n          client_id = _ref6.client_id,\n          client_name = _ref6.client_name,\n          description = _ref6.description;\n      this.confirm = {\n        amount: amount,\n        client_id: client_id,\n        client_name: client_name,\n        description: description\n      };\n    }\n  }, {\n    key: \"setReceiptPaymentAgentTransfer\",\n    value: function setReceiptPaymentAgentTransfer(_ref7) {\n      var amount_transferred = _ref7.amount_transferred,\n          client_id = _ref7.client_id,\n          client_name = _ref7.client_name;\n      this.receipt = {\n        amount_transferred: amount_transferred,\n        client_id: client_id,\n        client_name: client_name\n      };\n    }\n  }, {\n    key: \"getCurrentPaymentAgent\",\n    value: function () {\n      var _getCurrentPaymentAgent = payment_agent_transfer_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(response_payment_agent) {\n        var _this$root_store, client, modules, payment_agent_listed, current_payment_agent;\n\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _this$root_store = this.root_store, client = _this$root_store.client, modules = _this$root_store.modules;\n                payment_agent_listed = response_payment_agent.paymentagent_list.list.find(function (agent) {\n                  return agent.paymentagent_loginid === client.loginid;\n                });\n                _context4.t0 = payment_agent_listed;\n\n                if (_context4.t0) {\n                  _context4.next = 7;\n                  break;\n                }\n\n                _context4.next = 6;\n                return modules.cashier.payment_agent.getPaymentAgentDetails();\n\n              case 6:\n                _context4.t0 = _context4.sent;\n\n              case 7:\n                current_payment_agent = _context4.t0;\n                return _context4.abrupt(\"return\", current_payment_agent !== null && current_payment_agent !== void 0 ? current_payment_agent : {});\n\n              case 9:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function getCurrentPaymentAgent(_x3) {\n        return _getCurrentPaymentAgent.apply(this, arguments);\n      }\n\n      return getCurrentPaymentAgent;\n    }()\n  }, {\n    key: \"setMinMaxPaymentAgentTransfer\",\n    value: function setMinMaxPaymentAgentTransfer(_ref8) {\n      var min_withdrawal = _ref8.min_withdrawal,\n          max_withdrawal = _ref8.max_withdrawal;\n      this.transfer_limit = {\n        min: min_withdrawal,\n        max: max_withdrawal\n      };\n    }\n  }, {\n    key: \"onMountPaymentAgentTransfer\",\n    value: function () {\n      var _onMountPaymentAgentTransfer = payment_agent_transfer_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5() {\n        var _this$root_store$modu, general_store, payment_agent, response, current_payment_agent;\n\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _this$root_store$modu = this.root_store.modules.cashier, general_store = _this$root_store$modu.general_store, payment_agent = _this$root_store$modu.payment_agent;\n                general_store.setLoading(true);\n                this.onRemount = this.onMountPaymentAgentTransfer;\n                _context5.next = 5;\n                return general_store.onMountCommon();\n\n              case 5:\n                if (this.transfer_limit.min_withdrawal) {\n                  _context5.next = 13;\n                  break;\n                }\n\n                _context5.next = 8;\n                return payment_agent.getPaymentAgentList();\n\n              case 8:\n                response = _context5.sent;\n                _context5.next = 11;\n                return this.getCurrentPaymentAgent(response);\n\n              case 11:\n                current_payment_agent = _context5.sent;\n                this.setMinMaxPaymentAgentTransfer(current_payment_agent);\n\n              case 13:\n                general_store.setLoading(false);\n\n              case 14:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function onMountPaymentAgentTransfer() {\n        return _onMountPaymentAgentTransfer.apply(this, arguments);\n      }\n\n      return onMountPaymentAgentTransfer;\n    }()\n  }]);\n\n  return PaymentAgentTransferStore;\n}();\n\n\n;// CONCATENATED MODULE: ./stores/transaction-history-store.js\nfunction transaction_history_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction transaction_history_store_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { transaction_history_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { transaction_history_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction transaction_history_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction transaction_history_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction transaction_history_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) transaction_history_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) transaction_history_store_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n\n\nvar TransactionHistoryStore = /*#__PURE__*/function () {\n  function TransactionHistoryStore(_ref) {\n    var WS = _ref.WS,\n        root_store = _ref.root_store;\n\n    transaction_history_store_classCallCheck(this, TransactionHistoryStore);\n\n    this.crypto_transactions = [];\n    this.is_crypto_transactions_cancel_modal_visible = false;\n    this.is_crypto_transactions_status_modal_visible = false;\n    this.is_crypto_transactions_visible = false;\n    this.is_loading = false;\n    this.selected_crypto_transaction_id = '';\n    this.selected_crypto_status = '';\n    this.selected_crypto_status_description = '';\n    (0,external_mobx_.makeObservable)(this, {\n      crypto_transactions: external_mobx_.observable,\n      is_crypto_transactions_cancel_modal_visible: external_mobx_.observable,\n      is_crypto_transactions_status_modal_visible: external_mobx_.observable,\n      is_crypto_transactions_visible: external_mobx_.observable,\n      is_loading: external_mobx_.observable,\n      selected_crypto_transaction_id: external_mobx_.observable,\n      selected_crypto_status: external_mobx_.observable,\n      selected_crypto_status_description: external_mobx_.observable,\n      onMount: external_mobx_.action.bound,\n      unsubscribeCryptoTransactions: external_mobx_.action.bound,\n      getCryptoTransactions: external_mobx_.action.bound,\n      setCryptoTransactionsHistory: external_mobx_.action.bound,\n      updateCryptoTransactions: external_mobx_.action.bound,\n      sortCryptoTransactions: external_mobx_.action.bound,\n      cancelCryptoTransaction: external_mobx_.action.bound,\n      setSelectedCryptoTransactionId: external_mobx_.action.bound,\n      setIsCryptoTransactionsCancelModalVisible: external_mobx_.action.bound,\n      showCryptoTransactionsCancelModal: external_mobx_.action.bound,\n      hideCryptoTransactionsCancelModal: external_mobx_.action.bound,\n      setSelectedCryptoStatus: external_mobx_.action.bound,\n      setSelectedCryptoStatusDescription: external_mobx_.action.bound,\n      setIsCryptoTransactionsStatusModalVisible: external_mobx_.action.bound,\n      showCryptoTransactionsStatusModal: external_mobx_.action.bound,\n      hideCryptoTransactionsStatusModal: external_mobx_.action.bound,\n      setLoading: external_mobx_.action.bound,\n      setIsCryptoTransactionsVisible: external_mobx_.action.bound\n    });\n    this.root_store = root_store;\n    this.WS = WS;\n  }\n\n  transaction_history_store_createClass(TransactionHistoryStore, [{\n    key: \"onMount\",\n    value: function () {\n      var _onMount = transaction_history_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _this$root_store$clie, currency, switched, is_crypto;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$root_store$clie = this.root_store.client, currency = _this$root_store$clie.currency, switched = _this$root_store$clie.switched;\n                is_crypto = !!currency && (0,shared_.isCryptocurrency)(currency);\n\n                if (!(is_crypto && !switched)) {\n                  _context.next = 9;\n                  break;\n                }\n\n                this.setLoading(true);\n                _context.next = 6;\n                return this.unsubscribeCryptoTransactions();\n\n              case 6:\n                _context.next = 8;\n                return this.getCryptoTransactions();\n\n              case 8:\n                this.setLoading(false);\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function onMount() {\n        return _onMount.apply(this, arguments);\n      }\n\n      return onMount;\n    }()\n  }, {\n    key: \"unsubscribeCryptoTransactions\",\n    value: function () {\n      var _unsubscribeCryptoTransactions = transaction_history_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var _this = this;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.WS.authorized.cashierPayments({\n                  provider: 'crypto',\n                  transaction_type: 'all'\n                }).then(function (response) {\n                  if (!response.error) {\n                    var crypto = response.cashier_payments.crypto;\n\n                    _this.setCryptoTransactionsHistory(crypto);\n                  }\n                });\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function unsubscribeCryptoTransactions() {\n        return _unsubscribeCryptoTransactions.apply(this, arguments);\n      }\n\n      return unsubscribeCryptoTransactions;\n    }()\n  }, {\n    key: \"getCryptoTransactions\",\n    value: function () {\n      var _getCryptoTransactions = transaction_history_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var _this2 = this;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.WS.subscribeCashierPayments(function (response) {\n                  if (!response.error) {\n                    var crypto = response.cashier_payments.crypto;\n\n                    _this2.updateCryptoTransactions(crypto);\n                  }\n                });\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getCryptoTransactions() {\n        return _getCryptoTransactions.apply(this, arguments);\n      }\n\n      return getCryptoTransactions;\n    }()\n  }, {\n    key: \"setCryptoTransactionsHistory\",\n    value: function setCryptoTransactionsHistory(transactions) {\n      this.crypto_transactions = transactions;\n      this.sortCryptoTransactions();\n    }\n  }, {\n    key: \"updateCryptoTransactions\",\n    value: function updateCryptoTransactions(transactions) {\n      var _this3 = this;\n\n      transactions.forEach(function (transaction) {\n        var index = _this3.crypto_transactions.findIndex(function (crypto) {\n          return crypto.id === transaction.id;\n        });\n\n        if (index === -1) {\n          _this3.crypto_transactions.push(transaction);\n        } else {\n          Object.assign(_this3.crypto_transactions[index], transaction);\n        }\n      });\n      this.sortCryptoTransactions();\n    }\n  }, {\n    key: \"sortCryptoTransactions\",\n    value: function sortCryptoTransactions() {\n      this.crypto_transactions.replace(this.crypto_transactions.slice().sort(function (a, b) {\n        return b.submit_date - a.submit_date;\n      }));\n    }\n  }, {\n    key: \"cancelCryptoTransaction\",\n    value: function () {\n      var _cancelCryptoTransaction = transaction_history_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(transaction_id) {\n        var _this4 = this;\n\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.WS.cancelCryptoTransaction(transaction_id).then(function (response) {\n                  if (!response.error) {\n                    _this4.setSelectedCryptoTransactionId('');\n\n                    _this4.setIsCryptoTransactionsCancelModalVisible(false);\n\n                    return Promise.resolve(response);\n                  }\n\n                  return Promise.reject(response.error);\n                });\n\n              case 2:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function cancelCryptoTransaction(_x) {\n        return _cancelCryptoTransaction.apply(this, arguments);\n      }\n\n      return cancelCryptoTransaction;\n    }()\n  }, {\n    key: \"setSelectedCryptoTransactionId\",\n    value: function setSelectedCryptoTransactionId(id) {\n      this.selected_crypto_transaction_id = id;\n    }\n  }, {\n    key: \"setIsCryptoTransactionsCancelModalVisible\",\n    value: function setIsCryptoTransactionsCancelModalVisible(is_visible) {\n      this.is_crypto_transactions_cancel_modal_visible = is_visible;\n    }\n  }, {\n    key: \"showCryptoTransactionsCancelModal\",\n    value: function showCryptoTransactionsCancelModal(id) {\n      this.setSelectedCryptoTransactionId(id);\n      this.setIsCryptoTransactionsCancelModalVisible(true);\n    }\n  }, {\n    key: \"hideCryptoTransactionsCancelModal\",\n    value: function hideCryptoTransactionsCancelModal() {\n      this.setSelectedCryptoTransactionId('');\n      this.setIsCryptoTransactionsCancelModalVisible(false);\n    }\n  }, {\n    key: \"setSelectedCryptoStatus\",\n    value: function setSelectedCryptoStatus(status) {\n      this.selected_crypto_status = status;\n    }\n  }, {\n    key: \"setSelectedCryptoStatusDescription\",\n    value: function setSelectedCryptoStatusDescription(description) {\n      this.selected_crypto_status_description = description;\n    }\n  }, {\n    key: \"setIsCryptoTransactionsStatusModalVisible\",\n    value: function setIsCryptoTransactionsStatusModalVisible(is_visible) {\n      this.is_crypto_transactions_status_modal_visible = is_visible;\n    }\n  }, {\n    key: \"showCryptoTransactionsStatusModal\",\n    value: function showCryptoTransactionsStatusModal(description, name) {\n      this.setSelectedCryptoStatusDescription(description);\n      this.setSelectedCryptoStatus(name);\n      this.setIsCryptoTransactionsStatusModalVisible(true);\n    }\n  }, {\n    key: \"hideCryptoTransactionsStatusModal\",\n    value: function hideCryptoTransactionsStatusModal() {\n      this.setIsCryptoTransactionsStatusModalVisible(false);\n    }\n  }, {\n    key: \"setLoading\",\n    value: function setLoading(is_loading) {\n      this.is_loading = is_loading;\n    }\n  }, {\n    key: \"setIsCryptoTransactionsVisible\",\n    value: function setIsCryptoTransactionsVisible(is_visible) {\n      this.is_crypto_transactions_visible = is_visible;\n    }\n  }]);\n\n  return TransactionHistoryStore;\n}();\n\n\n;// CONCATENATED MODULE: ./stores/withdraw-store.js\nfunction withdraw_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction withdraw_store_asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { withdraw_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { withdraw_store_asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction withdraw_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction withdraw_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction withdraw_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) withdraw_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) withdraw_store_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\n\n\n\n\n\n\n\nvar WithdrawStore = /*#__PURE__*/function () {\n  function WithdrawStore(_ref) {\n    var WS = _ref.WS,\n        root_store = _ref.root_store;\n\n    withdraw_store_classCallCheck(this, WithdrawStore);\n\n    this.blockchain_address = '';\n    this.container = constants.containers.withdraw;\n    this.error = new ErrorStore();\n    this.is_10k_withdrawal_limit_reached = undefined;\n    this.is_withdraw_confirmed = false;\n    this.withdraw_amount = '';\n    this.max_withdraw_amount = 0;\n    this.crypto_config = {};\n    (0,external_mobx_.makeObservable)(this, {\n      blockchain_address: external_mobx_.observable,\n      container: external_mobx_.observable,\n      error: external_mobx_.observable,\n      is_10k_withdrawal_limit_reached: external_mobx_.observable,\n      is_withdraw_confirmed: external_mobx_.observable,\n      withdraw_amount: external_mobx_.observable,\n      max_withdraw_amount: external_mobx_.observable,\n      crypto_config: external_mobx_.observable,\n      setIsWithdrawConfirmed: external_mobx_.action.bound,\n      setWithdrawAmount: external_mobx_.action.bound,\n      requestWithdraw: external_mobx_.action.bound,\n      saveWithdraw: external_mobx_.action.bound,\n      resetWithrawForm: external_mobx_.action.bound,\n      setBlockchainAddress: external_mobx_.action.bound,\n      onMountWithdraw: external_mobx_.action.bound,\n      onMountCryptoWithdraw: external_mobx_.action.bound,\n      is_withdrawal_locked: external_mobx_.computed,\n      setMaxWithdrawAmount: external_mobx_.action.bound,\n      check10kLimit: external_mobx_.action.bound,\n      set10kLimitation: external_mobx_.action.bound,\n      setCryptoConfig: external_mobx_.action.bound,\n      setWithdrawPercentageSelectorResult: external_mobx_.action.bound,\n      validateWithdrawFromAmount: external_mobx_.action.bound,\n      validateWithdrawToAmount: external_mobx_.action.bound,\n      account_platform_icon: external_mobx_.computed\n    });\n    this.root_store = root_store;\n    this.WS = WS;\n  }\n\n  withdraw_store_createClass(WithdrawStore, [{\n    key: \"setIsWithdrawConfirmed\",\n    value: function setIsWithdrawConfirmed(is_withdraw_confirmed) {\n      var converter_from_amount = this.root_store.modules.cashier.crypto_fiat_converter.converter_from_amount;\n      this.is_withdraw_confirmed = is_withdraw_confirmed;\n      if (is_withdraw_confirmed) this.setWithdrawAmount(converter_from_amount);\n\n      if (!is_withdraw_confirmed) {\n        var _this$root_store = this.root_store,\n            client = _this$root_store.client,\n            modules = _this$root_store.modules;\n        var active_container = modules.cashier.general_store.active_container;\n        var container = constants.map_action[active_container];\n        client.setVerificationCode('', container);\n      }\n    }\n  }, {\n    key: \"setWithdrawAmount\",\n    value: function setWithdrawAmount(amount) {\n      this.withdraw_amount = amount;\n    }\n  }, {\n    key: \"requestWithdraw\",\n    value: function () {\n      var _requestWithdraw = withdraw_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(verification_code) {\n        var _this = this;\n\n        var _this$root_store2, client, modules, crypto_fiat_converter;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$root_store2 = this.root_store, client = _this$root_store2.client, modules = _this$root_store2.modules;\n                crypto_fiat_converter = modules.cashier.crypto_fiat_converter;\n\n                if (client.is_logged_in) {\n                  _context.next = 4;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 4:\n                if (crypto_fiat_converter.converter_from_amount) {\n                  _context.next = 7;\n                  break;\n                }\n\n                crypto_fiat_converter.setConverterFromError((0,translations_.localize)('This field is required.'));\n                return _context.abrupt(\"return\");\n\n              case 7:\n                _context.next = 9;\n                return this.WS.cryptoWithdraw({\n                  address: this.blockchain_address,\n                  amount: +crypto_fiat_converter.converter_from_amount,\n                  verification_code: verification_code,\n                  dry_run: 1\n                }).then(function (response) {\n                  if (response.error) {\n                    _this.error.setErrorMessage({\n                      code: 'CryptoWithdrawalError',\n                      message: response.error.message\n                    });\n\n                    _this.setCryptoConfig().then(function () {\n                      return _this.validateWithdrawFromAmount();\n                    });\n                  } else {\n                    _this.saveWithdraw(verification_code);\n                  }\n                });\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function requestWithdraw(_x) {\n        return _requestWithdraw.apply(this, arguments);\n      }\n\n      return requestWithdraw;\n    }()\n  }, {\n    key: \"saveWithdraw\",\n    value: function () {\n      var _saveWithdraw = withdraw_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(verification_code) {\n        var _this2 = this;\n\n        var converter_from_amount;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                converter_from_amount = this.root_store.modules.cashier.crypto_fiat_converter.converter_from_amount;\n                this.error.setErrorMessage('');\n                _context2.next = 4;\n                return this.WS.cryptoWithdraw({\n                  address: this.blockchain_address,\n                  amount: +converter_from_amount,\n                  verification_code: verification_code\n                }).then(function (response) {\n                  if (response.error) {\n                    _this2.error.setErrorMessage(response.error);\n\n                    if (verification_code) {\n                      var _this2$root_store = _this2.root_store,\n                          client = _this2$root_store.client,\n                          modules = _this2$root_store.modules;\n                      var active_container = modules.cashier.general_store.active_container;\n                      var container = constants.map_action[active_container];\n                      client.setVerificationCode('', container);\n                    }\n\n                    _this2.resetWithrawForm();\n                  } else {\n                    _this2.setIsWithdrawConfirmed(true);\n                  }\n                });\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function saveWithdraw(_x2) {\n        return _saveWithdraw.apply(this, arguments);\n      }\n\n      return saveWithdraw;\n    }()\n  }, {\n    key: \"resetWithrawForm\",\n    value: function resetWithrawForm() {\n      var _this$root_store$modu = this.root_store.modules.cashier.crypto_fiat_converter,\n          setConverterFromAmount = _this$root_store$modu.setConverterFromAmount,\n          setConverterToAmount = _this$root_store$modu.setConverterToAmount;\n      var _this$root_store3 = this.root_store,\n          client = _this$root_store3.client,\n          modules = _this$root_store3.modules;\n      var active_container = modules.cashier.general_store.active_container;\n      var container = constants.map_action[active_container];\n      this.setBlockchainAddress('');\n      setConverterFromAmount('');\n      setConverterToAmount('');\n      client.setVerificationCode('', container);\n    }\n  }, {\n    key: \"setBlockchainAddress\",\n    value: function setBlockchainAddress(address) {\n      this.blockchain_address = address;\n    }\n  }, {\n    key: \"willMountWithdraw\",\n    value: function willMountWithdraw(verification_code) {\n      if (this && this.root_store && verification_code) {\n        var _this$root_store4 = this.root_store,\n            client = _this$root_store4.client,\n            modules = _this$root_store4.modules;\n        var active_container = modules.cashier.general_store.active_container;\n        var container = constants.map_action[active_container];\n        client.setVerificationCode('', container);\n      }\n    }\n  }, {\n    key: \"onMountWithdraw\",\n    value: function () {\n      var _onMountWithdraw = withdraw_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(verification_code) {\n        var _this$root_store5, client, modules, _modules$cashier$gene, active_container, is_crypto, onMountCommon, setLoading, setOnRemount, _modules$cashier$ifra, checkIframeLoaded, clearTimeoutCashierUrl, clearIframe, is_session_timeout, setContainerHeight, setIframeUrl, setSessionTimeout, setTimeoutCashierUrl, is_virtual, current_container, response_cashier, container;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _this$root_store5 = this.root_store, client = _this$root_store5.client, modules = _this$root_store5.modules;\n                _modules$cashier$gene = modules.cashier.general_store, active_container = _modules$cashier$gene.active_container, is_crypto = _modules$cashier$gene.is_crypto, onMountCommon = _modules$cashier$gene.onMountCommon, setLoading = _modules$cashier$gene.setLoading, setOnRemount = _modules$cashier$gene.setOnRemount;\n                _modules$cashier$ifra = modules.cashier.iframe, checkIframeLoaded = _modules$cashier$ifra.checkIframeLoaded, clearTimeoutCashierUrl = _modules$cashier$ifra.clearTimeoutCashierUrl, clearIframe = _modules$cashier$ifra.clearIframe, is_session_timeout = _modules$cashier$ifra.is_session_timeout, setContainerHeight = _modules$cashier$ifra.setContainerHeight, setIframeUrl = _modules$cashier$ifra.setIframeUrl, setSessionTimeout = _modules$cashier$ifra.setSessionTimeout, setTimeoutCashierUrl = _modules$cashier$ifra.setTimeoutCashierUrl;\n                is_virtual = client.is_virtual;\n                current_container = active_container;\n                setOnRemount(this.onMountWithdraw);\n                _context3.next = 8;\n                return onMountCommon();\n\n              case 8:\n                this.error.setErrorMessage('');\n                setContainerHeight(0);\n                clearIframe();\n                setLoading(true);\n\n                if (is_session_timeout) {\n                  _context3.next = 15;\n                  break;\n                }\n\n                checkIframeLoaded();\n                return _context3.abrupt(\"return\");\n\n              case 15:\n                // if session has timed out reset everything\n                setIframeUrl('');\n\n                if (!(!verification_code || is_virtual)) {\n                  _context3.next = 19;\n                  break;\n                }\n\n                setLoading(false); // if virtual, clear everything and don't proceed further\n                // if no verification code, we should request again\n\n                return _context3.abrupt(\"return\");\n\n              case 19:\n                _context3.next = 21;\n                return this.WS.authorized.cashier(active_container, {\n                  verification_code: verification_code\n                });\n\n              case 21:\n                response_cashier = _context3.sent;\n\n                if (!(current_container !== active_container)) {\n                  _context3.next = 25;\n                  break;\n                }\n\n                setLoading(false);\n                return _context3.abrupt(\"return\");\n\n              case 25:\n                if (!response_cashier.error) {\n                  _context3.next = 33;\n                  break;\n                }\n\n                this.error.handleCashierError(response_cashier.error);\n                setLoading(false);\n                setSessionTimeout(true);\n                clearTimeoutCashierUrl();\n\n                if (verification_code) {\n                  container = constants.map_action[active_container];\n                  client.setVerificationCode('', container);\n                }\n\n                _context3.next = 43;\n                break;\n\n              case 33:\n                if (!is_crypto) {\n                  _context3.next = 37;\n                  break;\n                }\n\n                setLoading(false);\n                _context3.next = 43;\n                break;\n\n              case 37:\n                _context3.next = 39;\n                return checkIframeLoaded();\n\n              case 39:\n                setLoading(false);\n                setIframeUrl(response_cashier.cashier);\n                setSessionTimeout(false);\n                setTimeoutCashierUrl(true);\n\n              case 43:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function onMountWithdraw(_x3) {\n        return _onMountWithdraw.apply(this, arguments);\n      }\n\n      return onMountWithdraw;\n    }()\n  }, {\n    key: \"onMountCryptoWithdraw\",\n    value: function () {\n      var _onMountCryptoWithdraw = withdraw_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(verification_code) {\n        var _response_cashier$err;\n\n        var _this$root_store$modu2, crypto_fiat_converter, general_store, iframe, str_reg_exp, response_cashier, _this$root_store6, client, modules, active_container, container;\n\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _this$root_store$modu2 = this.root_store.modules.cashier, crypto_fiat_converter = _this$root_store$modu2.crypto_fiat_converter, general_store = _this$root_store$modu2.general_store, iframe = _this$root_store$modu2.iframe;\n                general_store.setLoading(true);\n                str_reg_exp = /^\\w{8,128}$/;\n\n                if (!str_reg_exp.test(verification_code)) {\n                  _context4.next = 9;\n                  break;\n                }\n\n                _context4.next = 6;\n                return this.WS.cryptoWithdraw({\n                  address: this.blockchain_address,\n                  amount: +crypto_fiat_converter.converter_from_amount,\n                  verification_code: verification_code,\n                  dry_run: 1\n                });\n\n              case 6:\n                response_cashier = _context4.sent;\n                _context4.next = 10;\n                break;\n\n              case 9:\n                response_cashier = {\n                  error: {\n                    code: 'InvalidToken',\n                    message: 'Your token has expired or is invalid.'\n                  }\n                };\n\n              case 10:\n                if (!(((_response_cashier$err = response_cashier.error) === null || _response_cashier$err === void 0 ? void 0 : _response_cashier$err.code) === 'InvalidToken')) {\n                  _context4.next = 18;\n                  break;\n                }\n\n                this.error.handleCashierError(response_cashier.error);\n                general_store.setLoading(false);\n                iframe.setSessionTimeout(true);\n                iframe.clearTimeoutCashierUrl();\n\n                if (verification_code) {\n                  _this$root_store6 = this.root_store, client = _this$root_store6.client, modules = _this$root_store6.modules;\n                  active_container = modules.cashier.general_store.active_container;\n                  container = constants.map_action[active_container];\n                  client.setVerificationCode('', container);\n                }\n\n                _context4.next = 21;\n                break;\n\n              case 18:\n                _context4.next = 20;\n                return this.setCryptoConfig();\n\n              case 20:\n                general_store.setLoading(false);\n\n              case 21:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function onMountCryptoWithdraw(_x4) {\n        return _onMountCryptoWithdraw.apply(this, arguments);\n      }\n\n      return onMountCryptoWithdraw;\n    }()\n  }, {\n    key: \"setCryptoConfig\",\n    value: function () {\n      var _setCryptoConfig = withdraw_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5() {\n        var _yield$this$WS$crypto;\n\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return this.WS.cryptoConfig();\n\n              case 2:\n                _context5.t1 = _yield$this$WS$crypto = _context5.sent;\n                _context5.t0 = _context5.t1 === null;\n\n                if (_context5.t0) {\n                  _context5.next = 6;\n                  break;\n                }\n\n                _context5.t0 = _yield$this$WS$crypto === void 0;\n\n              case 6:\n                if (!_context5.t0) {\n                  _context5.next = 10;\n                  break;\n                }\n\n                _context5.t2 = void 0;\n                _context5.next = 11;\n                break;\n\n              case 10:\n                _context5.t2 = _yield$this$WS$crypto.crypto_config;\n\n              case 11:\n                this.crypto_config = _context5.t2;\n\n              case 12:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function setCryptoConfig() {\n        return _setCryptoConfig.apply(this, arguments);\n      }\n\n      return setCryptoConfig;\n    }()\n  }, {\n    key: \"is_withdrawal_locked\",\n    get: function get() {\n      var _client$account_statu;\n\n      var client = this.root_store.client;\n      var authentication = client.account_status.authentication;\n      if (!((_client$account_statu = client.account_status) !== null && _client$account_statu !== void 0 && _client$account_statu.status)) return false;\n      var need_poi = authentication.needs_verification.includes('identity');\n      var need_authentication = this.error.is_ask_authentication && need_poi;\n      return client.is_withdrawal_lock || need_authentication || this.error.is_ask_financial_risk_approval;\n    }\n  }, {\n    key: \"setMaxWithdrawAmount\",\n    value: function setMaxWithdrawAmount(amount) {\n      this.max_withdraw_amount = amount;\n    }\n  }, {\n    key: \"check10kLimit\",\n    value: function () {\n      var _check10kLimit = withdraw_store_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6() {\n        var _yield$client$getLimi, _yield$client$getLimi2;\n\n        var client, remainder, min_withdrawal, is_limit_reached;\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                client = this.root_store.client;\n                _context6.next = 3;\n                return client.getLimits();\n\n              case 3:\n                _context6.t1 = _yield$client$getLimi = _context6.sent;\n                _context6.t0 = _context6.t1 === null;\n\n                if (_context6.t0) {\n                  _context6.next = 7;\n                  break;\n                }\n\n                _context6.t0 = _yield$client$getLimi === void 0;\n\n              case 7:\n                if (!_context6.t0) {\n                  _context6.next = 11;\n                  break;\n                }\n\n                _context6.t2 = void 0;\n                _context6.next = 12;\n                break;\n\n              case 11:\n                _context6.t2 = (_yield$client$getLimi2 = _yield$client$getLimi.get_limits) === null || _yield$client$getLimi2 === void 0 ? void 0 : _yield$client$getLimi2.remainder;\n\n              case 12:\n                remainder = _context6.t2;\n                this.setMaxWithdrawAmount(remainder);\n                min_withdrawal = (0,shared_.getMinWithdrawal)(client.currency);\n                is_limit_reached = !!(typeof remainder !== 'undefined' && +remainder < min_withdrawal);\n                this.set10kLimitation(is_limit_reached);\n\n              case 17:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function check10kLimit() {\n        return _check10kLimit.apply(this, arguments);\n      }\n\n      return check10kLimit;\n    }()\n  }, {\n    key: \"set10kLimitation\",\n    value: function set10kLimitation(is_limit_reached) {\n      this.is_10k_withdrawal_limit_reached = is_limit_reached;\n    }\n  }, {\n    key: \"setWithdrawPercentageSelectorResult\",\n    value: function setWithdrawPercentageSelectorResult(amount) {\n      var _this$root_store7 = this.root_store,\n          client = _this$root_store7.client,\n          modules = _this$root_store7.modules;\n      var _modules$cashier = modules.cashier,\n          crypto_fiat_converter = _modules$cashier.crypto_fiat_converter,\n          general_store = _modules$cashier.general_store;\n      var currency = client.currency,\n          current_fiat_currency = client.current_fiat_currency;\n\n      if (amount > 0) {\n        crypto_fiat_converter.setConverterFromAmount(amount);\n        this.validateWithdrawFromAmount();\n        crypto_fiat_converter.onChangeConverterFromAmount({\n          target: {\n            value: amount\n          }\n        }, currency, current_fiat_currency || 'USD');\n      } else {\n        crypto_fiat_converter.resetConverter();\n      }\n\n      crypto_fiat_converter.setIsTimerVisible(false);\n      general_store.percentageSelectorSelectionStatus(false);\n    }\n  }, {\n    key: \"validateWithdrawFromAmount\",\n    value: function validateWithdrawFromAmount() {\n      var _this$crypto_config,\n          _this$crypto_config$c,\n          _this$crypto_config$c2,\n          _this3 = this;\n\n      var error_message = '';\n      var _this$root_store8 = this.root_store,\n          client = _this$root_store8.client,\n          modules = _this$root_store8.modules;\n      var balance = client.balance,\n          currency = client.currency;\n      var crypto_fiat_converter = modules.cashier.crypto_fiat_converter;\n      var converter_from_amount = crypto_fiat_converter.converter_from_amount,\n          setConverterFromError = crypto_fiat_converter.setConverterFromError;\n      var min_withdraw_amount = (_this$crypto_config = this.crypto_config) === null || _this$crypto_config === void 0 ? void 0 : (_this$crypto_config$c = _this$crypto_config.currencies_config) === null || _this$crypto_config$c === void 0 ? void 0 : (_this$crypto_config$c2 = _this$crypto_config$c[currency]) === null || _this$crypto_config$c2 === void 0 ? void 0 : _this$crypto_config$c2.minimum_withdrawal;\n      var max_withdraw_amount = +this.max_withdraw_amount > +balance ? +balance : +this.max_withdraw_amount;\n      var format_balance = (0,shared_.formatMoney)(currency, balance, true);\n      var format_min_withdraw_amount = (0,shared_.formatMoney)(currency, min_withdraw_amount, true);\n      var format_max_withdraw_amount = (0,shared_.formatMoney)(currency, max_withdraw_amount, true);\n\n      if (converter_from_amount) {\n        var _validNumber = (0,shared_.validNumber)(converter_from_amount, {\n          type: 'float',\n          decimals: (0,shared_.getDecimalPlaces)(currency)\n        }),\n            is_ok = _validNumber.is_ok,\n            message = _validNumber.message;\n\n        if (!is_ok) error_message = message;else if (+balance < +converter_from_amount) error_message = (0,translations_.localize)('Insufficient funds');else if (+balance < +min_withdraw_amount) {\n          error_message = (0,translations_.localize)('Your balance ({{format_balance}} {{currency}}) is less than the current minimum withdrawal allowed ({{format_min_withdraw_amount}} {{currency}}). Please top up your account to continue with your withdrawal.', {\n            format_balance: format_balance,\n            currency: currency,\n            format_min_withdraw_amount: format_min_withdraw_amount\n          });\n        } else if (+converter_from_amount < +min_withdraw_amount || +converter_from_amount > +max_withdraw_amount) {\n          error_message = (0,translations_.localize)('The current allowed withdraw amount is {{format_min_withdraw_amount}} to {{format_max_withdraw_amount}} {{currency}}', {\n            format_min_withdraw_amount: format_min_withdraw_amount,\n            format_max_withdraw_amount: format_max_withdraw_amount,\n            currency: currency\n          });\n        }\n\n        if ((0,shared_.isMobile)() && error_message.length > 35) {\n          var error_content = error_message;\n          error_message = /*#__PURE__*/external_react_default().createElement(components_.ReadMore, {\n            expand_text: (0,translations_.localize)('more'),\n            text: error_content,\n            collapse_length: 28,\n            openDialog: function openDialog() {\n              return _this3.error.setErrorMessage({\n                code: 'CryptoWithdrawalReadMore',\n                message: error_content\n              });\n            },\n            show_dialog: true\n          });\n        }\n      }\n\n      setConverterFromError(error_message);\n    }\n  }, {\n    key: \"validateWithdrawToAmount\",\n    value: function validateWithdrawToAmount() {\n      var error_message = '';\n      var _this$root_store9 = this.root_store,\n          client = _this$root_store9.client,\n          modules = _this$root_store9.modules;\n      var current_fiat_currency = client.current_fiat_currency;\n      var _modules$cashier$cryp = modules.cashier.crypto_fiat_converter,\n          converter_to_amount = _modules$cashier$cryp.converter_to_amount,\n          setConverterToError = _modules$cashier$cryp.setConverterToError;\n\n      if (converter_to_amount) {\n        var _validNumber2 = (0,shared_.validNumber)(converter_to_amount, {\n          type: 'float',\n          decimals: (0,shared_.getDecimalPlaces)(current_fiat_currency)\n        }),\n            is_ok = _validNumber2.is_ok,\n            message = _validNumber2.message;\n\n        if (!is_ok) error_message = message;\n      }\n\n      setConverterToError(error_message);\n    }\n  }, {\n    key: \"account_platform_icon\",\n    get: function get() {\n      var _this$root_store$clie = this.root_store.client,\n          account_list = _this$root_store$clie.account_list,\n          loginid = _this$root_store$clie.loginid;\n      var platform_icon = account_list.find(function (acc) {\n        return loginid === acc.loginid;\n      }).icon;\n      return platform_icon;\n    }\n  }]);\n\n  return WithdrawStore;\n}();\n\n\n;// CONCATENATED MODULE: ./stores/cashier-store.js\nfunction cashier_store_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction cashier_store_createClass(Constructor, protoProps, staticProps) { if (protoProps) cashier_store_defineProperties(Constructor.prototype, protoProps); if (staticProps) cashier_store_defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction cashier_store_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar CashierStore = /*#__PURE__*/cashier_store_createClass(function CashierStore(_ref) {\n  var root_store = _ref.root_store,\n      WS = _ref.WS;\n\n  cashier_store_classCallCheck(this, CashierStore);\n\n  this.account_prompt_dialog = new AccountPromptDialogStore(root_store);\n  this.account_transfer = new AccountTransferStore({\n    root_store: root_store,\n    WS: WS\n  });\n  this.crypto_fiat_converter = new CryptoFiatConverterStore({\n    root_store: root_store,\n    WS: WS\n  });\n  this.deposit = new DepositStore(WS, root_store);\n  this.error_dialog = new ErrorDialogStore();\n  this.error = new ErrorStore();\n  this.general_store = new GeneralStore({\n    root_store: root_store,\n    WS: WS\n  });\n  this.iframe = new IframeStore(root_store);\n  this.onramp = new OnRampStore({\n    root_store: root_store,\n    WS: WS\n  });\n  this.payment_agent = new PaymentAgentStore({\n    root_store: root_store,\n    WS: WS\n  });\n  this.payment_agent_transfer = new PaymentAgentTransferStore({\n    root_store: root_store,\n    WS: WS\n  });\n  this.transaction_history = new TransactionHistoryStore({\n    root_store: root_store,\n    WS: WS\n  });\n  this.withdraw = new WithdrawStore({\n    root_store: root_store,\n    WS: WS\n  });\n});\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zdG9yZXMvY2FzaGllci1zdG9yZS5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBOztBQUVBO0FBQ0E7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFWQTtBQWFBO0FBQ0E7Ozs7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7Ozs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7O0FBUEE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7QUFZQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUFBOztBQUNBO0FBQ0E7QUFQQTtBQUFBOztBQUFBO0FBWUE7QUFDQTtBQUNBOztBQWRBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7O0FBaUJBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQy9FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVFBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF6Q0E7QUE0Q0E7QUFDQTtBQUNBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFnQkE7QUFDQTtBQUNBO0FBa0JBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTREQTtBQWdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFrQkE7QUFpQkE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcURBO0FBQ0E7QUFDQTtBQUNBO0FBZUE7QUFDQTtBQTRDQTtBQUNBO0FBQ0E7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBMEJBO0FBQ0E7QUFRQTtBQUNBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWNBO0FBQ0E7QUFDQTtBQUNBO0FBa0JBO0FBZUE7QUFDQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFhQTtBQUNBO0FBQ0E7QUFlQTtBQUNBO0FBT0E7QUFDQTtBQWNBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBYUE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQVNBO0FBYUE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQVVBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWxzQkE7QUFxc0JBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7QUM5dkJBO0FBQ0E7O0FBR0E7QUFXQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFoQkE7QUFrQkE7Ozs7QUFFQTtBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFEQTs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBekJBO0FBMkJBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDM0dBO0FBQ0E7QUFDQTtBQWFBO0FBQ0E7QUFDQTs7QUFFQTtBQUFBO0FBQUE7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFGQTtBQUtBOztBQUVBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFGQTtBQUtBOztBQUVBO0FBQ0E7QUFBQTs7QUFBQTtBQUFBOztBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBaWdCQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBRUE7O0FBTEE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUFnQkE7O0FBQ0E7O0FBRUE7QUFFQTtBQUVBO0FBdkJBO0FBQUE7O0FBQUE7QUF3QkE7O0FBT0E7QUFDQTtBQUNBO0FBQUE7QUFFQTs7QUFFQTs7QUFyQ0E7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQTBDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBN0NBO0FBK0NBOztBQS9DQTtBQUFBOztBQUFBO0FBaURBO0FBQUE7QUFBQTs7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7O0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBRUE7OztBQUVBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7O0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTs7QUFDQTs7QUFsRkE7QUFvRkE7QUFwRkE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBamdCQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQXlsQkE7QUFBQTtBQUFBO0FBQUE7QUFDQTs7QUFDQTs7QUFGQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQXhsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBekNBO0FBNENBO0FBQ0E7QUFDQTs7OztBQWtCQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7O0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBT0E7QUFFQTtBQUdBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBOzs7OztBQUNBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFQQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQVdBO0FBQ0E7QUFHQTtBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7OztBQXZCQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBeUJBOztBQXpCQTtBQUFBO0FBQUE7QUFBQTs7QUE0QkE7QUFDQTtBQTdCQTs7QUFBQTtBQWlDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBOztBQXJDQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUE0Q0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUEzREE7QUE2REE7O0FBN0RBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7O0FBZ0VBO0FBQ0E7O0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQU1BO0FBQ0E7OztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFLQTtBQUNBOztBQUVBO0FBQ0E7QUFJQTtBQUxBO0FBT0E7Ozs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFDQTs7QUFEQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTs7QUFBQTtBQVFBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7O0FBWkE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQWNBO0FBZEE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQWdCQTtBQWhCQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBbUJBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUFBO0FBQUE7QUFDQTs7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTs7QUFFQTtBQUVBO0FBQUE7QUFBQTtBQUNBOztBQUNBO0FBS0E7QUFBQTtBQUFBOztBQUVBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7O0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7QUFFQTtBQUFBOztBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFPQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7O0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBSEE7OztBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFqTEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7QUFvTEE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFHQTs7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQStGQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUFBO0FBQUE7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDaHNCQTtBQUNBOztBQUVBO0FBQ0E7QUFBQTtBQUFBOztBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFqQkE7QUFvQkE7QUFDQTtBQUNBOzs7O0FBUUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7OztBQUVBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUZBOztBQURBO0FBQUE7QUFDQTtBQURBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7O0FBUUE7QUFDQTtBQUFBO0FBQUE7QUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBRUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTs7QUFIQTtBQUFBO0FBQUE7QUFBQTs7QUFLQTtBQUNBO0FBQ0E7QUFDQTs7QUFSQTtBQUFBO0FBQUE7QUFBQTs7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQWJBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBZUE7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBMUJBO0FBQUE7QUFBQTs7QUFBQTtBQTZCQTs7QUE3QkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7O0FBaUNBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7O0FBSEE7QUFBQTtBQUFBO0FBQUE7O0FBS0E7QUFDQTs7QUFOQTtBQUFBO0FBQUE7QUFBQTs7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBYUE7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBL0JBO0FBQUE7QUFBQTs7QUFBQTtBQWtDQTs7QUFsQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7QUFzQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDcktBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQUNBOzs7OztBQUtBO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFZQTtBQUNBO0FBRUE7QUFmQTtBQUFBOztBQUFBO0FBa0JBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7O0FBbkJBO0FBQUE7QUFBQTtBQUFBOztBQXNCQTtBQXRCQTs7QUFBQTtBQTBCQTtBQUNBOztBQTNCQTtBQUFBO0FBQUE7QUFBQTs7QUE2QkE7QUFFQTs7QUEvQkE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBcUNBO0FBREE7O0FBcENBO0FBb0NBOztBQXBDQTtBQUFBO0FBQUE7QUFBQTs7QUEwQ0E7QUExQ0E7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUE4Q0E7QUFDQTtBQUNBO0FBaERBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBbURBO0FBQ0E7QUFDQTs7QUFyREE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBNkRBOztBQTdEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDcEJBOztBQUVBO0FBT0E7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFaQTtBQWNBOzs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7O0FDMURBO0FBQ0E7O0FBTUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBSEE7O0FBT0E7O0FDZEE7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNGQTs7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBOzs7QUFDQTtBQWlDQTs7QUFDQTtBQUFBO0FBQUE7OztBQUdBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTs7Ozs7Ozs7OztBQzFHQTtBQUNBO0FBQUE7O0FBQ0E7QUFDQTs7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7Ozs7Ozs7O0FDdkNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQUE7O0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUNBO0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFDQTtBQUNBO0FBQUE7QUFBQTs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBRUE7QUFDQTs7Ozs7O0FBR0E7O0FDL0dBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDQUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFpQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBOztBQUFBOztBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBekJBO0FBNEJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFLQTs7QUFJQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBOztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBQ0E7QUFBQTs7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFDQTtBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBQ0E7QUFBQTs7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFDQTtBQUFBOztBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUhBOztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBQ0E7QUFBQTs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFDQTtBQUFBOztBQUNBO0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUNBO0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFDQTtBQUFBOztBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBOztBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7OztBQUVBO0FBQUE7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7O0FBRUE7QUFBQTs7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTs7QUFGQTtBQUFBO0FBQUE7QUFBQTs7QUFJQTtBQUNBOztBQUNBO0FBQ0E7QUFQQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQWhCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQW9CQTtBQUNBOzs7QUFFQTtBQUFBOztBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBOztBQUZBO0FBQUE7QUFBQTtBQUFBOztBQUlBO0FBQ0E7O0FBQ0E7QUFDQTtBQVBBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBaEJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBb0JBO0FBQ0E7OztBQUVBO0FBQUE7O0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBOzs7QUFFQTtBQUFBOztBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTs7O0FBRUE7QUFBQTs7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFGQTtBQUVBOztBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBbmhCQTtBQUtBO0FBQ0E7QUFGQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7Ozs7QUFDQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7O0FBQ0E7QUFBQTtBQUFBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWhEQTtBQW1EQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBRUE7O0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUFBO0FBTUE7QUFDQTtBQTdFQTtBQStFQTs7OztBQXNCQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFVQTs7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7OztBQUVBO0FBQ0E7QUFDQTs7OztBQUVBO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFHQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUVBOztBQVRBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFXQTtBQUNBOztBQVpBO0FBY0E7O0FBZEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7QUFpQkE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFHQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQWNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQXBCQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7OztBQTJCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQ0E7QUFDQTs7QUFGQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7OztBQUtBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7O0FBRUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFOQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7QUFTQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUZBO0FBTUE7O0FBTkE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUFjQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7O0FBQ0E7QUFyQkE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUF3QkE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7O0FBakRBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7O0FBcURBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBOztBQUNBO0FBQUE7O0FBQ0E7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTs7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFFQTtBQUVBO0FBQ0E7Ozs7QUEvYUE7Ozs7Ozs7Ozs7Ozs7O0FDUkE7QUFDQTs7QUFLQTtBQUNBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFjQTtBQUNBOzs7O0FBUUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUVBO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBOztBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFDQTtBQUNBOztBQUNBOztBQWxCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7OztBQXFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7O0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQUE7QUFBQTs7QUFFQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztBQzdHQTs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFiQTtBQWVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbERBO0FBQUE7O0FBcURBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFsQ0E7QUFBQTs7QUFxQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBVkE7QUFZQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF2Q0E7QUFBQTs7QUEwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3RJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7OztBQVlBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTs7QUFDQTtBQUFBO0FBQUE7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEvQkE7QUFrQ0E7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBOztBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQXZDQTtBQThDQTs7OztBQUVBO0FBQ0E7QUFFQTtBQUtBOzs7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUxBO0FBUUE7QUFDQTtBQUNBO0FBRUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBOztBQUNBO0FBQ0E7QUFBQTtBQURBO0FBRUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTs7QUFBQTtBQUtBOztBQUxBO0FBQUE7QUFBQTtBQUFBOztBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBVUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFMQTtBQU9BOztBQXJCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFGQTtBQUFBO0FBQUE7QUFBQTs7QUE0QkE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQUE7QUFBQTs7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7Ozs7QUF2UkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFzVkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBO0FBQ0E7O0FBL1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQS9DQTtBQWtEQTtBQUNBO0FBQ0E7Ozs7QUFxQkE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7OztBQUVBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7QUFRQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQ0E7QUFEQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7OztBQUtBO0FBQ0E7QUFDQTtBQUFBOztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUVBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7OztBQUVBO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBOztBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFaQTs7QUFjQTtBQUVBOztBQUtBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQXpDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7OztBQTRDQTtBQUFBOztBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTs7O0FBRUE7QUFPQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBU0E7Ozs7QUFFQTtBQUFBOztBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUFWQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFJQTtBQUNBOztBQXRCQTtBQXdCQTs7QUF4QkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7O0FBMkJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBOztBQUZBO0FBRUE7O0FBT0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTs7QUFwQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7O0FBb0NBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFKQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQVFBOztBQVJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7OztBQVdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7O0FBQ0E7QUFDQTs7OztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTs7QUFGQTtBQUVBOztBQU1BO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQXpCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2pZQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUE2R0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUNBOztBQURBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7O0FBRkE7QUFFQTs7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBOztBQU1BO0FBQ0E7QUFDQTtBQUNBOztBQXBCQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUE3R0E7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQXNJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQ0E7O0FBREE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7O0FBRkE7QUFFQTs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7O0FBS0E7O0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBbkJBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQXRJQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQStKQTs7QUFDQTtBQUNBOztBQWhLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbkJBO0FBc0JBO0FBQ0E7QUFDQTs7OztBQVdBO0FBQ0E7QUFDQTs7OztBQUVBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFDQTtBQUNBOztBQUZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTs7OztBQUVBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUhBOztBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQUtBO0FBTEE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7O0FBRUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUpBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBT0E7QUFQQTtBQUFBOztBQUFBO0FBUUE7QUFDQTs7QUFUQTtBQVdBOztBQVhBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDckdBO0FBQ0E7O0FBRUE7QUFDQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTFCQTtBQTZCQTtBQUNBO0FBQ0E7Ozs7O0FBVUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7O0FBRkE7QUFBQTtBQUFBO0FBQUE7O0FBS0E7QUFMQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQVFBOztBQVJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7OztBQVlBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7O0FBTkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7O0FBU0E7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7QUFOQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7OztBQVNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBOztBQUNBO0FBQ0E7QUFBQTtBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7Ozs7QUFFQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7O0FBQ0E7O0FBQ0E7QUFDQTs7QUFDQTtBQUNBOztBQVJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7O0FBV0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDNUpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFBQTtBQUFBOztBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBekJBO0FBNEJBO0FBQ0E7QUFDQTs7OztBQVdBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7O0FBRUE7QUFBQTs7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7O0FBRkE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFTQTtBQVRBOztBQUFBO0FBQUE7QUFBQTtBQWNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQUE7QUFBQTtBQUFBOztBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQXpCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7QUE0QkE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUhBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7O0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQXRCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7OztBQXlCQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7O0FBRUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWFBO0FBQ0E7QUFFQTtBQWhCQTtBQUFBOztBQUFBO0FBbUJBO0FBQ0E7QUFDQTtBQUNBOztBQXRCQTtBQUFBO0FBQUE7QUFBQTs7QUF5QkE7QUF6QkE7O0FBQUE7QUE2QkE7QUFDQTs7QUE5QkE7QUFBQTtBQUFBO0FBQUE7O0FBZ0NBO0FBRUE7O0FBbENBOztBQUFBO0FBQUE7QUFBQTtBQXVDQTtBQURBOztBQXRDQTtBQXNDQTs7QUF0Q0E7QUFBQTtBQUFBO0FBQUE7O0FBNENBO0FBNUNBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBZ0RBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQXhEQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBMERBO0FBMURBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBNkRBO0FBQ0E7QUFDQTtBQUNBOztBQWhFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7QUFvRUE7QUFBQTs7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTs7QUFKQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTs7QUFSQTtBQVFBO0FBUkE7QUFBQTs7QUFBQTtBQWVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFmQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQW1CQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7O0FBN0JBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBZ0NBOztBQWhDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7QUFvQ0E7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUFBOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFDQTs7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7OztBQUlBO0FBQUE7O0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7OztBQUVBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBQUE7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBUEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7QUFVQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBOztBQUlBO0FBR0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFEQTtBQUdBO0FBUEE7QUFVQTtBQUNBOztBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTs7QUFJQTtBQUNBOztBQUVBO0FBQ0E7OztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7QUM1WEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUFBOztBQUFBOztBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AZGVyaXYvY2FzaGllci8uL3N0b3Jlcy9hY2NvdW50LXByb21wdC1kaWFsb2ctc3RvcmUuanM/ZDY0MSIsIndlYnBhY2s6Ly9AZGVyaXYvY2FzaGllci8uL2NvbnN0YW50cy9jb25zdGFudHMuanM/YWYxOSIsIndlYnBhY2s6Ly9AZGVyaXYvY2FzaGllci8uL3N0b3Jlcy9lcnJvci1zdG9yZS50cz9mMTQ5Iiwid2VicGFjazovL0BkZXJpdi9jYXNoaWVyLy4vc3RvcmVzL2FjY291bnQtdHJhbnNmZXItc3RvcmUuanM/MTg3YSIsIndlYnBhY2s6Ly9AZGVyaXYvY2FzaGllci8uL3N0b3Jlcy9jcnlwdG8tZmlhdC1jb252ZXJ0ZXItc3RvcmUuanM/ZTVkNyIsIndlYnBhY2s6Ly9AZGVyaXYvY2FzaGllci8uL3N0b3Jlcy9kZXBvc2l0LXN0b3JlLnRzPzBlZGQiLCJ3ZWJwYWNrOi8vQGRlcml2L2Nhc2hpZXIvLi9zdG9yZXMvZXJyb3ItZGlhbG9nLXN0b3JlLmpzP2Q3NTciLCJ3ZWJwYWNrOi8vQGRlcml2L2Nhc2hpZXIvLi9jb21wb25lbnRzL2Nhc2hpZXItbm90aWZpY2F0aW9ucy9jYXNoaWVyLW5vdGlmaWNhdGlvbnMudHN4PzJlOTUiLCJ3ZWJwYWNrOi8vQGRlcml2L2Nhc2hpZXIvLi9jb21wb25lbnRzL2Nhc2hpZXItbm90aWZpY2F0aW9ucy9pbmRleC50cz82ZDBhIiwid2VicGFjazovL0BkZXJpdi9jYXNoaWVyLy4vdXRpbHMvdXRpbGl0eS5qcz9lNjI0Iiwid2VicGFjazovL0BkZXJpdi9jYXNoaWVyLy4vdXRpbHMvdmFsaWRhdG9yL2Vycm9ycy5qcz81ODQ1Iiwid2VicGFjazovL0BkZXJpdi9jYXNoaWVyLy4vdXRpbHMvdmFsaWRhdG9yL3ZhbGlkYXRvci5qcz8yOTkzIiwid2VicGFjazovL0BkZXJpdi9jYXNoaWVyLy4vdXRpbHMvdmFsaWRhdG9yL2luZGV4LmpzPzkzNTAiLCJ3ZWJwYWNrOi8vQGRlcml2L2Nhc2hpZXIvLi9zdG9yZXMvYmFzZS1zdG9yZS5qcz83N2M1Iiwid2VicGFjazovL0BkZXJpdi9jYXNoaWVyLy4vc3RvcmVzL2dlbmVyYWwtc3RvcmUuanM/ZWZhNiIsIndlYnBhY2s6Ly9AZGVyaXYvY2FzaGllci8uL3N0b3Jlcy9pZnJhbWUtc3RvcmUudHM/NDdlNCIsIndlYnBhY2s6Ly9AZGVyaXYvY2FzaGllci8uL2NvbmZpZy9vbi1yYW1wLXByb3ZpZGVycy5qcz82YmQ0Iiwid2VicGFjazovL0BkZXJpdi9jYXNoaWVyLy4vc3RvcmVzL29uLXJhbXAtc3RvcmUuanM/ZTBhNiIsIndlYnBhY2s6Ly9AZGVyaXYvY2FzaGllci8uL3N0b3Jlcy9wYXltZW50LWFnZW50LXN0b3JlLmpzP2U2NTAiLCJ3ZWJwYWNrOi8vQGRlcml2L2Nhc2hpZXIvLi9zdG9yZXMvcGF5bWVudC1hZ2VudC10cmFuc2Zlci1zdG9yZS5qcz84NjA3Iiwid2VicGFjazovL0BkZXJpdi9jYXNoaWVyLy4vc3RvcmVzL3RyYW5zYWN0aW9uLWhpc3Rvcnktc3RvcmUuanM/ODJmNiIsIndlYnBhY2s6Ly9AZGVyaXYvY2FzaGllci8uL3N0b3Jlcy93aXRoZHJhdy1zdG9yZS5qcz81ZmRjIiwid2VicGFjazovL0BkZXJpdi9jYXNoaWVyLy4vc3RvcmVzL2Nhc2hpZXItc3RvcmUuanM/MDgyNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBvYnNlcnZhYmxlLCBhY3Rpb24sIG1ha2VPYnNlcnZhYmxlIH0gZnJvbSAnbW9ieCc7XG5pbXBvcnQgeyBpc0NyeXB0b2N1cnJlbmN5IH0gZnJvbSAnQGRlcml2L3NoYXJlZCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFjY291bnRQcm9tcHREaWFsb2dTdG9yZSB7XG4gICAgY29uc3RydWN0b3Iocm9vdF9zdG9yZSkge1xuICAgICAgICBtYWtlT2JzZXJ2YWJsZSh0aGlzLCB7XG4gICAgICAgICAgICBzaG91bGRfc2hvdzogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGlzX2NvbmZpcm1lZDogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGxhc3RfbG9jYXRpb246IG9ic2VydmFibGUsXG4gICAgICAgICAgICBjdXJyZW50X2xvY2F0aW9uOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgc2hvdWxkTmF2aWdhdGVBZnRlclByb21wdDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgcmVzZXRMYXN0TG9jYXRpb246IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHJlc2V0SXNDb25maXJtZWQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIG9uQ29uZmlybTogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgb25DYW5jZWw6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIGNvbnRpbnVlUm91dGU6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5yb290X3N0b3JlID0gcm9vdF9zdG9yZTtcbiAgICB9XG5cbiAgICBzaG91bGRfc2hvdyA9IGZhbHNlO1xuICAgIGlzX2NvbmZpcm1lZCA9IGZhbHNlO1xuICAgIGxhc3RfbG9jYXRpb24gPSBudWxsO1xuICAgIGN1cnJlbnRfbG9jYXRpb24gPSBudWxsO1xuXG4gICAgc2hvdWxkTmF2aWdhdGVBZnRlclByb21wdChuZXh0X2xvY2F0aW9uLCBjdXJyZW50X2xvY2F0aW9uKSB7XG4gICAgICAgIGlmICghdGhpcy5pc19jb25maXJtZWQpIHtcbiAgICAgICAgICAgIHRoaXMubGFzdF9sb2NhdGlvbiA9IG5leHRfbG9jYXRpb247XG4gICAgICAgICAgICB0aGlzLnNob3VsZF9zaG93ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudF9sb2NhdGlvbiA9IGN1cnJlbnRfbG9jYXRpb247XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXNldExhc3RMb2NhdGlvbigpIHtcbiAgICAgICAgdGhpcy5sYXN0X2xvY2F0aW9uID0gbnVsbDtcbiAgICB9XG5cbiAgICByZXNldElzQ29uZmlybWVkKCkge1xuICAgICAgICB0aGlzLmlzX2NvbmZpcm1lZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGFzeW5jIG9uQ29uZmlybSgpIHtcbiAgICAgICAgY29uc3QgeyBjbGllbnQgfSA9IHRoaXMucm9vdF9zdG9yZTtcblxuICAgICAgICB0aGlzLnNob3VsZF9zaG93ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNfY29uZmlybWVkID0gdHJ1ZTtcblxuICAgICAgICBjb25zdCBoYXNfZmlhdF9hY2NvdW50ID0gT2JqZWN0LnZhbHVlcyhjbGllbnQuYWNjb3VudHMpLnNvbWUoXG4gICAgICAgICAgICBhY2Nfc2V0dGluZ3MgPT4gIWFjY19zZXR0aW5ncy5pc192aXJ0dWFsICYmICFpc0NyeXB0b2N1cnJlbmN5KGFjY19zZXR0aW5ncy5jdXJyZW5jeSlcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGlzQ3J5cHRvY3VycmVuY3koY2xpZW50Py5jdXJyZW5jeSkgJiYgaGFzX2ZpYXRfYWNjb3VudCkgYXdhaXQgdGhpcy5kb1N3aXRjaCgpO1xuICAgIH1cblxuICAgIGFzeW5jIGRvU3dpdGNoKCkge1xuICAgICAgICBjb25zdCB7IGNsaWVudCwgbW9kdWxlcyB9ID0gdGhpcy5yb290X3N0b3JlO1xuICAgICAgICBjb25zdCB7IGdlbmVyYWxfc3RvcmUgfSA9IG1vZHVsZXMuY2FzaGllcjtcblxuICAgICAgICBjb25zdCBub25fY3J5cHRvX2FjY291bnRfbG9naW5pZCA9IE9iamVjdC5lbnRyaWVzKGNsaWVudC5hY2NvdW50cykucmVkdWNlKFxuICAgICAgICAgICAgKGluaXRpYWxfdmFsdWUsIFtsb2dpbmlkLCBzZXR0aW5nc10pID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gIXNldHRpbmdzLmlzX3ZpcnR1YWwgJiYgIWlzQ3J5cHRvY3VycmVuY3koc2V0dGluZ3MuY3VycmVuY3kpID8gbG9naW5pZCA6IGluaXRpYWxfdmFsdWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJydcbiAgICAgICAgKTtcbiAgICAgICAgYXdhaXQgY2xpZW50LnN3aXRjaEFjY291bnQobm9uX2NyeXB0b19hY2NvdW50X2xvZ2luaWQpO1xuXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRfbG9jYXRpb24gPT09ICdkZXBvc2l0Jykge1xuICAgICAgICAgICAgZ2VuZXJhbF9zdG9yZS5zZXRJc0RlcG9zaXQodHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbkNhbmNlbCgpIHtcbiAgICAgICAgdGhpcy5zaG91bGRfc2hvdyA9IGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnRpbnVlUm91dGUoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzX2NvbmZpcm1lZCAmJiB0aGlzLmxhc3RfbG9jYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMucm9vdF9zdG9yZS5jb21tb24ucm91dGVUbyh0aGlzLmxhc3RfbG9jYXRpb24pO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiY29uc3QgY29udGFpbmVycyA9IHtcbiAgICBhY2NvdW50X3RyYW5zZmVyOiAnYWNjb3VudF90cmFuc2ZlcicsXG4gICAgZGVwb3NpdDogJ2RlcG9zaXQnLFxuICAgIHBheW1lbnRfYWdlbnQ6ICdwYXltZW50X2FnZW50JyxcbiAgICBwYXltZW50X2FnZW50X3RyYW5zZmVyOiAncGF5bWVudF9hZ2VudF90cmFuc2ZlcicsXG4gICAgd2l0aGRyYXc6ICd3aXRoZHJhdycsXG59O1xuXG5jb25zdCBtYXBfYWN0aW9uID0ge1xuICAgIHdpdGhkcmF3OiAncGF5bWVudF93aXRoZHJhdycsXG4gICAgcGF5bWVudF9hZ2VudDogJ3BheW1lbnRfYWdlbnRfd2l0aGRyYXcnLFxufTtcblxuY29uc3QgaWNvbl9wYXltZW50X21ldGhvZHMgPSB7XG4gICAgQWxpcGF5OiBbJ2FsaXBheSddLFxuICAgIEJhbms6IFtcbiAgICAgICAgJ2JhbmsnLFxuICAgICAgICAnYmFua2RlcG9zaXQnLFxuICAgICAgICAnYmFua3MnLFxuICAgICAgICAnYmFua3RyYW5zZmVyJyxcbiAgICAgICAgJ2Jhbmt3aXJlJyxcbiAgICAgICAgJ2Jhbmt3aXJldHJhbnNmZXInLFxuICAgICAgICAnbG9jYWxiYW5rd2lyZScsXG4gICAgICAgICdsb2NhbGJhbmsnLFxuICAgICAgICAnbG9jYWxiYW5rcycsXG4gICAgICAgICdsb2NhbGJhbmt0cmFuc2ZlcicsXG4gICAgXSxcbiAgICBCYW5rYnJpOiBbJ2JyaScsICdiYW5rYnJpJ10sXG4gICAgQmNhOiBbJ2JjYScsICdncnVwYmNhJ10sXG4gICAgQmNoOiBbJ2JjaCddLFxuICAgIEJuaTogWydibmknXSxcbiAgICBCaXRjb2luOiBbJ2JpdGNvaW4nLCAnYnRjJ10sXG4gICAgQ2FyZDogWydjYXJkJywgJ2NhcmRzJywgJ3Zpc2EnLCAnbWFzdGVyY2FyZCddLFxuICAgIENpbWJuaWFnYTogWydjaW1ibmlhZ2EnXSxcbiAgICBDcnlwdG86IFsnY3J5cHRvJywgJ2NyeXB0b3MnLCAnY3J5cHRvY3VycmVuY2llcycsICdjcnlwdG9jdXJyZW5jeScsICd3ZWFjY2VwdGNyeXB0byddLFxuICAgIERhaTogWydkYWknXSxcbiAgICBEaWFtb25kYmFuazogWydkaWFtb25kYmFuayddLFxuICAgIEV0aDogWydldGgnLCAnZXRoZCcsICdldGhlcmV1bSddLFxuICAgIEV3YWxsZXQ6IFsnZXdhbGxldCcsICdld2FsbGV0cycsICdld2FsbGV0cGF5bWVudCcsICdza3JpbGwnXSxcbiAgICBGaXJzdGJhbms6IFsnZmlyc3RiYW5rJ10sXG4gICAgR3RiYW5rOiBbJ2d0YmFuayddLFxuICAgIEljYmM6IFsnaWNiYyddLFxuICAgIExpYmVydHlyZXNlcnZlOiBbJ2xpYmVydHlyZXNlcnZlJ10sXG4gICAgTGl0ZUNvaW46IFsnbHRjJywgJ2xpdGVjb2luJ10sXG4gICAgTWFuZGlyaTogWydtYW5kaXJpJ10sXG4gICAgTWFuZGlyaXN5YXJpYWg6IFsnbWFuZGlyaXN5YXJpYWgnXSxcbiAgICBNb25leWdyYW06IFsnbW9uZXlncmFtJ10sXG4gICAgUGF5cGFsOiBbJ3BheXBhbCddLFxuICAgIFBlcmZlY3RNb25leTogWydwZXJmZWN0bW9uZXlhbmR3ZWJtb25leScsICdwZXJmZWN0bW9uZXknXSxcbiAgICBQZXJtYXRhYmFuazogWydwZXJtYXRhYmFuayddLFxuICAgIFRldGhlcjogWyd0ZXRoZXInXSxcbiAgICBWZXJ2ZTogWyd2ZXJ2ZSddLFxuICAgIFdlYk1vbmV5OiBbJ3BlcmZlY3Rtb25leWFuZHdlYm1vbmV5JywgJ3dlYm1vbmV5J10sXG4gICAgV2VjaGF0cGF5OiBbJ3dlY2hhdHBheSddLFxuICAgIFplbml0aGJhbms6IFsnemVuaXRoYmFuayddLFxufTtcblxuY29uc3QgcGF5bWVudF9tZXRob2RzID0ge1xuICAgIEFib2tpRlg6IFsnQWJva2lGWCcsICdBIEJPS0kgRlgnXSxcbiAgICAnQUJTQSBCYW5rJzogW1xuICAgICAgICAnQWJzYScsXG4gICAgICAgICdBQlNBJyxcbiAgICAgICAgJ0FCU0EgQmFuaycsXG4gICAgICAgICdBQlNBQmFuaycsXG4gICAgICAgICdBQlNBQkFOSycsXG4gICAgICAgICdBYnNhYmFuaycsXG4gICAgICAgICdBQlNBIEJhbmsgVHJhbnNmZXInLFxuICAgICAgICAnQUJTQSBDYXNoIFNlbmQnLFxuICAgICAgICAnQWJzYSBmdW5kIHRyYW5zZmVyIGFuZCBvcmFuZ2UgbW9uZXkgc2VydmljZXMnLFxuICAgICAgICAnQUJTQSBHSEFOQSBMSU1JVEVEJyxcbiAgICAgICAgJ0RpcmVjdCBkZXBvc2l0IEZOQiBhbmQgQUJTQScsXG4gICAgXSxcbiAgICAnQWNjZXNzIGJhbmsnOiBbJ0FjY2VzcyBiYW5rJywgJ0FjY2VzcyBCYW5rJywgJ0FjY2Vzc2JhbmsnLCAnQWNjZXNzQmFuaycsICdBQ0NFU1MgQkFOSycsICdBY2VzcyBCYW5rJ10sXG4gICAgJ0FjY2VzcyBmb3JleCc6IFsnQWNjZXNzIEZvcmV4JywgJ0FDQ0VTUyBGT1JFWCcsICdBY2Nlc3MgZm9yZXgnXSxcbiAgICAnQWZyaWxhbmQgRmlyc3QgQmFuayc6IFsnQWZyaWxhbmQgRmlyc3QgQmFuaycsICdBRlJJTEFORCBGSVJTVCBCQU5LJ10sXG4gICAgJ0FpcnRlbCBNb2JpbGUgbW9uZXknOiBbXG4gICAgICAgICdBaXJ0ZWwgTW9iaWxlIG1vbmV5JyxcbiAgICAgICAgJ2FpcnRlbCcsXG4gICAgICAgICdBaXJ0ZWwnLFxuICAgICAgICAnQUlSVEVMIE1PQklMRSBNT05FWScsXG4gICAgICAgICdhaXJ0ZWwgbW9uZXknLFxuICAgICAgICAnQWlydGVsIG1vbmV5JyxcbiAgICAgICAgJ0FpcnRlbG1vbmV5JyxcbiAgICAgICAgJ0FpcnRlbCBNb25leScsXG4gICAgICAgICdBaXJ0ZWxNb25leScsXG4gICAgICAgICdBSVJURUxNT05FWScsXG4gICAgICAgICdBSVJURUwgTU9ORVknLFxuICAgICAgICAnQWlydGVsIFRpZ28nLFxuICAgICAgICAnQWlydGVsVGlnbyBjYXNoJyxcbiAgICAgICAgJ2FsbCBtb2JpbGUgbW9uZXknLFxuICAgIF0sXG4gICAgQWlydG06IFsnYWlydG0nLCAnQWlydG0nXSxcbiAgICBBbGZhbGFoQmFuazogWydBbGZhbGFoQmFuaycsICdiYW5rIGFsZmFsZmEnLCAnQWxmbGFoIEJhbmsnXSxcbiAgICAnQWxsIGJhbmtzJzogW1xuICAgICAgICAnQWxsIGJhbmtzJyxcbiAgICAgICAgJ0FsbCBsb2NhbCBiYW5rcycsXG4gICAgICAgICdBbGwgbG9jYWwgQmFua3MnLFxuICAgICAgICAnQWxsIGxvY2FsIGJhbmtzIFpXTCcsXG4gICAgICAgICdBbGwgTG9jYWwgQmFuayB0cmFuc2ZlcicsXG4gICAgICAgICdiYW5rJyxcbiAgICAgICAgJ0JhbmsnLFxuICAgICAgICAnQkFOSycsXG4gICAgICAgICdiYW5rcycsXG4gICAgICAgICdCYW5rcycsXG4gICAgICAgICdsb2NhbCBiYW5rcycsXG4gICAgICAgICdMb2NhbCBiYW5rcycsXG4gICAgICAgICdMb2NhbCBCYW5rcycsXG4gICAgICAgICdQYWtpc3RhbmkgTG9jYWwgQWxsIGJhbmtzJyxcbiAgICAgICAgJ0xvY2FsIEluZGlhbiBiYW5rcycsXG4gICAgICAgICdMb2NhbEJhbmtzJyxcbiAgICBdLFxuICAgIEFzdHJvcGF5OiBbJ2FzdHJvcGF5JywgJ0FzdHJvcGF5JywgJ0FzdHJvIFBheSddLFxuICAgICdBVE0gdHJhbnNmZXInOiBbXG4gICAgICAgICdBVE0nLFxuICAgICAgICAnQVRNRGVwb3NpdHMnLFxuICAgICAgICAnQVRNZGVwb3NpdCcsXG4gICAgICAgICdBVE0gdHJhbnNmZXInLFxuICAgICAgICAnQVRNIFRyYW5zZmVyJyxcbiAgICAgICAgJ0Jhbmt0cmFuc2ZlckFUTScsXG4gICAgICAgICdGTkIgQVRNIGRlcG9zaXQnLFxuICAgIF0sXG4gICAgQXphbVBlc2E6IFsnQXphbVBlc2EnLCAnQXphbXBlc2EnXSxcbiAgICAnQmFuY28gQnJhZGVzY28nOiBbJ0JhbmNvIEJyYWRlc2NvJywgJ0JyYWRlc2NvJ10sXG4gICAgJ0JhbmNvIGRlIFBpY2hpbmNoYSc6IFsnQmFuY28gZGUgUGljaGluY2hhJywgJ0JBTkNPIERFIFBJQ0hJTkNIQScsICdQaWNoaW5jaGEnXSxcbiAgICAnQmFuY28gZGUgUHJvZHViYW5jbyc6IFsnQmFuY28gZGUgUHJvZHViYW5jbycsICdCQU5DTyBERSBQUk9EVUJBTkNPJ10sXG4gICAgJ0JhbmNvIGRlbCBQYWNpZmljbyc6IFsnQmFuY28gZGVsIFBhY2lmaWNvJywgJ0JBTkNPIERFIFBBQ0lGSUNPJywgJ1BhY2lmaWNvJ10sXG4gICAgJ0JhbmNvIEludGVybmFjaW9uYWwnOiBbJ0JhbmNvIEludGVybmFjaW9uYWwnLCAnQkFOQ08gSU5URVJOQUNJT05BTCddLFxuICAgICdCYW5jbyBJbnRlcm5hY2lvbmFsIGRlIE1vw6dhbWJpcXVlIChCSU0pJzogWydCYW5jbyBJbnRlcm5hY2lvbmFsIGRlIE1vw6dhbWJpcXVlIChCSU0pJywgJ0JpbScsICdUcmFuc2ZlcmVuY2lhIEJpbSddLFxuICAgICdCYW5jb2J1IEJhbmsgZU5vdGknOiBbJ0JhbmNvYnUgQmFuayBlTm90aScsICdCYW5jb2J1IGUtbm90aSddLFxuICAgICdCYW5rIEFMIEhhYmliJzogWydCYW5rIEFMIEhhYmliJywgJ2JhbmsgYWwgaGFiaWInLCAnQmFuayBBbGhhYmliJ10sXG4gICAgJ0JhbmsgTmVnYXJhIEluZG9uZXNpYSAoQk5JKSc6IFsnQmFuayBOZWdhcmEgSW5kb25lc2lhIChCTkkpJywgJ0JOSScsICdCYW5rQk5JJ10sXG4gICAgJ0JhbmsgT2YgQ2V5bG9uIChCT0MpJzogWydCYW5rIE9mIENleWxvbiAoQk9DKScsICdCYW5rb2ZjZXlsb24nLCAnQm9jIFBlb3BsZXMgQmFuayddLFxuICAgICdCYW5rIFJha3lhdCBJbmRvbmVzaWEgKEJSSSknOiBbJ0JhbmsgUmFreWF0IEluZG9uZXNpYSAoQlJJKScsICdCYW5rQnJpJywgJ0JhbmtCUkknLCAnQlJJJywgJ0JSSSBkYW4gRXdhbGxldCddLFxuICAgICdCYW5rIHRyYW5zZmVyJzogW1xuICAgICAgICAnQWxsIExvY2FsIEJhbmsgcGF5bWVudCBBY2NlcHQnLFxuICAgICAgICAnQWxsIGxvY2FsIGJhbmsgcGF5bWVudHMnLFxuICAgICAgICAnQWxsIExvY2FsIEJhbmsgdHJhbnNmZXInLFxuICAgICAgICAnYmFuaycsXG4gICAgICAgICdCYW5rJyxcbiAgICAgICAgJ0JBTksnLFxuICAgICAgICAnQmFua3MgQkhJTVVQIEJUQyBFd2FsbGV0IEdvb2dsZVBheSBMb2NhbEJhbmsgUGF5cGFsIFBheXRtIFBlcmZlY3QgTW9uZXkgUGhvbmVQaGUnLFxuICAgICAgICAnQmFuayBhbmQgRS13YWxsZXQnLFxuICAgICAgICAnYmFuayBkZXBvc2l0JyxcbiAgICAgICAgJ0JhbmsgZGVwb3NpdCcsXG4gICAgICAgICdCYW5rZGVwb3NpdCcsXG4gICAgICAgICdCYW5rIERlcG9zaXQnLFxuICAgICAgICAnQmFuayBkZXBvc2l0cycsXG4gICAgICAgICdiYW5rIGV3YWxsZXQnLFxuICAgICAgICAnYmFuayBwYXltZW50JyxcbiAgICAgICAgJ2JhbmtzJyxcbiAgICAgICAgJ0JhbmtzJyxcbiAgICAgICAgJ0JhbmsgdG8gQmFuayBhY2NvdW50IHRyYW5zZmVyJyxcbiAgICAgICAgJ2JhbmsgdHJhbnNmZXInLFxuICAgICAgICAnQmFuayB0cmFuc2ZlcicsXG4gICAgICAgICdCYW5rdHJhbnNmZXInLFxuICAgICAgICAnQmFuayBUcmFuc2ZlcicsXG4gICAgICAgICdCYW5rVHJhbnNmZXInLFxuICAgICAgICAnQkFOSyBUUkFOU0ZFUicsXG4gICAgICAgICdCQU5LVFJBTlNGRVInLFxuICAgICAgICAnYmFuayB0cmFuc2ZlciBhbmQgYWxsIGZvcm0gb2YgRS1wYXltZW50cycsXG4gICAgICAgICdCYW5rIFRyYW5zZmVyIGFuZCBhbGwgRm9ybXMgb2YgRS1wYXltZW50cycsXG4gICAgICAgICdCYW5rdHJhbnNmZXJBVE0nLFxuICAgICAgICAnYmFuayB0cmFuc2ZlcnMnLFxuICAgICAgICAnQmFuayB0cmFuc2ZlcnMnLFxuICAgICAgICAnQmFuayBUcmFuc2ZlcnMnLFxuICAgICAgICAnQmFuIHRyYW5zZmVyJyxcbiAgICAgICAgJ0RlcG9zaXRvcyBkaXJldG8gZW0gY29udGEnLFxuICAgICAgICAnRGlyZWN0IGRlcG9zaXQgRk5CIGFuZCBBQlNBJyxcbiAgICAgICAgJ0Utd2FsbGV0IEJhbmsgdHJhbnNmZXInLFxuICAgICAgICAnSW50ZXJuZXQgQmFua2luZycsXG4gICAgICAgICdJbnRlcm5ldCB0cmFuc2ZlcicsXG4gICAgICAgICdJbnRlcm5ldCBUcmFuc2ZlcicsXG4gICAgICAgICdMb2NhbEJhbmsnLFxuICAgICAgICAnbG9jYWwgYmFua3MnLFxuICAgICAgICAnTG9jYWwgYmFua3MnLFxuICAgICAgICAnTG9jYWwgQmFua3MnLFxuICAgICAgICAnTG9jYWwgYmFuayB0cmFuc2ZlcicsXG4gICAgICAgICdMb2NhbCBiYW5rIFRyYW5zZmVycycsXG4gICAgICAgICdMb2NhbCBkZXBvc2l0cycsXG4gICAgICAgICdMb2NhbCBkZXBvc2l0JyxcbiAgICAgICAgJ2xvY2FsIGRlcG9zaXRzJyxcbiAgICAgICAgJ0JBTktUUkFOU0ZFUlMnLFxuICAgICAgICAnQmFuayBEZXBvc2l0cycsXG4gICAgICAgICdCYW5rIGRlcG9zaXQgYW5kIHRyYW5zZmVyJyxcbiAgICAgICAgJ0JhbmsgdHJhbnNmZXIgYW5kIGUtd2FsbGV0cycsXG4gICAgICAgICdCYW5rRGVwb3NpdCcsXG4gICAgICAgICdGaWF0JyxcbiAgICAgICAgJ0xPQ0FMQkFOSycsXG4gICAgICAgICdPbmxpbmVUcmFuc2ZlcicsXG4gICAgICAgICdaV2Jhbmt0cmFuc2ZlcnMnLFxuICAgICAgICAnbG9jYWxiYW5rdHJhbnNmZXInLFxuICAgICAgICAnQmFuayB0cmFuc2ZlciBCYW5rIHdpcmUnLFxuICAgIF0sXG4gICAgJ0Jhbmsgd2lyZSc6IFtcbiAgICAgICAgJ2JhbmsnLFxuICAgICAgICAnQmFuaycsXG4gICAgICAgICdCQU5LJyxcbiAgICAgICAgJ2JhbmsgcGF5bWVudCcsXG4gICAgICAgICdiYW5rcycsXG4gICAgICAgICdCYW5rcycsXG4gICAgICAgICdiYW5rIHdpcmUnLFxuICAgICAgICAnYmFua3dpcmUnLFxuICAgICAgICAnQmFuayB3aXJlJyxcbiAgICAgICAgJ0Jhbmt3aXJlJyxcbiAgICAgICAgJ0JhbmsgV2lyZScsXG4gICAgICAgICdCYW5rV2lyZScsXG4gICAgICAgICdCQU5LV0lSRScsXG4gICAgICAgICdCYW5rIHdpcmUgYW5kIGUtd2FsbGV0cycsXG4gICAgICAgICdCYW5rIHdpcmUgYW5kIEUtd2FsbGV0cycsXG4gICAgICAgICdCYW5rIHdpcmVzJyxcbiAgICAgICAgJ0Jhbmt3aXJlcycsXG4gICAgICAgICdiYW5rIHdpcmVzIGFuZCBlLXdhbGxldCcsXG4gICAgICAgICdCYW5rIHdpcmVzIGFuZCBlLXdhbGxldHMnLFxuICAgICAgICAnQmFua1dpcmUgdHJhbnNmZXInLFxuICAgICAgICAnRS13YWxsZXRzIGFuZCBiYW5rIHdpcmVzJyxcbiAgICAgICAgJ2xvY2FsIGJhbmsgd2lyZScsXG4gICAgICAgICdMb2NhbEJhbmtXaXJlJyxcbiAgICAgICAgJ0xvY2FsQmFua3dpcmUnLFxuICAgICAgICAnV2lyZSBCYW5rIFRyYW5zZmVyJyxcbiAgICAgICAgJ1dJUkUgVFJBTlNGRVInLFxuICAgICAgICAnQmFuayBXaXJlIHRyYW5zZmVyJyxcbiAgICAgICAgJ0ZpYXQnLFxuICAgICAgICAnT25saW5lVHJhbnNmZXInLFxuICAgICAgICAnQmFuayB0cmFuc2ZlciBCYW5rIHdpcmUnLFxuICAgIF0sXG4gICAgQmFua0FCQzogWydCYW5rQUJDJywgJ0JBTkNBQkMgQkFOSyddLFxuICAgICdCYW5rIEJUTic6IFsnQmFuayBCVE4nLCAnQlROJ10sXG4gICAgJ0Jhbmsgb2YgdGhlIFBoaWxpcHBpbmUgSXNsYW5kcyAoQlBJKSc6IFsnQmFuayBvZiB0aGUgUGhpbGlwcGluZSBJc2xhbmRzIChCUEkpJywgJ0JQSSddLFxuICAgICdCQ0EgYmFuayc6IFsnQkNBIGJhbmsnLCAnQkNBJywgJ0JhbmtCQ0EnLCAnYmNhJ10sXG4gICAgJ0JETyBVbmliYW5rJzogWydCRE8gVW5pYmFuaycsICdCRE8nXSxcbiAgICBCSElNOiBbJ0JISU0nLCAnQmhpbScsICdCYW5rcyBCSElNVVAgQlRDIEV3YWxsZXQgR29vZ2xlUGF5IExvY2FsQmFuayBQYXlwYWwgUGF5dG0gUGVyZmVjdCBNb25leSBQaG9uZVBoZSddLFxuICAgICdCTUNFIEJhbmsnOiBbJ0JNQ0UgQmFuaycsICdCbWNlIEJhbmsnXSxcbiAgICAnQ0FCUyBCYW5rJzogWydDQUJTIEJhbmsnLCAnQ2FicyBiYW5rJywgJ0NBQlMgdHJhbnNmZXInXSxcbiAgICBDYXJkOiBbXG4gICAgICAgICdDYXJkJyxcbiAgICAgICAgJ2NhcmQnLFxuICAgICAgICAnY2FyZHMnLFxuICAgICAgICAnQ2FyZHMnLFxuICAgICAgICAnQ3JlZGl0IGNhcmQnLFxuICAgICAgICAnRGViaXQgQ2FyZCcsXG4gICAgICAgICdNYXN0ZXJjYXJkJyxcbiAgICAgICAgJ01hc3RlckNhcmQnLFxuICAgICAgICAndmlzYScsXG4gICAgICAgICdWaXNhJyxcbiAgICAgICAgJ1ZJU0EnLFxuICAgICAgICAnVmlzYSBjYXJkJyxcbiAgICAgICAgJ0JhbmsgY2FyZHMnLFxuICAgICAgICAnQ2FydGVpcmFzIEVsZWN0cm9uaWNhcycsXG4gICAgICAgICdGaWF0JyxcbiAgICAgICAgJ01hc3RlciBjYXJkJyxcbiAgICBdLFxuICAgIENhc2g6IFtcbiAgICAgICAgJ2Nhc2gnLFxuICAgICAgICAnQ2FzaCcsXG4gICAgICAgICdDYXNoIGRlcG9zaXQnLFxuICAgICAgICAnQ2FzaCBkZXBvc2l0cycsXG4gICAgICAgICdDYXNoIGluIFVTRCBvciBMb2NhbCcsXG4gICAgICAgICdlbGVjdHJvbmljIHRyYW5zZmVycyBhbmQgY2FzaCBkZXBvc2l0cycsXG4gICAgICAgICdGTkIgY2FzaCBkZXBvc2l0JyxcbiAgICAgICAgJ3BoeXNpY2FsIGxvY2FsIGFuZCBmb3JlaWduIGJhbmsgbm90ZXMnLFxuICAgICAgICAnVVNEJyxcbiAgICAgICAgJ1VTRCBjYXNoJyxcbiAgICAgICAgJ0Nhc2ggRGVwb3NpdCcsXG4gICAgICAgICdGaWF0JyxcbiAgICAgICAgJ0lOUicsXG4gICAgICAgICdVU0RDYXNoJyxcbiAgICAgICAgJ1p3Y2FzaCcsXG4gICAgXSxcbiAgICAnQ2FzaCBzZW5kIEFCU0EgYmFuayc6IFtcbiAgICAgICAgJ0Nhc2ggc2VuZCBBQlNBIGJhbmsnLFxuICAgICAgICAnQUJTQSBDYXNoIFNlbmQnLFxuICAgICAgICAnQ2FzaHNlbmQnLFxuICAgICAgICAnQ2FzaCBTZW5kJyxcbiAgICAgICAgJ0Nhc2hTZW5kJyxcbiAgICAgICAgJ2Nhc2ggc2VuZCBBYnNhJyxcbiAgICAgICAgJ0Nhc2ggc2VuZCBBYnNhIGJhbmsnLFxuICAgIF0sXG4gICAgJ0NoaXBwZXIgQ2FzaCc6IFsnQ2hpcHBlciBDYXNoJywgJ0NoaXBwZXInLCAnQ2hpcHBlcmNhc2gnLCAnQ2hpcHBlcmNoYXNoJ10sXG4gICAgJ0NJSCBCYW5rJzogWydDSUggQmFuaycsICdDaWggQmFuayddLFxuICAgIENJTUI6IFsnQ0lNQicsICdDSU1CTklBR0EnLCAnTklBR0EnXSxcbiAgICAnQ2l0eSBIb3BwZXInOiBbJ0NpdHkgaG9wcGVyJywgJ0NpdHkgSG9wcGVyJ10sXG4gICAgJ0NvLW9wZXJhdGl2ZSBCYW5rIG9mIEtlbnlhJzogWydDby1vcGVyYXRpdmUgQmFuayBvZiBLZW55YScsICdjb29wZXJhdGl2ZWJhbmsnXSxcbiAgICAnQ29tbWVyY2lhbCBCYW5rJzogWydDb21tZXJjaWFsIEJhbmsnLCAnQ29tbWVyY2lhbGJhbmsnXSxcbiAgICAnQ1JEQiBCYW5rJzogWydDUkRCIEJhbmsnLCAnQ1JEQkJBTksnXSxcbiAgICBDcnlwdG86IFtcbiAgICAgICAgJ0JhbmtzIEJISU1VUCBCVEMgRXdhbGxldCBHb29nbGVQYXkgTG9jYWxCYW5rIFBheXBhbCBQYXl0bSBQZXJmZWN0IE1vbmV5IFBob25lUGhlJyxcbiAgICAgICAgJ2JpdGNvaW4nLFxuICAgICAgICAnQml0Y29pbicsXG4gICAgICAgICdCSVRDT0lOJyxcbiAgICAgICAgJ2JpdGNvaW5zJyxcbiAgICAgICAgJ0JpdGNvaW5zJyxcbiAgICAgICAgJ2J0YycsXG4gICAgICAgICdCVEMnLFxuICAgICAgICAnYnRjIHNtZWdhJyxcbiAgICAgICAgJ0NyaXB0bycsXG4gICAgICAgICdjcnlwdG8nLFxuICAgICAgICAnQ3J5cHRvJyxcbiAgICAgICAgJ0N5cHRvY3VycmVuY3knLFxuICAgICAgICAnY3J5cHRvY3VycmVuY2llcycsXG4gICAgICAgICdDcnlwdG9jdXJyZW5jaWVzJyxcbiAgICAgICAgJ0NyeXB0byBDdXJyZW5jaWVzJyxcbiAgICAgICAgJ0NSWVBUT0NVUlJFTkNJRVMnLFxuICAgICAgICAnY3J5cHRvY3VycmVuY3knLFxuICAgICAgICAnQ3J5cHRvY3VycmVuY3knLFxuICAgICAgICAnQ1JZUFRPQ1VSUkVOQ1knLFxuICAgICAgICAnQ3J5cHRvcycsXG4gICAgICAgICdFVEgnLFxuICAgICAgICAnZVVTRFQnLFxuICAgICAgICAnRVVTRFQnLFxuICAgICAgICAnTFRDJyxcbiAgICAgICAgJ1RldGhlcicsXG4gICAgICAgICdUUk9OJyxcbiAgICAgICAgJ1VTREMnLFxuICAgICAgICAnVVNEVCcsXG4gICAgICAgICdVU1QnLFxuICAgICAgICAnV2UgYWNjZXB0IENyeXB0bycsXG4gICAgICAgICdCQ0gnLFxuICAgICAgICAnQnRjJyxcbiAgICAgICAgJ0NyaXB0b21vZWRhcycsXG4gICAgICAgICdDcnlwdG8gUGF5bWVudCcsXG4gICAgICAgICdDcnlwdG8gdHJhbnNmZXInLFxuICAgICAgICAnQ3J5cHRvVHJhbnNmZXInLFxuICAgICAgICAnRS1XYWxsZXRzIGFuZCBDcnlwdG8nLFxuICAgICAgICAnRS13YWxsZXRzIGFuZCBDcnlwdG8nLFxuICAgICAgICAnRXRoZXJldW0nLFxuICAgICAgICAnRXRoZXJpdW0nLFxuICAgICAgICAnTGl0ZWNvaW4nLFxuICAgICAgICAnU2tyaWxsIE5ldGVsbGVyIENyeXB0bycsXG4gICAgICAgICdTa3JpbGxDcnlwdG8nLFxuICAgICAgICAnVGV0aGVyIEVSQzIwJyxcbiAgICAgICAgJ1RldGhlciBPbW5pJyxcbiAgICAgICAgJ1RoZXRoZXInLFxuICAgICAgICAnVXNkdCcsXG4gICAgICAgICdjcnlwdG9zJyxcbiAgICAgICAgJ2V0aGVyZXVtJyxcbiAgICAgICAgJ2xpdGVjb2luJyxcbiAgICBdLFxuICAgICdEaWFtb25kIEJhbmsnOiBbJ0RpYW1vbmQgYmFuaycsICdEaWFtb25kIEJhbmsnLCAnRGlhbW9uZEJhbmsnXSxcbiAgICAnRS1Nb2xhJzogWydFLU1vbGEnLCAnRS1tb2xhJywgJ0Vtb2xhJ10sXG4gICAgJ0UtbW9uZXknOiBbJ0UtbW9uZXknLCAnZSBtb25leSddLFxuICAgICdFLXBheW1lbnQnOiBbXG4gICAgICAgICdFLXBheW1lbnQnLFxuICAgICAgICAnYWxsIGZvcm0gb2YgRS1wYXltZW50cycsXG4gICAgICAgICdBbGwgZm9ybSBvZiBFLXBheW1lbnRzJyxcbiAgICAgICAgJ2FsbCBmb3JtcyBvZiBFLXBheW1lbnRzJyxcbiAgICAgICAgJ2FuZCBhbGwgb3RoZXIgZm9ybXMgb2YgRXBheW1lbnQnLFxuICAgICAgICAnYmFuayB0cmFuc2ZlciBhbmQgYWxsIGZvcm0gb2YgRS1wYXltZW50cycsXG4gICAgICAgICdCYW5rIFRyYW5zZmVyIGFuZCBhbGwgRm9ybXMgb2YgRS1wYXltZW50cycsXG4gICAgICAgICdFLXBheW1lbnRzJyxcbiAgICAgICAgJ0VwYXltZW50cycsXG4gICAgICAgICdBbGwgZm9ybXMgb2YgRS1QYXltZW50cycsXG4gICAgICAgICdEaWdpdGFsUGF5bWVudCcsXG4gICAgICAgICdPbmxpbmVUcmFuc2ZlcicsXG4gICAgICAgICdhbGwgZm9ybXMgb2YgRS1QYXltZW50JyxcbiAgICBdLFxuICAgICdFLXRyYW5zZmVyJzogWydFLXRyYW5zZmVyJywgJ2VsZWN0cm9uaWMgdHJhbnNmZXJzIGFuZCBjYXNoIGRlcG9zaXRzJywgJ0UtVHJhbnNmZXJzJywgJ09ubGluZVRyYW5zZmVyJ10sXG4gICAgJ0Utd2FsbGV0JzogW1xuICAgICAgICAnQmFua3MgQkhJTVVQIEJUQyBFd2FsbGV0IEdvb2dsZVBheSBMb2NhbEJhbmsgUGF5cGFsIFBheXRtIFBlcmZlY3QgTW9uZXkgUGhvbmVQaGUnLFxuICAgICAgICAnQmFuayBhbmQgRS13YWxsZXQnLFxuICAgICAgICAnYmFuayBld2FsbGV0JyxcbiAgICAgICAgJ0Jhbmsgd2lyZSBhbmQgZS13YWxsZXRzJyxcbiAgICAgICAgJ0Jhbmsgd2lyZSBhbmQgRS13YWxsZXRzJyxcbiAgICAgICAgJ2Jhbmsgd2lyZXMgYW5kIGUtd2FsbGV0JyxcbiAgICAgICAgJ0Jhbmsgd2lyZXMgYW5kIGUtd2FsbGV0cycsXG4gICAgICAgICdEaWdpdGFsIFdhbGxldHMnLFxuICAgICAgICAnZWxlY3Ryb25pYyB3YWxsZXRzJyxcbiAgICAgICAgJ2Utd2FsbGVycycsXG4gICAgICAgICdlLXdhbGxldCcsXG4gICAgICAgICdld2FsbGV0JyxcbiAgICAgICAgJ2VXYWxsZXQnLFxuICAgICAgICAnRS13YWxsZXQnLFxuICAgICAgICAnRXdhbGxldCcsXG4gICAgICAgICdFV0FMTEVUJyxcbiAgICAgICAgJ0Utd2FsbGV0IEJhbmsgdHJhbnNmZXInLFxuICAgICAgICAnRSB3YWxsZXQgRk5CJyxcbiAgICAgICAgJ0Utd2FsbGV0IHBheW1lbnQnLFxuICAgICAgICAnRXdhbGxldCBwYXltZW50JyxcbiAgICAgICAgJ2Utd2FsbGV0cycsXG4gICAgICAgICdld2FsbGV0cycsXG4gICAgICAgICdlLVdhbGxldHMnLFxuICAgICAgICAnZS1XQUxMRVRTJyxcbiAgICAgICAgJ0UtIHdhbGxldHMnLFxuICAgICAgICAnRS13YWxsZXRzJyxcbiAgICAgICAgJ0V3YWxsZXRzJyxcbiAgICAgICAgJ0UtV2FsbGV0cycsXG4gICAgICAgICdFLXdhbGxldHMgYW5kIGJhbmsgd2lyZXMnLFxuICAgICAgICAnZm5iIGV3YWxsZXQnLFxuICAgICAgICAnTVkgV0FMTEVUJyxcbiAgICAgICAgJ3dhbGxldCcsXG4gICAgICAgICdCYW5rIHRyYW5zZmVyIGFuZCBlLXdhbGxldHMnLFxuICAgICAgICAnRS1XYWxsZXRzIGFuZCBDcnlwdG8nLFxuICAgICAgICAnRS13YWxsZXRzIGFuZCBDcnlwdG8nLFxuICAgICAgICAnRS1XYWxsZXQnLFxuICAgICAgICAnRVdhbGxldHMnLFxuICAgICAgICAnRmlhdCcsXG4gICAgICAgICdPbmxpbmVUcmFuc2ZlcicsXG4gICAgICAgICdld2FsbGxldHMnLFxuICAgICAgICAnZXdhbGx0ZXRzJyxcbiAgICAgICAgJ2xvY2FsIGJhbmsgd2FsbGV0cyBhbmQgT3JhbmdlIG1vbmV5JyxcbiAgICBdLFxuICAgIEVhc3lwYWlzYTogWydlYXN5cGFpc2EnLCAnRWFzeSBwYWlzYScsICdFYXN5cGFpc2EnLCAnRWFzeSBQYWlzYScsICdFYXN5UGFpc2FUcmFuc2ZlciddLFxuICAgIEVjb2Jhbms6IFsnRWNvYmFuaycsICdFY28gQmFuaycsICdFQ08gQkFOSycsICdFY28gYmFuayBUcmFuc2ZlcnMnXSxcbiAgICBFY29DYXNoOiBbXG4gICAgICAgICdFY28gY2FzaCcsXG4gICAgICAgICdFY29jYXNoJyxcbiAgICAgICAgJ0Vjb0Nhc2gnLFxuICAgICAgICAnRUNPQ0FTSCcsXG4gICAgICAgICdFY29jYXNoIEZDQScsXG4gICAgICAgICdFY29jYXNoIG1ldGhvZCcsXG4gICAgICAgICdFQ09DQVNIIFdBTExFVCcsXG4gICAgICAgICdFY29jYXNoIFpXTCcsXG4gICAgICAgICdFY29jYXNoTW9iaWxlTW9uZXknLFxuICAgICAgICAnWndlY29jYXNoJyxcbiAgICBdLFxuICAgICdFbGVjdHJvbmljIEZ1bmRzIFRyYW5zZmVyIChFRlQpJzogWydFbGVjdHJvbmljIEZ1bmRzIFRyYW5zZmVyIChFRlQpJywgJ0VGVCddLFxuICAgICdFcXVpdHkgQmFuayc6IFsnRXF1aXR5IGJhbmsnLCAnRXF1aXR5IEJhbmsnLCAnZXF1aXR5YmFua21vbmV5dHJhbnNmZXInXSxcbiAgICAnRVUgTW9iaWxlIE1vbmV5JzogWydFVSBNb2JpbGUgTW9uZXknLCAnYWxsIG1vYmlsZSBtb25leScsICdFVSBNT05FWSddLFxuICAgIEV6eVBlc2E6IFsnRXp5UGVzYScsICdFenlwZXNhJywgJ0V6enkgcGVzYScsICdFenp5IFBlc2EnLCAnRXp6eVBlc2EnXSxcbiAgICBGYXNhUGF5OiBbJ2Zhc2FwYXknLCAnRmFzYSBwYXknLCAnRmFzYVBheSddLFxuICAgICdGYXN0IFBheW1lbnQnOiBbJ0Zhc3QgcGF5bWVudCcsICdGYXN0IFBheW1lbnQnXSxcbiAgICAnRmF5c2FsIEJhbmsnOiBbJ0ZheXNhbCBCYW5rJywgJ0ZheXNhbEJhbmsnXSxcbiAgICAnRkJDIEJhbmsnOiBbJ0ZCQyBCYW5rJywgJ0ZCQyBCQU5LJ10sXG4gICAgJ0ZpZGVsaXR5IEJhbmsnOiBbJ0ZpZGVsaXR5IEJhbmsnLCAnZmlkZWxpdHliYW5rJ10sXG4gICAgRmluYmFuazogWydGaW5iYW5rJywgJ0ZpbiBiYW5rJywgJ0ZpbkJhbmsnXSxcbiAgICAnRmlyc3QgQmFuayBvZiBOaWdlcmlhJzogW1xuICAgICAgICAnRmlyc3QgQmFuayBvZiBOaWdlcmlhJyxcbiAgICAgICAgJ0ZpcnN0IGJhbmsnLFxuICAgICAgICAnRmlyc3QgQmFuaycsXG4gICAgICAgICdGaXJzdEJhbmsnLFxuICAgICAgICAnRklSU1QgQkFOSycsXG4gICAgICAgICdGaXJzdGJhbmsnLFxuICAgIF0sXG4gICAgJ0ZpcnN0IENpdHkgTW9udW1lbnQgQmFuayAoRkNNQiknOiBbJ0ZpcnN0IENpdHkgTW9udW1lbnQgQmFuayAoRkNNQiknLCAnRkNNQicsICdmY21iJ10sXG4gICAgJ0ZpcnN0IE1pY3JvRmluYW5jZUJhbmsgKEZNRkIpJzogWydGaXJzdCBNaWNyb0ZpbmFuY2VCYW5rIChGTUZCKScsICdGTUZCJ10sXG4gICAgJ0ZpcnN0IE5hdGlvbmFsIEJhbmsgKEZOQiknOiBbXG4gICAgICAgICdGaXJzdCBOYXRpb25hbCBCYW5rIChGTkIpJyxcbiAgICAgICAgJ0RpcmVjdCBkZXBvc2l0IEZOQiBhbmQgQUJTQScsXG4gICAgICAgICdFIHdhbGxldCBGTkInLFxuICAgICAgICAnRmlyc3QgTmF0aW9uYWwgQmFuaycsXG4gICAgICAgICdmbmInLFxuICAgICAgICAnRk5CJyxcbiAgICAgICAgJ0ZOQiBBVE0gZGVwb3NpdCcsXG4gICAgICAgICdGbmJiYW5rJyxcbiAgICAgICAgJ0ZOQiBCYW5rJyxcbiAgICAgICAgJ0ZOQkIgQmFuayBUcmFuc2ZlcicsXG4gICAgICAgICdGTkIgY2FzaCBkZXBvc2l0JyxcbiAgICAgICAgJ2ZuYiBld2FsbGV0JyxcbiAgICAgICAgJ0ZOQiBGaXJzdCBOYXRpb25hbCBCYW5rJyxcbiAgICAgICAgJ0ZOQiBwYXkyY2VsbCcsXG4gICAgICAgICdGTkIgcGF5IHRvIGNlbGwnLFxuICAgICAgICAnRk5CIHBheSB0byBzZWxsJyxcbiAgICAgICAgJ1BheSB0byBjZWxsIEZOQicsXG4gICAgICAgICdGTkIgYmFuayB0cmFuc2ZlcicsXG4gICAgICAgICdGTkJCJyxcbiAgICAgICAgJ0ZOQkJhbmsnLFxuICAgICAgICAnRmlyTmF0aW9uYWxCYW5rJyxcbiAgICAgICAgJ0ZpcnN0IE5hdGlvbmFsIEJhbmsgb2YgQm90c3dhbmEnLFxuICAgICAgICAnRmlyc3RuYXRpb25hbGJhbmsnLFxuICAgICAgICAnRm5iJyxcbiAgICBdLFxuICAgIEdtb25leTogWydHbW9uZXknLCAnR01PTkVZJ10sXG4gICAgJ0dvb2dsZSBQYXknOiBbXG4gICAgICAgICdHb29nbGUgUGF5JyxcbiAgICAgICAgJ0JhbmtzIEJISU1VUCBCVEMgRXdhbGxldCBHb29nbGVQYXkgTG9jYWxCYW5rIFBheXBhbCBQYXl0bSBQZXJmZWN0IE1vbmV5IFBob25lUGhlJyxcbiAgICAgICAgJ0dvb2dsZSBwYXknLFxuICAgICAgICAnZ3BheScsXG4gICAgICAgICdHcGF5JyxcbiAgICAgICAgJ0dQYXknLFxuICAgIF0sXG4gICAgJ0dydXAgQkNBJzogWydHcnVwIEJDQScsICdHcnVwQkNBJ10sXG4gICAgJ0dUIGJhbmsnOiBbXG4gICAgICAgICdHVCBiYW5rJyxcbiAgICAgICAgJ0d0YicsXG4gICAgICAgICdHVEInLFxuICAgICAgICAnR3QgQmFuaycsXG4gICAgICAgICdHVCBCYW5rJyxcbiAgICAgICAgJ0dUQmFuaycsXG4gICAgICAgICdHVCBCQU5LJyxcbiAgICAgICAgJ0d0YmFuaycsXG4gICAgICAgICdHdWFyYW50ZWUgVHJ1c3QgQmFuaycsXG4gICAgICAgICdHdWFyYW50eVRydXN0QmFuaycsXG4gICAgXSxcbiAgICBIYWxvcGVzYTogWydoYWxvcGVzYScsICdIYWxvIHBlc2EnLCAnSGFsb3Blc2EnLCAnSGFsbyBQZXNhJywgJ0hhbG9QZXNhJywgJ0hBTE9QRVNBJ10sXG4gICAgJ0hhdHRvbiBOYXRpb25hbCBCYW5rJzogWydIYXR0b24gTmF0aW9uYWwgQmFuaycsICdIYXR0b25OYXRpb25hbEJhbmsnXSxcbiAgICBIQkw6IFsnSEJMJywgJ0hCTE1GQicsICdLT05ORVQgSEJMJ10sXG4gICAgSGVscDJQYXk6IFsnSGVscDJQYXknLCAnaGVscDJwYXknXSxcbiAgICAnSE5CIEJhbmsnOiBbJ0hOQiBCYW5rJywgJ0hOQiddLFxuICAgICdJTVBTIFRyYW5zZmVyJzogWydpbXBzJywgJ0ltcHMnLCAnSU1QUycsICdJTVBTIFRyYW5zZmVyJ10sXG4gICAgJ0lORyBCYW5rJzogWydJTkcgQmFuaycsICdJTkcnXSxcbiAgICBJbm5idWNrczogWydJbm5idWNrcycsICdJTk5CVUNLUyddLFxuICAgICdJbnN0YW50IE1vbmV5JzogW1xuICAgICAgICAnSW5zdGFudCBNb25leScsXG4gICAgICAgICdJbnN0YW50TW9uZXknLFxuICAgICAgICAnSW5zdGFudCBtb25leSBzdGFtYmljIGJhbmsnLFxuICAgICAgICAnSW5zdGFudCBtb25leSBzdGFuYmljJyxcbiAgICAgICAgJ0luc3RhbnQgbW9uZXknLFxuICAgIF0sXG4gICAgJ0ludGVyIEJhbmsgRnVuZCBUcmFuc2Zlcic6IFsnSW50ZXIgQmFuayBGdW5kIFRyYW5zZmVyJywgJ0ludGVyQmFua2Z1bmR0cmFuc2ZlcicsICdJbnRlcmJhbmsgVHJhbnNmZXInXSxcbiAgICAnSXRhdSBCYW5rJzogWydJdGF1IEJhbmsnLCAnSXRhdSddLFxuICAgIElaSTogWydJWkknLCAnSXp6eSddLFxuICAgIEphenpDYXNoOiBbJ0phenpDYXNoJywgJ2phenpjYXNoJywgJ0phenogY2FzaCcsICdKYXp6Y2FzaCcsICdKYXp6LUNhc2gnLCAnSmF6ekNhc2hUcmFuc2ZlciddLFxuICAgIEpFTklVUzogWydKRU5JVVMnLCAnSmVuaXVzJ10sXG4gICAgSmV0b246IFsnSmV0b24nLCAnamV0b24nLCAnSmV0b25XYWxsZXQnXSxcbiAgICAnS2V5IFN0b25lIEJhbmsnOiBbJ0tleSBTdG9uZSBCYW5rJywgJ0tleXN0b25lJ10sXG4gICAgJ0t1ZGEgQmFuayc6IFtcbiAgICAgICAgJ0t1ZGEgQmFuaycsXG4gICAgICAgICdLVURBIEJBTksnLFxuICAgICAgICAnS3VkYSBNRkInLFxuICAgICAgICAnS3VkYU1GQicsXG4gICAgICAgICdLVURBIE1JQ1JPRklOQU5DRSBCQU5LIDIwMTQ1NjM5MzcnLFxuICAgICAgICAnS3VkYSBNaWNyb2ZpbmFuY2UnLFxuICAgICAgICAnS1VEQScsXG4gICAgXSxcbiAgICAnTHVubyBXYWxsZXQnOiBbJ0x1bm8gV2FsbGV0JywgJ0x1bm8nLCAnTHVubyBjcnlwdG8gd2FsbGV0JywgJ0x1bm8gZS13YWxsZXQnLCAnTHVubyBld2FsbGV0JywgJ2x1bm8nXSxcbiAgICAnTWFuZGlyaSBCYW5rJzogWydNYW5kaXJpIEJhbmsnLCAnTWFuZGlyaScsICdNQU5ESVJJJywgJ01hbmRpcmlTeWFyaWFoJywgJ0JhbmtNYW5kaXJpJ10sXG4gICAgJ01lZXphbiBCYW5rJzogWydNZWV6YW4gQmFuaycsICdNZWV6YW5CYW5rJ10sXG4gICAgJ01pbGxlbml1bSBCaW0gVmlzYSc6IFsnTWlsbGVuaXVtIEJpbSBWaXNhJywgJ01pbGxlbml1bSBCaW0nXSxcbiAgICBNSVg6IFsnbWl4JywgJ01peCcsICdNSVgnLCAnTWl4ZWQnXSxcbiAgICAnTW9iaWxlIG1vbmV5JzogW1xuICAgICAgICAnYWxsIG1vYmlsZSBtb25leScsXG4gICAgICAgICdtb2JpbGUgYmFua2luZycsXG4gICAgICAgICdNb2JpbGUgYmFua2luZycsXG4gICAgICAgICdNb2JpbGUgbW9uZXknLFxuICAgICAgICAnTW9iaWxlIE1vbmV5JyxcbiAgICAgICAgJ01vYmlsZU1vbmV5JyxcbiAgICAgICAgJ01vYmlsZSBtb25leSBNVE4nLFxuICAgICAgICAnTW9iaWxlIE1vbmV5IHRyYW5zZmVyJyxcbiAgICAgICAgJ01PQklMRSBNT05FWSBUUkFOU0ZFUicsXG4gICAgICAgICdNb2JpbGUgbW9uZXkgdHJhbnNmZXJzJyxcbiAgICAgICAgJ01vYmlsZW1vbmV5b3B0aW9uJyxcbiAgICAgICAgJ09ubGluZVRyYW5zZmVyJyxcbiAgICBdLFxuICAgICdNb2pvIE11bGEnOiBbJ01vam8gbW9uZXknLCAnTW9qbyBNdWxhJywgJ01PSk8gTVVMQScsICdNb01vIHBheScsICdNb2pvIE1vb2xhaCddLFxuICAgIE1vTW86IFsnTW9NbycsICdNT01PJywgJ01vTW8gcGF5JywgJ01UTiBNT01PJywgJ01UTk1PTU8nXSxcbiAgICBNb25leUdyYW06IFsnTW9uZXlncmFtJywgJ01vbmV5IEdyYW0nLCAnTW9uZXlHcmFtJywgJ01vbmV5IGdyYW1lJ10sXG4gICAgJ00tUEVTQSc6IFtcbiAgICAgICAgJ0FiZXNhZmFyaWNvbU1wZXNhIFRyYW5zZmVycycsXG4gICAgICAgICdtcGVzYScsXG4gICAgICAgICdNIHBlc2EnLFxuICAgICAgICAnTS1wZXNhJyxcbiAgICAgICAgJ01wZXNhJyxcbiAgICAgICAgJ00gUGVzYScsXG4gICAgICAgICdNLVBlc2EnLFxuICAgICAgICAnTVBlc2EnLFxuICAgICAgICAnTSBQRVNBJyxcbiAgICAgICAgJ00tUEVTQScsXG4gICAgICAgICdNUEVTQScsXG4gICAgICAgICdNLVBlc2EgVGlnby1QZXNhIFQtUGVzYScsXG4gICAgICAgICdQZXNhJyxcbiAgICAgICAgJ3NhZmFyaWNvbSBtcGVzYScsXG4gICAgICAgICdNUEVTQSAwNzEwMzkzOTQ3IEFsYmVydCBLeWFsbycsXG4gICAgICAgICdWb2RhY29tTXBlc2EnLFxuICAgIF0sXG4gICAgJ01UTiBNT01PJzogW1xuICAgICAgICAnYWxsIG1vYmlsZSBtb25leScsXG4gICAgICAgICdNb2JpbGUgbW9uZXkgTVROJyxcbiAgICAgICAgJ01vTW8nLFxuICAgICAgICAnTU9NTycsXG4gICAgICAgICdNVE4nLFxuICAgICAgICAnTVROIG1vYmlsZSBtb25leScsXG4gICAgICAgICdNVE4gTW9iaWxlIG1vbmV5JyxcbiAgICAgICAgJ01UTiBNb2JpbGUgTW9uZXknLFxuICAgICAgICAnTVROIE1PQklMRSBNT05FWScsXG4gICAgICAgICdNVE5NT0JJTEVNT05FWScsXG4gICAgICAgICdNVE4gTU9NTycsXG4gICAgICAgICdNVE5NT01PJyxcbiAgICAgICAgJ01UTiBNT05FWScsXG4gICAgXSxcbiAgICAnTXVrdXJ1IG1vbmV5IHRyYW5zZmVycyc6IFsnTXVrdXJ1JywgJ011a3VydSBtb25leSB0cmFuc2ZlcnMnLCAnTXVrdXJ1TW9uZXlUcmFuc2ZlcicsICdVU0RNdWt1cnV0cmFuc2ZlciddLFxuICAgICdNeVpha2EgTWFzY29tIE1vbmV5JzogW1xuICAgICAgICAnTXlaYWthIE1hc2NvbSBNb25leScsXG4gICAgICAgICdtYXNjb20nLFxuICAgICAgICAnbWFzY29tIG15WmFrYScsXG4gICAgICAgICdNYXNjb20gTXlaYWthJyxcbiAgICAgICAgJ215emFrYScsXG4gICAgICAgICdNeSB6YWthJyxcbiAgICAgICAgJ015emFrYScsXG4gICAgICAgICdNeVpha2EnLFxuICAgICAgICAnTXkgemFrYSBtYXNjb20gbW9uZXknLFxuICAgICAgICAnbXkgWmFrYScsXG4gICAgICAgICdteXphYWthJyxcbiAgICBdLFxuICAgIE5lZnQ6IFsnbmVmdCcsICdOZWZ0JywgJ05FRlQnXSxcbiAgICBOZXF1aTogWydOZXF1aScsICdOZXF1aSBvIERhdmlwbGF0YSBhbCAzMDAgNjgzOTAyNiddLFxuICAgIE5ldGVsbGVyOiBbJ25lVGVsbGVyJywgJ05ldGVsbGVyJywgJ05FVEVMTEVSJywgJ05FVGVsbGUnLCAnU2tyaWxsIE5ldGVsbGVyIENyeXB0bycsICduZXRlbGxlcicsICduZXR0ZWxsZXInXSxcbiAgICAnTmlnZXJpYSBsb2NhbCBiYW5rJzogWydOaWdlcmlhIExvY2FsJywgJ05pZ2VyaWEgbG9jYWwgYmFuaycsICdOSUdFUklBIExPQ0FMIEJBTksnXSxcbiAgICAnTk1CIEJhbmsnOiBbJ05NQiBCYW5rJywgJ05BVElPTkFMTUlDUk9GSU5BTkNFQkFOSycsICdObWIgYmFuayddLFxuICAgICdPbmUgTW9uZXknOiBbJ09NJywgJ09uZW1vbmV5JywgJ09uZSBNb25leScsICdPbmUgbW9uZXkgc2VydmljZScsICdPbmVNb25leScsICdPbmVNb25leU1vYmlsZU1vbmV5J10sXG4gICAgT3BheTogWydPcGF5JywgJ09QQVknXSxcbiAgICAnT3JhbmdlIE1vbmV5IFRyYW5zZmVyJzogW1xuICAgICAgICAnQWJzYSBmdW5kIHRyYW5zZmVyIGFuZCBvcmFuZ2UgbW9uZXkgc2VydmljZXMnLFxuICAgICAgICAnT3JhbmdlIENhbWVyb29uJyxcbiAgICAgICAgJ29yYW5nZSBtb25leScsXG4gICAgICAgICdvcmFuZ2Vtb25leScsXG4gICAgICAgICdPcmFuZ2UgbW9uZXknLFxuICAgICAgICAnT3JhbmdlbW9uZXknLFxuICAgICAgICAnT3JhbmdlIE1vbmV5JyxcbiAgICAgICAgJ09yYW5nZU1vbmV5JyxcbiAgICAgICAgJ09SQU5HRSBNT05FWScsXG4gICAgICAgICdPcmFuZ2UgTW9uZXkgVHJhbnNmZXInLFxuICAgICAgICAnbG9jYWwgYmFuayB3YWxsZXRzIGFuZCBPcmFuZ2UgbW9uZXknLFxuICAgIF0sXG4gICAgUGFsbVBheTogWydQYWxtUGF5JywgJ1BBTE1QQVknXSxcbiAgICAnUGF5IHNhZmUgQ2FyZCc6IFsncGF5c2FmZWNhcmQnLCAnUGF5IHNhZmUgQ2FyZCddLFxuICAgIFBheTJDZWxsOiBbXG4gICAgICAgICdGTkIgcGF5MmNlbGwnLFxuICAgICAgICAnRk5CIHBheSB0byBjZWxsJyxcbiAgICAgICAgJ0ZOQiBwYXkgdG8gc2VsbCcsXG4gICAgICAgICdQYXkyY2VsbCcsXG4gICAgICAgICdQYXkyQ2VsbCcsXG4gICAgICAgICdQQVkyQ0VMTCcsXG4gICAgICAgICdwYXkgdG8gY2VsbCcsXG4gICAgICAgICdQYXkgdG8gY2VsbCcsXG4gICAgICAgICdQYXl0b2NlbGwnLFxuICAgICAgICAnUGF5IHRvIENlbGwnLFxuICAgICAgICAnUGF5IHRvIGNlbGwgRk5CJyxcbiAgICAgICAgJ1BheVRvQ2VsbCcsXG4gICAgICAgICdwYXkyY2VsbCcsXG4gICAgXSxcbiAgICAnUGF5bWVudCBDaGVja3MnOiBbJ1BheW1lbnQgY2hlY2tzJywgJ1BheW1lbnQgQ2hlY2tzJ10sXG4gICAgUGF5UGFsOiBbXG4gICAgICAgICdCYW5rcyBCSElNVVAgQlRDIEV3YWxsZXQgR29vZ2xlUGF5IExvY2FsQmFuayBQYXlwYWwgUGF5dG0gUGVyZmVjdCBNb25leSBQaG9uZVBoZScsXG4gICAgICAgICdQYXlwYWwnLFxuICAgICAgICAnUGF5UGFsJyxcbiAgICAgICAgJ1BBWVBBTCcsXG4gICAgICAgICdwYXlwYWwnLFxuICAgIF0sXG4gICAgUGF5VE06IFsnQmFua3MgQkhJTVVQIEJUQyBFd2FsbGV0IEdvb2dsZVBheSBMb2NhbEJhbmsgUGF5cGFsIFBheXRtIFBlcmZlY3QgTW9uZXkgUGhvbmVQaGUnLCAnUGF5dG0nLCAnUGF5VE0nXSxcbiAgICAnUGVyZmVjdCBNb25leSc6IFtcbiAgICAgICAgJ0JhbmtzIEJISU1VUCBCVEMgRXdhbGxldCBHb29nbGVQYXkgTG9jYWxCYW5rIFBheXBhbCBQYXl0bSBQZXJmZWN0IE1vbmV5IFBob25lUGhlJyxcbiAgICAgICAgJ3BlcmZlY3QgbW9uZXknLFxuICAgICAgICAncGVyZmVjdG1vbmV5JyxcbiAgICAgICAgJ1BlcmZlY3QgbW9uZXknLFxuICAgICAgICAnUGVyZmVjdG1vbmV5JyxcbiAgICAgICAgJ1BlcmZlY3QgTW9uZXknLFxuICAgICAgICAnUGVyZmVjdE1vbmV5JyxcbiAgICAgICAgJ1BFUkZFQ1QgTU9ORVknLFxuICAgICAgICAnUGVyZmVjdCBNb25leSBhbmQgV2VibW9uZXknLFxuICAgICAgICAnUE0nLFxuICAgICAgICAnUEVSRkVDVE1PTkVZJyxcbiAgICAgICAgJ1BFUkZFQ1QnLFxuICAgIF0sXG4gICAgJ1Blcm1hdGEgQmFuayc6IFsnUGVybWF0YSBCYW5rJywgJ1Blcm1hdGFCYW5rJywgJ1BFUk1BVEEnXSxcbiAgICBQaG9uZVBoZTogW1xuICAgICAgICAnUGhvbmVQaGUnLFxuICAgICAgICAnQmFua3MgQkhJTVVQIEJUQyBFd2FsbGV0IEdvb2dsZVBheSBMb2NhbEJhbmsgUGF5cGFsIFBheXRtIFBlcmZlY3QgTW9uZXkgUGhvbmVQaGUnLFxuICAgICAgICAnUGhvbmVwYXknLFxuICAgICAgICAncGhvbmVwZScsXG4gICAgICAgICdQaG9uZXBlJyxcbiAgICAgICAgJ1Bob25lUGUnLFxuICAgICAgICAnUGhvbmUgcGF5JyxcbiAgICAgICAgJ1Bob25lUGF5JyxcbiAgICBdLFxuICAgIFBpeDogWydQaXgnLCAnUElYJ10sXG4gICAgJ1BvbGFyaXMgQmFuayc6IFsnUG9sYXJpcyBCYW5rJywgJ1BvbGFyaXMnXSxcbiAgICAnUG9udG8gMjQnOiBbJ0NvbnRhIG1vdmVsJywgJ0NvbnRhIE1vdmVsJywgJ0NvbnRhbW92ZWxCQ0knLCAnUG9udG8gMjQnLCAnUG9udG8yNCddLFxuICAgICdQb3MgZGVwb3NpdCc6IFsnUG9zJywgJ1BPUycsICdQb3MgZGVwb3NpdCddLFxuICAgICdQb3N0YWwgdHJhbnNmZXInOiBbJ1Bvc3RhbCB0cmFuc2ZlcicsICdFZ3lwdGlhbiBwb3N0YWwgdHJhbnNmZXJzJ10sXG4gICAgUklBOiBbJ1JpYScsICdSSUEnXSxcbiAgICAnUlRHUyBUcmFuc2ZlcnMnOiBbJ1JUR1MgVHJhbnNmZXJzJywgJ3J0Z3MnLCAnUlRHUycsICdSdGdzIGJhbmsgdHJhbnNmZXInLCAnUlRHUyB0cmFuc2ZlcnMnLCAnUnRncyddLFxuICAgIFNhZmFyaWNvbTogWydTYWZhcmljb20nLCAnQWJlc2FmYXJpY29tTXBlc2EgVHJhbnNmZXJzJywgJ0FiZVNhZmFyaWNvbU1wZXNhVHJhbnNmZXJzJywgJ3NhZmFyaWNvbSBtcGVzYSddLFxuICAgICdTYW1hIE1vbmV5JzogWydTYW1hIE1vbmV5JywgJ1NhbWEgbW9uZXknXSxcbiAgICBTaG9wZWVQYXk6IFsnU2hvcGVlUGF5JywgJ1NIT1BFRVBBWSddLFxuICAgIFNrcmlsbDogW1xuICAgICAgICAnU2tyaWxsJyxcbiAgICAgICAgJ1NraWxsJyxcbiAgICAgICAgJ1NrcmlsJyxcbiAgICAgICAgJ3NrcmlsbCcsXG4gICAgICAgICdTS1JJTEwnLFxuICAgICAgICAnc2tyaWxscGF5bWVudHMnLFxuICAgICAgICAnU2tybGwnLFxuICAgICAgICAnU2tyaWxsQ3J5cHRvJyxcbiAgICAgICAgJ1NrcmlsbCBOZXRlbGxlciBDcnlwdG8nLFxuICAgIF0sXG4gICAgU21lZ2E6IFsnYnRjIHNtZWdhJywgJ3NtZWdhJywgJ1NtZWdhJ10sXG4gICAgJ1N0YW5kYXJkIEJhbmsgTmFtaWJpYSc6IFsnU3RhbmRhcmQgQmFuayBOYW1pYmlhJywgJ1N0YW5kYXJkIEJhbmsnLCAnU3RhbmRhcmRCYW5rJ10sXG4gICAgJ1N0YW5iaWMgQmFuayc6IFtcbiAgICAgICAgJ0luc3RhbnQgbW9uZXkgc3RhbWJpYyBiYW5rJyxcbiAgICAgICAgJ0luc3RhbnQgbW9uZXkgc3RhbmJpYycsXG4gICAgICAgICdzdGFuYmljJyxcbiAgICAgICAgJ1N0YW5iaWMnLFxuICAgICAgICAnU3RhbmJpYyBCYW5rJyxcbiAgICAgICAgJ1N0YW5iaWNCYW5rJyxcbiAgICAgICAgJ1N0YW5iaWMgQmFuayBUcmFuc2ZlcicsXG4gICAgICAgICdTdGFuYmljIE1vbmV5IFRyYW5zZmVyJyxcbiAgICAgICAgJ1N0YW5kYmljJyxcbiAgICAgICAgJ1N0YW5iaWMgSUJUQycsXG4gICAgICAgICdTdGFuYmljIGJhbmsnLFxuICAgIF0sXG4gICAgJ1N0YW5kYXJkIENoYXJ0ZWQgQmFuayc6IFtcbiAgICAgICAgJ1NUQU5DSEFSVCcsXG4gICAgICAgICdTdGFuZGFyZCBDaGFydGVkIEJhbmsnLFxuICAgICAgICAnU3RhbmRhcmQgY2hhcnRlcmVkJyxcbiAgICAgICAgJ1N0YW5kYXJkIGNoYXJ0ZXJlZCBiYW5rJyxcbiAgICAgICAgJ1N0YW5kYXJkIENoYXJ0ZXJlZCBCYW5rIFRyYW5zZmVyJyxcbiAgICAgICAgJ1N0YW5kYXJkIENoYXR0ZXJkIEJhbmsnLFxuICAgIF0sXG4gICAgJ1N0ZXdhcmQgcmVtaXQnOiBbJ1N0ZXdhcmQgcmVtaXQnLCAnU3Rld2FyZCBSZW1taXR0J10sXG4gICAgJ1QtcGVzYSc6IFsnTS1QZXNhIFRpZ28tUGVzYSBULVBlc2EnLCAnUGVzYScsICdULXBlc2EnLCAnVHBlc2EnLCAnVCBQRVNBJywgJ1RUQ0xwZXNhJ10sXG4gICAgJ1RpZ28gQ2FzaCc6IFsnVGlnbycsICdUaWdvIENhc2gnLCAnQWlydGVsVGlnbyBjYXNoJ10sXG4gICAgJ1RpZ28gTW9iaWxlIE1vbmV5JzogW1xuICAgICAgICAnVGlnbyBNb2JpbGUgTW9uZXknLFxuICAgICAgICAnQWlydGVsIFRpZ28nLFxuICAgICAgICAnYWxsIG1vYmlsZSBtb25leScsXG4gICAgICAgICdUaWdvJyxcbiAgICAgICAgJ1RJR08gTU9CSUxFIE1PTkVZJyxcbiAgICAgICAgJ1RJR09NT0JJTEVNT05FWScsXG4gICAgICAgICdBaXJ0ZWxUaWdvIGNhc2gnLFxuICAgIF0sXG4gICAgJ1RpZ28gUGVzYSc6IFtcbiAgICAgICAgJ00tUGVzYSBUaWdvLVBlc2EgVC1QZXNhJyxcbiAgICAgICAgJ1Blc2EnLFxuICAgICAgICAnVGlnbycsXG4gICAgICAgICd0aWdvcGVzYScsXG4gICAgICAgICdUaWdvIHBlc2EnLFxuICAgICAgICAnVGlnb3Blc2EnLFxuICAgICAgICAnVGlnbyBQZXNhJyxcbiAgICAgICAgJ1RpZ29QZXNhJyxcbiAgICAgICAgJ1RJR08gUEVTQScsXG4gICAgICAgICdUVENMcGVzYScsXG4gICAgICAgICdUSUdPUEVTQScsXG4gICAgXSxcbiAgICAnVHJhbnNmZXJlbmNpYSBiYW5jYXJpYSc6IFtcbiAgICAgICAgJ1RyYW5zZmVyZW5jaWEgYmFuY2FyaWEnLFxuICAgICAgICAnVHJhbnNmZXJlbmNpYSBFbGV0cm9uaWNhIFRFRCcsXG4gICAgICAgICdUcmFuc2ZlcmVuY2lhcyBiYW5jYXJpYXMnLFxuICAgICAgICAnVGVkJyxcbiAgICAgICAgJ1RyYW5zZmVyZW5jaWEgQmFuY2FyaWEnLFxuICAgIF0sXG4gICAgJ1VCQSBCYW5rJzogWydVQkEnLCAnVUJBIEJhbmsnLCAnVUJBIEJBTksnXSxcbiAgICAnVW5pb24gQmFuayc6IFsnVW5pb24gQmFuaycsICdVbmlvbmJhbmsnLCAnVW5pb24nXSxcbiAgICAnVW5pdGVkIEJhbmsgTGltaXRlZCAoVUJMKSc6IFsnVW5pdGVkIEJhbmsgTGltaXRlZCAoVUJMKScsICdVQkwgQmFuayddLFxuICAgIFVQSTogW1xuICAgICAgICAnQWxsIFVQSSBUcmFuc2ZlcicsXG4gICAgICAgICdCYW5rcyBCSElNVVAgQlRDIEV3YWxsZXQgR29vZ2xlUGF5IExvY2FsQmFuayBQYXlwYWwgUGF5dG0gUGVyZmVjdCBNb25leSBQaG9uZVBoZScsXG4gICAgICAgICd1cGknLFxuICAgICAgICAnVVBJJyxcbiAgICAgICAgJ1VQSSB0cmFuc2ZlcicsXG4gICAgICAgICdBbWF6b25VUEknLFxuICAgICAgICAnUGF5dG1VUEknLFxuICAgICAgICAnVXBpJyxcbiAgICBdLFxuICAgICdVU1NEIGNvZGUgdHJhbnNmZXInOiBbXG4gICAgICAgICdVU1NEIGNvZGUgdHJhbnNmZXInLFxuICAgICAgICAnT3IgVVNTRCB0cmFuc2ZlciBmcm9tIGFsbCBOaWdlcmlhIGJhbmtzJyxcbiAgICAgICAgJ1VTU0QgQ29kZScsXG4gICAgICAgICdVU1NEIENPREUnLFxuICAgICAgICAnVXNzZCBjb2RlIFRyYW5zZmVyIGZyb20gYWxsIE5pZ2VyaWFuIGJhbmtzJyxcbiAgICAgICAgJ1Vzc2QgdHJhbnNmZXInLFxuICAgICAgICAnVVNTRCB0cmFuc2ZlcicsXG4gICAgICAgICdVU1NEIFRyYW5zZmVyJyxcbiAgICAgICAgJ3Vzc2QgdHJhbnNmZXInLFxuICAgIF0sXG4gICAgVm9kYWNvbTogWydWb2RhY29tJywgJ1ZvZGFjb21NcGVzYSddLFxuICAgICdWb2RhZm9uZSBDYXNoJzogWydWb2RhZm9uIENhc2ggTWV0aG9kcycsICdWb2RhZm9uZSBjYXNoJywgJ1ZvZGFmb25lIENhc2gnLCAnVk9EQUZPTkUgQ0FTSCcsICdWT0RBRk9ORUNBU0gnXSxcbiAgICBXZWJtb25leTogWydQZXJmZWN0IE1vbmV5IGFuZCBXZWJtb25leScsICdXZWJtb25leScsICdXZWJNb25leScsICdXZWIgTW9uZXknLCAnV2ViIG1vbmV5J10sXG4gICAgJ1dlQ2hhdCBQYXknOiBbJ1dlQ2hhdCBQYXknLCAnV2VDaGF0UGF5J10sXG4gICAgJ1dlbWEgQmFuayc6IFsnV2VtYSBCYW5rJywgJ1dlbWEnXSxcbiAgICBXZXN0ZXJuVW5pb246IFsnV2VzdGVybiB1bmlvbicsICdXZXN0ZXJuIFVuaW9uJywgJ1dlc3Rlcm5VbmlvbicsICd3ZXN0ZXJudW5pb24nXSxcbiAgICBXaXNlOiBbJ1dpc2UnLCAndHJhbnNmZXJ3aXNlJ10sXG4gICAgJ1dvcmxkIFJlbWl0JzogWydXb3JsZCByZW1pdCcsICdXb3JsZCBSZW1pdCcsICdDb2luYmFzZXdvcmxkUmVtaXQnXSxcbiAgICAnWmFuYWNvIGJhbmsnOiBbJ1pBTkFDTycsICdaYW5hY28gYmFuayddLFxuICAgICdaZW5pdGggYmFuayc6IFsnWmVuaXRoIGJhbmsnLCAnWmVuaXRoYmFuaycsICdaZW5pdGggQmFuaycsICdaZW5pdGhCYW5rJywgJ1pFTklUSCBCQU5LJywgJ1plbml0aCcsICd6ZW5pdGhiYW5rJ10sXG4gICAgWmlwaXQ6IFsnWmlwaXQnLCAnWklQSVQnLCAnWklQSVQgYmFuayB0cmFuc2ZlcnMnXSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHsgY29udGFpbmVycywgbWFwX2FjdGlvbiwgaWNvbl9wYXltZW50X21ldGhvZHMsIHBheW1lbnRfbWV0aG9kcyB9O1xuIiwiaW1wb3J0IHsgYWN0aW9uLCBtYWtlT2JzZXJ2YWJsZSwgb2JzZXJ2YWJsZSB9IGZyb20gJ21vYngnO1xuaW1wb3J0IHsgZ2V0UHJvcGVydHlWYWx1ZSB9IGZyb20gJ0BkZXJpdi9zaGFyZWQnO1xuaW1wb3J0IHsgVFNlcnZlckVycm9yIH0gZnJvbSAnVHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFcnJvclN0b3JlIHtcbiAgICBtZXNzYWdlID0gJyc7XG4gICAgY29kZSA9ICcnO1xuICAgIGZpZWxkcyA9ICcnO1xuICAgIGlzX3Nob3dfZnVsbF9wYWdlID0gZmFsc2U7XG4gICAgb25DbGlja0J1dHRvbjogVm9pZEZ1bmN0aW9uIHwgbnVsbCA9IG51bGw7XG4gICAgaXNfYXNrX3VrX2Z1bmRzX3Byb3RlY3Rpb24gPSBmYWxzZTtcbiAgICBpc19zZWxmX2V4Y2x1c2lvbl9tYXhfdHVybm92ZXJfc2V0ID0gZmFsc2U7XG4gICAgaXNfYXNrX2F1dGhlbnRpY2F0aW9uID0gZmFsc2U7XG4gICAgaXNfYXNrX2ZpbmFuY2lhbF9yaXNrX2FwcHJvdmFsID0gZmFsc2U7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgbWFrZU9ic2VydmFibGUodGhpcywge1xuICAgICAgICAgICAgbWVzc2FnZTogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGNvZGU6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBmaWVsZHM6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBpc19zaG93X2Z1bGxfcGFnZTogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIG9uQ2xpY2tCdXR0b246IG9ic2VydmFibGUsXG4gICAgICAgICAgICBpc19hc2tfdWtfZnVuZHNfcHJvdGVjdGlvbjogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGlzX3NlbGZfZXhjbHVzaW9uX21heF90dXJub3Zlcl9zZXQ6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBpc19hc2tfYXV0aGVudGljYXRpb246IG9ic2VydmFibGUsXG4gICAgICAgICAgICBpc19hc2tfZmluYW5jaWFsX3Jpc2tfYXBwcm92YWw6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBzZXRFcnJvck1lc3NhZ2U6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIGhhbmRsZUNhc2hpZXJFcnJvcjogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0TWVzc2FnZTogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0SXNBc2tVa0Z1bmRzUHJvdGVjdGlvbjogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0SXNTZWxmRXhjbHVzaW9uTWF4VHVybm92ZXJTZXQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldElzQXNrQXV0aGVudGljYXRpb246IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldElzQXNrRmluYW5jaWFsUmlza0FwcHJvdmFsOiBhY3Rpb24uYm91bmQsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNldEVycm9yTWVzc2FnZShlcnJvcjogVFNlcnZlckVycm9yLCBvbkNsaWNrQnV0dG9uPzogVm9pZEZ1bmN0aW9uIHwgbnVsbCwgaXNfc2hvd19mdWxsX3BhZ2U/OiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIC8vIGZvciBlcnJvcnMgdGhhdCBuZWVkIHRvIHNob3cgYSBidXR0b24sIHJlc2V0IHRoZSBmb3JtXG4gICAgICAgIGNvbnN0IGVycm9yX29iamVjdCA9IHtcbiAgICAgICAgICAgIG9uQ2xpY2tCdXR0b24sXG4gICAgICAgICAgICBjb2RlOiBlcnJvci5jb2RlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICAgIGlzX3Nob3dfZnVsbF9wYWdlOiBpc19zaG93X2Z1bGxfcGFnZSB8fCAvSW52YWxpZFRva2VufFdyb25nUmVzcG9uc2UvLnRlc3QoZXJyb3IuY29kZSksXG4gICAgICAgICAgICAuLi4oZ2V0UHJvcGVydHlWYWx1ZShlcnJvciwgWydkZXRhaWxzJywgJ2ZpZWxkcyddKSAmJiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiBlcnJvci5kZXRhaWxzPy5maWVsZHMsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm9uQ2xpY2tCdXR0b24gPSBlcnJvcl9vYmplY3Qub25DbGlja0J1dHRvbjtcbiAgICAgICAgdGhpcy5jb2RlID0gZXJyb3Jfb2JqZWN0LmNvZGU7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IGVycm9yX29iamVjdC5tZXNzYWdlO1xuICAgICAgICB0aGlzLmlzX3Nob3dfZnVsbF9wYWdlID0gZXJyb3Jfb2JqZWN0LmlzX3Nob3dfZnVsbF9wYWdlO1xuICAgICAgICB0aGlzLmZpZWxkcyA9IGVycm9yX29iamVjdC5maWVsZHM7XG4gICAgICAgIHRoaXMuaXNfYXNrX3VrX2Z1bmRzX3Byb3RlY3Rpb24gPSBlcnJvcl9vYmplY3Q/LmlzX2Fza191a19mdW5kc19wcm90ZWN0aW9uO1xuICAgICAgICB0aGlzLmlzX3NlbGZfZXhjbHVzaW9uX21heF90dXJub3Zlcl9zZXQgPSBlcnJvcl9vYmplY3Q/LmlzX3NlbGZfZXhjbHVzaW9uX21heF90dXJub3Zlcl9zZXQ7XG4gICAgICAgIHRoaXMuaXNfYXNrX2F1dGhlbnRpY2F0aW9uID0gZXJyb3Jfb2JqZWN0Py5pc19hc2tfYXV0aGVudGljYXRpb247XG4gICAgICAgIHRoaXMuaXNfYXNrX2ZpbmFuY2lhbF9yaXNrX2FwcHJvdmFsID0gZXJyb3Jfb2JqZWN0Py5pc19hc2tfZmluYW5jaWFsX3Jpc2tfYXBwcm92YWw7XG4gICAgfVxuXG4gICAgaGFuZGxlQ2FzaGllckVycm9yKGVycm9yOiBUU2VydmVyRXJyb3IpOiB2b2lkIHtcbiAgICAgICAgc3dpdGNoIChlcnJvci5jb2RlKSB7XG4gICAgICAgICAgICBjYXNlICdBU0tfVE5DX0FQUFJPVkFMJzpcbiAgICAgICAgICAgICAgICB0aGlzLnNldEVycm9yTWVzc2FnZShlcnJvciwgbnVsbCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdBU0tfRklYX0RFVEFJTFMnOlxuICAgICAgICAgICAgICAgIHRoaXMuc2V0RXJyb3JNZXNzYWdlKGVycm9yLCBudWxsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0FTS19VS19GVU5EU19QUk9URUNUSU9OJzpcbiAgICAgICAgICAgICAgICB0aGlzLnNldElzQXNrVWtGdW5kc1Byb3RlY3Rpb24odHJ1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdBU0tfU0VMRl9FWENMVVNJT05fTUFYX1RVUk5PVkVSX1NFVCc6XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRJc1NlbGZFeGNsdXNpb25NYXhUdXJub3ZlclNldCh0cnVlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0FTS19BVVRIRU5USUNBVEUnOlxuICAgICAgICAgICAgY2FzZSAnQVNLX0FHRV9WRVJJRklDQVRJT04nOlxuICAgICAgICAgICAgICAgIHRoaXMuc2V0SXNBc2tBdXRoZW50aWNhdGlvbih0cnVlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0FTS19GSU5BTkNJQUxfUklTS19BUFBST1ZBTCc6XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRJc0Fza0ZpbmFuY2lhbFJpc2tBcHByb3ZhbCh0cnVlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRFcnJvck1lc3NhZ2UoZXJyb3IpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0SXNBc2tVa0Z1bmRzUHJvdGVjdGlvbihmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRJc1NlbGZFeGNsdXNpb25NYXhUdXJub3ZlclNldChmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRJc0Fza0F1dGhlbnRpY2F0aW9uKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldElzQXNrRmluYW5jaWFsUmlza0FwcHJvdmFsKGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldE1lc3NhZ2UodmFsdWU6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBzZXRJc0Fza1VrRnVuZHNQcm90ZWN0aW9uKHZhbHVlOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaXNfYXNrX3VrX2Z1bmRzX3Byb3RlY3Rpb24gPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBzZXRJc1NlbGZFeGNsdXNpb25NYXhUdXJub3ZlclNldCh2YWx1ZTogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICB0aGlzLmlzX3NlbGZfZXhjbHVzaW9uX21heF90dXJub3Zlcl9zZXQgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBzZXRJc0Fza0F1dGhlbnRpY2F0aW9uKHZhbHVlOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaXNfYXNrX2F1dGhlbnRpY2F0aW9uID0gdmFsdWU7XG4gICAgfVxuXG4gICAgc2V0SXNBc2tGaW5hbmNpYWxSaXNrQXBwcm92YWwodmFsdWU6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5pc19hc2tfZmluYW5jaWFsX3Jpc2tfYXBwcm92YWwgPSB2YWx1ZTtcbiAgICB9XG59XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgYWN0aW9uLCBjb21wdXRlZCwgb2JzZXJ2YWJsZSwgbWFrZU9ic2VydmFibGUgfSBmcm9tICdtb2J4JztcbmltcG9ydCB7XG4gICAgZm9ybWF0TW9uZXksXG4gICAgaXNFbXB0eU9iamVjdCxcbiAgICBpc0NyeXB0b2N1cnJlbmN5LFxuICAgIGdldEN1cnJlbmNpZXMsXG4gICAgZ2V0Q3VycmVuY3lEaXNwbGF5Q29kZSxcbiAgICBnZXREZWNpbWFsUGxhY2VzLFxuICAgIGdldENGREFjY291bnREaXNwbGF5LFxuICAgIGdldENGREFjY291bnQsXG4gICAgZ2V0UHJvcGVydHlWYWx1ZSxcbiAgICB2YWxpZE51bWJlcixcbiAgICBDRkRfUExBVEZPUk1TLFxufSBmcm9tICdAZGVyaXYvc2hhcmVkJztcbmltcG9ydCB7IGxvY2FsaXplLCBMb2NhbGl6ZSB9IGZyb20gJ0BkZXJpdi90cmFuc2xhdGlvbnMnO1xuaW1wb3J0IENvbnN0YW50cyBmcm9tICdDb25zdGFudHMvY29uc3RhbnRzJztcbmltcG9ydCBFcnJvclN0b3JlIGZyb20gJy4vZXJyb3Itc3RvcmUnO1xuXG5jb25zdCBoYXNUcmFuc2Zlck5vdEFsbG93ZWRMb2dpbmlkID0gbG9naW5pZCA9PiBsb2dpbmlkLnN0YXJ0c1dpdGgoJ01YJyk7XG5cbmNvbnN0IGdldFNlbGVjdGVkRXJyb3IgPSAoc2VsZWN0ZWRfdmFsdWUsIGlzX2Zyb21fYWNjb3VudCkgPT4ge1xuICAgIGlmIChpc19mcm9tX2FjY291bnQpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxMb2NhbGl6ZVxuICAgICAgICAgICAgICAgIGkxOG5fZGVmYXVsdF90ZXh0PSdUcmFuc2ZlciBmcm9tIHt7c2VsZWN0ZWRfdmFsdWV9fSBpcyBub3QgYWxsb3dlZCwgUGxlYXNlIGNob29zZSBhbm90aGVyIGFjY291bnQgZnJvbSBkcm9wZG93bidcbiAgICAgICAgICAgICAgICB2YWx1ZXM9e3sgc2VsZWN0ZWRfdmFsdWUgfX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPExvY2FsaXplXG4gICAgICAgICAgICBpMThuX2RlZmF1bHRfdGV4dD0nVHJhbnNmZXIgdG8ge3tzZWxlY3RlZF92YWx1ZX19IGlzIG5vdCBhbGxvd2VkLCBQbGVhc2UgY2hvb3NlIGFub3RoZXIgYWNjb3VudCBmcm9tIGRyb3Bkb3duJ1xuICAgICAgICAgICAgdmFsdWVzPXt7IHNlbGVjdGVkX3ZhbHVlIH19XG4gICAgICAgIC8+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFjY291bnRUcmFuc2ZlclN0b3JlIHtcbiAgICBjb25zdHJ1Y3Rvcih7IFdTLCByb290X3N0b3JlIH0pIHtcbiAgICAgICAgbWFrZU9ic2VydmFibGUodGhpcywge1xuICAgICAgICAgICAgYWNjb3VudHNfbGlzdDogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGNvbnRhaW5lcjogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGVycm9yOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgaGFzX25vX2FjY291bnQ6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBoYXNfbm9fYWNjb3VudHNfYmFsYW5jZTogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGlzX3RyYW5zZmVyX2NvbmZpcm06IG9ic2VydmFibGUsXG4gICAgICAgICAgICBpc190cmFuc2Zlcl9zdWNjZXNzZnVsOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgaXNfbXQ1X3RyYW5zZmVyX2luX3Byb2dyZXNzOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgbWluaW11bV9mZWU6IG9ic2VydmFibGUsXG4gICAgICAgICAgICByZWNlaXB0OiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgc2VsZWN0ZWRfZnJvbTogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIHNlbGVjdGVkX3RvOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgYWNjb3VudF90cmFuc2Zlcl9hbW91bnQ6IG9ic2VydmFibGUsXG4gICAgICAgICAgICB0cmFuc2Zlcl9mZWU6IG9ic2VydmFibGUsXG4gICAgICAgICAgICB0cmFuc2Zlcl9saW1pdDogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGlzX2FjY291bnRfdHJhbnNmZXJfdmlzaWJsZTogY29tcHV0ZWQsXG4gICAgICAgICAgICBpc190cmFuc2Zlcl9sb2NrZWQ6IGNvbXB1dGVkLFxuICAgICAgICAgICAgc2V0QmFsYW5jZUJ5TG9naW5JZDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0QmFsYW5jZVNlbGVjdGVkRnJvbTogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0QmFsYW5jZVNlbGVjdGVkVG86IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIG9uTW91bnRBY2NvdW50VHJhbnNmZXI6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldEhhc05vQWNjb3VudHNCYWxhbmNlOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRIYXNOb0FjY291bnQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldFRyYW5zZmVyRmVlOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRNaW5pbXVtRmVlOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRUcmFuc2ZlckxpbWl0OiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzb3J0QWNjb3VudHNUcmFuc2ZlcjogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0U2VsZWN0ZWRGcm9tOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRTZWxlY3RlZFRvOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRBY2NvdW50czogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0SXNUcmFuc2ZlckNvbmZpcm06IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldEFjY291bnRUcmFuc2ZlckFtb3VudDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0SXNUcmFuc2ZlclN1Y2Nlc3NmdWw6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldElzTVQ1VHJhbnNmZXJJblByb2dyZXNzOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRSZWNlaXB0VHJhbnNmZXI6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIG9uQ2hhbmdlVHJhbnNmZXJGcm9tOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBvbkNoYW5nZVRyYW5zZmVyVG86IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHJlc2V0QWNjb3VudFRyYW5zZmVyOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRUcmFuc2ZlclBlcmNlbnRhZ2VTZWxlY3RvclJlc3VsdDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgdmFsaWRhdGVUcmFuc2ZlckZyb21BbW91bnQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHZhbGlkYXRlVHJhbnNmZXJUb0Ftb3VudDogYWN0aW9uLmJvdW5kLFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnJvb3Rfc3RvcmUgPSByb290X3N0b3JlO1xuICAgICAgICB0aGlzLldTID0gV1M7XG4gICAgfVxuXG4gICAgYWNjb3VudHNfbGlzdCA9IFtdO1xuICAgIGNvbnRhaW5lciA9IENvbnN0YW50cy5jb250YWluZXJzLmFjY291bnRfdHJhbnNmZXI7XG4gICAgZXJyb3IgPSBuZXcgRXJyb3JTdG9yZSgpO1xuICAgIGhhc19ub19hY2NvdW50ID0gZmFsc2U7XG4gICAgaGFzX25vX2FjY291bnRzX2JhbGFuY2UgPSBmYWxzZTtcbiAgICBpc190cmFuc2Zlcl9jb25maXJtID0gZmFsc2U7XG4gICAgaXNfdHJhbnNmZXJfc3VjY2Vzc2Z1bCA9IGZhbHNlO1xuICAgIGlzX210NV90cmFuc2Zlcl9pbl9wcm9ncmVzcyA9IGZhbHNlO1xuICAgIG1pbmltdW1fZmVlID0gbnVsbDtcbiAgICByZWNlaXB0ID0ge307XG4gICAgc2VsZWN0ZWRfZnJvbSA9IHt9O1xuICAgIHNlbGVjdGVkX3RvID0ge307XG4gICAgYWNjb3VudF90cmFuc2Zlcl9hbW91bnQgPSAnJztcbiAgICB0cmFuc2Zlcl9mZWUgPSBudWxsO1xuICAgIHRyYW5zZmVyX2xpbWl0ID0ge307XG5cbiAgICBnZXQgaXNfYWNjb3VudF90cmFuc2Zlcl92aXNpYmxlKCkge1xuICAgICAgICBjb25zdCB7IGhhc19tYWx0YWludmVzdF9hY2NvdW50LCBsYW5kaW5nX2NvbXBhbnlfc2hvcnRjb2RlLCByZXNpZGVuY2UgfSA9IHRoaXMucm9vdF9zdG9yZS5jbGllbnQ7XG4gICAgICAgIC8vIGNhc2hpZXIgVHJhbnNmZXIgYWNjb3VudCB0YWIgaXMgaGlkZGVuIGZvciBpb20gY2xpZW50c1xuICAgICAgICAvLyBjaGVjayBmb3IgcmVzaWRlbmNlIHRvIGhpZGUgdGhlIHRhYiBiZWZvcmUgY3JlYXRpbmcgYSByZWFsIG1vbmV5IGFjY291bnRcbiAgICAgICAgcmV0dXJuIHJlc2lkZW5jZSAhPT0gJ2ltJyAmJiAobGFuZGluZ19jb21wYW55X3Nob3J0Y29kZSAhPT0gJ21hbHRhJyB8fCBoYXNfbWFsdGFpbnZlc3RfYWNjb3VudCk7XG4gICAgfVxuXG4gICAgZ2V0IGlzX3RyYW5zZmVyX2xvY2tlZCgpIHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgaXNfZmluYW5jaWFsX2FjY291bnQsXG4gICAgICAgICAgICBpc19maW5hbmNpYWxfaW5mb3JtYXRpb25faW5jb21wbGV0ZSxcbiAgICAgICAgICAgIGlzX3RyYWRpbmdfZXhwZXJpZW5jZV9pbmNvbXBsZXRlLFxuICAgICAgICAgICAgYWNjb3VudF9zdGF0dXMsXG4gICAgICAgIH0gPSB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50O1xuXG4gICAgICAgIGlmICghYWNjb3VudF9zdGF0dXMuc3RhdHVzKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgY29uc3QgbmVlZF9maW5hbmNpYWxfYXNzZXNzbWVudCA9XG4gICAgICAgICAgICBpc19maW5hbmNpYWxfYWNjb3VudCAmJiAoaXNfZmluYW5jaWFsX2luZm9ybWF0aW9uX2luY29tcGxldGUgfHwgaXNfdHJhZGluZ19leHBlcmllbmNlX2luY29tcGxldGUpO1xuXG4gICAgICAgIHJldHVybiBuZWVkX2ZpbmFuY2lhbF9hc3Nlc3NtZW50ICYmIHRoaXMuZXJyb3IuaXNfYXNrX2ZpbmFuY2lhbF9yaXNrX2FwcHJvdmFsO1xuICAgIH1cblxuICAgIHNldEJhbGFuY2VCeUxvZ2luSWQobG9naW5pZCwgYmFsYW5jZSkge1xuICAgICAgICB0aGlzLmFjY291bnRzX2xpc3QuZmluZChhY2MgPT4gbG9naW5pZCA9PT0gYWNjLnZhbHVlKS5iYWxhbmNlID0gYmFsYW5jZTtcbiAgICB9XG5cbiAgICBzZXRCYWxhbmNlU2VsZWN0ZWRGcm9tKGJhbGFuY2UpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZF9mcm9tLmJhbGFuY2UgPSBiYWxhbmNlO1xuICAgIH1cblxuICAgIHNldEJhbGFuY2VTZWxlY3RlZFRvKGJhbGFuY2UpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZF90by5iYWxhbmNlID0gYmFsYW5jZTtcbiAgICB9XG5cbiAgICAvLyBwb3NzaWJsZSB0cmFuc2ZlcnM6XG4gICAgLy8gMS4gZmlhdCB0byBjcnlwdG8gJiB2aWNlIHZlcnNhXG4gICAgLy8gMi4gZmlhdCB0byBtdCAmIHZpY2UgdmVyc2FcbiAgICAvLyAzLiBjcnlwdG8gdG8gbXQgJiB2aWNlIHZlcnNhXG4gICAgYXN5bmMgb25Nb3VudEFjY291bnRUcmFuc2ZlcigpIHtcbiAgICAgICAgY29uc3QgeyBjbGllbnQsIGNvbW1vbiwgbW9kdWxlcyB9ID0gdGhpcy5yb290X3N0b3JlO1xuICAgICAgICBjb25zdCB7IG9uTW91bnRDb21tb24sIHNldExvYWRpbmcsIHNldE9uUmVtb3VudCB9ID0gbW9kdWxlcy5jYXNoaWVyLmdlbmVyYWxfc3RvcmU7XG4gICAgICAgIGNvbnN0IHsgYWN0aXZlX2FjY291bnRzLCBpc19sb2dnZWRfaW4gfSA9IGNsaWVudDtcbiAgICAgICAgY29uc3QgeyBpc19mcm9tX2Rlcml2Z28gfSA9IGNvbW1vbjtcblxuICAgICAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgICAgICBzZXRPblJlbW91bnQodGhpcy5vbk1vdW50QWNjb3VudFRyYW5zZmVyKTtcbiAgICAgICAgYXdhaXQgb25Nb3VudENvbW1vbigpO1xuICAgICAgICBhd2FpdCB0aGlzLldTLndhaXQoJ3dlYnNpdGVfc3RhdHVzJyk7XG5cbiAgICAgICAgLy8gY2hlY2sgaWYgc29tZSBiYWxhbmNlIHVwZGF0ZSBoYXMgY29tZSBpbiBzaW5jZSB0aGUgbGFzdCBtb3VudFxuICAgICAgICBjb25zdCBoYXNfdXBkYXRlZF9hY2NvdW50X2JhbGFuY2UgPVxuICAgICAgICAgICAgdGhpcy5oYXNfbm9fYWNjb3VudHNfYmFsYW5jZSAmJlxuICAgICAgICAgICAgT2JqZWN0LmtleXMoYWN0aXZlX2FjY291bnRzKS5maW5kKFxuICAgICAgICAgICAgICAgIGFjY291bnQgPT4gIWFjdGl2ZV9hY2NvdW50c1thY2NvdW50XS5pc192aXJ0dWFsICYmIGFjdGl2ZV9hY2NvdW50c1thY2NvdW50XS5iYWxhbmNlXG4gICAgICAgICAgICApO1xuICAgICAgICBpZiAoaGFzX3VwZGF0ZWRfYWNjb3VudF9iYWxhbmNlKSB7XG4gICAgICAgICAgICB0aGlzLnNldEhhc05vQWNjb3VudHNCYWxhbmNlKGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHZhcmlvdXMgaXNzdWVzIGhhcHBlbiB3aGVuIGxvYWRpbmcgZnJvbSBjYWNoZVxuICAgICAgICAvLyBlLmcuIG5ldyBhY2NvdW50IG1heSBoYXZlIGJlZW4gY3JlYXRlZCwgdHJhbnNmZXIgbWF5IGhhdmUgYmVlbiBkb25lIGVsc2V3aGVyZSwgZXRjXG4gICAgICAgIC8vIHNvIG9uIGxvYWQgb2YgdGhpcyBwYWdlIGp1c3QgY2FsbCBpdCBhZ2FpblxuICAgICAgICBpZiAoaXNfbG9nZ2VkX2luKSB7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2Zlcl9iZXR3ZWVuX2FjY291bnRzID0gYXdhaXQgdGhpcy5XUy5hdXRob3JpemVkLnRyYW5zZmVyQmV0d2VlbkFjY291bnRzKCk7XG5cbiAgICAgICAgICAgIGlmICh0cmFuc2Zlcl9iZXR3ZWVuX2FjY291bnRzLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lcnJvci5zZXRFcnJvck1lc3NhZ2UodHJhbnNmZXJfYmV0d2Vlbl9hY2NvdW50cy5lcnJvciwgdGhpcy5vbk1vdW50QWNjb3VudFRyYW5zZmVyKTtcbiAgICAgICAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghaXNfZnJvbV9kZXJpdmdvKSB7XG4gICAgICAgICAgICAgICAgdHJhbnNmZXJfYmV0d2Vlbl9hY2NvdW50cy5hY2NvdW50cyA9IHRyYW5zZmVyX2JldHdlZW5fYWNjb3VudHMuYWNjb3VudHMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50ID0+IGFjY291bnQuYWNjb3VudF90eXBlICE9PSBDRkRfUExBVEZPUk1TLkRFUklWRVpcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXRoaXMuY2FuRG9BY2NvdW50VHJhbnNmZXIodHJhbnNmZXJfYmV0d2Vlbl9hY2NvdW50cy5hY2NvdW50cykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc29ydEFjY291bnRzVHJhbnNmZXIodHJhbnNmZXJfYmV0d2Vlbl9hY2NvdW50cywgaXNfZnJvbV9kZXJpdmdvKTtcbiAgICAgICAgICAgIHRoaXMuc2V0VHJhbnNmZXJGZWUoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0TWluaW11bUZlZSgpO1xuICAgICAgICAgICAgdGhpcy5zZXRUcmFuc2ZlckxpbWl0KCk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmFjY291bnRzX2xpc3Q/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjZmRfdHJhbnNmZXJfdG9fbG9naW5faWQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdjZmRfdHJhbnNmZXJfdG9fbG9naW5faWQnKTtcbiAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCdjZmRfdHJhbnNmZXJfdG9fbG9naW5faWQnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBvYmpfdmFsdWVzID0gdGhpcy5hY2NvdW50c19saXN0LmZpbmQoYWNjb3VudCA9PiBhY2NvdW50LnZhbHVlID09PSBjZmRfdHJhbnNmZXJfdG9fbG9naW5faWQpO1xuICAgICAgICAgICAgICAgIGlmIChvYmpfdmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNUcmFuc2Zlck5vdEFsbG93ZWRMb2dpbmlkKG9ial92YWx1ZXMudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiBzZWxlY3RlZCB0byBpcyBub3QgYWxsb3dlZCBhY2NvdW50XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmpfdmFsdWVzLmVycm9yID0gZ2V0U2VsZWN0ZWRFcnJvcihvYmpfdmFsdWVzLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGVkVG8ob2JqX3ZhbHVlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgIH1cblxuICAgIGNhbkRvQWNjb3VudFRyYW5zZmVyKGFjY291bnRzKSB7XG4gICAgICAgIGxldCBjYW5fdHJhbnNmZXIgPSB0cnVlO1xuICAgICAgICAvLyBzaG91bGQgaGF2ZSBhdCBsZWFzdCBvbmUgYWNjb3VudCB3aXRoIGJhbGFuY2VcbiAgICAgICAgaWYgKCFhY2NvdW50cy5maW5kKGFjY291bnQgPT4gK2FjY291bnQuYmFsYW5jZSA+IDApKSB7XG4gICAgICAgICAgICBjYW5fdHJhbnNmZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuc2V0SGFzTm9BY2NvdW50c0JhbGFuY2UodHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldEhhc05vQWNjb3VudHNCYWxhbmNlKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzaG91bGQgaGF2ZSBhdCBsZWFzdCB0d28gcmVhbC1tb25leSBhY2NvdW50c1xuICAgICAgICBpZiAoYWNjb3VudHMubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgICAgIGNhbl90cmFuc2ZlciA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5zZXRIYXNOb0FjY291bnQodHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldEhhc05vQWNjb3VudChmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjYW5fdHJhbnNmZXIpIHtcbiAgICAgICAgICAgIHRoaXMucm9vdF9zdG9yZS5tb2R1bGVzLmNhc2hpZXIuZ2VuZXJhbF9zdG9yZS5zZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FuX3RyYW5zZmVyO1xuICAgIH1cblxuICAgIHNldEhhc05vQWNjb3VudHNCYWxhbmNlKGhhc19ub19hY2NvdW50c19iYWxhbmNlKSB7XG4gICAgICAgIHRoaXMuaGFzX25vX2FjY291bnRzX2JhbGFuY2UgPSBoYXNfbm9fYWNjb3VudHNfYmFsYW5jZTtcbiAgICB9XG5cbiAgICBzZXRIYXNOb0FjY291bnQoaGFzX25vX2FjY291bnQpIHtcbiAgICAgICAgdGhpcy5oYXNfbm9fYWNjb3VudCA9IGhhc19ub19hY2NvdW50O1xuICAgIH1cblxuICAgIHNldFRyYW5zZmVyRmVlKCkge1xuICAgICAgICBjb25zdCB0cmFuc2Zlcl9mZWUgPSBnZXRQcm9wZXJ0eVZhbHVlKGdldEN1cnJlbmNpZXMoKSwgW1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZF9mcm9tLmN1cnJlbmN5LFxuICAgICAgICAgICAgJ3RyYW5zZmVyX2JldHdlZW5fYWNjb3VudHMnLFxuICAgICAgICAgICAgJ2ZlZXMnLFxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZF90by5jdXJyZW5jeSxcbiAgICAgICAgXSk7XG4gICAgICAgIHRoaXMudHJhbnNmZXJfZmVlID0gTnVtYmVyKHRyYW5zZmVyX2ZlZSB8fCAwKTtcbiAgICB9XG5cbiAgICBzZXRNaW5pbXVtRmVlKCkge1xuICAgICAgICBjb25zdCBkZWNpbWFscyA9IGdldERlY2ltYWxQbGFjZXModGhpcy5zZWxlY3RlZF9mcm9tLmN1cnJlbmN5KTtcbiAgICAgICAgLy8gd2UgbmVlZCAudG9GaXhlZCgpIHNvIHRoYXQgaXQgZG9lc24ndCBkaXNwbGF5IGluIHNjaWVudGlmaWMgbm90YXRpb24sIGUuZy4gMWUtOCBmb3IgY3VycmVuY2llcyB3aXRoIDggZGVjaW1hbCBwbGFjZXNcbiAgICAgICAgdGhpcy5taW5pbXVtX2ZlZSA9ICgxIC8gTWF0aC5wb3coMTAsIGRlY2ltYWxzKSkudG9GaXhlZChkZWNpbWFscyk7XG4gICAgfVxuXG4gICAgc2V0VHJhbnNmZXJMaW1pdCgpIHtcbiAgICAgICAgY29uc3QgaXNfbXRfdHJhbnNmZXIgPSB0aGlzLnNlbGVjdGVkX2Zyb20uaXNfbXQgfHwgdGhpcy5zZWxlY3RlZF90by5pc19tdDtcbiAgICAgICAgY29uc3QgaXNfZHh0cmFkZV90cmFuc2ZlciA9IHRoaXMuc2VsZWN0ZWRfZnJvbS5pc19keHRyYWRlIHx8IHRoaXMuc2VsZWN0ZWRfdG8uaXNfZHh0cmFkZTtcbiAgICAgICAgY29uc3QgaXNfZGVyaXZlel90cmFuc2ZlciA9IHRoaXMuc2VsZWN0ZWRfZnJvbS5pc19kZXJpdmV6IHx8IHRoaXMuc2VsZWN0ZWRfdG8uaXNfZGVyaXZlejtcblxuICAgICAgICBsZXQgbGltaXRzX2tleTtcbiAgICAgICAgaWYgKGlzX210X3RyYW5zZmVyKSB7XG4gICAgICAgICAgICBsaW1pdHNfa2V5ID0gJ2xpbWl0c19tdDUnO1xuICAgICAgICB9IGVsc2UgaWYgKGlzX2R4dHJhZGVfdHJhbnNmZXIpIHtcbiAgICAgICAgICAgIGxpbWl0c19rZXkgPSAnbGltaXRzX2R4dHJhZGUnO1xuICAgICAgICB9IGVsc2UgaWYgKGlzX2Rlcml2ZXpfdHJhbnNmZXIpIHtcbiAgICAgICAgICAgIGxpbWl0c19rZXkgPSAnbGltaXRzX2Rlcml2ZXonO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGltaXRzX2tleSA9ICdsaW1pdHMnO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdHJhbnNmZXJfbGltaXQgPSBnZXRQcm9wZXJ0eVZhbHVlKGdldEN1cnJlbmNpZXMoKSwgW1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZF9mcm9tLmN1cnJlbmN5LFxuICAgICAgICAgICAgJ3RyYW5zZmVyX2JldHdlZW5fYWNjb3VudHMnLFxuICAgICAgICAgICAgbGltaXRzX2tleSxcbiAgICAgICAgXSk7XG4gICAgICAgIGNvbnN0IGJhbGFuY2UgPSB0aGlzLnNlbGVjdGVkX2Zyb20uYmFsYW5jZTtcbiAgICAgICAgY29uc3QgZGVjaW1hbF9wbGFjZXMgPSBnZXREZWNpbWFsUGxhY2VzKHRoaXMuc2VsZWN0ZWRfZnJvbS5jdXJyZW5jeSk7XG4gICAgICAgIC8vIHdlIG5lZWQgLnRvRml4ZWQoKSBzbyB0aGF0IGl0IGRvZXNuJ3QgZGlzcGxheSBpbiBzY2llbnRpZmljIG5vdGF0aW9uLCBlLmcuIDFlLTggZm9yIGN1cnJlbmNpZXMgd2l0aCA4IGRlY2ltYWwgcGxhY2VzXG4gICAgICAgIHRoaXMudHJhbnNmZXJfbGltaXQgPSB7XG4gICAgICAgICAgICBtYXg6XG4gICAgICAgICAgICAgICAgIXRyYW5zZmVyX2xpbWl0Py5tYXggfHwgKCtiYWxhbmNlID49ICh0cmFuc2Zlcl9saW1pdD8ubWluIHx8IDApICYmICtiYWxhbmNlIDw9IHRyYW5zZmVyX2xpbWl0Py5tYXgpXG4gICAgICAgICAgICAgICAgICAgID8gYmFsYW5jZVxuICAgICAgICAgICAgICAgICAgICA6IHRyYW5zZmVyX2xpbWl0Py5tYXgudG9GaXhlZChkZWNpbWFsX3BsYWNlcyksXG4gICAgICAgICAgICBtaW46IHRyYW5zZmVyX2xpbWl0Py5taW4gPyAoK3RyYW5zZmVyX2xpbWl0Py5taW4pLnRvRml4ZWQoZGVjaW1hbF9wbGFjZXMpIDogbnVsbCxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhc3luYyBzb3J0QWNjb3VudHNUcmFuc2ZlcihyZXNwb25zZV9hY2NvdW50cywgaXNfZnJvbV9kZXJpdmdvKSB7XG4gICAgICAgIGNvbnN0IHRyYW5zZmVyX2JldHdlZW5fYWNjb3VudHMgPSByZXNwb25zZV9hY2NvdW50cyB8fCAoYXdhaXQgdGhpcy5XUy5hdXRob3JpemVkLnRyYW5zZmVyQmV0d2VlbkFjY291bnRzKCkpO1xuICAgICAgICBpZiAoIXRoaXMuYWNjb3VudHNfbGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmICh0cmFuc2Zlcl9iZXR3ZWVuX2FjY291bnRzLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpc19mcm9tX2Rlcml2Z28gJiYgdHJhbnNmZXJfYmV0d2Vlbl9hY2NvdW50cyAmJiBBcnJheS5pc0FycmF5KHRyYW5zZmVyX2JldHdlZW5fYWNjb3VudHMuYWNjb3VudHMpKSB7XG4gICAgICAgICAgICB0cmFuc2Zlcl9iZXR3ZWVuX2FjY291bnRzLmFjY291bnRzID0gdHJhbnNmZXJfYmV0d2Vlbl9hY2NvdW50cy5hY2NvdW50cy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgYWNjb3VudCA9PiBhY2NvdW50LmFjY291bnRfdHlwZSAhPT0gQ0ZEX1BMQVRGT1JNUy5ERVJJVkVaXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbXQ1X2xvZ2luX2xpc3QgPSAoYXdhaXQgdGhpcy5XUy5zdG9yYWdlLm10NUxvZ2luTGlzdCgpKT8ubXQ1X2xvZ2luX2xpc3Q7XG4gICAgICAgIC8vIFRPRE86IG1vdmUgYHRyYWRpbmdQbGF0Zm9ybUFjY291bnRzTGlzdGAgdG8gZGVyaXYtYXBpIHRvIHVzZSBzdG9yYWdlXG4gICAgICAgIGNvbnN0IGR4dHJhZGVfYWNjb3VudHNfbGlzdCA9IChhd2FpdCB0aGlzLldTLnRyYWRpbmdQbGF0Zm9ybUFjY291bnRzTGlzdChDRkRfUExBVEZPUk1TLkRYVFJBREUpKVxuICAgICAgICAgICAgPy50cmFkaW5nX3BsYXRmb3JtX2FjY291bnRzO1xuXG4gICAgICAgIGNvbnN0IGRlcml2ZXpfYWNjb3VudHNfbGlzdCA9IChhd2FpdCB0aGlzLldTLnRyYWRpbmdQbGF0Zm9ybUFjY291bnRzTGlzdChDRkRfUExBVEZPUk1TLkRFUklWRVopKVxuICAgICAgICAgICAgPy50cmFkaW5nX3BsYXRmb3JtX2FjY291bnRzO1xuXG4gICAgICAgIC8vIFRPRE86IHJlbW92ZSB0aGlzIHRlbXBvcmFyeSBtYXBwaW5nIHdoZW4gQVBJIGFkZHMgbWFya2V0X3R5cGUgYW5kIHN1Yl9hY2NvdW50X3R5cGUgdG8gdHJhbnNmZXJfYmV0d2Vlbl9hY2NvdW50c1xuICAgICAgICBjb25zdCBhY2NvdW50cyA9IHRyYW5zZmVyX2JldHdlZW5fYWNjb3VudHMuYWNjb3VudHMubWFwKGFjY291bnQgPT4ge1xuICAgICAgICAgICAgaWYgKGFjY291bnQuYWNjb3VudF90eXBlID09PSBDRkRfUExBVEZPUk1TLk1UNSAmJiBBcnJheS5pc0FycmF5KG10NV9sb2dpbl9saXN0KSAmJiBtdDVfbG9naW5fbGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAvLyBhY2NvdW50X3R5cGUgaW4gdHJhbnNmZXJfYmV0d2Vlbl9hY2NvdW50cyAobXQ1fGJpbmFyeSlcbiAgICAgICAgICAgICAgICAvLyBnZXRzIG92ZXJyaWRkZW4gYnkgYWNjb3VudF90eXBlIGluIG10NV9sb2dpbl9saXN0IChkZW1vfHJlYWwpXG4gICAgICAgICAgICAgICAgLy8gc2luY2UgaW4gY2FzaGllciBhbGwgdGhlc2UgYXJlIHJlYWwgYWNjb3VudHMsIHRoZSBtdDUgYWNjb3VudCB0eXBlIGlzIHdoYXQgd2Ugd2FudCB0byBrZWVwXG4gICAgICAgICAgICAgICAgY29uc3QgZm91bmRfYWNjb3VudCA9IG10NV9sb2dpbl9saXN0LmZpbmQoYWNjID0+IGFjYy5sb2dpbiA9PT0gYWNjb3VudC5sb2dpbmlkKTtcblxuICAgICAgICAgICAgICAgIGlmIChmb3VuZF9hY2NvdW50ID09PSB1bmRlZmluZWQpIHJldHVybiBhY2NvdW50O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uYWNjb3VudCwgLi4uZm91bmRfYWNjb3VudCwgYWNjb3VudF90eXBlOiBDRkRfUExBVEZPUk1TLk1UNSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGFjY291bnQuYWNjb3VudF90eXBlID09PSBDRkRfUExBVEZPUk1TLkRYVFJBREUgJiZcbiAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KGR4dHJhZGVfYWNjb3VudHNfbGlzdCkgJiZcbiAgICAgICAgICAgICAgICBkeHRyYWRlX2FjY291bnRzX2xpc3QubGVuZ3RoXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAvLyBhY2NvdW50X3R5cGUgaW4gdHJhbnNmZXJfYmV0d2Vlbl9hY2NvdW50cyAobXQ1fGJpbmFyeSlcbiAgICAgICAgICAgICAgICAvLyBnZXRzIG92ZXJyaWRkZW4gYnkgYWNjb3VudF90eXBlIGluIGR4dHJhZGVfYWNjb3VudHNfbGlzdCAoZGVtb3xyZWFsKVxuICAgICAgICAgICAgICAgIC8vIHNpbmNlIGluIGNhc2hpZXIgYWxsIHRoZXNlIGFyZSByZWFsIGFjY291bnRzLCB0aGUgbXQ1IGFjY291bnQgdHlwZSBpcyB3aGF0IHdlIHdhbnQgdG8ga2VlcFxuICAgICAgICAgICAgICAgIGNvbnN0IGZvdW5kX2FjY291bnQgPSBkeHRyYWRlX2FjY291bnRzX2xpc3QuZmluZChhY2MgPT4gYWNjLmFjY291bnRfaWQgPT09IGFjY291bnQubG9naW5pZCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZm91bmRfYWNjb3VudCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gYWNjb3VudDtcblxuICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLmFjY291bnQsIC4uLmZvdW5kX2FjY291bnQsIGFjY291bnRfdHlwZTogQ0ZEX1BMQVRGT1JNUy5EWFRSQURFIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgYWNjb3VudC5hY2NvdW50X3R5cGUgPT09IENGRF9QTEFURk9STVMuREVSSVZFWiAmJlxuICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkoZGVyaXZlel9hY2NvdW50c19saXN0KSAmJlxuICAgICAgICAgICAgICAgIGRlcml2ZXpfYWNjb3VudHNfbGlzdC5sZW5ndGhcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZvdW5kX2FjY291bnQgPSBkZXJpdmV6X2FjY291bnRzX2xpc3QuZmluZChhY2MgPT4gYWNjLmxvZ2luID09PSBhY2NvdW50LmxvZ2luaWQpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kX2FjY291bnQgPT09IHVuZGVmaW5lZCkgcmV0dXJuIGFjY291bnQ7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5hY2NvdW50LCAuLi5mb3VuZF9hY2NvdW50LCBhY2NvdW50X3R5cGU6IENGRF9QTEFURk9STVMuREVSSVZFWiB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFjY291bnQ7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBzb3J0IGFjY291bnRzIGFzIGZvbGxvd3M6XG4gICAgICAgIC8vIGZvciBNVDUsIHN5bnRoZXRpYywgZmluYW5jaWFsLCBmaW5hbmNpYWwgc3RwXG4gICAgICAgIC8vIGZvciBub24tTVQ1LCBmaWF0LCBjcnlwdG8gKGFscGhhYmV0aWNhbGx5IGJ5IGN1cnJlbmN5KVxuICAgICAgICAvLyBzaG91bGQgaGF2ZSBtb3JlIHRoYW4gb25lIGFjY291bnRcbiAgICAgICAgaWYgKHRyYW5zZmVyX2JldHdlZW5fYWNjb3VudHMuYWNjb3VudHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgYWNjb3VudHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFfaXNfbXQgPSBhLmFjY291bnRfdHlwZSA9PT0gQ0ZEX1BMQVRGT1JNUy5NVDU7XG4gICAgICAgICAgICAgICAgY29uc3QgYl9pc19tdCA9IGIuYWNjb3VudF90eXBlID09PSBDRkRfUExBVEZPUk1TLk1UNTtcbiAgICAgICAgICAgICAgICBjb25zdCBhX2lzX2Rlcml2ZXogPSBhLmFjY291bnRfdHlwZSA9PT0gQ0ZEX1BMQVRGT1JNUy5ERVJJVkVaO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJfaXNfZGVyaXZleiA9IGIuYWNjb3VudF90eXBlID09PSBDRkRfUExBVEZPUk1TLkRFUklWRVo7XG4gICAgICAgICAgICAgICAgY29uc3QgYV9pc19jcnlwdG8gPSAhYV9pc19tdCAmJiBpc0NyeXB0b2N1cnJlbmN5KGEuY3VycmVuY3kpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJfaXNfY3J5cHRvID0gIWJfaXNfbXQgJiYgaXNDcnlwdG9jdXJyZW5jeShiLmN1cnJlbmN5KTtcbiAgICAgICAgICAgICAgICBjb25zdCBhX2lzX2ZpYXQgPSAhYV9pc19tdCAmJiAhYV9pc19jcnlwdG87XG4gICAgICAgICAgICAgICAgY29uc3QgYl9pc19maWF0ID0gIWJfaXNfbXQgJiYgIWJfaXNfY3J5cHRvO1xuICAgICAgICAgICAgICAgIGlmIChhX2lzX210ICYmIGJfaXNfbXQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGEubWFya2V0X3R5cGUgPT09ICdnYW1pbmcnIHx8IGEubWFya2V0X3R5cGUgPT09ICdzeW50aGV0aWMnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGEuc3ViX2FjY291bnRfdHlwZSA9PT0gJ2ZpbmFuY2lhbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiLm1hcmtldF90eXBlID09PSAnZ2FtaW5nJyB8fCBiLm1hcmtldF90eXBlID09PSAnc3ludGhldGljJyA/IDEgOiAtMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKChhX2lzX2NyeXB0byAmJiBiX2lzX2Rlcml2ZXopIHx8IChhX2lzX2ZpYXQgJiYgYl9pc19kZXJpdmV6KSB8fCAoYV9pc19kZXJpdmV6ICYmIGJfaXNfbXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKChhX2lzX2NyeXB0byAmJiBiX2lzX2NyeXB0bykgfHwgKGFfaXNfZmlhdCAmJiBiX2lzX2ZpYXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmN1cnJlbmN5IDwgYi5jdXJyZW5jeSA/IC0xIDogMTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKChhX2lzX2NyeXB0byAmJiBiX2lzX210KSB8fCAoYV9pc19maWF0ICYmIGJfaXNfY3J5cHRvKSB8fCAoYV9pc19maWF0ICYmIGJfaXNfbXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFfaXNfbXQgPyAtMSA6IDE7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhcnJfYWNjb3VudHMgPSBbXTtcbiAgICAgICAgdGhpcy5zZXRTZWxlY3RlZFRvKHt9KTsgLy8gc2V0IHNlbGVjdGVkIHRvIGVtcHR5IGVhY2ggdGltZSBzbyB3ZSBjYW4gcmVkZXRlcm1pbmUgaXRzIHZhbHVlIG9uIHJlbG9hZFxuXG4gICAgICAgIGFjY291bnRzLmZvckVhY2goYWNjb3VudCA9PiB7XG4gICAgICAgICAgICBjb25zdCBjZmRfcGxhdGZvcm1zID0ge1xuICAgICAgICAgICAgICAgIG10NTogeyBuYW1lOiAnRGVyaXYgTVQ1JywgaWNvbjogJ0ljTXQ1JyB9LFxuICAgICAgICAgICAgICAgIGR4dHJhZGU6IHsgbmFtZTogJ0Rlcml2IFgnLCBpY29uOiAnSWNEeHRyYWRlJyB9LFxuICAgICAgICAgICAgICAgIGRlcml2ZXo6IHsgbmFtZTogJ0Rlcml2IEVaJywgaWNvbjogJ0ljRGVyaXZleicgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBpc19jZmQgPSBPYmplY3Qua2V5cyhjZmRfcGxhdGZvcm1zKS5pbmNsdWRlcyhhY2NvdW50LmFjY291bnRfdHlwZSk7XG4gICAgICAgICAgICBjb25zdCBjZmRfdGV4dF9kaXNwbGF5ID0gY2ZkX3BsYXRmb3Jtc1thY2NvdW50LmFjY291bnRfdHlwZV0/Lm5hbWU7XG4gICAgICAgICAgICBjb25zdCBjZmRfaWNvbl9kaXNwbGF5ID1cbiAgICAgICAgICAgICAgICBhY2NvdW50LmFjY291bnRfdHlwZSA9PT0gQ0ZEX1BMQVRGT1JNUy5ERVJJVkVaXG4gICAgICAgICAgICAgICAgICAgID8gYCR7Y2ZkX3BsYXRmb3Jtc1thY2NvdW50LmFjY291bnRfdHlwZV0/Lmljb259YFxuICAgICAgICAgICAgICAgICAgICA6IGAke2NmZF9wbGF0Zm9ybXNbYWNjb3VudC5hY2NvdW50X3R5cGVdPy5pY29ufS0ke2dldENGREFjY291bnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXRfdHlwZTogYWNjb3VudC5tYXJrZXRfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViX2FjY291bnRfdHlwZTogYWNjb3VudC5zdWJfYWNjb3VudF90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF0Zm9ybTogYWNjb3VudC5hY2NvdW50X3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlzX2V1OiB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50LmlzX2V1LFxuICAgICAgICAgICAgICAgICAgICAgIH0pfWA7XG4gICAgICAgICAgICBjb25zdCBub25fZXVfYWNjb3VudHMgPVxuICAgICAgICAgICAgICAgIGFjY291bnQubGFuZGluZ19jb21wYW55X3Nob3J0ICYmXG4gICAgICAgICAgICAgICAgYWNjb3VudC5sYW5kaW5nX2NvbXBhbnlfc2hvcnQgIT09ICdzdmcnICYmXG4gICAgICAgICAgICAgICAgYWNjb3VudC5sYW5kaW5nX2NvbXBhbnlfc2hvcnQgIT09ICdidmknXG4gICAgICAgICAgICAgICAgICAgID8gYWNjb3VudC5sYW5kaW5nX2NvbXBhbnlfc2hvcnQ/LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgYWNjb3VudC5sYW5kaW5nX2NvbXBhbnlfc2hvcnQ/LnNsaWNlKDEpXG4gICAgICAgICAgICAgICAgICAgIDogYWNjb3VudC5sYW5kaW5nX2NvbXBhbnlfc2hvcnQ/LnRvVXBwZXJDYXNlKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGFjY291bnRfdGV4dF9kaXNwbGF5ID0gaXNfY2ZkXG4gICAgICAgICAgICAgICAgPyBhY2NvdW50LmFjY291bnRfdHlwZSA9PT0gJ210NSdcbiAgICAgICAgICAgICAgICAgICAgPyBgJHtnZXRDRkRBY2NvdW50RGlzcGxheSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtldF90eXBlOiBhY2NvdW50Lm1hcmtldF90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJfYWNjb3VudF90eXBlOiBhY2NvdW50LnN1Yl9hY2NvdW50X3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXRmb3JtOiBhY2NvdW50LmFjY291bnRfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfZXU6IHRoaXMucm9vdF9zdG9yZS5jbGllbnQuaXNfZXUsXG4gICAgICAgICAgICAgICAgICAgICAgfSl9ICR7dGhpcy5yb290X3N0b3JlLmNsaWVudC5pc19ldSA/ICcnIDogbm9uX2V1X2FjY291bnRzfWBcbiAgICAgICAgICAgICAgICAgICAgOiBgJHtjZmRfdGV4dF9kaXNwbGF5fSAke2dldENGREFjY291bnREaXNwbGF5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2V0X3R5cGU6IGFjY291bnQubWFya2V0X3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yl9hY2NvdW50X3R5cGU6IGFjY291bnQuc3ViX2FjY291bnRfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhdGZvcm06IGFjY291bnQuYWNjb3VudF90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpc19ldTogdGhpcy5yb290X3N0b3JlLmNsaWVudC5pc19ldSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfdHJhbnNmZXJfZm9ybTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB9KX1gXG4gICAgICAgICAgICAgICAgOiBnZXRDdXJyZW5jeURpc3BsYXlDb2RlKFxuICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQuY3VycmVuY3kgIT09ICdlVVNEVCcgPyBhY2NvdW50LmN1cnJlbmN5LnRvVXBwZXJDYXNlKCkgOiBhY2NvdW50LmN1cnJlbmN5XG4gICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCBvYmpfdmFsdWVzID0ge1xuICAgICAgICAgICAgICAgIHRleHQ6IGFjY291bnRfdGV4dF9kaXNwbGF5LFxuICAgICAgICAgICAgICAgIHZhbHVlOiBhY2NvdW50LmxvZ2luaWQsXG4gICAgICAgICAgICAgICAgYmFsYW5jZTogYWNjb3VudC5iYWxhbmNlLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5OiBhY2NvdW50LmN1cnJlbmN5LFxuICAgICAgICAgICAgICAgIGlzX2NyeXB0bzogaXNDcnlwdG9jdXJyZW5jeShhY2NvdW50LmN1cnJlbmN5KSxcbiAgICAgICAgICAgICAgICBpc19tdDogYWNjb3VudC5hY2NvdW50X3R5cGUgPT09IENGRF9QTEFURk9STVMuTVQ1LFxuICAgICAgICAgICAgICAgIGlzX2R4dHJhZGU6IGFjY291bnQuYWNjb3VudF90eXBlID09PSBDRkRfUExBVEZPUk1TLkRYVFJBREUsXG4gICAgICAgICAgICAgICAgaXNfZGVyaXZlejogYWNjb3VudC5hY2NvdW50X3R5cGUgPT09IENGRF9QTEFURk9STVMuREVSSVZFWixcbiAgICAgICAgICAgICAgICAuLi4oaXNfY2ZkICYmIHtcbiAgICAgICAgICAgICAgICAgICAgcGxhdGZvcm1faWNvbjogY2ZkX2ljb25fZGlzcGxheSxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBhY2NvdW50Py5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgIG1hcmtldF90eXBlOiBnZXRDRkRBY2NvdW50KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtldF90eXBlOiBhY2NvdW50Lm1hcmtldF90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3ViX2FjY291bnRfdHlwZTogYWNjb3VudC5zdWJfYWNjb3VudF90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhdGZvcm06IGFjY291bnQuYWNjb3VudF90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNfZXU6IHRoaXMucm9vdF9zdG9yZS5jbGllbnQuaXNfZXUsXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIHNldCBjdXJyZW50IGxvZ2dlZCBpbiBjbGllbnQgYXMgdGhlIGRlZmF1bHQgdHJhbnNmZXIgZnJvbSBhY2NvdW50XG4gICAgICAgICAgICBpZiAoYWNjb3VudC5sb2dpbmlkID09PSB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50LmxvZ2luaWQpIHtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiBzZWxlY3RlZCBmcm9tIGlzIG5vdCBhbGxvd2VkIGFjY291bnRcbiAgICAgICAgICAgICAgICBpZiAoaGFzVHJhbnNmZXJOb3RBbGxvd2VkTG9naW5pZChvYmpfdmFsdWVzLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBvYmpfdmFsdWVzLmVycm9yID0gZ2V0U2VsZWN0ZWRFcnJvcihvYmpfdmFsdWVzLnZhbHVlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGVkRnJvbShvYmpfdmFsdWVzKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNFbXB0eU9iamVjdCh0aGlzLnNlbGVjdGVkX3RvKSkge1xuICAgICAgICAgICAgICAgIGlmIChoYXNUcmFuc2Zlck5vdEFsbG93ZWRMb2dpbmlkKG9ial92YWx1ZXMudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIHNlbGVjdGVkIHRvIGlzIG5vdCBhbGxvd2VkIGFjY291bnRcbiAgICAgICAgICAgICAgICAgICAgb2JqX3ZhbHVlcy5lcnJvciA9IGdldFNlbGVjdGVkRXJyb3Iob2JqX3ZhbHVlcy52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHNldCB0aGUgZmlyc3QgYXZhaWxhYmxlIGFjY291bnQgYXMgdGhlIGRlZmF1bHQgdHJhbnNmZXIgdG8gYWNjb3VudFxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRUbyhvYmpfdmFsdWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFycl9hY2NvdW50cy5wdXNoKG9ial92YWx1ZXMpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZXRBY2NvdW50cyhhcnJfYWNjb3VudHMpO1xuICAgIH1cblxuICAgIHNldFNlbGVjdGVkRnJvbShvYmpfdmFsdWVzKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRfZnJvbSA9IG9ial92YWx1ZXM7XG4gICAgfVxuXG4gICAgc2V0U2VsZWN0ZWRUbyhvYmpfdmFsdWVzKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRfdG8gPSBvYmpfdmFsdWVzO1xuICAgIH1cblxuICAgIHNldEFjY291bnRzKGFycl9hY2NvdW50cykge1xuICAgICAgICB0aGlzLmFjY291bnRzX2xpc3QgPSBhcnJfYWNjb3VudHM7XG4gICAgfVxuXG4gICAgc2V0SXNUcmFuc2ZlckNvbmZpcm0oaXNfdHJhbnNmZXJfY29uZmlybSkge1xuICAgICAgICB0aGlzLmlzX3RyYW5zZmVyX2NvbmZpcm0gPSBpc190cmFuc2Zlcl9jb25maXJtO1xuICAgIH1cblxuICAgIHNldEFjY291bnRUcmFuc2ZlckFtb3VudChhbW91bnQpIHtcbiAgICAgICAgdGhpcy5hY2NvdW50X3RyYW5zZmVyX2Ftb3VudCA9IGFtb3VudDtcbiAgICB9XG5cbiAgICBzZXRJc1RyYW5zZmVyU3VjY2Vzc2Z1bChpc190cmFuc2Zlcl9zdWNjZXNzZnVsKSB7XG4gICAgICAgIHRoaXMuaXNfdHJhbnNmZXJfc3VjY2Vzc2Z1bCA9IGlzX3RyYW5zZmVyX3N1Y2Nlc3NmdWw7XG4gICAgfVxuXG4gICAgc2V0SXNNVDVUcmFuc2ZlckluUHJvZ3Jlc3MoaXNfbXQ1X3RyYW5zZmVyX2luX3Byb2dyZXNzKSB7XG4gICAgICAgIHRoaXMuaXNfbXQ1X3RyYW5zZmVyX2luX3Byb2dyZXNzID0gaXNfbXQ1X3RyYW5zZmVyX2luX3Byb2dyZXNzO1xuICAgIH1cblxuICAgIHNldFJlY2VpcHRUcmFuc2Zlcih7IGFtb3VudCB9KSB7XG4gICAgICAgIHRoaXMucmVjZWlwdCA9IHtcbiAgICAgICAgICAgIGFtb3VudF90cmFuc2ZlcnJlZDogYW1vdW50LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIG9uQ2hhbmdlVHJhbnNmZXJGcm9tKHsgdGFyZ2V0IH0pIHtcbiAgICAgICAgdGhpcy5lcnJvci5zZXRFcnJvck1lc3NhZ2UoJycpO1xuICAgICAgICB0aGlzLnNlbGVjdGVkX2Zyb20uZXJyb3IgPSAnJztcblxuICAgICAgICBjb25zdCBhY2NvdW50cyA9IHRoaXMuYWNjb3VudHNfbGlzdDtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRfZnJvbSA9IGFjY291bnRzLmZpbmQoYWNjb3VudCA9PiBhY2NvdW50LnZhbHVlID09PSB0YXJnZXQudmFsdWUpO1xuXG4gICAgICAgIC8vIGlmIG5ldyB2YWx1ZSBvZiBzZWxlY3RlZF9mcm9tIGlzIHRoZSBzYW1lIGFzIHRoZSBjdXJyZW50IHNlbGVjdGVkX3RvXG4gICAgICAgIC8vIHN3aXRjaCB0aGUgdmFsdWUgb2Ygc2VsZWN0ZWRfZnJvbSBhbmQgc2VsZWN0ZWRfdG9cbiAgICAgICAgaWYgKHNlbGVjdGVkX2Zyb20udmFsdWUgPT09IHRoaXMuc2VsZWN0ZWRfdG8udmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMub25DaGFuZ2VUcmFuc2ZlclRvKHsgdGFyZ2V0OiB7IHZhbHVlOiB0aGlzLnNlbGVjdGVkX2Zyb20udmFsdWUgfSB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIChzZWxlY3RlZF9mcm9tLmlzX210ICYmIHRoaXMuc2VsZWN0ZWRfdG8uaXNfbXQpIHx8XG4gICAgICAgICAgICAoc2VsZWN0ZWRfZnJvbS5pc19keHRyYWRlICYmIHRoaXMuc2VsZWN0ZWRfdG8uaXNfZHh0cmFkZSkgfHxcbiAgICAgICAgICAgIChzZWxlY3RlZF9mcm9tLmlzX2R4dHJhZGUgJiYgKHRoaXMuc2VsZWN0ZWRfdG8uaXNfbXQgfHwgdGhpcy5zZWxlY3RlZF90by5pc19kZXJpdmV6KSkgfHxcbiAgICAgICAgICAgIChzZWxlY3RlZF9mcm9tLmlzX210ICYmICh0aGlzLnNlbGVjdGVkX3RvLmlzX2R4dHJhZGUgfHwgdGhpcy5zZWxlY3RlZF90by5pc19kZXJpdmV6KSkgfHxcbiAgICAgICAgICAgIChzZWxlY3RlZF9mcm9tLmlzX2Rlcml2ZXogJiYgdGhpcy5zZWxlY3RlZF90by5pc19kZXJpdmV6KSB8fFxuICAgICAgICAgICAgKHNlbGVjdGVkX2Zyb20uaXNfZGVyaXZleiAmJiAodGhpcy5zZWxlY3RlZF90by5pc19keHRyYWRlIHx8IHRoaXMuc2VsZWN0ZWRfdG8uaXNfbXQpKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIC8vIG5vdCBhbGxvd2VkIHRvIHRyYW5zZmVyIGZyb20gTVQgdG8gTVRcbiAgICAgICAgICAgIC8vIG5vdCBhbGxvd2VkIHRvIHRyYW5zZmVyIGZyb20gRHh0cmFkZSB0byBEeHRyYWRlXG4gICAgICAgICAgICAvLyBub3QgYWxsb3dlZCB0byB0cmFuc2ZlciBiZXR3ZWVuIE1UIGFuZCBEeHRyYWRlXG4gICAgICAgICAgICBjb25zdCBmaXJzdF9ub25fY2ZkID0gdGhpcy5hY2NvdW50c19saXN0LmZpbmQoXG4gICAgICAgICAgICAgICAgYWNjb3VudCA9PiAhYWNjb3VudC5pc19tdCAmJiAhYWNjb3VudC5pc19keHRyYWRlICYmICFhY2NvdW50LmlzX2Rlcml2ZXpcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlVHJhbnNmZXJUbyh7IHRhcmdldDogeyB2YWx1ZTogZmlyc3Rfbm9uX2NmZC52YWx1ZSB9IH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc1RyYW5zZmVyTm90QWxsb3dlZExvZ2luaWQoc2VsZWN0ZWRfZnJvbS52YWx1ZSkpIHtcbiAgICAgICAgICAgIHNlbGVjdGVkX2Zyb20uZXJyb3IgPSBnZXRTZWxlY3RlZEVycm9yKHNlbGVjdGVkX2Zyb20udmFsdWUsIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZWxlY3RlZF9mcm9tID0gc2VsZWN0ZWRfZnJvbTtcbiAgICAgICAgdGhpcy5zZXRUcmFuc2ZlckZlZSgpO1xuICAgICAgICB0aGlzLnNldE1pbmltdW1GZWUoKTtcbiAgICAgICAgdGhpcy5zZXRUcmFuc2ZlckxpbWl0KCk7XG4gICAgfVxuXG4gICAgb25DaGFuZ2VUcmFuc2ZlclRvKHsgdGFyZ2V0IH0pIHtcbiAgICAgICAgdGhpcy5lcnJvci5zZXRFcnJvck1lc3NhZ2UoJycpO1xuICAgICAgICB0aGlzLnNlbGVjdGVkX3RvLmVycm9yID0gJyc7XG5cbiAgICAgICAgY29uc3QgYWNjb3VudHMgPSB0aGlzLmFjY291bnRzX2xpc3Q7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRfdG8gPSBhY2NvdW50cy5maW5kKGFjY291bnQgPT4gYWNjb3VudC52YWx1ZSA9PT0gdGFyZ2V0LnZhbHVlKSB8fCB7fTtcbiAgICAgICAgaWYgKGhhc1RyYW5zZmVyTm90QWxsb3dlZExvZ2luaWQodGhpcy5zZWxlY3RlZF90by52YWx1ZSkpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRfdG8uZXJyb3IgPSBnZXRTZWxlY3RlZEVycm9yKHRoaXMuc2VsZWN0ZWRfdG8udmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0VHJhbnNmZXJGZWUoKTtcbiAgICAgICAgdGhpcy5zZXRNaW5pbXVtRmVlKCk7XG4gICAgICAgIHRoaXMuc2V0VHJhbnNmZXJMaW1pdCgpO1xuICAgIH1cblxuICAgIHJlcXVlc3RUcmFuc2ZlckJldHdlZW5BY2NvdW50cyA9IGFzeW5jICh7IGFtb3VudCB9KSA9PiB7XG4gICAgICAgIGNvbnN0IHsgY2xpZW50LCBtb2R1bGVzLCBjb21tb24gfSA9IHRoaXMucm9vdF9zdG9yZTtcbiAgICAgICAgY29uc3QgeyBzZXRMb2FkaW5nIH0gPSBtb2R1bGVzLmNhc2hpZXIuZ2VuZXJhbF9zdG9yZTtcbiAgICAgICAgY29uc3QgeyBpc19mcm9tX2Rlcml2Z28gfSA9IGNvbW1vbjtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgaXNfbG9nZ2VkX2luLFxuICAgICAgICAgICAgcmVzcG9uc2VNdDVMb2dpbkxpc3QsXG4gICAgICAgICAgICByZXNwb25zZVRyYWRpbmdQbGF0Zm9ybUFjY291bnRzTGlzdCxcbiAgICAgICAgICAgIHNldEFjY291bnRTdGF0dXMsXG4gICAgICAgICAgICBzZXRCYWxhbmNlT3RoZXJBY2NvdW50cyxcbiAgICAgICAgfSA9IGNsaWVudDtcblxuICAgICAgICBpZiAoIWlzX2xvZ2dlZF9pbikge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgICAgICB0aGlzLmVycm9yLnNldEVycm9yTWVzc2FnZSgnJyk7XG5cbiAgICAgICAgY29uc3QgaXNfbXRfdHJhbnNmZXIgPSB0aGlzLnNlbGVjdGVkX2Zyb20uaXNfbXQgfHwgdGhpcy5zZWxlY3RlZF90by5pc19tdDtcblxuICAgICAgICBpZiAoaXNfbXRfdHJhbnNmZXIpIHRoaXMuc2V0SXNNVDVUcmFuc2ZlckluUHJvZ3Jlc3ModHJ1ZSk7XG5cbiAgICAgICAgY29uc3QgY3VycmVuY3kgPSB0aGlzLnNlbGVjdGVkX2Zyb20uY3VycmVuY3k7XG4gICAgICAgIGNvbnN0IHRyYW5zZmVyX2JldHdlZW5fYWNjb3VudHMgPSBhd2FpdCB0aGlzLldTLmF1dGhvcml6ZWQudHJhbnNmZXJCZXR3ZWVuQWNjb3VudHMoXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkX2Zyb20udmFsdWUsXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkX3RvLnZhbHVlLFxuICAgICAgICAgICAgY3VycmVuY3ksXG4gICAgICAgICAgICBhbW91bnRcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoIWlzX2Zyb21fZGVyaXZnbyAmJiB0cmFuc2Zlcl9iZXR3ZWVuX2FjY291bnRzICYmIEFycmF5LmlzQXJyYXkodHJhbnNmZXJfYmV0d2Vlbl9hY2NvdW50cy5hY2NvdW50cykpIHtcbiAgICAgICAgICAgIHRyYW5zZmVyX2JldHdlZW5fYWNjb3VudHMuYWNjb3VudHMgPSB0cmFuc2Zlcl9iZXR3ZWVuX2FjY291bnRzLmFjY291bnRzLmZpbHRlcihcbiAgICAgICAgICAgICAgICBhY2NvdW50ID0+IGFjY291bnQuYWNjb3VudF90eXBlICE9PSBDRkRfUExBVEZPUk1TLkRFUklWRVpcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNfbXRfdHJhbnNmZXIpIHRoaXMuc2V0SXNNVDVUcmFuc2ZlckluUHJvZ3Jlc3MoZmFsc2UpO1xuXG4gICAgICAgIGlmICh0cmFuc2Zlcl9iZXR3ZWVuX2FjY291bnRzLmVycm9yKSB7XG4gICAgICAgICAgICAvLyBpZiB0aGVyZSBpcyBmaWF0MmNyeXB0byB0cmFuc2ZlciBsaW1pdCBlcnJvciwgd2UgbmVlZCB0byByZWZyZXNoIHRoZSBhY2NvdW50X3N0YXR1cyBmb3IgYXV0aGVudGljYXRpb25cbiAgICAgICAgICAgIGlmICh0cmFuc2Zlcl9iZXR3ZWVuX2FjY291bnRzLmVycm9yLmNvZGUgPT09ICdGaWF0MkNyeXB0b1RyYW5zZmVyT3ZlckxpbWl0Jykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjY291bnRfc3RhdHVzX3Jlc3BvbnNlID0gYXdhaXQgdGhpcy5XUy5hdXRob3JpemVkLmdldEFjY291bnRTdGF0dXMoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWFjY291bnRfc3RhdHVzX3Jlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEFjY291bnRTdGF0dXMoYWNjb3VudF9zdGF0dXNfcmVzcG9uc2UuZ2V0X2FjY291bnRfc3RhdHVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVycm9yLnNldEVycm9yTWVzc2FnZSh0cmFuc2Zlcl9iZXR3ZWVuX2FjY291bnRzLmVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0UmVjZWlwdFRyYW5zZmVyKHsgYW1vdW50OiBmb3JtYXRNb25leShjdXJyZW5jeSwgYW1vdW50LCB0cnVlKSB9KTtcbiAgICAgICAgICAgIHRyYW5zZmVyX2JldHdlZW5fYWNjb3VudHMuYWNjb3VudHMuZm9yRWFjaChhY2NvdW50ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEJhbGFuY2VCeUxvZ2luSWQoYWNjb3VudC5sb2dpbmlkLCBhY2NvdW50LmJhbGFuY2UpO1xuICAgICAgICAgICAgICAgIGlmIChhY2NvdW50LmxvZ2luaWQgPT09IHRoaXMuc2VsZWN0ZWRfZnJvbS52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEJhbGFuY2VTZWxlY3RlZEZyb20oYWNjb3VudC5iYWxhbmNlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFjY291bnQubG9naW5pZCA9PT0gdGhpcy5zZWxlY3RlZF90by52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEJhbGFuY2VTZWxlY3RlZFRvKGFjY291bnQuYmFsYW5jZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGlmIG9uZSBvZiB0aGUgYWNjb3VudHMgd2FzIG10NVxuICAgICAgICAgICAgICAgIGlmIChhY2NvdW50LmFjY291bnRfdHlwZSA9PT0gQ0ZEX1BMQVRGT1JNUy5NVDUpIHtcbiAgICAgICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwoW3RoaXMuV1MubXQ1TG9naW5MaXN0KCksIHRoaXMuV1MuYmFsYW5jZUFsbCgpXSkudGhlbihcbiAgICAgICAgICAgICAgICAgICAgICAgIChbbXQ1X2xvZ2luX2xpc3RfcmVzcG9uc2UsIGJhbGFuY2VfcmVzcG9uc2VdKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBiYWxhbmNlIGZvciBhY2NvdW50IHN3aXRjaGVyIGJ5IHJlbmV3aW5nIHRoZSBtdDVfbG9naW5fbGlzdCByZXNwb25zZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlTXQ1TG9naW5MaXN0KG10NV9sb2dpbl9saXN0X3Jlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgdG90YWwgYmFsYW5jZSBzaW5jZSBNVDUgdG90YWwgb25seSBjb21lcyBpbiBub24tc3RyZWFtIGJhbGFuY2UgY2FsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEJhbGFuY2VPdGhlckFjY291bnRzKGJhbGFuY2VfcmVzcG9uc2UuYmFsYW5jZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGlmIG9uZSBvZiB0aGUgYWNjb3VudHMgd2FzIGR4dHJhZGVcbiAgICAgICAgICAgICAgICBpZiAoYWNjb3VudC5hY2NvdW50X3R5cGUgPT09IENGRF9QTEFURk9STVMuRFhUUkFERSkge1xuICAgICAgICAgICAgICAgICAgICBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLldTLnRyYWRpbmdQbGF0Zm9ybUFjY291bnRzTGlzdChDRkRfUExBVEZPUk1TLkRYVFJBREUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5XUy5iYWxhbmNlQWxsKCksXG4gICAgICAgICAgICAgICAgICAgIF0pLnRoZW4oKFtkeHRyYWRlX2xvZ2luX2xpc3RfcmVzcG9uc2UsIGJhbGFuY2VfcmVzcG9uc2VdKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgdGhlIGJhbGFuY2UgZm9yIGFjY291bnQgc3dpdGNoZXIgYnkgcmVuZXdpbmcgdGhlIGR4dHJhZGVfbG9naW5fbGlzdF9yZXNwb25zZVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VUcmFkaW5nUGxhdGZvcm1BY2NvdW50c0xpc3QoZHh0cmFkZV9sb2dpbl9saXN0X3Jlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB0b3RhbCBiYWxhbmNlIHNpbmNlIER4dHJhZGUgdG90YWwgb25seSBjb21lcyBpbiBub24tc3RyZWFtIGJhbGFuY2UgY2FsbFxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0QmFsYW5jZU90aGVyQWNjb3VudHMoYmFsYW5jZV9yZXNwb25zZS5iYWxhbmNlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNldEFjY291bnRUcmFuc2ZlckFtb3VudChudWxsKTtcbiAgICAgICAgICAgIHRoaXMuc2V0SXNUcmFuc2ZlckNvbmZpcm0odHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgIHJldHVybiB0cmFuc2Zlcl9iZXR3ZWVuX2FjY291bnRzO1xuICAgIH07XG5cbiAgICByZXNldEFjY291bnRUcmFuc2ZlciA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgdGhpcy5zZXRJc1RyYW5zZmVyQ29uZmlybShmYWxzZSk7XG4gICAgICAgIHRoaXMuc2V0VHJhbnNmZXJMaW1pdCgpO1xuICAgIH07XG5cbiAgICBzZXRUcmFuc2ZlclBlcmNlbnRhZ2VTZWxlY3RvclJlc3VsdChhbW91bnQpIHtcbiAgICAgICAgY29uc3QgeyBjcnlwdG9fZmlhdF9jb252ZXJ0ZXIsIGdlbmVyYWxfc3RvcmUgfSA9IHRoaXMucm9vdF9zdG9yZS5tb2R1bGVzLmNhc2hpZXI7XG5cbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRfZnJvbV9jdXJyZW5jeSA9IHRoaXMuc2VsZWN0ZWRfZnJvbS5jdXJyZW5jeTtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRfdG9fY3VycmVuY3kgPSB0aGlzLnNlbGVjdGVkX3RvLmN1cnJlbmN5O1xuXG4gICAgICAgIGlmIChhbW91bnQgPiAwIHx8ICt0aGlzLnNlbGVjdGVkX2Zyb20uYmFsYW5jZSA9PT0gMCkge1xuICAgICAgICAgICAgY3J5cHRvX2ZpYXRfY29udmVydGVyLnNldENvbnZlcnRlckZyb21BbW91bnQoYW1vdW50KTtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVUcmFuc2ZlckZyb21BbW91bnQoKTtcbiAgICAgICAgICAgIGNyeXB0b19maWF0X2NvbnZlcnRlci5vbkNoYW5nZUNvbnZlcnRlckZyb21BbW91bnQoXG4gICAgICAgICAgICAgICAgeyB0YXJnZXQ6IHsgdmFsdWU6IGFtb3VudCB9IH0sXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRfZnJvbV9jdXJyZW5jeSxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZF90b19jdXJyZW5jeVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNyeXB0b19maWF0X2NvbnZlcnRlci5yZXNldENvbnZlcnRlcigpO1xuICAgICAgICB9XG4gICAgICAgIGNyeXB0b19maWF0X2NvbnZlcnRlci5zZXRJc1RpbWVyVmlzaWJsZShmYWxzZSk7XG4gICAgICAgIGdlbmVyYWxfc3RvcmUucGVyY2VudGFnZVNlbGVjdG9yU2VsZWN0aW9uU3RhdHVzKGZhbHNlKTtcbiAgICB9XG5cbiAgICB2YWxpZGF0ZVRyYW5zZmVyRnJvbUFtb3VudCgpIHtcbiAgICAgICAgY29uc3QgeyBjb252ZXJ0ZXJfZnJvbV9hbW91bnQsIHNldENvbnZlcnRlckZyb21FcnJvciB9ID0gdGhpcy5yb290X3N0b3JlLm1vZHVsZXMuY2FzaGllci5jcnlwdG9fZmlhdF9jb252ZXJ0ZXI7XG5cbiAgICAgICAgaWYgKCFjb252ZXJ0ZXJfZnJvbV9hbW91bnQpIHtcbiAgICAgICAgICAgIHNldENvbnZlcnRlckZyb21FcnJvcihsb2NhbGl6ZSgnVGhpcyBmaWVsZCBpcyByZXF1aXJlZC4nKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB7IGlzX29rLCBtZXNzYWdlIH0gPSB2YWxpZE51bWJlcihjb252ZXJ0ZXJfZnJvbV9hbW91bnQsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZmxvYXQnLFxuICAgICAgICAgICAgICAgIGRlY2ltYWxzOiBnZXREZWNpbWFsUGxhY2VzKHRoaXMuc2VsZWN0ZWRfZnJvbS5jdXJyZW5jeSksXG4gICAgICAgICAgICAgICAgbWluOiB0aGlzLnRyYW5zZmVyX2xpbWl0Lm1pbixcbiAgICAgICAgICAgICAgICBtYXg6IHRoaXMudHJhbnNmZXJfbGltaXQubWF4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIWlzX29rKSB7XG4gICAgICAgICAgICAgICAgc2V0Q29udmVydGVyRnJvbUVycm9yKG1lc3NhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgrdGhpcy5zZWxlY3RlZF9mcm9tLmJhbGFuY2UgPCArY29udmVydGVyX2Zyb21fYW1vdW50KSB7XG4gICAgICAgICAgICAgICAgc2V0Q29udmVydGVyRnJvbUVycm9yKGxvY2FsaXplKCdJbnN1ZmZpY2llbnQgZnVuZHMnKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNldENvbnZlcnRlckZyb21FcnJvcignJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YWxpZGF0ZVRyYW5zZmVyVG9BbW91bnQoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udmVydGVyX3RvX2Ftb3VudCwgc2V0Q29udmVydGVyVG9FcnJvciB9ID0gdGhpcy5yb290X3N0b3JlLm1vZHVsZXMuY2FzaGllci5jcnlwdG9fZmlhdF9jb252ZXJ0ZXI7XG5cbiAgICAgICAgaWYgKGNvbnZlcnRlcl90b19hbW91bnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbmN5ID0gdGhpcy5zZWxlY3RlZF90by5jdXJyZW5jeTtcbiAgICAgICAgICAgIGNvbnN0IHsgaXNfb2ssIG1lc3NhZ2UgfSA9IHZhbGlkTnVtYmVyKGNvbnZlcnRlcl90b19hbW91bnQsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZmxvYXQnLFxuICAgICAgICAgICAgICAgIGRlY2ltYWxzOiBnZXREZWNpbWFsUGxhY2VzKGN1cnJlbmN5KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFpc19vaykge1xuICAgICAgICAgICAgICAgIHNldENvbnZlcnRlclRvRXJyb3IobWVzc2FnZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNldENvbnZlcnRlclRvRXJyb3IoJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgYWN0aW9uLCBvYnNlcnZhYmxlLCBtYWtlT2JzZXJ2YWJsZSB9IGZyb20gJ21vYngnO1xuaW1wb3J0IHsgZ2V0RGVjaW1hbFBsYWNlcyB9IGZyb20gJ0BkZXJpdi9zaGFyZWQnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDcnlwdG9GaWF0Q29udmVydGVyU3RvcmUge1xuICAgIGNvbnN0cnVjdG9yKHsgV1MsIHJvb3Rfc3RvcmUgfSkge1xuICAgICAgICBtYWtlT2JzZXJ2YWJsZSh0aGlzLCB7XG4gICAgICAgICAgICBjb252ZXJ0ZXJfZnJvbV9hbW91bnQ6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBjb252ZXJ0ZXJfdG9fYW1vdW50OiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgY29udmVydGVyX2Zyb21fZXJyb3I6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBjb252ZXJ0ZXJfdG9fZXJyb3I6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBpc190aW1lcl92aXNpYmxlOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgc2V0Q29udmVydGVyRnJvbUFtb3VudDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0Q29udmVydGVyVG9BbW91bnQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldENvbnZlcnRlckZyb21FcnJvcjogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0Q29udmVydGVyVG9FcnJvcjogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0SXNUaW1lclZpc2libGU6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHJlc2V0VGltZXI6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIGdldEV4Y2hhbmdlUmF0ZTogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgdmFsaWRhdGVGcm9tQW1vdW50OiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICB2YWxpZGF0ZVRvQW1vdW50OiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBvbkNoYW5nZUNvbnZlcnRlckZyb21BbW91bnQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIG9uQ2hhbmdlQ29udmVydGVyVG9BbW91bnQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHJlc2V0Q29udmVydGVyOiBhY3Rpb24uYm91bmQsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMucm9vdF9zdG9yZSA9IHJvb3Rfc3RvcmU7XG4gICAgICAgIHRoaXMuV1MgPSBXUztcbiAgICB9XG5cbiAgICBjb252ZXJ0ZXJfZnJvbV9hbW91bnQgPSAnJztcbiAgICBjb252ZXJ0ZXJfdG9fYW1vdW50ID0gJyc7XG4gICAgY29udmVydGVyX2Zyb21fZXJyb3IgPSAnJztcbiAgICBjb252ZXJ0ZXJfdG9fZXJyb3IgPSAnJztcbiAgICBpc190aW1lcl92aXNpYmxlID0gZmFsc2U7XG5cbiAgICBzZXRDb252ZXJ0ZXJGcm9tQW1vdW50KGFtb3VudCkge1xuICAgICAgICB0aGlzLmNvbnZlcnRlcl9mcm9tX2Ftb3VudCA9IGFtb3VudDtcbiAgICB9XG5cbiAgICBzZXRDb252ZXJ0ZXJUb0Ftb3VudChhbW91bnQpIHtcbiAgICAgICAgdGhpcy5jb252ZXJ0ZXJfdG9fYW1vdW50ID0gYW1vdW50O1xuICAgIH1cblxuICAgIHNldENvbnZlcnRlckZyb21FcnJvcihlcnJvcikge1xuICAgICAgICB0aGlzLmNvbnZlcnRlcl9mcm9tX2Vycm9yID0gZXJyb3I7XG4gICAgfVxuXG4gICAgc2V0Q29udmVydGVyVG9FcnJvcihlcnJvcikge1xuICAgICAgICB0aGlzLmNvbnZlcnRlcl90b19lcnJvciA9IGVycm9yO1xuICAgIH1cblxuICAgIHNldElzVGltZXJWaXNpYmxlKGlzX3RpbWVyX3Zpc2libGUpIHtcbiAgICAgICAgdGhpcy5pc190aW1lcl92aXNpYmxlID0gaXNfdGltZXJfdmlzaWJsZTtcbiAgICB9XG5cbiAgICByZXNldFRpbWVyKCkge1xuICAgICAgICB0aGlzLnNldElzVGltZXJWaXNpYmxlKGZhbHNlKTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRFeGNoYW5nZVJhdGUoZnJvbV9jdXJyZW5jeSwgdG9fY3VycmVuY3kpIHtcbiAgICAgICAgY29uc3QgeyBleGNoYW5nZV9yYXRlcyB9ID0gYXdhaXQgdGhpcy5XUy5zZW5kKHtcbiAgICAgICAgICAgIGV4Y2hhbmdlX3JhdGVzOiAxLFxuICAgICAgICAgICAgYmFzZV9jdXJyZW5jeTogZnJvbV9jdXJyZW5jeSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBleGNoYW5nZV9yYXRlcy5yYXRlc1t0b19jdXJyZW5jeV07XG4gICAgfVxuXG4gICAgdmFsaWRhdGVGcm9tQW1vdW50KCkge1xuICAgICAgICBjb25zdCB7IGFjY291bnRfdHJhbnNmZXIsIGdlbmVyYWxfc3RvcmUsIHdpdGhkcmF3IH0gPSB0aGlzLnJvb3Rfc3RvcmUubW9kdWxlcy5jYXNoaWVyO1xuXG4gICAgICAgIGlmIChnZW5lcmFsX3N0b3JlLmFjdGl2ZV9jb250YWluZXIgPT09IGFjY291bnRfdHJhbnNmZXIuY29udGFpbmVyKSB7XG4gICAgICAgICAgICBhY2NvdW50X3RyYW5zZmVyLnZhbGlkYXRlVHJhbnNmZXJGcm9tQW1vdW50KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3aXRoZHJhdy52YWxpZGF0ZVdpdGhkcmF3RnJvbUFtb3VudCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFsaWRhdGVUb0Ftb3VudCgpIHtcbiAgICAgICAgY29uc3QgeyBhY2NvdW50X3RyYW5zZmVyLCBnZW5lcmFsX3N0b3JlLCB3aXRoZHJhdyB9ID0gdGhpcy5yb290X3N0b3JlLm1vZHVsZXMuY2FzaGllcjtcblxuICAgICAgICBpZiAoZ2VuZXJhbF9zdG9yZS5hY3RpdmVfY29udGFpbmVyID09PSBhY2NvdW50X3RyYW5zZmVyLmNvbnRhaW5lcikge1xuICAgICAgICAgICAgYWNjb3VudF90cmFuc2Zlci52YWxpZGF0ZVRyYW5zZmVyVG9BbW91bnQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdpdGhkcmF3LnZhbGlkYXRlV2l0aGRyYXdUb0Ftb3VudCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgb25DaGFuZ2VDb252ZXJ0ZXJGcm9tQW1vdW50KHsgdGFyZ2V0IH0sIGZyb21fY3VycmVuY3ksIHRvX2N1cnJlbmN5KSB7XG4gICAgICAgIGNvbnN0IHsgYWNjb3VudF90cmFuc2ZlciwgZ2VuZXJhbF9zdG9yZSB9ID0gdGhpcy5yb290X3N0b3JlLm1vZHVsZXMuY2FzaGllcjtcblxuICAgICAgICB0aGlzLnJlc2V0VGltZXIoKTtcbiAgICAgICAgaWYgKHRhcmdldC52YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRDb252ZXJ0ZXJGcm9tQW1vdW50KHRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlRnJvbUFtb3VudCgpO1xuICAgICAgICAgICAgZ2VuZXJhbF9zdG9yZS5wZXJjZW50YWdlU2VsZWN0b3JTZWxlY3Rpb25TdGF0dXModHJ1ZSk7XG4gICAgICAgICAgICBnZW5lcmFsX3N0b3JlLmNhbGN1bGF0ZVBlcmNlbnRhZ2UoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnZlcnRlcl9mcm9tX2Vycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDb252ZXJ0ZXJUb0Ftb3VudCgnJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDb252ZXJ0ZXJUb0Vycm9yKCcnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldElzVGltZXJWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBhY2NvdW50X3RyYW5zZmVyLnNldEFjY291bnRUcmFuc2ZlckFtb3VudCgnJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJhdGUgPSBhd2FpdCB0aGlzLmdldEV4Y2hhbmdlUmF0ZShmcm9tX2N1cnJlbmN5LCB0b19jdXJyZW5jeSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVjaW1hbHMgPSBnZXREZWNpbWFsUGxhY2VzKHRvX2N1cnJlbmN5KTtcbiAgICAgICAgICAgICAgICBjb25zdCBhbW91bnQgPSAocmF0ZSAqIHRhcmdldC52YWx1ZSkudG9GaXhlZChkZWNpbWFscyk7XG4gICAgICAgICAgICAgICAgaWYgKCthbW91bnQgfHwgdGhpcy5jb252ZXJ0ZXJfZnJvbV9hbW91bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDb252ZXJ0ZXJUb0Ftb3VudChhbW91bnQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29udmVydGVyVG9BbW91bnQoJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlVG9BbW91bnQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENvbnZlcnRlclRvRXJyb3IoJycpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0SXNUaW1lclZpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgYWNjb3VudF90cmFuc2Zlci5zZXRBY2NvdW50VHJhbnNmZXJBbW91bnQodGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXRDb252ZXJ0ZXIoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIG9uQ2hhbmdlQ29udmVydGVyVG9BbW91bnQoeyB0YXJnZXQgfSwgZnJvbV9jdXJyZW5jeSwgdG9fY3VycmVuY3kpIHtcbiAgICAgICAgY29uc3QgeyBhY2NvdW50X3RyYW5zZmVyLCBnZW5lcmFsX3N0b3JlIH0gPSB0aGlzLnJvb3Rfc3RvcmUubW9kdWxlcy5jYXNoaWVyO1xuXG4gICAgICAgIHRoaXMucmVzZXRUaW1lcigpO1xuICAgICAgICBpZiAodGFyZ2V0LnZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnNldENvbnZlcnRlclRvQW1vdW50KHRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlVG9BbW91bnQoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnZlcnRlcl90b19lcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29udmVydGVyRnJvbUFtb3VudCgnJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDb252ZXJ0ZXJGcm9tRXJyb3IoJycpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0SXNUaW1lclZpc2libGUoZmFsc2UpO1xuICAgICAgICAgICAgICAgIGFjY291bnRfdHJhbnNmZXIuc2V0QWNjb3VudFRyYW5zZmVyQW1vdW50KCcnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmF0ZSA9IGF3YWl0IHRoaXMuZ2V0RXhjaGFuZ2VSYXRlKGZyb21fY3VycmVuY3ksIHRvX2N1cnJlbmN5KTtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWNpbWFscyA9IGdldERlY2ltYWxQbGFjZXModG9fY3VycmVuY3kpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IChyYXRlICogdGFyZ2V0LnZhbHVlKS50b0ZpeGVkKGRlY2ltYWxzKTtcbiAgICAgICAgICAgICAgICBpZiAoK2Ftb3VudCB8fCB0aGlzLmNvbnZlcnRlcl90b19hbW91bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDb252ZXJ0ZXJGcm9tQW1vdW50KGFtb3VudCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDb252ZXJ0ZXJGcm9tQW1vdW50KCcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ2VuZXJhbF9zdG9yZS5wZXJjZW50YWdlU2VsZWN0b3JTZWxlY3Rpb25TdGF0dXModHJ1ZSk7XG4gICAgICAgICAgICAgICAgZ2VuZXJhbF9zdG9yZS5jYWxjdWxhdGVQZXJjZW50YWdlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUZyb21BbW91bnQoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb252ZXJ0ZXJfZnJvbV9lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldElzVGltZXJWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudF90cmFuc2Zlci5zZXRBY2NvdW50VHJhbnNmZXJBbW91bnQoJycpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29udmVydGVyRnJvbUVycm9yKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRJc1RpbWVyVmlzaWJsZSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudF90cmFuc2Zlci5zZXRBY2NvdW50VHJhbnNmZXJBbW91bnQoYW1vdW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0Q29udmVydGVyKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXNldENvbnZlcnRlcigpIHtcbiAgICAgICAgdGhpcy5zZXRDb252ZXJ0ZXJGcm9tQW1vdW50KCcnKTtcbiAgICAgICAgdGhpcy5zZXRDb252ZXJ0ZXJUb0Ftb3VudCgnJyk7XG4gICAgICAgIHRoaXMuc2V0Q29udmVydGVyRnJvbUVycm9yKCcnKTtcbiAgICAgICAgdGhpcy5zZXRDb252ZXJ0ZXJUb0Vycm9yKCcnKTtcbiAgICAgICAgdGhpcy5zZXRJc1RpbWVyVmlzaWJsZShmYWxzZSk7XG4gICAgICAgIHRoaXMucm9vdF9zdG9yZS5tb2R1bGVzLmNhc2hpZXIuZ2VuZXJhbF9zdG9yZS5wZXJjZW50YWdlU2VsZWN0b3JTZWxlY3Rpb25TdGF0dXModHJ1ZSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgYWN0aW9uLCBtYWtlT2JzZXJ2YWJsZSwgb2JzZXJ2YWJsZSB9IGZyb20gJ21vYngnO1xuaW1wb3J0IENvbnN0YW50cyBmcm9tICdDb25zdGFudHMvY29uc3RhbnRzJztcbmltcG9ydCBFcnJvclN0b3JlIGZyb20gJy4vZXJyb3Itc3RvcmUnO1xuaW1wb3J0IHsgVFJvb3RTdG9yZSwgVFdlYlNvY2tldCB9IGZyb20gJ1R5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGVwb3NpdFN0b3JlIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgV1M6IFRXZWJTb2NrZXQsIHB1YmxpYyByb290X3N0b3JlOiBUUm9vdFN0b3JlKSB7XG4gICAgICAgIG1ha2VPYnNlcnZhYmxlKHRoaXMsIHtcbiAgICAgICAgICAgIGNvbnRhaW5lcjogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGVycm9yOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgb25Nb3VudERlcG9zaXQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5yb290X3N0b3JlID0gcm9vdF9zdG9yZTtcbiAgICAgICAgdGhpcy5XUyA9IFdTO1xuICAgIH1cblxuICAgIGNvbnRhaW5lciA9IENvbnN0YW50cy5jb250YWluZXJzLmRlcG9zaXQ7XG4gICAgZXJyb3IgPSBuZXcgRXJyb3JTdG9yZSgpO1xuXG4gICAgYXN5bmMgb25Nb3VudERlcG9zaXQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgY2xpZW50LCBtb2R1bGVzIH0gPSB0aGlzLnJvb3Rfc3RvcmU7XG4gICAgICAgIGNvbnN0IHsgYWN0aXZlX2NvbnRhaW5lciwgaXNfY3J5cHRvLCBvbk1vdW50Q29tbW9uLCBzZXRMb2FkaW5nLCBzZXRPblJlbW91bnQgfSA9IG1vZHVsZXMuY2FzaGllci5nZW5lcmFsX3N0b3JlO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBjaGVja0lmcmFtZUxvYWRlZCxcbiAgICAgICAgICAgIGNsZWFyVGltZW91dENhc2hpZXJVcmwsXG4gICAgICAgICAgICBpc19zZXNzaW9uX3RpbWVvdXQsXG4gICAgICAgICAgICBzZXRDb250YWluZXJIZWlnaHQsXG4gICAgICAgICAgICBzZXRJZnJhbWVVcmwsXG4gICAgICAgICAgICBzZXRTZXNzaW9uVGltZW91dCxcbiAgICAgICAgICAgIHNldFRpbWVvdXRDYXNoaWVyVXJsLFxuICAgICAgICB9ID0gbW9kdWxlcy5jYXNoaWVyLmlmcmFtZTtcbiAgICAgICAgY29uc3QgeyBhY2NvdW50X3N0YXR1cywgaXNfdmlydHVhbCwgdXBkYXRlQWNjb3VudFN0YXR1cyB9ID0gY2xpZW50O1xuICAgICAgICBjb25zdCBjdXJyZW50X2NvbnRhaW5lciA9IGFjdGl2ZV9jb250YWluZXI7XG5cbiAgICAgICAgc2V0T25SZW1vdW50KHRoaXMub25Nb3VudERlcG9zaXQpO1xuICAgICAgICBhd2FpdCBvbk1vdW50Q29tbW9uKCk7XG5cbiAgICAgICAgdGhpcy5lcnJvci5zZXRFcnJvck1lc3NhZ2UoeyBjb2RlOiAnJywgbWVzc2FnZTogJycgfSwgbnVsbCwgZmFsc2UpO1xuICAgICAgICBzZXRDb250YWluZXJIZWlnaHQoMCk7XG5cbiAgICAgICAgaWYgKCFpc19zZXNzaW9uX3RpbWVvdXQpIHtcbiAgICAgICAgICAgIGNoZWNrSWZyYW1lTG9hZGVkKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiBzZXNzaW9uIGhhcyB0aW1lZCBvdXQgcmVzZXQgZXZlcnl0aGluZ1xuICAgICAgICBzZXRJZnJhbWVVcmwoJycpO1xuICAgICAgICBpZiAoaXNfdmlydHVhbCkge1xuICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICAvLyBpZiB2aXJ0dWFsLCBjbGVhciBldmVyeXRoaW5nIGFuZCBkb24ndCBwcm9jZWVkIGZ1cnRoZXJcbiAgICAgICAgICAgIC8vIGlmIG5vIHZlcmlmaWNhdGlvbiBjb2RlLCB3ZSBzaG91bGQgcmVxdWVzdCBhZ2FpblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpc19jcnlwdG8pIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlX2Nhc2hpZXIgPSBhd2FpdCB0aGlzLldTLmF1dGhvcml6ZWQuY2FzaGllcihhY3RpdmVfY29udGFpbmVyLCB7XG4gICAgICAgICAgICAgICAgdmVyaWZpY2F0aW9uX2NvZGU6ICd1bmRlZmluZWQnLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGlmIHRhYiBjaGFuZ2VkIHdoaWxlIHdhaXRpbmcgZm9yIHJlc3BvbnNlLCBpZ25vcmUgaXRcbiAgICAgICAgICAgIGlmIChjdXJyZW50X2NvbnRhaW5lciAhPT0gYWN0aXZlX2NvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXNwb25zZV9jYXNoaWVyLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lcnJvci5oYW5kbGVDYXNoaWVyRXJyb3IocmVzcG9uc2VfY2FzaGllci5lcnJvcik7XG4gICAgICAgICAgICAgICAgc2V0U2Vzc2lvblRpbWVvdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0Q2FzaGllclVybCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBjaGVja0lmcmFtZUxvYWRlZCgpO1xuICAgICAgICAgICAgICAgIHNldElmcmFtZVVybChyZXNwb25zZV9jYXNoaWVyLmNhc2hpZXIpO1xuICAgICAgICAgICAgICAgIHNldFNlc3Npb25UaW1lb3V0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0Q2FzaGllclVybCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFhY2NvdW50X3N0YXR1cz8uc3RhdHVzPy5pbmNsdWRlcygnZGVwb3NpdF9hdHRlbXB0JykpIHtcbiAgICAgICAgICAgIGF3YWl0IHVwZGF0ZUFjY291bnRTdGF0dXMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IG9ic2VydmFibGUsIGFjdGlvbiwgbWFrZU9ic2VydmFibGUgfSBmcm9tICdtb2J4JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXJyb3JEaWFsb2dTdG9yZSB7XG4gICAgY29uZmlybV9idXR0b25fdGV4dCA9ICcnO1xuICAgIGVycm9yX21lc3NhZ2UgPSAnJztcbiAgICBoYXNfbm9fY2xvc2VfaWNvbiA9IGZhbHNlO1xuICAgIHNob3VsZF9zaG93ID0gZmFsc2U7XG4gICAgc2hvdWxkX25vdF9zaG93X3RpdGxlID0gZmFsc2U7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgbWFrZU9ic2VydmFibGUodGhpcywge1xuICAgICAgICAgICAgY29uZmlybV9idXR0b25fdGV4dDogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGVycm9yX21lc3NhZ2U6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBoYXNfbm9fY2xvc2VfaWNvbjogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIHNob3VsZF9zaG93OiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgc2hvdWxkX25vdF9zaG93X3RpdGxlOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgc2V0U2hvdWxkU2hvdzogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0RXJyb3JNZXNzYWdlOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRDb25maXJtQnV0dG9uVGV4dDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0U2hvdWxkTm90U2hvd1RpdGxlOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRIYXNOb0Nsb3NlSWNvbjogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgb3BlblJlYWRNb3JlRGlhbG9nOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICByZXNldDogYWN0aW9uLmJvdW5kLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzZXRTaG91bGRTaG93KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2hvdWxkX3Nob3cgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBzZXRFcnJvck1lc3NhZ2UobWVzc2FnZSkge1xuICAgICAgICB0aGlzLmVycm9yX21lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICB0aGlzLnNldFNob3VsZFNob3codHJ1ZSk7XG4gICAgfVxuXG4gICAgc2V0Q29uZmlybUJ1dHRvblRleHQodGV4dCkge1xuICAgICAgICB0aGlzLmNvbmZpcm1fYnV0dG9uX3RleHQgPSB0ZXh0O1xuICAgIH1cblxuICAgIHNldFNob3VsZE5vdFNob3dUaXRsZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnNob3VsZF9ub3Rfc2hvd190aXRsZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIHNldEhhc05vQ2xvc2VJY29uKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaGFzX25vX2Nsb3NlX2ljb24gPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBvcGVuUmVhZE1vcmVEaWFsb2coZXJyb3JfY29udGVudCwgY29uZmlybV9idXR0b25fdGV4dCkge1xuICAgICAgICB0aGlzLnNldEVycm9yTWVzc2FnZShlcnJvcl9jb250ZW50KTtcbiAgICAgICAgdGhpcy5zZXRDb25maXJtQnV0dG9uVGV4dChjb25maXJtX2J1dHRvbl90ZXh0KTtcbiAgICAgICAgdGhpcy5zZXRIYXNOb0Nsb3NlSWNvbih0cnVlKTtcbiAgICAgICAgdGhpcy5zZXRTaG91bGROb3RTaG93VGl0bGUodHJ1ZSk7XG4gICAgfVxuXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuc2V0Q29uZmlybUJ1dHRvblRleHQoJycpO1xuICAgICAgICB0aGlzLnNldFNob3VsZE5vdFNob3dUaXRsZShmYWxzZSk7XG4gICAgICAgIHRoaXMuc2V0SGFzTm9DbG9zZUljb24oZmFsc2UpO1xuICAgIH1cbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBJY29uLCBDb3VudGVyIH0gZnJvbSAnQGRlcml2L2NvbXBvbmVudHMnO1xuXG50eXBlIFRDYXNoaWVyTm90aWZpY2F0aW9uc1Byb3BzID0ge1xuICAgIHAycF9ub3RpZmljYXRpb25fY291bnQ6IG51bWJlcjtcbn07XG5cbmNvbnN0IENhc2hpZXJOb3RpZmljYXRpb25zID0gKHsgcDJwX25vdGlmaWNhdGlvbl9jb3VudCB9OiBUQ2FzaGllck5vdGlmaWNhdGlvbnNQcm9wcykgPT4gKFxuICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgPEljb24gaWNvbj0nSWNDYXNoaWVyJyBjbGFzc05hbWU9J2hlYWRlcl9faWNvbicgLz5cbiAgICAgICAgeyEhcDJwX25vdGlmaWNhdGlvbl9jb3VudCAmJiA8Q291bnRlciBjbGFzc05hbWU9J2Nhc2hpZXJfX2NvdW50ZXInIGNvdW50PXtwMnBfbm90aWZpY2F0aW9uX2NvdW50fSAvPn1cbiAgICA8L1JlYWN0LkZyYWdtZW50PlxuKTtcblxuZXhwb3J0IGRlZmF1bHQgQ2FzaGllck5vdGlmaWNhdGlvbnM7XG4iLCJpbXBvcnQgQ2FzaGllck5vdGlmaWNhdGlvbnMgZnJvbSAnLi9jYXNoaWVyLW5vdGlmaWNhdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBDYXNoaWVyTm90aWZpY2F0aW9ucztcbiIsImltcG9ydCB7IGdldEN1cnJlbmN5RGlzcGxheUNvZGUgfSBmcm9tICdAZGVyaXYvc2hhcmVkJztcblxuY29uc3QgdGVtcGxhdGUgPSAoc3RyaW5nLCBjb250ZW50KSA9PiB7XG4gICAgbGV0IHRvX3JlcGxhY2UgPSBjb250ZW50O1xuICAgIGlmIChjb250ZW50ICYmICFBcnJheS5pc0FycmF5KGNvbnRlbnQpKSB7XG4gICAgICAgIHRvX3JlcGxhY2UgPSBbY29udGVudF07XG4gICAgfVxuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvXFxbXyhcXGQrKV0vZywgKHMsIGluZGV4KSA9PiB0b19yZXBsYWNlWytpbmRleCAtIDFdKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIERPTSBlbGVtZW50IGFuZCBhZGRzIGFueSBhdHRyaWJ1dGVzIHRvIGl0LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0YWdfbmFtZTogdGhlIHRhZyB0byBjcmVhdGUsIGUuZy4gJ2RpdicsICdhJywgZXRjXG4gKiBAcGFyYW0ge09iamVjdH0gYXR0cmlidXRlczogYWxsIHRoZSBhdHRyaWJ1dGVzIHRvIGFzc2lnbiwgZS5nLiB7IGlkOiAnLi4uJywgY2xhc3M6ICcuLi4nLCBodG1sOiAnLi4uJywgLi4uIH1cbiAqIEByZXR1cm4gdGhlIGNyZWF0ZWQgRE9NIGVsZW1lbnRcbiAqL1xuY29uc3QgY3JlYXRlRWxlbWVudCA9ICh0YWdfbmFtZSwgYXR0cmlidXRlcyA9IHt9KSA9PiB7XG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ19uYW1lKTtcbiAgICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGF0dHIgPT4ge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGF0dHJpYnV0ZXNbYXR0cl07XG4gICAgICAgIGlmIChhdHRyID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgIGVsLnRleHRDb250ZW50ID0gdmFsdWU7XG4gICAgICAgIH0gZWxzZSBpZiAoYXR0ciA9PT0gJ2h0bWwnKSB7XG4gICAgICAgICAgICBlbC5odG1sKHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZWw7XG59O1xuXG5sZXQgc3RhdGljX2hhc2g7XG5jb25zdCBnZXRTdGF0aWNIYXNoID0gKCkgPT4ge1xuICAgIHN0YXRpY19oYXNoID1cbiAgICAgICAgc3RhdGljX2hhc2ggfHwgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3NjcmlwdFtzcmMqPVwibWFpblwiXScpLmdldEF0dHJpYnV0ZSgnc3JjJykgfHwgJycpLnNwbGl0KCcuJylbMV07XG4gICAgcmV0dXJuIHN0YXRpY19oYXNoO1xufTtcblxuY2xhc3MgUHJvbWlzZUNsYXNzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZWplY3QgPSByZWplY3Q7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8vIFRPRE86IFtkdXBsaWNhdGVfY29kZV0gLSBNb3ZlIHRoaXMgdG8gc2hhcmVkIHBhY2thZ2Vcbi8vIGV1IGNvdW50cmllcyB0byBzdXBwb3J0XG5jb25zdCBldV9jb3VudHJpZXMgPSBbXG4gICAgJ2l0JyxcbiAgICAnZGUnLFxuICAgICdmcicsXG4gICAgJ2x1JyxcbiAgICAnZ3InLFxuICAgICdtZicsXG4gICAgJ2VzJyxcbiAgICAnc2snLFxuICAgICdsdCcsXG4gICAgJ25sJyxcbiAgICAnYXQnLFxuICAgICdiZycsXG4gICAgJ3NpJyxcbiAgICAnY3knLFxuICAgICdiZScsXG4gICAgJ3JvJyxcbiAgICAnaHInLFxuICAgICdwdCcsXG4gICAgJ3BsJyxcbiAgICAnbHYnLFxuICAgICdlZScsXG4gICAgJ2N6JyxcbiAgICAnZmknLFxuICAgICdodScsXG4gICAgJ2RrJyxcbiAgICAnc2UnLFxuICAgICdpZScsXG4gICAgJ2ltJyxcbiAgICAnZ2InLFxuICAgICdtdCcsXG5dO1xuLy8gVE9ETzogW2R1cGxpY2F0ZV9jb2RlXSAtIE1vdmUgdGhpcyB0byBzaGFyZWQgcGFja2FnZVxuLy8gY2hlY2sgaWYgY2xpZW50IGlzIGZyb20gRVVcbmNvbnN0IGlzRXVDb3VudHJ5ID0gY291bnRyeSA9PiBldV9jb3VudHJpZXMuaW5jbHVkZXMoY291bnRyeSk7XG5cbi8vIGNoZWNrIGlmIG1sdCBvciBkeHRyYWRlIGZvciBhY2NvdW50IHRleHRcbmNvbnN0IGdldEFjY291bnRUZXh0ID0gYWNjb3VudCA9PiB7XG4gICAgbGV0IGFjY291bnRfdGV4dCA9ICcnO1xuICAgIGlmIChhY2NvdW50LmlzX2R4dHJhZGUgfHwgYWNjb3VudC5pc19tdCkge1xuICAgICAgICBhY2NvdW50X3RleHQgPSBhY2NvdW50LnRleHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYWNjb3VudF90ZXh0ID0gZ2V0Q3VycmVuY3lEaXNwbGF5Q29kZShhY2NvdW50LnRleHQpO1xuICAgIH1cblxuICAgIHJldHVybiBhY2NvdW50X3RleHQ7XG59O1xuXG5jb25zdCBnZXROb3JtYWxpemVkUGF5bWVudE1ldGhvZCA9IChwYXltZW50X21ldGhvZCwgY29uc3RhbnRzLCBpc19mb3JfaWNvbiA9IGZhbHNlKSA9PiB7XG4gICAgY29uc3QgbWV0aG9kID0gaXNfZm9yX2ljb24gPyBwYXltZW50X21ldGhvZC5yZXBsYWNlKC9bJyAnLC1dL2csICcnKS50b0xvd2VyQ2FzZSgpIDogcGF5bWVudF9tZXRob2Q7XG5cbiAgICBjb25zdCBub3JtYWxpemVkX3BheW1lbnRfbWV0aG9kID0gT2JqZWN0LmVudHJpZXMoY29uc3RhbnRzKS5yZWR1Y2UoXG4gICAgICAgIChwYXlfbWV0aG9kLCBba2V5LCB2YWx1ZV0pID0+ICh2YWx1ZS5zb21lKGVsID0+IGVsID09PSBtZXRob2QpID8ga2V5IDogcGF5X21ldGhvZCksXG4gICAgICAgICcnXG4gICAgKTtcbiAgICByZXR1cm4gaXNfZm9yX2ljb24gPyBub3JtYWxpemVkX3BheW1lbnRfbWV0aG9kIDogbm9ybWFsaXplZF9wYXltZW50X21ldGhvZCB8fCBwYXltZW50X21ldGhvZDtcbn07XG5cbmV4cG9ydCB7XG4gICAgY3JlYXRlRWxlbWVudCxcbiAgICBnZXRBY2NvdW50VGV4dCxcbiAgICBnZXROb3JtYWxpemVkUGF5bWVudE1ldGhvZCxcbiAgICBnZXRTdGF0aWNIYXNoLFxuICAgIGlzRXVDb3VudHJ5LFxuICAgIFByb21pc2VDbGFzcyxcbiAgICB0ZW1wbGF0ZSxcbn07XG4iLCJjbGFzcyBFcnJvcnMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmVycm9ycyA9IHt9O1xuICAgIH1cblxuICAgIGFkZChhdHRyaWJ1dGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKCF0aGlzLmhhcyhhdHRyaWJ1dGUpKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yc1thdHRyaWJ1dGVdID0gW107XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5lcnJvcnNbYXR0cmlidXRlXS5pbmRleE9mKG1lc3NhZ2UpID09PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5lcnJvcnNbYXR0cmlidXRlXS5wdXNoKG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYWxsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnM7XG4gICAgfVxuXG4gICAgZmlyc3QoYXR0cmlidXRlKSB7XG4gICAgICAgIGlmICh0aGlzLmhhcyhhdHRyaWJ1dGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNbYXR0cmlidXRlXVswXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBnZXQoYXR0cmlidXRlKSB7XG4gICAgICAgIGlmICh0aGlzLmhhcyhhdHRyaWJ1dGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNbYXR0cmlidXRlXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBoYXMoYXR0cmlidXRlKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5lcnJvcnMsIGF0dHJpYnV0ZSk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBFcnJvcnM7XG4iLCJpbXBvcnQgeyBnZXRQcmVCdWlsZERWUnMgfSBmcm9tICdAZGVyaXYvc2hhcmVkJztcbmltcG9ydCB7IHRlbXBsYXRlIH0gZnJvbSAnLi4vdXRpbGl0eSc7XG5pbXBvcnQgRXJyb3IgZnJvbSAnLi9lcnJvcnMnO1xuXG5jbGFzcyBWYWxpZGF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKGlucHV0LCBydWxlcywgc3RvcmUgPSBudWxsKSB7XG4gICAgICAgIHRoaXMuaW5wdXQgPSBpbnB1dDtcbiAgICAgICAgdGhpcy5ydWxlcyA9IHJ1bGVzO1xuICAgICAgICB0aGlzLnN0b3JlID0gc3RvcmU7XG4gICAgICAgIHRoaXMuZXJyb3JzID0gbmV3IEVycm9yKCk7XG5cbiAgICAgICAgdGhpcy5lcnJvcl9jb3VudCA9IDA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGZhaWx1cmUgYW5kIGVycm9yIG1lc3NhZ2UgZm9yIGdpdmVuIHJ1bGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGVcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gcnVsZVxuICAgICAqL1xuICAgIGFkZEZhaWx1cmUoYXR0cmlidXRlLCBydWxlLCBlcnJvcl9tZXNzYWdlKSB7XG4gICAgICAgIGxldCBtZXNzYWdlID0gZXJyb3JfbWVzc2FnZSB8fCBydWxlLm9wdGlvbnMubWVzc2FnZSB8fCBnZXRQcmVCdWlsZERWUnMoKVtydWxlLm5hbWVdLm1lc3NhZ2UoKTtcbiAgICAgICAgaWYgKHJ1bGUubmFtZSA9PT0gJ2xlbmd0aCcpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSB0ZW1wbGF0ZShtZXNzYWdlLCBbXG4gICAgICAgICAgICAgICAgcnVsZS5vcHRpb25zLm1pbiA9PT0gcnVsZS5vcHRpb25zLm1heCA/IHJ1bGUub3B0aW9ucy5taW4gOiBgJHtydWxlLm9wdGlvbnMubWlufS0ke3J1bGUub3B0aW9ucy5tYXh9YCxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9IGVsc2UgaWYgKHJ1bGUubmFtZSA9PT0gJ21pbicpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSB0ZW1wbGF0ZShtZXNzYWdlLCBbcnVsZS5vcHRpb25zLm1pbl0pO1xuICAgICAgICB9IGVsc2UgaWYgKHJ1bGUubmFtZSA9PT0gJ25vdF9lcXVhbCcpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSB0ZW1wbGF0ZShtZXNzYWdlLCBbcnVsZS5vcHRpb25zLm5hbWUxLCBydWxlLm9wdGlvbnMubmFtZTJdKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVycm9ycy5hZGQoYXR0cmlidXRlLCBtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5lcnJvcl9jb3VudCsrO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJ1bnMgdmFsaWRhdG9yXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIGl0IHBhc3NlczsgdHJ1ZSA9IHBhc3NlcywgZmFsc2UgPSBmYWlsc1xuICAgICAqL1xuICAgIGNoZWNrKCkge1xuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmlucHV0KS5mb3JFYWNoKGF0dHJpYnV0ZSA9PiB7XG4gICAgICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLnJ1bGVzLCBhdHRyaWJ1dGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnJ1bGVzW2F0dHJpYnV0ZV0uZm9yRWFjaChydWxlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBydWxlT2JqZWN0ID0gVmFsaWRhdG9yLmdldFJ1bGVPYmplY3QocnVsZSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIXJ1bGVPYmplY3QudmFsaWRhdG9yICYmIHR5cGVvZiBydWxlT2JqZWN0LnZhbGlkYXRvciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHJ1bGVPYmplY3Qub3B0aW9ucy5jb25kaXRpb24gJiYgIXJ1bGVPYmplY3Qub3B0aW9ucy5jb25kaXRpb24odGhpcy5zdG9yZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlucHV0W2F0dHJpYnV0ZV0gPT09ICcnICYmIHJ1bGVPYmplY3QubmFtZSAhPT0gJ3JlcScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxldCBpc192YWxpZCwgZXJyb3JfbWVzc2FnZTtcbiAgICAgICAgICAgICAgICBpZiAocnVsZU9iamVjdC5uYW1lID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGlzX29rLCBtZXNzYWdlIH0gPSBydWxlT2JqZWN0LnZhbGlkYXRvcihcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRbYXR0cmlidXRlXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVPYmplY3Qub3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RvcmUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlucHV0XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIGlzX3ZhbGlkID0gaXNfb2s7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yX21lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlzX3ZhbGlkID0gcnVsZU9iamVjdC52YWxpZGF0b3IodGhpcy5pbnB1dFthdHRyaWJ1dGVdLCBydWxlT2JqZWN0Lm9wdGlvbnMsIHRoaXMuc3RvcmUsIHRoaXMuaW5wdXQpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICghaXNfdmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRGYWlsdXJlKGF0dHJpYnV0ZSwgcnVsZU9iamVjdCwgZXJyb3JfbWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gIXRoaXMuZXJyb3JfY291bnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIGlmIHZhbGlkYXRpb24gcGFzc2VzXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqL1xuICAgIGlzUGFzc2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGVjaygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoZSBydWxlIGFycmF5IHRvIGFuIG9iamVjdFxuICAgICAqXG4gICAgICogQHBhcmFtIHthcnJheX0gcnVsZVxuICAgICAqIEByZXR1cm4ge29iamVjdH1cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0UnVsZU9iamVjdChydWxlKSB7XG4gICAgICAgIGNvbnN0IGlzX3J1bGVfc3RyaW5nID0gdHlwZW9mIHJ1bGUgPT09ICdzdHJpbmcnO1xuICAgICAgICBjb25zdCBydWxlX29iamVjdCA9IHtcbiAgICAgICAgICAgIG5hbWU6IGlzX3J1bGVfc3RyaW5nID8gcnVsZSA6IHJ1bGVbMF0sXG4gICAgICAgICAgICBvcHRpb25zOiBpc19ydWxlX3N0cmluZyA/IHt9IDogcnVsZVsxXSB8fCB7fSxcbiAgICAgICAgfTtcblxuICAgICAgICBydWxlX29iamVjdC52YWxpZGF0b3IgPSBydWxlX29iamVjdC5uYW1lID09PSAnY3VzdG9tJyA/IHJ1bGVbMV0uZnVuYyA6IGdldFByZUJ1aWxkRFZScygpW3J1bGVfb2JqZWN0Lm5hbWVdLmZ1bmM7XG5cbiAgICAgICAgcmV0dXJuIHJ1bGVfb2JqZWN0O1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVmFsaWRhdG9yO1xuIiwiZXhwb3J0IGRlZmF1bHQgZnJvbSAnLi92YWxpZGF0b3InO1xuIiwiaW1wb3J0IHsgYWN0aW9uLCBpbnRlcmNlcHQsIG9ic2VydmFibGUsIHJlYWN0aW9uLCB0b0pTLCB3aGVuLCBtYWtlT2JzZXJ2YWJsZSB9IGZyb20gJ21vYngnO1xuaW1wb3J0IHsgaXNQcm9kdWN0aW9uLCBpc0VtcHR5T2JqZWN0IH0gZnJvbSAnQGRlcml2L3NoYXJlZCc7XG5cbmltcG9ydCBWYWxpZGF0b3IgZnJvbSAnVXRpbHMvdmFsaWRhdG9yJztcblxuLyoqXG4gKiBCYXNlU3RvcmUgY2xhc3MgaXMgdGhlIGJhc2UgY2xhc3MgZm9yIGFsbCBkZWZpbmVkIHN0b3JlcyBpbiB0aGUgYXBwbGljYXRpb24uIEl0IGhhbmRsZXMgc29tZSBzdHVmZiBzdWNoIGFzOlxuICogIDEuIENyZWF0aW5nIHNuYXBzaG90IG9iamVjdCBmcm9tIHRoZSBzdG9yZS5cbiAqICAyLiBTYXZpbmcgdGhlIHN0b3JlJ3Mgc25hcHNob3QgaW4gbG9jYWwvc2Vzc2lvbiBzdG9yYWdlIGFuZCBrZWVwaW5nIHRoZW0gaW4gc3luYy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFzZVN0b3JlIHtcbiAgICAvKipcbiAgICAgKiBBbiBlbnVtIG9iamVjdCB0byBkZWZpbmUgTE9DQUxfU1RPUkFHRSBhbmQgU0VTU0lPTl9TVE9SQUdFXG4gICAgICovXG4gICAgc3RhdGljIFNUT1JBR0VTID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgICAgIExPQ0FMX1NUT1JBR0U6IFN5bWJvbCgnTE9DQUxfU1RPUkFHRScpLFxuICAgICAgICBTRVNTSU9OX1NUT1JBR0U6IFN5bWJvbCgnU0VTU0lPTl9TVE9SQUdFJyksXG4gICAgfSk7XG5cbiAgICB2YWxpZGF0aW9uX2Vycm9ycyA9IHt9O1xuXG4gICAgdmFsaWRhdGlvbl9ydWxlcyA9IHt9O1xuXG4gICAgcHJlU3dpdGNoQWNjb3VudERpc3Bvc2VyID0gbnVsbDtcbiAgICBwcmVfc3dpdGNoX2FjY291bnRfbGlzdGVuZXIgPSBudWxsO1xuXG4gICAgc3dpdGNoQWNjb3VudERpc3Bvc2VyID0gbnVsbDtcbiAgICBzd2l0Y2hfYWNjb3VudF9saXN0ZW5lciA9IG51bGw7XG5cbiAgICBsb2dvdXREaXNwb3NlciA9IG51bGw7XG4gICAgbG9nb3V0X2xpc3RlbmVyID0gbnVsbDtcblxuICAgIGNsaWVudEluaXREaXNwb3NlciA9IG51bGw7XG4gICAgY2xpZW50X2luaXRfbGlzdGVuZXIgPSBudWxsO1xuXG4gICAgbmV0d29ya1N0YXR1c0NoYW5nZURpc3Bvc2VyID0gbnVsbDtcbiAgICBuZXR3b3JrX3N0YXR1c19jaGFuZ2VfbGlzdGVuZXIgPSBudWxsO1xuXG4gICAgdGhlbWVDaGFuZ2VEaXNwb3NlciA9IG51bGw7XG4gICAgdGhlbWVfY2hhbmdlX2xpc3RlbmVyID0gbnVsbDtcblxuICAgIHJlYWxBY2NvdW50U2lnbnVwRW5kZWREaXNwb3NlciA9IG51bGw7XG4gICAgcmVhbF9hY2NvdW50X3NpZ251cF9lbmRlZF9saXN0ZW5lciA9IG51bGw7XG5cbiAgICBwYXJ0aWFsX2ZldGNoX3RpbWUgPSAwO1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0b3Igb2YgdGhlIGJhc2UgY2xhc3MgdGhhdCBnZXRzIHByb3BlcnRpZXMnIG5hbWUgb2YgY2hpbGQgd2hpY2ggc2hvdWxkIGJlIHNhdmVkIGluIHN0b3JhZ2VzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIEFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAgICAgKiAgICAgQHByb3BlcnR5IHtPYmplY3R9ICAgcm9vdF9zdG9yZSAtIEFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSByb290IHN0b3JlIG9mIHRoZSBhcHAuXG4gICAgICogICAgIEBwcm9wZXJ0eSB7U3RyaW5nW119IGxvY2FsX3N0b3JhZ2VfcHJvcGVydGllcyAtIEEgbGlzdCBvZiBwcm9wZXJ0aWVzJyBuYW1lcyB0aGF0IHNob3VsZCBiZSBrZXB0IGluIGxvY2FsU3RvcmFnZS5cbiAgICAgKiAgICAgQHByb3BlcnR5IHtTdHJpbmdbXX0gc2Vzc2lvbl9zdG9yYWdlX3Byb3BlcnRpZXMgLSBBIGxpc3Qgb2YgcHJvcGVydGllcycgbmFtZXMgdGhhdCBzaG91bGQgYmUga2VwdCBpbiBzZXNzaW9uU3RvcmFnZS5cbiAgICAgKiAgICAgQHByb3BlcnR5IHtPYmplY3R9ICAgdmFsaWRhdGlvbl9ydWxlcyAtIEFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSB2YWxpZGF0aW9uIHJ1bGVzIGZvciBlYWNoIHByb3BlcnR5IG9mIHRoZSBzdG9yZS5cbiAgICAgKiAgICAgQHByb3BlcnR5IHtTdHJpbmd9ICAgc3RvcmVfbmFtZSAtIEV4cGxpY2l0IHN0b3JlIG5hbWUgZm9yIGJyb3dzZXIgYXBwbGljYXRpb24gc3RvcmFnZSAodG8gYnlwYXNzIG1pbmlmaWNhdGlvbilcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgbWFrZU9ic2VydmFibGUodGhpcywge1xuICAgICAgICAgICAgdmFsaWRhdGlvbl9lcnJvcnM6IG9ic2VydmFibGUsXG4gICAgICAgICAgICB2YWxpZGF0aW9uX3J1bGVzOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgcGFydGlhbF9mZXRjaF90aW1lOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgcmV0cmlldmVGcm9tU3RvcmFnZTogYWN0aW9uLFxuICAgICAgICAgICAgc2V0VmFsaWRhdGlvbkVycm9yTWVzc2FnZXM6IGFjdGlvbixcbiAgICAgICAgICAgIHNldFZhbGlkYXRpb25SdWxlczogYWN0aW9uLFxuICAgICAgICAgICAgYWRkUnVsZTogYWN0aW9uLFxuICAgICAgICAgICAgdmFsaWRhdGVQcm9wZXJ0eTogYWN0aW9uLFxuICAgICAgICAgICAgdmFsaWRhdGVBbGxQcm9wZXJ0aWVzOiBhY3Rpb24sXG4gICAgICAgICAgICBvblN3aXRjaEFjY291bnQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIG9uUHJlU3dpdGNoQWNjb3VudDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgb25Mb2dvdXQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIG9uQ2xpZW50SW5pdDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgb25OZXR3b3JrU3RhdHVzQ2hhbmdlOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBvblRoZW1lQ2hhbmdlOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBvblJlYWxBY2NvdW50U2lnbnVwRW5kOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBkaXNwb3NlUHJlU3dpdGNoQWNjb3VudDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgZGlzcG9zZVN3aXRjaEFjY291bnQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIGRpc3Bvc2VMb2dvdXQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIGRpc3Bvc2VDbGllbnRJbml0OiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBkaXNwb3NlTmV0d29ya1N0YXR1c0NoYW5nZTogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgZGlzcG9zZVRoZW1lQ2hhbmdlOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBkaXNwb3NlUmVhbEFjY291bnRTaWdudXBFbmQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIG9uVW5tb3VudDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgYXNzZXJ0SGFzVmFsaWRDYWNoZTogYWN0aW9uLmJvdW5kLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB7IHJvb3Rfc3RvcmUsIGxvY2FsX3N0b3JhZ2VfcHJvcGVydGllcywgc2Vzc2lvbl9zdG9yYWdlX3Byb3BlcnRpZXMsIHZhbGlkYXRpb25fcnVsZXMsIHN0b3JlX25hbWUgfSA9XG4gICAgICAgICAgICBvcHRpb25zO1xuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAncm9vdF9zdG9yZScsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ2xvY2FsX3N0b3JhZ2VfcHJvcGVydGllcycsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3Nlc3Npb25fc3RvcmFnZV9wcm9wZXJ0aWVzJywge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgaGFzX2xvY2FsX29yX3Nlc3Npb25fc3RvcmFnZSA9XG4gICAgICAgICAgICAobG9jYWxfc3RvcmFnZV9wcm9wZXJ0aWVzICYmIGxvY2FsX3N0b3JhZ2VfcHJvcGVydGllcy5sZW5ndGgpIHx8XG4gICAgICAgICAgICAoc2Vzc2lvbl9zdG9yYWdlX3Byb3BlcnRpZXMgJiYgc2Vzc2lvbl9zdG9yYWdlX3Byb3BlcnRpZXMubGVuZ3RoKTtcblxuICAgICAgICBpZiAoaGFzX2xvY2FsX29yX3Nlc3Npb25fc3RvcmFnZSkge1xuICAgICAgICAgICAgaWYgKCFzdG9yZV9uYW1lKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzdG9yZV9uYW1lIGlzIHJlcXVpcmVkIGZvciBsb2NhbC9zZXNzaW9uIHN0b3JhZ2UnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdzdG9yZV9uYW1lJywge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBzdG9yZV9uYW1lLFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yb290X3N0b3JlID0gcm9vdF9zdG9yZTtcbiAgICAgICAgdGhpcy5sb2NhbF9zdG9yYWdlX3Byb3BlcnRpZXMgPSBsb2NhbF9zdG9yYWdlX3Byb3BlcnRpZXMgfHwgW107XG4gICAgICAgIHRoaXMuc2Vzc2lvbl9zdG9yYWdlX3Byb3BlcnRpZXMgPSBzZXNzaW9uX3N0b3JhZ2VfcHJvcGVydGllcyB8fCBbXTtcblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0VmFsaWRhdGlvblJ1bGVzKHZhbGlkYXRpb25fcnVsZXMpO1xuICAgICAgICAgICAgdGhpcy5zZXR1cFJlYWN0aW9uRm9yTG9jYWxTdG9yYWdlKCk7XG4gICAgICAgICAgICB0aGlzLnNldHVwUmVhY3Rpb25Gb3JTZXNzaW9uU3RvcmFnZSgpO1xuICAgICAgICAgICAgdGhpcy5yZXRyaWV2ZUZyb21TdG9yYWdlKCk7XG4gICAgICAgIH0sIDApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gc25hcHNob3Qgb2YgdGhlIGN1cnJlbnQgc3RvcmVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nW119IHByb3BlcnRpZXMgLSBBIGxpc3Qgb2YgcHJvcGVydGllcycgbmFtZXMgdGhhdCBzaG91bGQgYmUgaW4gdGhlIHNuYXBzaG90LlxuICAgICAqXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBSZXR1cm5zIGEgY2xvbmVkIG9iamVjdCBvZiB0aGUgc3RvcmUuXG4gICAgICovXG4gICAgZ2V0U25hcHNob3QocHJvcGVydGllcykge1xuICAgICAgICBsZXQgc25hcHNob3QgPSB0b0pTKHRoaXMpO1xuXG4gICAgICAgIGlmICghaXNFbXB0eU9iamVjdCh0aGlzLnJvb3Rfc3RvcmUpKSB7XG4gICAgICAgICAgICBzbmFwc2hvdC5yb290X3N0b3JlID0gdGhpcy5yb290X3N0b3JlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHByb3BlcnRpZXMgJiYgcHJvcGVydGllcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHNuYXBzaG90ID0gcHJvcGVydGllcy5yZWR1Y2UoKHJlc3VsdCwgcCkgPT4gT2JqZWN0LmFzc2lnbihyZXN1bHQsIHsgW3BdOiBzbmFwc2hvdFtwXSB9KSwge30pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNuYXBzaG90O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdXAgYSByZWFjdGlvbiBvbiBwcm9wZXJ0aWVzIHdoaWNoIGFyZSBtZW50aW9uZWQgaW4gYGxvY2FsX3N0b3JhZ2VfcHJvcGVydGllc2BcbiAgICAgKiAgYW5kIGludm9rZXMgYHNhdmVUb1N0b3JhZ2VgIHdoZW4gdGhlcmUgYXJlIGFueSBjaGFuZ2VzIG9uIHRoZW0uXG4gICAgICpcbiAgICAgKi9cbiAgICBzZXR1cFJlYWN0aW9uRm9yTG9jYWxTdG9yYWdlKCkge1xuICAgICAgICBpZiAodGhpcy5sb2NhbF9zdG9yYWdlX3Byb3BlcnRpZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZWFjdGlvbihcbiAgICAgICAgICAgICAgICAoKSA9PiB0aGlzLmxvY2FsX3N0b3JhZ2VfcHJvcGVydGllcy5tYXAoaSA9PiB0aGlzW2ldKSxcbiAgICAgICAgICAgICAgICAoKSA9PiB0aGlzLnNhdmVUb1N0b3JhZ2UodGhpcy5sb2NhbF9zdG9yYWdlX3Byb3BlcnRpZXMsIEJhc2VTdG9yZS5TVE9SQUdFUy5MT0NBTF9TVE9SQUdFKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdXAgYSByZWFjdGlvbiBvbiBwcm9wZXJ0aWVzIHdoaWNoIGFyZSBtZW50aW9uZWQgaW4gYHNlc3Npb25fc3RvcmFnZV9wcm9wZXJ0aWVzYFxuICAgICAqICBhbmQgaW52b2tlcyBgc2F2ZVRvU3RvcmFnZWAgd2hlbiB0aGVyZSBhcmUgYW55IGNoYW5nZXMgb24gdGhlbS5cbiAgICAgKlxuICAgICAqL1xuICAgIHNldHVwUmVhY3Rpb25Gb3JTZXNzaW9uU3RvcmFnZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2Vzc2lvbl9zdG9yYWdlX3Byb3BlcnRpZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZWFjdGlvbihcbiAgICAgICAgICAgICAgICAoKSA9PiB0aGlzLnNlc3Npb25fc3RvcmFnZV9wcm9wZXJ0aWVzLm1hcChpID0+IHRoaXNbaV0pLFxuICAgICAgICAgICAgICAgICgpID0+IHRoaXMuc2F2ZVRvU3RvcmFnZSh0aGlzLnNlc3Npb25fc3RvcmFnZV9wcm9wZXJ0aWVzLCBCYXNlU3RvcmUuU1RPUkFHRVMuU0VTU0lPTl9TVE9SQUdFKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgcHJvcGVydGllcyB0aGF0IGFyZSBub3QgcGFzc2VkIGZyb20gdGhlIHNuYXBzaG90IG9mIHRoZSBzdG9yZSBhbmQgc2F2ZXMgaXQgdG8gdGhlIHBhc3NlZCBzdG9yYWdlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ1tdfSBwcm9wZXJ0aWVzIC0gQSBsaXN0IG9mIHRoZSBzdG9yZSdzIHByb3BlcnRpZXMnIG5hbWVzIHdoaWNoIHNob3VsZCBiZSBzYXZlZCBpbiB0aGUgc3RvcmFnZS5cbiAgICAgKiBAcGFyYW0ge1N5bWJvbH0gICBzdG9yYWdlICAgIC0gQSBzeW1ib2wgb2JqZWN0IHRoYXQgZGVmaW5lcyB0aGUgc3RvcmFnZSB3aGljaCB0aGUgc25hcHNob3Qgc2hvdWxkIGJlIHN0b3JlZCBpbiBpdC5cbiAgICAgKlxuICAgICAqL1xuICAgIHNhdmVUb1N0b3JhZ2UocHJvcGVydGllcywgc3RvcmFnZSkge1xuICAgICAgICBjb25zdCBzbmFwc2hvdCA9IEpTT04uc3RyaW5naWZ5KHRoaXMuZ2V0U25hcHNob3QocHJvcGVydGllcyksIChrZXksIHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IG51bGwpIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChzdG9yYWdlID09PSBCYXNlU3RvcmUuU1RPUkFHRVMuTE9DQUxfU1RPUkFHRSkge1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5zdG9yZV9uYW1lLCBzbmFwc2hvdCk7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RvcmFnZSA9PT0gQmFzZVN0b3JlLlNUT1JBR0VTLlNFU1NJT05fU1RPUkFHRSkge1xuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSh0aGlzLnN0b3JlX25hbWUsIHNuYXBzaG90KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBzYXZlZCBzbmFwc2hvdCBvZiB0aGUgc3RvcmUgYW5kIGFzc2lnbnMgdG8gdGhlIGN1cnJlbnQgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKi9cbiAgICByZXRyaWV2ZUZyb21TdG9yYWdlKCkge1xuICAgICAgICBjb25zdCBsb2NhbF9zdG9yYWdlX3NuYXBzaG90ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLnN0b3JlX25hbWUsIHt9KSk7XG4gICAgICAgIGNvbnN0IHNlc3Npb25fc3RvcmFnZV9zbmFwc2hvdCA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSh0aGlzLnN0b3JlX25hbWUsIHt9KSk7XG5cbiAgICAgICAgY29uc3Qgc25hcHNob3QgPSB7IC4uLmxvY2FsX3N0b3JhZ2Vfc25hcHNob3QsIC4uLnNlc3Npb25fc3RvcmFnZV9zbmFwc2hvdCB9O1xuXG4gICAgICAgIE9iamVjdC5rZXlzKHNuYXBzaG90KS5mb3JFYWNoKGsgPT4gKHRoaXNba10gPSBzbmFwc2hvdFtrXSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdmFsaWRhdGlvbiBlcnJvciBtZXNzYWdlcyBmb3IgYW4gb2JzZXJ2YWJsZSBwcm9wZXJ0eSBvZiB0aGUgc3RvcmVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eU5hbWUgLSBUaGUgb2JzZXJ2YWJsZSBwcm9wZXJ0eSdzIG5hbWVcbiAgICAgKiBAcGFyYW0gW3tTdHJpbmd9XSBtZXNzYWdlcyAtIEFuIGFycmF5IG9mIHN0cmluZ3MgdGhhdCBjb250YWlucyB2YWxpZGF0aW9uIGVycm9yIG1lc3NhZ2VzIGZvciB0aGUgcGFydGljdWxhciBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqL1xuICAgIHNldFZhbGlkYXRpb25FcnJvck1lc3NhZ2VzKHByb3BlcnR5TmFtZSwgbWVzc2FnZXMpIHtcbiAgICAgICAgY29uc3QgaXNfZGlmZmVyZW50ID0gKCkgPT5cbiAgICAgICAgICAgICEhdGhpcy52YWxpZGF0aW9uX2Vycm9yc1twcm9wZXJ0eU5hbWVdXG4gICAgICAgICAgICAgICAgLmZpbHRlcih4ID0+ICFtZXNzYWdlcy5pbmNsdWRlcyh4KSlcbiAgICAgICAgICAgICAgICAuY29uY2F0KG1lc3NhZ2VzLmZpbHRlcih4ID0+ICF0aGlzLnZhbGlkYXRpb25fZXJyb3JzW3Byb3BlcnR5TmFtZV0uaW5jbHVkZXMoeCkpKS5sZW5ndGg7XG4gICAgICAgIGlmICghdGhpcy52YWxpZGF0aW9uX2Vycm9yc1twcm9wZXJ0eU5hbWVdIHx8IGlzX2RpZmZlcmVudCgpKSB7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRpb25fZXJyb3JzW3Byb3BlcnR5TmFtZV0gPSBtZXNzYWdlcztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdmFsaWRhdGlvbiBydWxlc1xuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHJ1bGVzXG4gICAgICpcbiAgICAgKi9cbiAgICBzZXRWYWxpZGF0aW9uUnVsZXMocnVsZXMgPSB7fSkge1xuICAgICAgICBPYmplY3Qua2V5cyhydWxlcykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hZGRSdWxlKGtleSwgcnVsZXNba2V5XSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgcnVsZXMgdG8gdGhlIHBhcnRpY3VsYXIgcHJvcGVydHlcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBydWxlc1xuICAgICAqXG4gICAgICovXG4gICAgYWRkUnVsZShwcm9wZXJ0eSwgcnVsZXMpIHtcbiAgICAgICAgdGhpcy52YWxpZGF0aW9uX3J1bGVzW3Byb3BlcnR5XSA9IHJ1bGVzO1xuXG4gICAgICAgIGludGVyY2VwdCh0aGlzLCBwcm9wZXJ0eSwgY2hhbmdlID0+IHtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVQcm9wZXJ0eShwcm9wZXJ0eSwgY2hhbmdlLm5ld1ZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBjaGFuZ2U7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlcyBhIHBhcnRpY3VsYXIgcHJvcGVydHkgb2YgdGhlIHN0b3JlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkgLSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgaW4gdGhlIHN0b3JlXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHZhbHVlICAgIC0gVGhlIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eSwgaXQgY2FuIGJlIHVuZGVmaW5lZC5cbiAgICAgKlxuICAgICAqL1xuICAgIHZhbGlkYXRlUHJvcGVydHkocHJvcGVydHksIHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHRyaWdnZXIgPSB0aGlzLnZhbGlkYXRpb25fcnVsZXNbcHJvcGVydHldLnRyaWdnZXI7XG4gICAgICAgIGNvbnN0IGlucHV0cyA9IHsgW3Byb3BlcnR5XTogdmFsdWUgIT09IHVuZGVmaW5lZCA/IHZhbHVlIDogdGhpc1twcm9wZXJ0eV0gfTtcbiAgICAgICAgY29uc3QgdmFsaWRhdGlvbl9ydWxlcyA9IHsgW3Byb3BlcnR5XTogdGhpcy52YWxpZGF0aW9uX3J1bGVzW3Byb3BlcnR5XS5ydWxlcyB8fCBbXSB9O1xuXG4gICAgICAgIGlmICghIXRyaWdnZXIgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwodGhpcywgdHJpZ2dlcikpIHtcbiAgICAgICAgICAgIGlucHV0c1t0cmlnZ2VyXSA9IHRoaXNbdHJpZ2dlcl07XG4gICAgICAgICAgICB2YWxpZGF0aW9uX3J1bGVzW3RyaWdnZXJdID0gdGhpcy52YWxpZGF0aW9uX3J1bGVzW3RyaWdnZXJdLnJ1bGVzIHx8IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IFZhbGlkYXRvcihpbnB1dHMsIHZhbGlkYXRpb25fcnVsZXMsIHRoaXMpO1xuXG4gICAgICAgIHZhbGlkYXRvci5pc1Bhc3NlZCgpO1xuXG4gICAgICAgIE9iamVjdC5rZXlzKGlucHV0cykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXRWYWxpZGF0aW9uRXJyb3JNZXNzYWdlcyhrZXksIHZhbGlkYXRvci5lcnJvcnMuZ2V0KGtleSkpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBWYWxpZGF0ZXMgYWxsIHByb3BlcnRpZXMgd2hpY2ggdmFsaWRhdGlvbiBydWxlIGhhcyBiZWVuIHNldCBmb3IuXG4gICAgICpcbiAgICAgKi9cbiAgICB2YWxpZGF0ZUFsbFByb3BlcnRpZXMoKSB7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb25fcnVsZXMgPSBPYmplY3Qua2V5cyh0aGlzLnZhbGlkYXRpb25fcnVsZXMpO1xuICAgICAgICBjb25zdCB2YWxpZGF0aW9uX2Vycm9ycyA9IE9iamVjdC5rZXlzKHRoaXMudmFsaWRhdGlvbl9lcnJvcnMpO1xuXG4gICAgICAgIHZhbGlkYXRpb25fcnVsZXMuZm9yRWFjaChwID0+IHtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVQcm9wZXJ0eShwLCB0aGlzW3BdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gUmVtb3ZlIGtleXMgdGhhdCBhcmUgcHJlc2VudCBpbiBlcnJvciwgYnV0IG5vdCBpbiBydWxlczpcbiAgICAgICAgdmFsaWRhdGlvbl9lcnJvcnMuZm9yRWFjaChlcnJvciA9PiB7XG4gICAgICAgICAgICBpZiAoIXZhbGlkYXRpb25fcnVsZXMuaW5jbHVkZXMoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMudmFsaWRhdGlvbl9lcnJvcnNbZXJyb3JdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvblN3aXRjaEFjY291bnQobGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKGxpc3RlbmVyKSB7XG4gICAgICAgICAgICB0aGlzLnN3aXRjaF9hY2NvdW50X2xpc3RlbmVyID0gbGlzdGVuZXI7XG5cbiAgICAgICAgICAgIHRoaXMuc3dpdGNoQWNjb3VudERpc3Bvc2VyID0gd2hlbihcbiAgICAgICAgICAgICAgICAoKSA9PiB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50LnN3aXRjaF9icm9hZGNhc3QsXG4gICAgICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zd2l0Y2hfYWNjb3VudF9saXN0ZW5lcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQudGhlbiAmJiB0eXBlb2YgcmVzdWx0LnRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm9vdF9zdG9yZS5jbGllbnQuc3dpdGNoRW5kU2lnbmFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25Td2l0Y2hBY2NvdW50KHRoaXMuc3dpdGNoX2FjY291bnRfbGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N3aXRjaGluZyBhY2NvdW50IGxpc3RlbmVycyBhcmUgcmVxdWlyZWQgdG8gcmV0dXJuIGEgcHJvbWlzZS4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZXJlIGlzIG5vIGxpc3RlbmVyIGN1cnJlbnRseSBhY3RpdmUuIHNvIHdlIGNhbiBqdXN0IGlnbm9yZSB0aGUgZXJyb3IgcmFpc2VkIGZyb20gdHJlYXRpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGEgbnVsbCBvYmplY3QgYXMgYSBmdW5jdGlvbi4gQWx0aG91Z2gsIGluIGRldmVsb3BtZW50IG1vZGUsIHdlIHRocm93IGEgY29uc29sZSBlcnJvci5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNQcm9kdWN0aW9uKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uUHJlU3dpdGNoQWNjb3VudChsaXN0ZW5lcikge1xuICAgICAgICBpZiAobGlzdGVuZXIpIHtcbiAgICAgICAgICAgIHRoaXMucHJlX3N3aXRjaF9hY2NvdW50X2xpc3RlbmVyID0gbGlzdGVuZXI7XG4gICAgICAgICAgICB0aGlzLnByZVN3aXRjaEFjY291bnREaXNwb3NlciA9IHdoZW4oXG4gICAgICAgICAgICAgICAgKCkgPT4gdGhpcy5yb290X3N0b3JlLmNsaWVudC5wcmVfc3dpdGNoX2Jyb2FkY2FzdCxcbiAgICAgICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnByZV9zd2l0Y2hfYWNjb3VudF9saXN0ZW5lcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQudGhlbiAmJiB0eXBlb2YgcmVzdWx0LnRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm9vdF9zdG9yZS5jbGllbnQuc2V0UHJlU3dpdGNoQWNjb3VudChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25QcmVTd2l0Y2hBY2NvdW50KHRoaXMucHJlX3N3aXRjaF9hY2NvdW50X2xpc3RlbmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQcmUtc3dpdGNoIGFjY291bnQgbGlzdGVuZXJzIGFyZSByZXF1aXJlZCB0byByZXR1cm4gYSBwcm9taXNlLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlcmUgaXMgbm8gbGlzdGVuZXIgY3VycmVudGx5IGFjdGl2ZS4gc28gd2UgY2FuIGp1c3QgaWdub3JlIHRoZSBlcnJvciByYWlzZWQgZnJvbSB0cmVhdGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYSBudWxsIG9iamVjdCBhcyBhIGZ1bmN0aW9uLiBBbHRob3VnaCwgaW4gZGV2ZWxvcG1lbnQgbW9kZSwgd2UgdGhyb3cgYSBjb25zb2xlIGVycm9yLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1Byb2R1Y3Rpb24oKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25Mb2dvdXQobGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5sb2dvdXREaXNwb3NlciA9IHdoZW4oXG4gICAgICAgICAgICAoKSA9PiB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50Lmhhc19sb2dnZWRfb3V0LFxuICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMubG9nb3V0X2xpc3RlbmVyKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0LnRoZW4gJiYgdHlwZW9mIHJlc3VsdC50aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb290X3N0b3JlLmNsaWVudC5zZXRMb2dvdXQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25Mb2dvdXQodGhpcy5sb2dvdXRfbGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0xvZ291dCBsaXN0ZW5lcnMgYXJlIHJlcXVpcmVkIHRvIHJldHVybiBhIHByb21pc2UuJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGVyZSBpcyBubyBsaXN0ZW5lciBjdXJyZW50bHkgYWN0aXZlLiBzbyB3ZSBjYW4ganVzdCBpZ25vcmUgdGhlIGVycm9yIHJhaXNlZCBmcm9tIHRyZWF0aW5nXG4gICAgICAgICAgICAgICAgICAgIC8vIGEgbnVsbCBvYmplY3QgYXMgYSBmdW5jdGlvbi4gQWx0aG91Z2gsIGluIGRldmVsb3BtZW50IG1vZGUsIHdlIHRocm93IGEgY29uc29sZSBlcnJvci5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1Byb2R1Y3Rpb24oKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5sb2dvdXRfbGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgICB9XG5cbiAgICBvbkNsaWVudEluaXQobGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5jbGllbnRJbml0RGlzcG9zZXIgPSB3aGVuKFxuICAgICAgICAgICAgKCkgPT4gdGhpcy5yb290X3N0b3JlLmNsaWVudC5pbml0aWFsaXplZF9icm9hZGNhc3QsXG4gICAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5jbGllbnRfaW5pdF9saXN0ZW5lcigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC50aGVuICYmIHR5cGVvZiByZXN1bHQudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm9vdF9zdG9yZS5jbGllbnQuc2V0SW5pdGlhbGl6ZWQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25DbGllbnRJbml0KHRoaXMuY2xpZW50X2luaXRfbGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NsaWVudCBpbml0IGxpc3RlbmVycyBhcmUgcmVxdWlyZWQgdG8gcmV0dXJuIGEgcHJvbWlzZS4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZXJlIGlzIG5vIGxpc3RlbmVyIGN1cnJlbnRseSBhY3RpdmUuIHNvIHdlIGNhbiBqdXN0IGlnbm9yZSB0aGUgZXJyb3IgcmFpc2VkIGZyb20gdHJlYXRpbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBudWxsIG9iamVjdCBhcyBhIGZ1bmN0aW9uLiBBbHRob3VnaCwgaW4gZGV2ZWxvcG1lbnQgbW9kZSwgd2UgdGhyb3cgYSBjb25zb2xlIGVycm9yLlxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzUHJvZHVjdGlvbigpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICB0aGlzLmNsaWVudF9pbml0X2xpc3RlbmVyID0gbGlzdGVuZXI7XG4gICAgfVxuXG4gICAgb25OZXR3b3JrU3RhdHVzQ2hhbmdlKGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMubmV0d29ya1N0YXR1c0NoYW5nZURpc3Bvc2VyID0gcmVhY3Rpb24oXG4gICAgICAgICAgICAoKSA9PiB0aGlzLnJvb3Rfc3RvcmUuY29tbW9uLmlzX25ldHdvcmtfb25saW5lLFxuICAgICAgICAgICAgaXNfb25saW5lID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5ldHdvcmtfc3RhdHVzX2NoYW5nZV9saXN0ZW5lcihpc19vbmxpbmUpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZXJlIGlzIG5vIGxpc3RlbmVyIGN1cnJlbnRseSBhY3RpdmUuIHNvIHdlIGNhbiBqdXN0IGlnbm9yZSB0aGUgZXJyb3IgcmFpc2VkIGZyb20gdHJlYXRpbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBudWxsIG9iamVjdCBhcyBhIGZ1bmN0aW9uLiBBbHRob3VnaCwgaW4gZGV2ZWxvcG1lbnQgbW9kZSwgd2UgdGhyb3cgYSBjb25zb2xlIGVycm9yLlxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzUHJvZHVjdGlvbigpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubmV0d29ya19zdGF0dXNfY2hhbmdlX2xpc3RlbmVyID0gbGlzdGVuZXI7XG4gICAgfVxuXG4gICAgb25UaGVtZUNoYW5nZShsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLnRoZW1lQ2hhbmdlRGlzcG9zZXIgPSByZWFjdGlvbihcbiAgICAgICAgICAgICgpID0+IHRoaXMucm9vdF9zdG9yZS51aS5pc19kYXJrX21vZGVfb24sXG4gICAgICAgICAgICBpc19kYXJrX21vZGVfb24gPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGhlbWVfY2hhbmdlX2xpc3RlbmVyKGlzX2RhcmtfbW9kZV9vbik7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlcmUgaXMgbm8gbGlzdGVuZXIgY3VycmVudGx5IGFjdGl2ZS4gc28gd2UgY2FuIGp1c3QgaWdub3JlIHRoZSBlcnJvciByYWlzZWQgZnJvbSB0cmVhdGluZ1xuICAgICAgICAgICAgICAgICAgICAvLyBhIG51bGwgb2JqZWN0IGFzIGEgZnVuY3Rpb24uIEFsdGhvdWdoLCBpbiBkZXZlbG9wbWVudCBtb2RlLCB3ZSB0aHJvdyBhIGNvbnNvbGUgZXJyb3IuXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNQcm9kdWN0aW9uKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy50aGVtZV9jaGFuZ2VfbGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgICB9XG5cbiAgICBvblJlYWxBY2NvdW50U2lnbnVwRW5kKGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMucmVhbEFjY291bnRTaWdudXBFbmRlZERpc3Bvc2VyID0gd2hlbihcbiAgICAgICAgICAgICgpID0+IHRoaXMucm9vdF9zdG9yZS51aS5oYXNfcmVhbF9hY2NvdW50X3NpZ251cF9lbmRlZCxcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlYWxfYWNjb3VudF9zaWdudXBfZW5kZWRfbGlzdGVuZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQudGhlbiAmJiB0eXBlb2YgcmVzdWx0LnRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvb3Rfc3RvcmUudWkuc2V0UmVhbEFjY291bnRTaWdudXBFbmQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25SZWFsQWNjb3VudFNpZ251cEVuZCh0aGlzLnJlYWxfYWNjb3VudF9zaWdudXBfZW5kZWRfbGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlYWwgYWNjb3VudCBzaWdudXAgbGlzdGVuZXJzIGFyZSByZXF1aXJlZCB0byByZXR1cm4gYSBwcm9taXNlLicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlcmUgaXMgbm8gbGlzdGVuZXIgY3VycmVudGx5IGFjdGl2ZS4gc28gd2UgY2FuIGp1c3QgaWdub3JlIHRoZSBlcnJvciByYWlzZWQgZnJvbSB0cmVhdGluZ1xuICAgICAgICAgICAgICAgICAgICAvLyBhIG51bGwgb2JqZWN0IGFzIGEgZnVuY3Rpb24uIEFsdGhvdWdoLCBpbiBkZXZlbG9wbWVudCBtb2RlLCB3ZSB0aHJvdyBhIGNvbnNvbGUgZXJyb3IuXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNQcm9kdWN0aW9uKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5yZWFsX2FjY291bnRfc2lnbnVwX2VuZGVkX2xpc3RlbmVyID0gbGlzdGVuZXI7XG4gICAgfVxuXG4gICAgZGlzcG9zZVByZVN3aXRjaEFjY291bnQoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5wcmVTd2l0Y2hBY2NvdW50RGlzcG9zZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMucHJlU3dpdGNoQWNjb3VudERpc3Bvc2VyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcmVfc3dpdGNoX2FjY291bnRfbGlzdGVuZXIgPSBudWxsO1xuICAgIH1cblxuICAgIGRpc3Bvc2VTd2l0Y2hBY2NvdW50KCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuc3dpdGNoQWNjb3VudERpc3Bvc2VyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLnN3aXRjaEFjY291bnREaXNwb3NlcigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3dpdGNoX2FjY291bnRfbGlzdGVuZXIgPSBudWxsO1xuICAgIH1cblxuICAgIGRpc3Bvc2VMb2dvdXQoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5sb2dvdXREaXNwb3NlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpcy5sb2dvdXREaXNwb3NlcigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubG9nb3V0X2xpc3RlbmVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBkaXNwb3NlQ2xpZW50SW5pdCgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmNsaWVudEluaXREaXNwb3NlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpcy5jbGllbnRJbml0RGlzcG9zZXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsaWVudF9pbml0X2xpc3RlbmVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBkaXNwb3NlTmV0d29ya1N0YXR1c0NoYW5nZSgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm5ldHdvcmtTdGF0dXNDaGFuZ2VEaXNwb3NlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpcy5uZXR3b3JrU3RhdHVzQ2hhbmdlRGlzcG9zZXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5ldHdvcmtfc3RhdHVzX2NoYW5nZV9saXN0ZW5lciA9IG51bGw7XG4gICAgfVxuXG4gICAgZGlzcG9zZVRoZW1lQ2hhbmdlKCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMudGhlbWVDaGFuZ2VEaXNwb3NlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpcy50aGVtZUNoYW5nZURpc3Bvc2VyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50aGVtZV9jaGFuZ2VfbGlzdGVuZXIgPSBudWxsO1xuICAgIH1cblxuICAgIGRpc3Bvc2VSZWFsQWNjb3VudFNpZ251cEVuZCgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnJlYWxBY2NvdW50U2lnbnVwRW5kZWREaXNwb3NlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpcy5yZWFsQWNjb3VudFNpZ251cEVuZGVkRGlzcG9zZXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlYWxfYWNjb3VudF9zaWdudXBfZW5kZWRfbGlzdGVuZXIgPSBudWxsO1xuICAgIH1cblxuICAgIG9uVW5tb3VudCgpIHtcbiAgICAgICAgdGhpcy5kaXNwb3NlUHJlU3dpdGNoQWNjb3VudCgpO1xuICAgICAgICB0aGlzLmRpc3Bvc2VTd2l0Y2hBY2NvdW50KCk7XG4gICAgICAgIHRoaXMuZGlzcG9zZUxvZ291dCgpO1xuICAgICAgICB0aGlzLmRpc3Bvc2VDbGllbnRJbml0KCk7XG4gICAgICAgIHRoaXMuZGlzcG9zZU5ldHdvcmtTdGF0dXNDaGFuZ2UoKTtcbiAgICAgICAgdGhpcy5kaXNwb3NlVGhlbWVDaGFuZ2UoKTtcbiAgICAgICAgdGhpcy5kaXNwb3NlUmVhbEFjY291bnRTaWdudXBFbmQoKTtcbiAgICB9XG5cbiAgICBhc3NlcnRIYXNWYWxpZENhY2hlKGxvZ2luaWQsIC4uLnJlYWN0aW9ucykge1xuICAgICAgICAvLyBhY2NvdW50IHdhcyBjaGFuZ2VkIHdoZW4gdGhpcyB3YXMgdW5tb3VudGVkLlxuICAgICAgICBpZiAodGhpcy5yb290X3N0b3JlLmNsaWVudC5sb2dpbmlkICE9PSBsb2dpbmlkKSB7XG4gICAgICAgICAgICByZWFjdGlvbnMuZm9yRWFjaChhY3QgPT4gYWN0KCkpO1xuICAgICAgICAgICAgdGhpcy5wYXJ0aWFsX2ZldGNoX3RpbWUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBhY3Rpb24sIGNvbXB1dGVkLCBvYnNlcnZhYmxlLCByZWFjdGlvbiwgd2hlbiwgbWFrZU9ic2VydmFibGUgfSBmcm9tICdtb2J4JztcbmltcG9ydCB7IGlzQ3J5cHRvY3VycmVuY3ksIGlzRW1wdHlPYmplY3QsIGdldFByb3BlcnR5VmFsdWUsIHJvdXRlcyB9IGZyb20gJ0BkZXJpdi9zaGFyZWQnO1xuaW1wb3J0IHsgbG9jYWxpemUgfSBmcm9tICdAZGVyaXYvdHJhbnNsYXRpb25zJztcbmltcG9ydCBDb25zdGFudHMgZnJvbSAnQ29uc3RhbnRzL2NvbnN0YW50cyc7XG5pbXBvcnQgQ2FzaGllck5vdGlmaWNhdGlvbnMgZnJvbSAnQ29tcG9uZW50cy9jYXNoaWVyLW5vdGlmaWNhdGlvbnMnO1xuaW1wb3J0IEJhc2VTdG9yZSBmcm9tICcuL2Jhc2Utc3RvcmUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHZW5lcmFsU3RvcmUgZXh0ZW5kcyBCYXNlU3RvcmUge1xuICAgIGNvbnN0cnVjdG9yKHsgcm9vdF9zdG9yZSwgV1MgfSkge1xuICAgICAgICBzdXBlcih7IHJvb3Rfc3RvcmUgfSk7XG5cbiAgICAgICAgbWFrZU9ic2VydmFibGUodGhpcywge1xuICAgICAgICAgICAgaXNfbG9hZGluZzogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGlzX3AycF92aXNpYmxlOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgcDJwX25vdGlmaWNhdGlvbl9jb3VudDogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGNhc2hpZXJfcm91dGVfdGFiX2luZGV4OiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgaXNfZGVwb3NpdDogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIHNob3VsZF9zaG93X2FsbF9hdmFpbGFibGVfY3VycmVuY2llczogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGlzX2Nhc2hpZXJfb25ib2FyZGluZzogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGRlcG9zaXRfdGFyZ2V0OiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgc2hvdWxkX3NldF9jdXJyZW5jeV9tb2RhbF90aXRsZV9jaGFuZ2U6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBwMnBfYWR2ZXJ0aXNlcl9lcnJvcjogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGhhc19zZXRfY3VycmVuY3k6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBzaG91bGRfcGVyY2VudGFnZV9yZXNldDogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIHBlcmNlbnRhZ2U6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBzaG93X3AycF9pbl9jYXNoaWVyX29uYm9hcmRpbmc6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBvblJlbW91bnQ6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBwMnBfY29tcGxldGVkX29yZGVyczogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIHNldE9uUmVtb3VudDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgaXNfY3J5cHRvOiBjb21wdXRlZCxcbiAgICAgICAgICAgIGlzX3AycF9lbmFibGVkOiBjb21wdXRlZCxcbiAgICAgICAgICAgIHAycF91bnNlZW5fbm90aWZpY2F0aW9uczogY29tcHV0ZWQsXG4gICAgICAgICAgICBzaG93UDJwSW5DYXNoaWVyT25ib2FyZGluZzogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgYXR0YWNoQ2FzaGllclRvTWVudTogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgcmVwbGFjZUNhc2hpZXJNZW51T25jbGljazogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0SGFzU2V0Q3VycmVuY3k6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIGNoYW5nZVNldEN1cnJlbmN5TW9kYWxUaXRsZTogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgb25Nb3VudENhc2hpZXJPbmJvYXJkaW5nOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBjYWxjdWxhdGVQZXJjZW50YWdlOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBwZXJjZW50YWdlU2VsZWN0b3JTZWxlY3Rpb25TdGF0dXM6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldElzRGVwb3NpdDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0U2hvdWxkU2hvd0FsbEF2YWlsYWJsZUN1cnJlbmNpZXM6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldElzQ2FzaGllck9uYm9hcmRpbmc6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldERlcG9zaXRUYXJnZXQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIGNvbnRpbnVlUm91dGU6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldEFjY291bnRTd2l0Y2hMaXN0ZW5lcjogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgaW5pdDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgZ2V0QWR2ZXJ0aXplckVycm9yOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRQMnBBZHZlcnRpc2VyRXJyb3I6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIGNoZWNrUDJwU3RhdHVzOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRQMnBDb21wbGV0ZWRPcmRlcnM6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIGdldFAycENvbXBsZXRlZE9yZGVyczogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgb25Nb3VudENvbW1vbjogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0Q2FzaGllclRhYkluZGV4OiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXROb3RpZmljYXRpb25Db3VudDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0SXNQMnBWaXNpYmxlOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBpc19jYXNoaWVyX2xvY2tlZDogY29tcHV0ZWQsXG4gICAgICAgICAgICBpc19zeXN0ZW1fbWFpbnRlbmFuY2U6IGNvbXB1dGVkLFxuICAgICAgICAgICAgc2V0TG9hZGluZzogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0QWN0aXZlVGFiOiBhY3Rpb24uYm91bmQsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuV1MgPSBXUztcbiAgICAgICAgdGhpcy5yb290X3N0b3JlID0gcm9vdF9zdG9yZTtcblxuICAgICAgICB3aGVuKFxuICAgICAgICAgICAgKCkgPT4gdGhpcy5yb290X3N0b3JlLmNsaWVudC5pc19sb2dnZWRfaW4sXG4gICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRIYXNTZXRDdXJyZW5jeSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXR0YWNoQ2FzaGllclRvTWVudSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIGlmICghdGhpcy5oYXNfc2V0X2N1cnJlbmN5KSB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZVNldEN1cnJlbmN5TW9kYWxUaXRsZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVhY3Rpb24oXG4gICAgICAgICAgICAoKSA9PiBbXG4gICAgICAgICAgICAgICAgdGhpcy5yb290X3N0b3JlLmNsaWVudC5zd2l0Y2hlZCxcbiAgICAgICAgICAgICAgICB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50LmlzX2xvZ2dlZF9pbixcbiAgICAgICAgICAgICAgICB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50LmN1cnJlbmN5LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmluaXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBpc19sb2FkaW5nID0gZmFsc2U7XG4gICAgaXNfcDJwX3Zpc2libGUgPSBmYWxzZTtcbiAgICBwMnBfbm90aWZpY2F0aW9uX2NvdW50ID0gMDtcbiAgICBjYXNoaWVyX3JvdXRlX3RhYl9pbmRleCA9IDA7XG4gICAgaXNfZGVwb3NpdCA9IGZhbHNlO1xuICAgIHNob3VsZF9zaG93X2FsbF9hdmFpbGFibGVfY3VycmVuY2llcyA9IGZhbHNlO1xuICAgIGlzX2Nhc2hpZXJfb25ib2FyZGluZyA9IHRydWU7XG4gICAgZGVwb3NpdF90YXJnZXQgPSAnJztcbiAgICBzaG91bGRfc2V0X2N1cnJlbmN5X21vZGFsX3RpdGxlX2NoYW5nZSA9IGZhbHNlO1xuICAgIHAycF9hZHZlcnRpc2VyX2Vycm9yID0gdW5kZWZpbmVkO1xuICAgIGhhc19zZXRfY3VycmVuY3kgPSBmYWxzZTtcbiAgICBzaG91bGRfcGVyY2VudGFnZV9yZXNldCA9IGZhbHNlO1xuICAgIHBlcmNlbnRhZ2UgPSAwO1xuICAgIHNob3dfcDJwX2luX2Nhc2hpZXJfb25ib2FyZGluZyA9IGZhbHNlO1xuICAgIG9uUmVtb3VudCA9ICgpID0+IHt9O1xuICAgIHAycF9jb21wbGV0ZWRfb3JkZXJzID0gbnVsbDtcblxuICAgIGFjdGl2ZV9jb250YWluZXIgPSBDb25zdGFudHMuY29udGFpbmVycy5kZXBvc2l0O1xuICAgIGlzX3BvcHVsYXRpbmdfdmFsdWVzID0gZmFsc2U7XG5cbiAgICBzZXRPblJlbW91bnQoZnVuYykge1xuICAgICAgICB0aGlzLm9uUmVtb3VudCA9IGZ1bmM7XG4gICAgfVxuXG4gICAgZ2V0IGlzX2NyeXB0bygpIHtcbiAgICAgICAgY29uc3QgeyBjdXJyZW5jeSB9ID0gdGhpcy5yb290X3N0b3JlLmNsaWVudDtcbiAgICAgICAgcmV0dXJuICEhY3VycmVuY3kgJiYgaXNDcnlwdG9jdXJyZW5jeShjdXJyZW5jeSk7XG4gICAgfVxuXG4gICAgZ2V0IGlzX3AycF9lbmFibGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc19wMnBfdmlzaWJsZSAmJiAhdGhpcy5yb290X3N0b3JlLmNsaWVudC5pc19ldTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBub3RpZmljYXRpb25zIGZyb20gbG9jYWwgc3RvcmFnZSwgd2l0aGluIHAycF9zZXR0aW5ncywgd2hlcmUgaXQgY2hlY2tzIHdoaWNoIG5vdGlmaWNhdGlvbiBoYXNcbiAgICAgKiBiZWVuIHNlZW4uIFRoZSBudW1iZXIgb2YgdW5zZWVuIG5vdGlmaWNhdGlvbnMgaXMgZGlzcGxheWVkIGluIHZlcnRpY2FsIHRhYiwgbm90aWZpY2F0aW9ucyBjb3VudCwgZm9yIFAyUC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IE5vdGlmaWNhdGlvbnMgdGhhdCBoYXZlIG5vdCBiZWVuIHNlZW4gYnkgdGhlIHVzZXIuXG4gICAgICovXG4gICAgZ2V0IHAycF91bnNlZW5fbm90aWZpY2F0aW9ucygpIHtcbiAgICAgICAgY29uc3QgcDJwX3NldHRpbmdzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncDJwX3NldHRpbmdzJykgfHwgJ3t9Jyk7XG4gICAgICAgIGNvbnN0IGxvY2FsX3N0b3JhZ2Vfc2V0dGluZ3MgPSBwMnBfc2V0dGluZ3NbdGhpcy5yb290X3N0b3JlLmNsaWVudC5sb2dpbmlkXTtcblxuICAgICAgICBpZiAoaXNFbXB0eU9iamVjdChsb2NhbF9zdG9yYWdlX3NldHRpbmdzKSkge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1bnNlZW5fbm90aWZpY2F0aW9ucyA9IGxvY2FsX3N0b3JhZ2Vfc2V0dGluZ3Mubm90aWZpY2F0aW9ucy5maWx0ZXIobm90aWZpY2F0aW9uID0+ICFub3RpZmljYXRpb24uaXNfc2Vlbik7XG5cbiAgICAgICAgcmV0dXJuIHVuc2Vlbl9ub3RpZmljYXRpb25zLmxlbmd0aDtcbiAgICB9XG5cbiAgICBzaG93UDJwSW5DYXNoaWVyT25ib2FyZGluZygpIHtcbiAgICAgICAgY29uc3QgeyBhY2NvdW50X2xpc3QsIGlzX3ZpcnR1YWwgfSA9IHRoaXMucm9vdF9zdG9yZS5jbGllbnQ7XG5cbiAgICAgICAgY29uc3QgaXNfcDJwX3Jlc3RyaWN0ZWQgPSB0aGlzLnAycF9hZHZlcnRpc2VyX2Vycm9yID09PSAnUmVzdHJpY3RlZENvdW50cnknO1xuICAgICAgICBjb25zdCBoYXNfdXNkX2N1cnJlbmN5ID0gYWNjb3VudF9saXN0LnNvbWUoYWNjb3VudCA9PiBhY2NvdW50LnRpdGxlID09PSAnVVNEJyk7XG4gICAgICAgIGNvbnN0IGhhc191c2VyX2ZpYXRfY3VycmVuY3kgPSBhY2NvdW50X2xpc3Quc29tZShcbiAgICAgICAgICAgIGFjY291bnQgPT4gIWlzQ3J5cHRvY3VycmVuY3koYWNjb3VudC50aXRsZSkgJiYgYWNjb3VudC50aXRsZSAhPT0gJ1JlYWwnXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKGlzX3AycF9yZXN0cmljdGVkIHx8IGlzX3ZpcnR1YWwgfHwgKGhhc191c2VyX2ZpYXRfY3VycmVuY3kgJiYgIWhhc191c2RfY3VycmVuY3kpKSB7XG4gICAgICAgICAgICB0aGlzLnNob3dfcDJwX2luX2Nhc2hpZXJfb25ib2FyZGluZyA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zaG93X3AycF9pbl9jYXNoaWVyX29uYm9hcmRpbmcgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXR0YWNoQ2FzaGllclRvTWVudSgpIHtcbiAgICAgICAgY29uc3QgeyBtZW51LCB1aSB9ID0gdGhpcy5yb290X3N0b3JlO1xuXG4gICAgICAgIGlmICghdGhpcy5oYXNfc2V0X2N1cnJlbmN5KSB7XG4gICAgICAgICAgICB0aGlzLnNldEhhc1NldEN1cnJlbmN5KCk7XG4gICAgICAgIH1cblxuICAgICAgICBtZW51LmF0dGFjaCh7XG4gICAgICAgICAgICBpZDogJ2R0X2Nhc2hpZXJfdGFiJyxcbiAgICAgICAgICAgIGljb246IDxDYXNoaWVyTm90aWZpY2F0aW9ucyBwMnBfbm90aWZpY2F0aW9uX2NvdW50PXt0aGlzLnAycF9ub3RpZmljYXRpb25fY291bnR9IC8+LFxuICAgICAgICAgICAgdGV4dDogKCkgPT4gbG9jYWxpemUoJ0Nhc2hpZXInKSxcbiAgICAgICAgICAgIGxpbmtfdG86IHRoaXMuaGFzX3NldF9jdXJyZW5jeSAmJiByb3V0ZXMuY2FzaGllcixcbiAgICAgICAgICAgIG9uQ2xpY2s6ICF0aGlzLmhhc19zZXRfY3VycmVuY3kgJiYgdWkudG9nZ2xlU2V0Q3VycmVuY3lNb2RhbCxcbiAgICAgICAgICAgIGxvZ2luX29ubHk6IHRydWUsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlcGxhY2VDYXNoaWVyTWVudU9uY2xpY2soKSB7XG4gICAgICAgIGNvbnN0IHsgbWVudSwgdWkgfSA9IHRoaXMucm9vdF9zdG9yZTtcblxuICAgICAgICB0aGlzLnNldEhhc1NldEN1cnJlbmN5KCk7XG5cbiAgICAgICAgbWVudS51cGRhdGUoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWQ6ICdkdF9jYXNoaWVyX3RhYicsXG4gICAgICAgICAgICAgICAgaWNvbjogPENhc2hpZXJOb3RpZmljYXRpb25zIHAycF9ub3RpZmljYXRpb25fY291bnQ9e3RoaXMucDJwX25vdGlmaWNhdGlvbl9jb3VudH0gLz4sXG4gICAgICAgICAgICAgICAgdGV4dDogKCkgPT4gbG9jYWxpemUoJ0Nhc2hpZXInKSxcbiAgICAgICAgICAgICAgICBsaW5rX3RvOiB0aGlzLmhhc19zZXRfY3VycmVuY3kgJiYgcm91dGVzLmNhc2hpZXIsXG4gICAgICAgICAgICAgICAgb25DbGljazogIXRoaXMuaGFzX3NldF9jdXJyZW5jeSA/IHVpLnRvZ2dsZVNldEN1cnJlbmN5TW9kYWwgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBsb2dpbl9vbmx5OiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDFcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBzZXRIYXNTZXRDdXJyZW5jeSgpIHtcbiAgICAgICAgY29uc3QgeyBhY2NvdW50X2xpc3QsIGhhc19hY3RpdmVfcmVhbF9hY2NvdW50IH0gPSB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50O1xuXG4gICAgICAgIHRoaXMuaGFzX3NldF9jdXJyZW5jeSA9XG4gICAgICAgICAgICBhY2NvdW50X2xpc3QuZmlsdGVyKGFjY291bnQgPT4gIWFjY291bnQuaXNfdmlydHVhbCkuc29tZShhY2NvdW50ID0+IGFjY291bnQudGl0bGUgIT09ICdSZWFsJykgfHxcbiAgICAgICAgICAgICFoYXNfYWN0aXZlX3JlYWxfYWNjb3VudDtcbiAgICB9XG5cbiAgICBjaGFuZ2VTZXRDdXJyZW5jeU1vZGFsVGl0bGUoKSB7XG4gICAgICAgIHRoaXMuc2hvdWxkX3NldF9jdXJyZW5jeV9tb2RhbF90aXRsZV9jaGFuZ2UgPSB0cnVlO1xuICAgIH1cblxuICAgIGFzeW5jIG9uTW91bnRDYXNoaWVyT25ib2FyZGluZygpIHtcbiAgICAgICAgY29uc3QgeyBhY2NvdW50X3Byb21wdF9kaWFsb2csIHBheW1lbnRfYWdlbnQgfSA9IHRoaXMucm9vdF9zdG9yZS5tb2R1bGVzLmNhc2hpZXI7XG5cbiAgICAgICAgaWYgKCF0aGlzLmhhc19zZXRfY3VycmVuY3kpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0SGFzU2V0Q3VycmVuY3koKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldElzQ2FzaGllck9uYm9hcmRpbmcodHJ1ZSk7XG4gICAgICAgIGFjY291bnRfcHJvbXB0X2RpYWxvZy5yZXNldElzQ29uZmlybWVkKCk7XG5cbiAgICAgICAgdGhpcy5zZXRMb2FkaW5nKHRydWUpO1xuICAgICAgICBpZiAoIXBheW1lbnRfYWdlbnQuYWxsX3BheW1lbnRfYWdlbnRfbGlzdD8ucGF5bWVudGFnZW50X2xpc3Q/Lmxpc3QpIHtcbiAgICAgICAgICAgIGNvbnN0IGFnZW50X2xpc3QgPSBhd2FpdCBwYXltZW50X2FnZW50LmdldEFsbFBheW1lbnRBZ2VudExpc3QoKTtcbiAgICAgICAgICAgIHBheW1lbnRfYWdlbnQuc2V0QWxsUGF5bWVudEFnZW50TGlzdChhZ2VudF9saXN0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldExvYWRpbmcoZmFsc2UpO1xuICAgIH1cblxuICAgIGNhbGN1bGF0ZVBlcmNlbnRhZ2UoYW1vdW50ID0gdGhpcy5yb290X3N0b3JlLm1vZHVsZXMuY2FzaGllci5jcnlwdG9fZmlhdF9jb252ZXJ0ZXIuY29udmVydGVyX2Zyb21fYW1vdW50KSB7XG4gICAgICAgIGNvbnN0IHsgY2xpZW50LCBtb2R1bGVzIH0gPSB0aGlzLnJvb3Rfc3RvcmU7XG4gICAgICAgIGNvbnN0IHsgYWNjb3VudF90cmFuc2ZlciB9ID0gbW9kdWxlcy5jYXNoaWVyO1xuXG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZV9jb250YWluZXIgPT09IGFjY291bnRfdHJhbnNmZXIuY29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLnBlcmNlbnRhZ2UgPSArKChhbW91bnQgLyArYWNjb3VudF90cmFuc2Zlci5zZWxlY3RlZF9mcm9tLmJhbGFuY2UpICogMTAwKS50b0ZpeGVkKDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wZXJjZW50YWdlID0gKygoYW1vdW50IC8gK2NsaWVudC5iYWxhbmNlKSAqIDEwMCkudG9GaXhlZCgwKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzRmluaXRlKHRoaXMucGVyY2VudGFnZSkpIHtcbiAgICAgICAgICAgIHRoaXMucGVyY2VudGFnZSA9IDA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwZXJjZW50YWdlU2VsZWN0b3JTZWxlY3Rpb25TdGF0dXMoc2hvdWxkX3BlcmNlbnRhZ2VfcmVzZXQpIHtcbiAgICAgICAgdGhpcy5zaG91bGRfcGVyY2VudGFnZV9yZXNldCA9IHNob3VsZF9wZXJjZW50YWdlX3Jlc2V0O1xuXG4gICAgICAgIGlmIChzaG91bGRfcGVyY2VudGFnZV9yZXNldCkge1xuICAgICAgICAgICAgdGhpcy5wZXJjZW50YWdlID0gMDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldElzRGVwb3NpdChpc19kZXBvc2l0KSB7XG4gICAgICAgIHRoaXMuaXNfZGVwb3NpdCA9IGlzX2RlcG9zaXQ7XG4gICAgfVxuXG4gICAgc2V0U2hvdWxkU2hvd0FsbEF2YWlsYWJsZUN1cnJlbmNpZXModmFsdWUpIHtcbiAgICAgICAgdGhpcy5zaG91bGRfc2hvd19hbGxfYXZhaWxhYmxlX2N1cnJlbmNpZXMgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBzZXRJc0Nhc2hpZXJPbmJvYXJkaW5nKGlzX2Nhc2hpZXJfb25ib2FyZGluZykge1xuICAgICAgICB0aGlzLmlzX2Nhc2hpZXJfb25ib2FyZGluZyA9IGlzX2Nhc2hpZXJfb25ib2FyZGluZztcbiAgICB9XG5cbiAgICBzZXREZXBvc2l0VGFyZ2V0KHRhcmdldCkge1xuICAgICAgICB0aGlzLmRlcG9zaXRfdGFyZ2V0ID0gdGFyZ2V0O1xuICAgIH1cblxuICAgIGNvbnRpbnVlUm91dGUoKSB7XG4gICAgICAgIHRoaXMucm9vdF9zdG9yZS5jb21tb24ucm91dGVUbyh0aGlzLmRlcG9zaXRfdGFyZ2V0KTtcbiAgICB9XG5cbiAgICBzZXRBY2NvdW50U3dpdGNoTGlzdGVuZXIoKSB7XG4gICAgICAgIC8vIGNhc2hpZXIgaW5pdHMgb25jZSBhbmQgdHJpZXMgdG8gc3RheSBhY3RpdmUgdW50aWwgc3dpdGNoaW5nIGFjY291bnRcbiAgICAgICAgLy8gc2luY2UgY2FzaGllciBjYWxscyB0YWtlIGEgbG9uZyB0aW1lIHRvIHJlc3BvbmQgb3IgZGlzcGxheSBpbiBpZnJhbWVcbiAgICAgICAgLy8gc28gd2UgZG9uJ3QgaGF2ZSBhbnkgdW5tb3VudCBmdW5jdGlvbiBoZXJlIGFuZCBldmVyeXRoaW5nIGdldHMgcmVzZXQgb24gc3dpdGNoIGluc3RlYWRcbiAgICAgICAgdGhpcy5kaXNwb3NlU3dpdGNoQWNjb3VudCgpO1xuICAgICAgICB0aGlzLm9uU3dpdGNoQWNjb3VudCh0aGlzLmFjY291bnRTd2l0Y2hlckxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICAvLyBJbml0aWFsaXNlIFAyUCBhdHRyaWJ1dGVzIG9uIGFwcCBsb2FkIHdpdGhvdXQgbW91bnRpbmcgdGhlIGVudGlyZSBjYXNoaWVyXG4gICAgYXN5bmMgaW5pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMucm9vdF9zdG9yZS5tb2R1bGVzLmNhc2hpZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgICAgICBjbGllbnQ6IHsgaXNfbG9nZ2VkX2luLCBzd2l0Y2hlZCB9LFxuICAgICAgICAgICAgICAgIG1vZHVsZXMsXG4gICAgICAgICAgICB9ID0gdGhpcy5yb290X3N0b3JlO1xuICAgICAgICAgICAgY29uc3QgeyBwYXltZW50X2FnZW50LCBwYXltZW50X2FnZW50X3RyYW5zZmVyLCB3aXRoZHJhdyB9ID0gbW9kdWxlcy5jYXNoaWVyO1xuXG4gICAgICAgICAgICAvLyB3YWl0IGZvciBjbGllbnQgc2V0dGluZ3MgdG8gYmUgcG9wdWxhdGVkIGluIGNsaWVudC1zdG9yZVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5XUy53YWl0KCdnZXRfc2V0dGluZ3MnKTtcblxuICAgICAgICAgICAgaWYgKGlzX2xvZ2dlZF9pbikge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0QWR2ZXJ0aXplckVycm9yKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFzd2l0Y2hlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrUDJwU3RhdHVzKCk7XG4gICAgICAgICAgICAgICAgICAgIHBheW1lbnRfYWdlbnQuc2V0UGF5bWVudEFnZW50TGlzdCgpLnRoZW4ocGF5bWVudF9hZ2VudC5maWx0ZXJQYXltZW50QWdlbnRMaXN0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXltZW50X2FnZW50X3RyYW5zZmVyLmlzX3BheW1lbnRfYWdlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRfYWdlbnRfdHJhbnNmZXIuY2hlY2tJc1BheW1lbnRBZ2VudCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIHdpdGhkcmF3YWwgbGltaXQgaXMgcmVhY2hlZFxuICAgICAgICAgICAgICAgICAgICAvLyBpZiB5ZXMsIHRoaXMgd2lsbCB0cmlnZ2VyIHRvIHNob3cgYSBub3RpZmljYXRpb25cbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgd2l0aGRyYXcuY2hlY2sxMGtMaW1pdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldEFkdmVydGl6ZXJFcnJvcigpIHtcbiAgICAgICAgY29uc3QgYWR2ZXJ0aXNlcl9pbmZvID0gYXdhaXQgdGhpcy5XUy5hdXRob3JpemVkLnAycEFkdmVydGlzZXJJbmZvKCk7XG4gICAgICAgIHRoaXMuc2V0UDJwQWR2ZXJ0aXNlckVycm9yKGdldFByb3BlcnR5VmFsdWUoYWR2ZXJ0aXNlcl9pbmZvLCBbJ2Vycm9yJywgJ2NvZGUnXSkpO1xuICAgIH1cblxuICAgIHNldFAycEFkdmVydGlzZXJFcnJvcih2YWx1ZSkge1xuICAgICAgICB0aGlzLnAycF9hZHZlcnRpc2VyX2Vycm9yID0gdmFsdWU7XG4gICAgfVxuXG4gICAgY2hlY2tQMnBTdGF0dXMoKSB7XG4gICAgICAgIGNvbnN0IGFkdmVydGlzZXJfZXJyb3IgPSB0aGlzLnAycF9hZHZlcnRpc2VyX2Vycm9yO1xuICAgICAgICBjb25zdCBpc19wMnBfcmVzdHJpY3RlZCA9IGFkdmVydGlzZXJfZXJyb3IgPT09ICdSZXN0cmljdGVkQ291bnRyeScgfHwgYWR2ZXJ0aXNlcl9lcnJvciA9PT0gJ1Jlc3RyaWN0ZWRDdXJyZW5jeSc7XG4gICAgICAgIHRoaXMuc2V0SXNQMnBWaXNpYmxlKCEoaXNfcDJwX3Jlc3RyaWN0ZWQgfHwgdGhpcy5yb290X3N0b3JlLmNsaWVudC5pc192aXJ0dWFsKSk7XG4gICAgfVxuXG4gICAgc2V0UDJwQ29tcGxldGVkT3JkZXJzKHAycF9jb21wbGV0ZWRfb3JkZXJzKSB7XG4gICAgICAgIHRoaXMucDJwX2NvbXBsZXRlZF9vcmRlcnMgPSBwMnBfY29tcGxldGVkX29yZGVycztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRQMnBDb21wbGV0ZWRPcmRlcnMoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuV1MuYXV0aG9yaXplZC5zZW5kKHsgcDJwX29yZGVyX2xpc3Q6IDEsIGFjdGl2ZTogMCB9KS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2U/LmVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBwMnBfb3JkZXJfbGlzdCB9ID0gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQMnBDb21wbGV0ZWRPcmRlcnMocDJwX29yZGVyX2xpc3QubGlzdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIG9uTW91bnRDb21tb24oc2hvdWxkX3JlbW91bnQpIHtcbiAgICAgICAgY29uc3QgeyBjbGllbnQsIGNvbW1vbiwgbW9kdWxlcyB9ID0gdGhpcy5yb290X3N0b3JlO1xuICAgICAgICBjb25zdCB7IGlzX2Zyb21fZGVyaXZnbywgcm91dGVUbyB9ID0gY29tbW9uO1xuICAgICAgICBjb25zdCB7IGFjY291bnRfdHJhbnNmZXIsIG9ucmFtcCwgcGF5bWVudF9hZ2VudCwgcGF5bWVudF9hZ2VudF90cmFuc2ZlciwgdHJhbnNhY3Rpb25faGlzdG9yeSB9ID1cbiAgICAgICAgICAgIG1vZHVsZXMuY2FzaGllcjtcblxuICAgICAgICB0aGlzLnNldE5vdGlmaWNhdGlvbkNvdW50KHRoaXMucDJwX3Vuc2Vlbl9ub3RpZmljYXRpb25zKTtcblxuICAgICAgICBpZiAoY2xpZW50LmlzX2xvZ2dlZF9pbikge1xuICAgICAgICAgICAgLy8gYXZvaWQgY2FsbGluZyB0aGlzIGFnYWluXG4gICAgICAgICAgICBpZiAodGhpcy5pc19wb3B1bGF0aW5nX3ZhbHVlcykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5pc19wb3B1bGF0aW5nX3ZhbHVlcyA9IHRydWU7XG5cbiAgICAgICAgICAgIGlmIChzaG91bGRfcmVtb3VudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0T25SZW1vdW50KHRoaXMub25Nb3VudENvbW1vbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB3ZSBuZWVkIHRvIHNlZSBpZiBjbGllbnQncyBjb3VudHJ5IGhhcyBQQVxuICAgICAgICAgICAgLy8gaWYgeWVzLCB3ZSBjYW4gc2hvdyB0aGUgUEEgdGFiIGluIGNhc2hpZXJcbiAgICAgICAgICAgIHRoaXMuc2V0TG9hZGluZyh0cnVlKTtcbiAgICAgICAgICAgIGF3YWl0IHBheW1lbnRfYWdlbnQuc2V0UGF5bWVudEFnZW50TGlzdCgpO1xuICAgICAgICAgICAgYXdhaXQgcGF5bWVudF9hZ2VudC5maWx0ZXJQYXltZW50QWdlbnRMaXN0KCk7XG4gICAgICAgICAgICB0aGlzLnNldExvYWRpbmcoZmFsc2UpO1xuXG4gICAgICAgICAgICBpZiAoIXBheW1lbnRfYWdlbnRfdHJhbnNmZXIuaXNfcGF5bWVudF9hZ2VudCkge1xuICAgICAgICAgICAgICAgIHBheW1lbnRfYWdlbnRfdHJhbnNmZXIuY2hlY2tJc1BheW1lbnRBZ2VudCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWFjY291bnRfdHJhbnNmZXIuYWNjb3VudHNfbGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBhY2NvdW50X3RyYW5zZmVyLnNvcnRBY2NvdW50c1RyYW5zZmVyKG51bGwsIGlzX2Zyb21fZGVyaXZnbyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghcGF5bWVudF9hZ2VudC5pc19wYXltZW50X2FnZW50X3Zpc2libGUgJiYgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLmVuZHNXaXRoKHJvdXRlcy5jYXNoaWVyX3BhKSkge1xuICAgICAgICAgICAgICAgIHJvdXRlVG8ocm91dGVzLmNhc2hpZXJfZGVwb3NpdCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghb25yYW1wLmlzX29ucmFtcF90YWJfdmlzaWJsZSAmJiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuZW5kc1dpdGgocm91dGVzLmNhc2hpZXJfb25yYW1wKSkge1xuICAgICAgICAgICAgICAgIHJvdXRlVG8ocm91dGVzLmNhc2hpZXJfZGVwb3NpdCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhdHJhbnNhY3Rpb25faGlzdG9yeS5pc19jcnlwdG9fdHJhbnNhY3Rpb25zX3Zpc2libGUgJiZcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuZW5kc1dpdGgocm91dGVzLmNhc2hpZXJfY3J5cHRvX3RyYW5zYWN0aW9ucylcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJvdXRlVG8ocm91dGVzLmNhc2hpZXJfZGVwb3NpdCk7XG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25faGlzdG9yeS5zZXRJc0NyeXB0b1RyYW5zYWN0aW9uc1Zpc2libGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25faGlzdG9yeS5vbk1vdW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRDYXNoaWVyVGFiSW5kZXgoaW5kZXgpIHtcbiAgICAgICAgdGhpcy5jYXNoaWVyX3JvdXRlX3RhYl9pbmRleCA9IGluZGV4O1xuICAgIH1cblxuICAgIHNldE5vdGlmaWNhdGlvbkNvdW50KG5vdGlmaWNhdGlvbl9jb3VudCkge1xuICAgICAgICB0aGlzLnAycF9ub3RpZmljYXRpb25fY291bnQgPSBub3RpZmljYXRpb25fY291bnQ7XG4gICAgfVxuXG4gICAgc2V0SXNQMnBWaXNpYmxlKGlzX3AycF92aXNpYmxlKSB7XG4gICAgICAgIHRoaXMuaXNfcDJwX3Zpc2libGUgPSBpc19wMnBfdmlzaWJsZTtcbiAgICAgICAgaWYgKCFpc19wMnBfdmlzaWJsZSAmJiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuZW5kc1dpdGgocm91dGVzLmNhc2hpZXJfcDJwKSkge1xuICAgICAgICAgICAgdGhpcy5yb290X3N0b3JlLmNvbW1vbi5yb3V0ZVRvKFxuICAgICAgICAgICAgICAgIHRoaXMucm9vdF9zdG9yZS5tb2R1bGVzLmNhc2hpZXIuYWNjb3VudF9wcm9tcHRfZGlhbG9nLmxhc3RfbG9jYXRpb24gPz8gcm91dGVzLmNhc2hpZXJfZGVwb3NpdFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCBpc19jYXNoaWVyX2xvY2tlZCgpIHtcbiAgICAgICAgY29uc3QgeyBhY2NvdW50X3N0YXR1cyB9ID0gdGhpcy5yb290X3N0b3JlLmNsaWVudDtcblxuICAgICAgICBpZiAoIWFjY291bnRfc3RhdHVzPy5zdGF0dXMpIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIGFjY291bnRfc3RhdHVzLnN0YXR1cy5zb21lKHN0YXR1c19uYW1lID0+IHN0YXR1c19uYW1lID09PSAnY2FzaGllcl9sb2NrZWQnKTtcbiAgICB9XG5cbiAgICBnZXQgaXNfc3lzdGVtX21haW50ZW5hbmNlKCkge1xuICAgICAgICBjb25zdCB7IGFjY291bnRfc3RhdHVzIH0gPSB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50O1xuXG4gICAgICAgIGlmICghYWNjb3VudF9zdGF0dXM/LmNhc2hpZXJfdmFsaWRhdGlvbikgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gYWNjb3VudF9zdGF0dXMuY2FzaGllcl92YWxpZGF0aW9uLnNvbWUodmFsaWRhdGlvbiA9PiB2YWxpZGF0aW9uID09PSAnc3lzdGVtX21haW50ZW5hbmNlJyk7XG4gICAgfVxuXG4gICAgc2V0TG9hZGluZyhpc19sb2FkaW5nKSB7XG4gICAgICAgIHRoaXMuaXNfbG9hZGluZyA9IGlzX2xvYWRpbmc7XG4gICAgfVxuXG4gICAgc2V0QWN0aXZlVGFiKGNvbnRhaW5lcikge1xuICAgICAgICB0aGlzLmFjdGl2ZV9jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgfVxuXG4gICAgYWNjb3VudFN3aXRjaGVyTGlzdGVuZXIoKSB7XG4gICAgICAgIGNvbnN0IHsgY2xpZW50LCBtb2R1bGVzIH0gPSB0aGlzLnJvb3Rfc3RvcmU7XG4gICAgICAgIGNvbnN0IHsgaWZyYW1lLCBwYXltZW50X2FnZW50LCBnZW5lcmFsX3N0b3JlIH0gPSBtb2R1bGVzLmNhc2hpZXI7XG4gICAgICAgIGNvbnN0IHsgYWN0aXZlX2NvbnRhaW5lciB9ID0gZ2VuZXJhbF9zdG9yZTtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gQ29uc3RhbnRzLm1hcF9hY3Rpb25bYWN0aXZlX2NvbnRhaW5lcl07XG5cbiAgICAgICAgY2xpZW50LnNldFZlcmlmaWNhdGlvbkNvZGUoJycsIGNvbnRhaW5lcik7XG4gICAgICAgIGlmcmFtZS5jbGVhcklmcmFtZSgpO1xuXG4gICAgICAgIHRoaXMucGF5bWVudF9hZ2VudCA9IHBheW1lbnRfYWdlbnQ7XG4gICAgICAgIGlmIChwYXltZW50X2FnZW50LmFjdGl2ZV90YWJfaW5kZXggPT09IDEgJiYgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLmVuZHNXaXRoKHJvdXRlcy5jYXNoaWVyX3BhKSkge1xuICAgICAgICAgICAgcGF5bWVudF9hZ2VudC5zZXRBY3RpdmVUYWIoMSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlzX3BvcHVsYXRpbmdfdmFsdWVzID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy5vblJlbW91bnQoKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgYWN0aW9uLCBtYWtlT2JzZXJ2YWJsZSwgb2JzZXJ2YWJsZSB9IGZyb20gJ21vYngnO1xuaW1wb3J0IENvbnN0YW50cyBmcm9tICdDb25zdGFudHMvY29uc3RhbnRzJztcbmltcG9ydCB7IFRSb290U3RvcmUgfSBmcm9tICdUeXBlcyc7XG5cbnR5cGUgVE9uSWZyYW1lTG9hZGVkQ2FsbGJhY2sgPSAoZXY6IE1lc3NhZ2VFdmVudCkgPT4gdm9pZDtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSWZyYW1lU3RvcmUge1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyByb290X3N0b3JlOiBUUm9vdFN0b3JlKSB7XG4gICAgICAgIG1ha2VPYnNlcnZhYmxlKHRoaXMsIHtcbiAgICAgICAgICAgIGlmcmFtZV9oZWlnaHQ6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBpZnJhbWVfdXJsOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgaXNfc2Vzc2lvbl90aW1lb3V0OiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgdGltZW91dF9zZXNzaW9uOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgc2V0U2Vzc2lvblRpbWVvdXQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIGNoZWNrSWZyYW1lTG9hZGVkOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBjbGVhclRpbWVvdXRDYXNoaWVyVXJsOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRUaW1lb3V0Q2FzaGllclVybDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0SWZyYW1lVXJsOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRDb250YWluZXJIZWlnaHQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIGNsZWFySWZyYW1lOiBhY3Rpb24uYm91bmQsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMucm9vdF9zdG9yZSA9IHJvb3Rfc3RvcmU7XG4gICAgfVxuXG4gICAgaWZyYW1lX2hlaWdodCA9IDA7XG4gICAgaWZyYW1lX3VybCA9ICcnO1xuICAgIGlzX3Nlc3Npb25fdGltZW91dCA9IHRydWU7XG4gICAgb25JZnJhbWVMb2FkZWQ6IFRPbklmcmFtZUxvYWRlZENhbGxiYWNrIHwgbnVsbCA9IG51bGw7XG4gICAgdGltZW91dF9zZXNzaW9uOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuXG4gICAgc2V0U2Vzc2lvblRpbWVvdXQoaXNfc2Vzc2lvbl90aW1lX291dDogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICB0aGlzLmlzX3Nlc3Npb25fdGltZW91dCA9IGlzX3Nlc3Npb25fdGltZV9vdXQ7XG4gICAgICAgIGlmIChpc19zZXNzaW9uX3RpbWVfb3V0KSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZU9uSWZyYW1lTG9hZGVkKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBjaGVja0lmcmFtZUxvYWRlZCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBtb2R1bGVzLCB1aSB9ID0gdGhpcy5yb290X3N0b3JlO1xuXG4gICAgICAgIHRoaXMucmVtb3ZlT25JZnJhbWVMb2FkZWQoKTtcbiAgICAgICAgdGhpcy5vbklmcmFtZUxvYWRlZCA9IChlOiBNZXNzYWdlRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmICgvY2FzaGllcnxkb3VnaGZsb3cvLnRlc3QoZS5vcmlnaW4pKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5jYXNoaWVyLmdlbmVyYWxfc3RvcmUuc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgLy8gc2V0IHRoZSBoZWlnaHQgb2YgdGhlIGNvbnRhaW5lciBhZnRlciBjb250ZW50IGxvYWRzIHNvIHRoYXQgdGhlXG4gICAgICAgICAgICAgICAgLy8gbG9hZGluZyBiYXIgc3RheXMgdmVydGljYWxseSBjZW50ZXJlZCB1bnRpbCB0aGUgZW5kXG4gICAgICAgICAgICAgICAgaWYgKHVpLmlzX21vYmlsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENvbnRhaW5lckhlaWdodCh3aW5kb3cuaW5uZXJIZWlnaHQgLSAxMDApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29udGFpbmVySGVpZ2h0KHdpbmRvdy5pbm5lckhlaWdodCAtIDE5MCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGRvIG5vdCByZW1vdmUgdGhlIGxpc3RlbmVyXG4gICAgICAgICAgICAgICAgLy8gb24gZXZlcnkgaWZyYW1lIHNjcmVlbiBjaGFuZ2Ugd2UgbmVlZCB0byB1cGRhdGUgdGhlIGhlaWdodCB0byBtb3JlL2xlc3MgdG8gbWF0Y2ggdGhlIG5ldyBjb250ZW50XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgdGhpcy5vbklmcmFtZUxvYWRlZCwgZmFsc2UpO1xuICAgIH1cblxuICAgIHJlbW92ZU9uSWZyYW1lTG9hZGVkKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5vbklmcmFtZUxvYWRlZCkge1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLm9uSWZyYW1lTG9hZGVkLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLm9uSWZyYW1lTG9hZGVkID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNsZWFyVGltZW91dENhc2hpZXJVcmwoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnRpbWVvdXRfc2Vzc2lvbikge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dF9zZXNzaW9uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldFRpbWVvdXRDYXNoaWVyVXJsKGlzX3dpdGhkcmF3YWw/OiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY2xlYXJUaW1lb3V0Q2FzaGllclVybCgpO1xuICAgICAgICBpZiAoaXNfd2l0aGRyYXdhbCkge1xuICAgICAgICAgICAgdGhpcy50aW1lb3V0X3Nlc3Npb24gPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFNlc3Npb25UaW1lb3V0KHRydWUpO1xuICAgICAgICAgICAgfSwgNjAwMDApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0SWZyYW1lVXJsKHVybDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY2xpZW50LCB1aSB9ID0gdGhpcy5yb290X3N0b3JlO1xuXG4gICAgICAgIGlmICh1cmwpIHtcbiAgICAgICAgICAgIHRoaXMuaWZyYW1lX3VybCA9IGAke3VybH0mdGhlbWU9JHt1aS5pc19kYXJrX21vZGVfb24gPyAnZGFyaycgOiAnbGlnaHQnfWA7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMucm9vdF9zdG9yZS5tb2R1bGVzLmNhc2hpZXIuZ2VuZXJhbF9zdG9yZS5hY3RpdmVfY29udGFpbmVyO1xuXG4gICAgICAgICAgICBpZiAoY29udGFpbmVyIGluIENvbnN0YW50cy5tYXBfYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29udGFpbmVyX2tleSA9IGNvbnRhaW5lciBhcyBrZXlvZiB0eXBlb2YgQ29uc3RhbnRzLm1hcF9hY3Rpb247XG5cbiAgICAgICAgICAgICAgICAvLyBhZnRlciB3ZSBzZXQgaWZyYW1lIHVybCB3ZSBjYW4gY2xlYXIgdmVyaWZpY2F0aW9uIGNvZGVcbiAgICAgICAgICAgICAgICBjbGllbnQuc2V0VmVyaWZpY2F0aW9uQ29kZSgnJywgQ29uc3RhbnRzLm1hcF9hY3Rpb25bY29udGFpbmVyX2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pZnJhbWVfdXJsID0gdXJsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0Q29udGFpbmVySGVpZ2h0KGhlaWdodDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaWZyYW1lX2hlaWdodCA9IGhlaWdodDtcbiAgICB9XG5cbiAgICBjbGVhcklmcmFtZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZXRDb250YWluZXJIZWlnaHQoMCk7XG4gICAgICAgIHRoaXMuc2V0SWZyYW1lVXJsKCcnKTtcbiAgICAgICAgdGhpcy5jbGVhclRpbWVvdXRDYXNoaWVyVXJsKCk7XG4gICAgICAgIHRoaXMuc2V0U2Vzc2lvblRpbWVvdXQodHJ1ZSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgbG9jYWxpemUgfSBmcm9tICdAZGVyaXYvdHJhbnNsYXRpb25zJztcblxuY29uc3QgY3JlYXRlQmFueGFQcm92aWRlciA9IHN0b3JlID0+ICh7XG4gICAgaWNvbjogeyBkYXJrOiAnSWNDYXNoaWVyQmFueGFEYXJrJywgbGlnaHQ6ICdJY0Nhc2hpZXJCYW54YUxpZ2h0JyB9LFxuICAgIG5hbWU6ICdCYW54YScsXG4gICAgZ2V0RGVzY3JpcHRpb246ICgpID0+XG4gICAgICAgIGxvY2FsaXplKFxuICAgICAgICAgICAgJ0EgZmFzdCBhbmQgc2VjdXJlIGZpYXQtdG8tY3J5cHRvIHBheW1lbnQgc2VydmljZS4gRGVwb3NpdCBjcnlwdG9jdXJyZW5jaWVzIGZyb20gYW55d2hlcmUgaW4gdGhlIHdvcmxkIHVzaW5nIHlvdXIgY3JlZGl0L2RlYml0IGNhcmRzIGFuZCBiYW5rIHRyYW5zZmVycy4nXG4gICAgICAgICksXG4gICAgZ2V0QWxsb3dlZFJlc2lkZW5jaWVzOiAoKSA9PiBbJyonXSxcbiAgICBnZXRQYXltZW50SWNvbnM6ICgpID0+IFtcbiAgICAgICAgeyBkYXJrOiAnSWNDYXNoaWVyVmlzYURhcmsnLCBsaWdodDogJ0ljQ2FzaGllclZpc2FMaWdodCcgfSxcbiAgICAgICAgeyBkYXJrOiAnSWNDYXNoaWVyTWFzdGVyY2FyZERhcmsnLCBsaWdodDogJ0ljQ2FzaGllck1hc3RlcmNhcmRMaWdodCcgfSxcbiAgICAgICAgeyBkYXJrOiAnSWNDYXNoaWVyQnBheURhcmsnLCBsaWdodDogJ0ljQ2FzaGllckJwYXlMaWdodCcgfSxcbiAgICAgICAgeyBkYXJrOiAnSWNDYXNoaWVyU2VwYURhcmsnLCBsaWdodDogJ0ljQ2FzaGllclNlcGFMaWdodCcgfSxcbiAgICAgICAgeyBkYXJrOiAnSWNDYXNoaWVyQmx1ZXNoeWZ0RGFyaycsIGxpZ2h0OiAnSWNDYXNoaWVyQmx1ZXNoeWZ0TGlnaHQnIH0sXG4gICAgICAgIHsgZGFyazogJ0ljQ2FzaGllckZsZXhlcGluRGFyaycsIGxpZ2h0OiAnSWNDYXNoaWVyRmxleGVwaW5MaWdodCcgfSxcbiAgICAgICAgeyBkYXJrOiAnSWNDYXNoaWVyUGF5SWREYXJrJywgbGlnaHQ6ICdJY0Nhc2hpZXJQYXlJZExpZ2h0JyB9LFxuICAgICAgICB7IGRhcms6ICdJY0Nhc2hpZXJQb2xpRGFyaycsIGxpZ2h0OiAnSWNDYXNoaWVyUG9saUxpZ2h0JyB9LFxuICAgICAgICB7IGRhcms6ICdJY0Nhc2hpZXJBcHBsZVBheScsIGxpZ2h0OiAnSWNDYXNoaWVyQXBwbGVQYXknIH0sXG4gICAgICAgIHsgZGFyazogJ0ljQ2FzaGllckludGVyYWNFdHJhbnNmZXInLCBsaWdodDogJ0ljQ2FzaGllckludGVyYWNFdHJhbnNmZXInIH0sXG4gICAgICAgIHsgZGFyazogJ0ljQ2FzaGllcklkZWFsJywgbGlnaHQ6ICdJY0Nhc2hpZXJJZGVhbCcgfSxcbiAgICAgICAgeyBkYXJrOiAnSWNDYXNoaWVyUG9zdEJpbGxQYXlEYXJrJywgbGlnaHQ6ICdJY0Nhc2hpZXJQb3N0QmlsbFBheUxpZ2h0JyB9LFxuICAgICAgICB7IGRhcms6ICdJY0Nhc2hpZXJTb2ZvcnQnLCBsaWdodDogJ0ljQ2FzaGllclNvZm9ydCcgfSxcbiAgICBdLFxuICAgIGdldFNjcmlwdERlcGVuZGVuY2llczogKCkgPT4gW10sIC8vIE5vbmUuXG4gICAgZ2V0RGVmYXVsdEZyb21DdXJyZW5jeTogKCkgPT4gJycsXG4gICAgZ2V0RnJvbUN1cnJlbmNpZXM6ICgpID0+IFsnKiddLFxuICAgIGdldFRvQ3VycmVuY2llczogKCkgPT4gWycqJ10sXG4gICAgZ2V0V2lkZ2V0SHRtbDogKCkgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgc3RvcmUuV1Muc2VydmljZVRva2VuKHtcbiAgICAgICAgICAgICAgICBzZXJ2aWNlX3Rva2VuOiAxLFxuICAgICAgICAgICAgICAgIHNlcnZpY2U6ICdiYW54YScsXG4gICAgICAgICAgICAgICAgcmVmZXJyZXI6IHdpbmRvdy5sb2NhdGlvbi5ocmVmLFxuICAgICAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXNwb25zZS5lcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHVybCB9ID0gcmVzcG9uc2Uuc2VydmljZV90b2tlbi5iYW54YTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodXJsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3Blbih1cmwpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUmVzb2x2aW5nIGVtcHR5IHdpbGwvc2hvdWxkIHJlZGlyZWN0IHVzZXIuXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBvbk1vdW50V2lkZ2V0Q29udGFpbmVyOiAoKSA9PiB7fSxcbiAgICBzaG91bGRfc2hvd19kZXBvc2l0X2FkZHJlc3M6IGZhbHNlLFxufSk7XG5cbmNvbnN0IGNyZWF0ZUNoYW5nZWxseVByb3ZpZGVyID0gc3RvcmUgPT4gKHtcbiAgICBpY29uOiB7IGRhcms6ICdJY0Nhc2hpZXJDaGFuZ2VsbHlEYXJrJywgbGlnaHQ6ICdJY0Nhc2hpZXJDaGFuZ2VsbHlMaWdodCcgfSxcbiAgICBuYW1lOiAnQ2hhbmdlbGx5JyxcbiAgICBnZXREZXNjcmlwdGlvbjogKCkgPT5cbiAgICAgICAgbG9jYWxpemUoXG4gICAgICAgICAgICAnWW91ciBzaW1wbGUgYWNjZXNzIHRvIGNyeXB0by4gRmFzdCBhbmQgc2VjdXJlIHdheSB0byBleGNoYW5nZSBhbmQgcHVyY2hhc2UgY3J5cHRvY3VycmVuY2llcy4gMjQvNyBsaXZlIGNoYXQgc3VwcG9ydC4nXG4gICAgICAgICksXG4gICAgZ2V0QWxsb3dlZFJlc2lkZW5jaWVzOiAoKSA9PiBbJyonXSxcbiAgICBnZXRQYXltZW50SWNvbnM6ICgpID0+IFtcbiAgICAgICAgeyBkYXJrOiAnSWNDYXNoaWVyVmlzYURhcmsnLCBsaWdodDogJ0ljQ2FzaGllclZpc2FMaWdodCcgfSxcbiAgICAgICAgeyBkYXJrOiAnSWNDYXNoaWVyTWFzdGVyY2FyZERhcmsnLCBsaWdodDogJ0ljQ2FzaGllck1hc3RlcmNhcmRMaWdodCcgfSxcbiAgICBdLFxuICAgIGdldFNjcmlwdERlcGVuZGVuY2llczogKCkgPT4gW10sXG4gICAgZ2V0RGVmYXVsdEZyb21DdXJyZW5jeTogKCkgPT4gJ3VzZCcsXG4gICAgZ2V0RnJvbUN1cnJlbmNpZXM6ICgpID0+IFsndXNkJywgJ2V1cicsICdnYnAnXSxcbiAgICBnZXRUb0N1cnJlbmNpZXM6ICgpID0+IFsnYmNoJywgJ2J0YycsICdldGMnLCAnZXRoJywgJ2x0YycsICd1c3QnXSxcbiAgICBnZXRXaWRnZXRIdG1sKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKCdodHRwczovL3dpZGdldC5jaGFuZ2VsbHkuY29tLz92PTMmdGhlbWU9ZGVmYXVsdCcpO1xuICAgICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoJ2Zyb21EZWZhdWx0JywgdGhpcy5nZXREZWZhdWx0RnJvbUN1cnJlbmN5KCkpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVuY3kgPSBzdG9yZS5yb290X3N0b3JlLmNsaWVudC5jdXJyZW5jeS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0VG9DdXJyZW5jaWVzKCkuaW5jbHVkZXMoY3VycmVuY3kpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9fY3VycmVuY3kgPSBjdXJyZW5jeSA9PT0gJ3VzdCcgPyAndXNkdCcgOiBjdXJyZW5jeTtcbiAgICAgICAgICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZCgndG8nLCB0b19jdXJyZW5jeSk7XG4gICAgICAgICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoJ3RvRGVmYXVsdCcsIHRvX2N1cnJlbmN5KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoJ2Ftb3VudCcsIDEpO1xuICAgICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoJ21lcmNoYW50X2lkJywgJ2lpcTNqZHQycDQ0eXJmYngnKTtcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKHVybCk7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgb25Nb3VudFdpZGdldENvbnRhaW5lcjogKCkgPT4ge30sXG4gICAgc2hvdWxkX3Nob3dfZGVwb3NpdF9hZGRyZXNzOiB0cnVlLFxufSk7XG5cbmNvbnN0IGNyZWF0ZVhhblBvb2xQcm92aWRlciA9IHN0b3JlID0+ICh7XG4gICAgaWNvbjogeyBkYXJrOiAnSWNDYXNoaWVyWGFucG9vbERhcmsnLCBsaWdodDogJ0ljQ2FzaGllclhhbnBvb2xMaWdodCcgfSxcbiAgICBuYW1lOiAnWGFuUG9vbCcsXG4gICAgZ2V0RGVzY3JpcHRpb246ICgpID0+XG4gICAgICAgIGxvY2FsaXplKFxuICAgICAgICAgICAgJ0J1eSBjcnlwdG9jdXJyZW5jaWVzIGluIGFuIGluc3RhbnQuIEVuam95IGVhc3ksIHF1aWNrLCBhbmQgc2VjdXJlIGV4Y2hhbmdlcyB1c2luZyB5b3VyIGxvY2FsIHBheW1lbnQgbWV0aG9kcy4nXG4gICAgICAgICksXG4gICAgZ2V0QWxsb3dlZFJlc2lkZW5jaWVzOiAoKSA9PiBbJyonXSxcbiAgICBnZXRQYXltZW50SWNvbnM6ICgpID0+IFtcbiAgICAgICAgeyBkYXJrOiAnSWNDYXNoaWVyRnBzRGFyaycsIGxpZ2h0OiAnSWNDYXNoaWVyRnBzTGlnaHQnIH0sXG4gICAgICAgIHsgZGFyazogJ0ljQ2FzaGllckFsaVBheURhcmsnLCBsaWdodDogJ0ljQ2FzaGllckFsaVBheUxpZ2h0JyB9LFxuICAgICAgICB7IGRhcms6ICdJY0Nhc2hpZXJHb1BheURhcmsnLCBsaWdodDogJ0ljQ2FzaGllckdvUGF5TGlnaHQnIH0sXG4gICAgICAgIHsgZGFyazogJ0ljQ2FzaGllck1hbmRpcmlQYXknLCBsaWdodDogJ0ljQ2FzaGllck1hbmRpcmlQYXknIH0sXG4gICAgICAgIHsgZGFyazogJ0ljQ2FzaGllckluc3RhUGF5TGlnaHQnLCBsaWdodDogJ0ljQ2FzaGllckluc3RhUGF5RGFyaycgfSxcbiAgICAgICAgeyBkYXJrOiAnSWNDYXNoaWVyQ2VidWFuYUxodWlsbGllckRhcmsnLCBsaWdodDogJ0ljQ2FzaGllckNlYnVhbmFMaHVpbGxpZXJMaWdodCcgfSxcbiAgICAgICAgeyBkYXJrOiAnSWNDYXNoaWVyUGF5Tm93RGFyaycsIGxpZ2h0OiAnSWNDYXNoaWVyUGF5Tm93TGlnaHQnIH0sXG4gICAgICAgIHsgZGFyazogJ0ljQ2FzaGllclVwaURhcmsnLCBsaWdodDogJ0ljQ2FzaGllclVwaUxpZ2h0JyB9LFxuICAgICAgICB7IGRhcms6ICdJY0Nhc2hpZXJQcm9tcHRQYXlEYXJrJywgbGlnaHQ6ICdJY0Nhc2hpZXJQcm9tcHRQYXlMaWdodCcgfSxcbiAgICAgICAgeyBkYXJrOiAnSWNDYXNoaWVyVmlldHRsZVBheScsIGxpZ2h0OiAnSWNDYXNoaWVyVmlldHRsZVBheScgfSxcbiAgICBdLFxuICAgIGdldFNjcmlwdERlcGVuZGVuY2llczogKCkgPT4gW10sXG4gICAgZ2V0VG9DdXJyZW5jaWVzOiAoKSA9PiBbJ2J0YycsICdldGgnLCAndXN0JywgJ3ppbCcsICduZW0nXSxcbiAgICBnZXRXaWRnZXRIdG1sKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IGN1cnJlbmN5IH0gPSBzdG9yZS5yb290X3N0b3JlLmNsaWVudDtcblxuICAgICAgICAgICAgbGV0IHVybCA9ICdodHRwczovL2NoZWNrb3V0LnhhbnBvb2wuY29tLyc7XG5cbiAgICAgICAgICAgIHVybCArPSBgP2FwaUtleT1kYjRlYzYzOGRmZjlhNjhhYmRhMWVmNmI3NjM4YzIyMGA7XG4gICAgICAgICAgICB1cmwgKz0gYCZyZWRpcmVjdFVybD0ke3dpbmRvdy5sb2NhdGlvbi5ocmVmfWA7XG4gICAgICAgICAgICB1cmwgKz0gYCZ3YWxsZXQ9JHtzdG9yZS5kZXBvc2l0X2FkZHJlc3N9YDtcbiAgICAgICAgICAgIHVybCArPSBgJmNyeXB0b0N1cnJlbmN5PSR7Y3VycmVuY3kgPT09ICdVU1QnID8gJ1VTRFQnIDogY3VycmVuY3l9YDtcbiAgICAgICAgICAgIHVybCArPSBgJnRyYW5zYWN0aW9uVHlwZT1idXlgO1xuXG4gICAgICAgICAgICB3aW5kb3cub3Blbih1cmwpO1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIG9uTW91bnRXaWRnZXRDb250YWluZXI6ICgpID0+IHt9LFxuICAgIHNob3VsZF9zaG93X2RlcG9zaXRfYWRkcmVzczogZmFsc2UsXG59KTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIGNyZWF0ZUJhbnhhUHJvdmlkZXIsXG4gICAgY3JlYXRlQ2hhbmdlbGx5UHJvdmlkZXIsXG4gICAgY3JlYXRlWGFuUG9vbFByb3ZpZGVyLFxufTtcbiIsImltcG9ydCB7IGFjdGlvbiwgY29tcHV0ZWQsIG9ic2VydmFibGUsIHJlYWN0aW9uLCBtYWtlT2JzZXJ2YWJsZSB9IGZyb20gJ21vYngnO1xuaW1wb3J0IHsgbG9jYWxpemUgfSBmcm9tICdAZGVyaXYvdHJhbnNsYXRpb25zJztcbmltcG9ydCB7IGdldEtlYmFiQ2FzZSwgaXNDcnlwdG9jdXJyZW5jeSwgcm91dGVzLCB3ZWJzaXRlVXJsIH0gZnJvbSAnQGRlcml2L3NoYXJlZCc7XG5pbXBvcnQgT25yYW1wUHJvdmlkZXJzIGZyb20gJ0NvbmZpZy9vbi1yYW1wLXByb3ZpZGVycyc7XG5pbXBvcnQgQmFzZVN0b3JlIGZyb20gJy4vYmFzZS1zdG9yZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9uUmFtcFN0b3JlIGV4dGVuZHMgQmFzZVN0b3JlIHtcbiAgICBhcGlfZXJyb3IgPSBudWxsO1xuICAgIGRlcG9zaXRfYWRkcmVzcyA9IG51bGw7XG4gICAgaXNfZGVwb3NpdF9hZGRyZXNzX2xvYWRpbmcgPSB0cnVlO1xuICAgIGlzX29ucmFtcF9tb2RhbF9vcGVuID0gZmFsc2U7XG4gICAgaXNfcmVxdWVzdGluZ193aWRnZXRfaHRtbCA9IGZhbHNlO1xuICAgIG9ucmFtcF9wcm92aWRlcnMgPSBbXTtcbiAgICBzZWxlY3RlZF9wcm92aWRlciA9IG51bGw7XG4gICAgc2hvdWxkX3Nob3dfd2lkZ2V0ID0gZmFsc2U7XG4gICAgd2lkZ2V0X2Vycm9yID0gbnVsbDtcbiAgICB3aWRnZXRfaHRtbCA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3Rvcih7IFdTLCByb290X3N0b3JlIH0pIHtcbiAgICAgICAgc3VwZXIoeyByb290X3N0b3JlIH0pO1xuXG4gICAgICAgIG1ha2VPYnNlcnZhYmxlKHRoaXMsIHtcbiAgICAgICAgICAgIGFwaV9lcnJvcjogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGRlcG9zaXRfYWRkcmVzczogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGlzX2RlcG9zaXRfYWRkcmVzc19sb2FkaW5nOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgaXNfb25yYW1wX21vZGFsX29wZW46IG9ic2VydmFibGUsXG4gICAgICAgICAgICBpc19yZXF1ZXN0aW5nX3dpZGdldF9odG1sOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgb25yYW1wX3Byb3ZpZGVyczogb2JzZXJ2YWJsZS5zaGFsbG93LFxuICAgICAgICAgICAgc2VsZWN0ZWRfcHJvdmlkZXI6IG9ic2VydmFibGUucmVmLFxuICAgICAgICAgICAgc2hvdWxkX3Nob3dfd2lkZ2V0OiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgd2lkZ2V0X2Vycm9yOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgd2lkZ2V0X2h0bWw6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBpc19vbnJhbXBfdGFiX3Zpc2libGU6IGNvbXB1dGVkLFxuICAgICAgICAgICAgZmlsdGVyZWRfb25yYW1wX3Byb3ZpZGVyczogY29tcHV0ZWQsXG4gICAgICAgICAgICBvbnJhbXBfcG9wdXBfbW9kYWxfdGl0bGU6IGNvbXB1dGVkLFxuICAgICAgICAgICAgc2hvdWxkX3Nob3dfZGlhbG9nOiBjb21wdXRlZCxcbiAgICAgICAgICAgIG9uTW91bnRPbnJhbXA6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIG9uVW5tb3VudE9ucmFtcDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgb25DbGlja0Rpc2NsYWltZXJDb250aW51ZTogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgb25DbGlja0dvVG9EZXBvc2l0UGFnZTogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgcG9sbEFwaUZvckRlcG9zaXRBZGRyZXNzOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICByZXNldFBvcHVwOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRBcGlFcnJvcjogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0Q29weUljb25SZWY6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldERlcG9zaXRBZGRyZXNzOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRJc0RlcG9zaXRBZGRyZXNzTG9hZGluZzogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0SXNPblJhbXBNb2RhbE9wZW46IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldElzUmVxdWVzdGluZ1dpZGdldEh0bWw6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldFNlbGVjdGVkUHJvdmlkZXI6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldFNob3VsZFNob3dXaWRnZXQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldE9ucmFtcFByb3ZpZGVyczogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0V2lkZ2V0RXJyb3I6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldFdpZGdldEh0bWw6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5XUyA9IFdTO1xuXG4gICAgICAgIHRoaXMub25DbGllbnRJbml0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0T25yYW1wUHJvdmlkZXJzKFtcbiAgICAgICAgICAgICAgICBPbnJhbXBQcm92aWRlcnMuY3JlYXRlQ2hhbmdlbGx5UHJvdmlkZXIodGhpcyksXG4gICAgICAgICAgICAgICAgT25yYW1wUHJvdmlkZXJzLmNyZWF0ZVhhblBvb2xQcm92aWRlcih0aGlzKSxcbiAgICAgICAgICAgICAgICBPbnJhbXBQcm92aWRlcnMuY3JlYXRlQmFueGFQcm92aWRlcih0aGlzKSxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXQgaXNfb25yYW1wX3RhYl92aXNpYmxlKCkge1xuICAgICAgICBjb25zdCB7IGNsaWVudCB9ID0gdGhpcy5yb290X3N0b3JlO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBjbGllbnQuaXNfdmlydHVhbCA9PT0gZmFsc2UgJiZcbiAgICAgICAgICAgIGlzQ3J5cHRvY3VycmVuY3koY2xpZW50LmN1cnJlbmN5KSAmJlxuICAgICAgICAgICAgdGhpcy5maWx0ZXJlZF9vbnJhbXBfcHJvdmlkZXJzLmxlbmd0aCA+IDBcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBnZXQgZmlsdGVyZWRfb25yYW1wX3Byb3ZpZGVycygpIHtcbiAgICAgICAgY29uc3QgeyBjbGllbnQgfSA9IHRoaXMucm9vdF9zdG9yZTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgdGhpcy5vbnJhbXBfcHJvdmlkZXJzXG4gICAgICAgICAgICAgICAgLy8gRW5zdXJlIHByb3ZpZGVyIHN1cHBvcnRzIHRoaXMgdXNlcidzIGFjY291bnQgY3VycmVuY3kuXG4gICAgICAgICAgICAgICAgLmZpbHRlcihwcm92aWRlciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvX2N1cnJlbmNpZXMgPSBwcm92aWRlci5nZXRUb0N1cnJlbmNpZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvX2N1cnJlbmNpZXMuaW5jbHVkZXMoJyonKSB8fCB0b19jdXJyZW5jaWVzLmluY2x1ZGVzKGNsaWVudC5jdXJyZW5jeS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC8vIEVuc3VyZSBwcm92aWRlciBzdXBwb3J0cyB0aGlzIHVzZXIncyByZXNpZGVuY3kuXG4gICAgICAgICAgICAgICAgLmZpbHRlcihwcm92aWRlciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsbG93ZWRfcmVzaWRlbmNpZXMgPSBwcm92aWRlci5nZXRBbGxvd2VkUmVzaWRlbmNpZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFsbG93ZWRfcmVzaWRlbmNpZXMuaW5jbHVkZXMoJyonKSB8fCBhbGxvd2VkX3Jlc2lkZW5jaWVzLmluY2x1ZGVzKGNsaWVudC5yZXNpZGVuY2UpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgZ2V0IG9ucmFtcF9wb3B1cF9tb2RhbF90aXRsZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkX3Nob3dfd2lkZ2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxpemUoJ1BheW1lbnQgY2hhbm5lbCcpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0ZWRfcHJvdmlkZXIpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3VsZF9zaG93X2RpYWxvZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBsb2NhbGl6ZSgnT3VyIHNlcnZlciBjYW5ub3QgcmV0cmlldmUgYW4gYWRkcmVzcy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAnICc7IC8vIEVtcHR5IHN0cmluZyB0byByZW5kZXIgaGVhZGVyICsgY2xvc2UgaWNvbi5cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGdldCBzaG91bGRfc2hvd19kaWFsb2coKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuYXBpX2Vycm9yO1xuICAgIH1cblxuICAgIG9uTW91bnRPbnJhbXAoKSB7XG4gICAgICAgIHRoaXMuZGlzcG9zZVRoaXJkUGFydHlKc1JlYWN0aW9uID0gcmVhY3Rpb24oXG4gICAgICAgICAgICAoKSA9PiB0aGlzLnNlbGVjdGVkX3Byb3ZpZGVyLFxuICAgICAgICAgICAgYXN5bmMgcHJvdmlkZXIgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghcHJvdmlkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGRlcGVuZGVuY2llcyA9IHByb3ZpZGVyLmdldFNjcmlwdERlcGVuZGVuY2llcygpO1xuICAgICAgICAgICAgICAgIGlmIChkZXBlbmRlbmNpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCB7IGRlZmF1bHQ6IGxvYWRqcyB9ID0gYXdhaXQgaW1wb3J0KC8qIHdlYnBhY2tDaHVua05hbWU6IFwibG9hZGpzXCIgKi8gJ2xvYWRqcycpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNjcmlwdF9uYW1lID0gYCR7Z2V0S2ViYWJDYXNlKHByb3ZpZGVyLm5hbWUpfS1vbnJhbXBgO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFsb2FkanMuaXNEZWZpbmVkKHNjcmlwdF9uYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBsb2FkanMoZGVwZW5kZW5jaWVzLCBzY3JpcHRfbmFtZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgRGVwZW5kZW5jaWVzIGZvciBvbnJhbXAgcHJvdmlkZXIgJHtwcm92aWRlci5uYW1lfSBjb3VsZCBub3QgYmUgbG9hZGVkLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRQcm92aWRlcihudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICAvLyBXaGVuIFwic2hvdWxkX3Nob3dfd2lkZ2V0XCIsIGF0dGVtcHQgdG8gZmV0Y2ggXCJzZWxlY3RlZF9wcm92aWRlclwiJ3MgXCJ3aWRnZXRfaHRtbFwiLlxuICAgICAgICB0aGlzLmRpc3Bvc2VHZXRXaWRnZXRIdG1sUmVhY3Rpb24gPSByZWFjdGlvbihcbiAgICAgICAgICAgICgpID0+IHRoaXMuc2hvdWxkX3Nob3dfd2lkZ2V0LFxuICAgICAgICAgICAgc2hvdWxkX3Nob3dfd2lkZ2V0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkX3Nob3dfd2lkZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzX3JlcXVlc3Rpbmdfd2lkZ2V0X2h0bWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0SXNSZXF1ZXN0aW5nV2lkZ2V0SHRtbCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZF9wcm92aWRlclxuICAgICAgICAgICAgICAgICAgICAgICAgLmdldFdpZGdldEh0bWwoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4od2lkZ2V0X2h0bWwgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aWRnZXRfaHRtbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWd1bGFyIHByb3ZpZGVycyAoaWZyYW1lL0pTIGVtYmVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFdpZGdldEh0bWwod2lkZ2V0X2h0bWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFuIGVtcHR5IHJlc29sdmUgKHdpZGdldF9odG1sKSBpZGVudGlmaWVzIGEgcmVkaXJlY3QuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U2hvdWxkU2hvd1dpZGdldChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRXaWRnZXRFcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4gdGhpcy5zZXRJc1JlcXVlc3RpbmdXaWRnZXRIdG1sKGZhbHNlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIG9uVW5tb3VudE9ucmFtcCgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmRpc3Bvc2VUaGlyZFBhcnR5SnNSZWFjdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlVGhpcmRQYXJ0eUpzUmVhY3Rpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuZGlzcG9zZUdldFdpZGdldEh0bWxSZWFjdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlR2V0V2lkZ2V0SHRtbFJlYWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbkNsaWNrRGlzY2xhaW1lckNvbnRpbnVlKCkge1xuICAgICAgICB0aGlzLnNldFNob3VsZFNob3dXaWRnZXQodHJ1ZSk7XG4gICAgfVxuXG4gICAgb25DbGlja0dvVG9EZXBvc2l0UGFnZSgpIHtcbiAgICAgICAgdGhpcy5wb2xsQXBpRm9yRGVwb3NpdEFkZHJlc3MoZmFsc2UpO1xuICAgICAgICB3aW5kb3cub3Blbih3ZWJzaXRlVXJsKCkgKyByb3V0ZXMuY2FzaGllcl9kZXBvc2l0LnN1YnN0cmluZygxKSk7XG4gICAgfVxuXG4gICAgcG9sbEFwaUZvckRlcG9zaXRBZGRyZXNzKHNob3VsZF9hbGxvd19lbXB0eV9hZGRyZXNzKSB7XG4gICAgICAgIC8vIHNob3VsZF9hbGxvd19lbXB0eV9hZGRyZXNzOiBBUEkgcmV0dXJucyBlbXB0eSBkZXBvc2l0IGFkZHJlc3MgZm9yIGxlZ2FjeSBhY2NvdW50c1xuICAgICAgICAvLyB0aGF0IGhhdmUgbmV2ZXIgZ2VuZXJhdGVkIGEgZGVwb3NpdCBhZGRyZXNzLiBTZXR0aW5nIHRoaXMgdG8gXCJ0cnVlXCIgd2lsbCBhbGxvd1xuICAgICAgICAvLyB0aGUgdXNlciB0byBiZSByZWRpcmVjdGVkIHRvIHRoZSBEZXBvc2l0IHBhZ2UgKHdoZXJlIGFuIGFkZHJlc3Mgd2lsbCBiZSBnZW5lcmF0ZWQpLlxuICAgICAgICAvLyBTZXR0aW5nIHRoaXMgdG8gXCJmYWxzZVwiIHdpbGwgc3RhcnQgcG9sbGluZyB0aGUgQVBJIGZvciB0aGlzIGRlcG9zaXQgYWRkcmVzcy5cblxuICAgICAgICB0aGlzLnNldElzRGVwb3NpdEFkZHJlc3NMb2FkaW5nKHRydWUpO1xuICAgICAgICB0aGlzLnNldEFwaUVycm9yKG51bGwpO1xuXG4gICAgICAgIGNvbnN0IGRlcG9zaXRfYWRkcmVzc19pbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IGdldERlcG9zaXRBZGRyZXNzRnJvbUFwaSwgMzAwMCk7XG4gICAgICAgIGNvbnN0IGdldERlcG9zaXRBZGRyZXNzRnJvbUFwaSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuV1MuYXV0aG9yaXplZC5jYXNoaWVyKCdkZXBvc2l0JywgeyBwcm92aWRlcjogJ2NyeXB0bycsIHR5cGU6ICdhcGknIH0pLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBzaG91bGRfY2xlYXJfaW50ZXJ2YWwgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEFwaUVycm9yKHJlc3BvbnNlLmVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkX2NsZWFyX2ludGVydmFsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGFkZHJlc3MgfSA9IHJlc3BvbnNlLmNhc2hpZXIuZGVwb3NpdDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoYWRkcmVzcyB8fCBzaG91bGRfYWxsb3dfZW1wdHlfYWRkcmVzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXREZXBvc2l0QWRkcmVzcyhhZGRyZXNzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZF9jbGVhcl9pbnRlcnZhbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkX2NsZWFyX2ludGVydmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoZGVwb3NpdF9hZGRyZXNzX2ludGVydmFsKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRJc0RlcG9zaXRBZGRyZXNzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZ2V0RGVwb3NpdEFkZHJlc3NGcm9tQXBpKCk7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChkZXBvc2l0X2FkZHJlc3NfaW50ZXJ2YWwpO1xuICAgICAgICAgICAgdGhpcy5zZXRJc0RlcG9zaXRBZGRyZXNzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgIH0sIDMwMDAwKTtcbiAgICB9XG5cbiAgICByZXNldFBvcHVwKCkge1xuICAgICAgICB0aGlzLnNldEFwaUVycm9yKG51bGwpO1xuICAgICAgICB0aGlzLnNldERlcG9zaXRBZGRyZXNzKG51bGwpO1xuICAgICAgICB0aGlzLnNldElzRGVwb3NpdEFkZHJlc3NMb2FkaW5nKHRydWUpO1xuICAgICAgICB0aGlzLnNldFNlbGVjdGVkUHJvdmlkZXIobnVsbCk7XG4gICAgICAgIHRoaXMuc2V0U2hvdWxkU2hvd1dpZGdldChmYWxzZSk7XG4gICAgICAgIHRoaXMuc2V0V2lkZ2V0RXJyb3IobnVsbCk7XG4gICAgICAgIHRoaXMuc2V0V2lkZ2V0SHRtbChudWxsKTtcbiAgICB9XG5cbiAgICBzZXRBcGlFcnJvcihhcGlfZXJyb3IpIHtcbiAgICAgICAgdGhpcy5hcGlfZXJyb3IgPSBhcGlfZXJyb3I7XG4gICAgfVxuXG4gICAgc2V0Q29weUljb25SZWYocmVmKSB7XG4gICAgICAgIHRoaXMuY29weV9pY29uX3JlZiA9IHJlZjtcbiAgICB9XG5cbiAgICBzZXREZXBvc2l0QWRkcmVzcyhkZXBvc2l0X2FkZHJlc3MpIHtcbiAgICAgICAgdGhpcy5kZXBvc2l0X2FkZHJlc3MgPSBkZXBvc2l0X2FkZHJlc3M7XG4gICAgfVxuXG4gICAgc2V0SXNEZXBvc2l0QWRkcmVzc0xvYWRpbmcoaXNfbG9hZGluZykge1xuICAgICAgICB0aGlzLmlzX2RlcG9zaXRfYWRkcmVzc19sb2FkaW5nID0gaXNfbG9hZGluZztcbiAgICB9XG5cbiAgICBzZXRJc09uUmFtcE1vZGFsT3Blbihpc19vcGVuKSB7XG4gICAgICAgIHRoaXMuaXNfb25yYW1wX21vZGFsX29wZW4gPSBpc19vcGVuO1xuICAgIH1cblxuICAgIHNldElzUmVxdWVzdGluZ1dpZGdldEh0bWwoaXNfcmVxdWVzdGluZ193aWRnZXRfaHRtbCkge1xuICAgICAgICB0aGlzLmlzX3JlcXVlc3Rpbmdfd2lkZ2V0X2h0bWwgPSBpc19yZXF1ZXN0aW5nX3dpZGdldF9odG1sO1xuICAgIH1cblxuICAgIHNldFNlbGVjdGVkUHJvdmlkZXIocHJvdmlkZXIpIHtcbiAgICAgICAgaWYgKHByb3ZpZGVyKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkX3Byb3ZpZGVyID0gcHJvdmlkZXI7XG4gICAgICAgICAgICB0aGlzLnNldElzT25SYW1wTW9kYWxPcGVuKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5wb2xsQXBpRm9yRGVwb3NpdEFkZHJlc3ModHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldElzT25SYW1wTW9kYWxPcGVuKGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRfcHJvdmlkZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0U2hvdWxkU2hvd1dpZGdldChzaG91bGRfc2hvdykge1xuICAgICAgICB0aGlzLnNob3VsZF9zaG93X3dpZGdldCA9IHNob3VsZF9zaG93O1xuICAgIH1cblxuICAgIHNldE9ucmFtcFByb3ZpZGVycyhvbnJhbXBfcHJvdmlkZXJzKSB7XG4gICAgICAgIHRoaXMub25yYW1wX3Byb3ZpZGVycyA9IG9ucmFtcF9wcm92aWRlcnMuc2xpY2UoKTtcbiAgICB9XG5cbiAgICBzZXRXaWRnZXRFcnJvcih3aWRnZXRfZXJyb3IpIHtcbiAgICAgICAgdGhpcy53aWRnZXRfZXJyb3IgPSB3aWRnZXRfZXJyb3I7XG4gICAgfVxuXG4gICAgc2V0V2lkZ2V0SHRtbCh3aWRnZXRfaHRtbCkge1xuICAgICAgICB0aGlzLndpZGdldF9odG1sID0gd2lkZ2V0X2h0bWw7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgYWN0aW9uLCBjb21wdXRlZCwgb2JzZXJ2YWJsZSwgbWFrZU9ic2VydmFibGUgfSBmcm9tICdtb2J4JztcbmltcG9ydCB7IGZvcm1hdE1vbmV5LCByb3V0ZXMsIHNodWZmbGVBcnJheSB9IGZyb20gJ0BkZXJpdi9zaGFyZWQnO1xuaW1wb3J0IHsgZ2V0Tm9ybWFsaXplZFBheW1lbnRNZXRob2QgfSBmcm9tICdVdGlscy91dGlsaXR5JztcbmltcG9ydCBDb25zdGFudHMgZnJvbSAnQ29uc3RhbnRzL2NvbnN0YW50cyc7XG5pbXBvcnQgRXJyb3JTdG9yZSBmcm9tICcuL2Vycm9yLXN0b3JlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudEFnZW50U3RvcmUge1xuICAgIGNvbnN0cnVjdG9yKHsgV1MsIHJvb3Rfc3RvcmUgfSkge1xuICAgICAgICBtYWtlT2JzZXJ2YWJsZSh0aGlzLCB7XG4gICAgICAgICAgICBsaXN0OiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgYWdlbnRzOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgY29udGFpbmVyOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgZXJyb3I6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBmaWx0ZXJlZF9saXN0OiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgaXNfbmFtZV9zZWxlY3RlZDogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGlzX3NlYXJjaF9sb2FkaW5nOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgaXNfd2l0aGRyYXc6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBpc190cnlfd2l0aGRyYXdfc3VjY2Vzc2Z1bDogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGlzX3dpdGhkcmF3X3N1Y2Nlc3NmdWw6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBjb25maXJtOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgcmVjZWlwdDogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIHNlbGVjdGVkX2Jhbms6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBzdXBwb3J0ZWRfYmFua3M6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBhY3RpdmVfdGFiX2luZGV4OiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgYWxsX3BheW1lbnRfYWdlbnRfbGlzdDogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIHNlYXJjaF90ZXJtOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgaGFzX3BheW1lbnRfYWdlbnRfc2VhcmNoX3dhcm5pbmc6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBzZXRBY3RpdmVUYWJJbmRleDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0QWN0aXZlVGFiOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBpc19wYXltZW50X2FnZW50X3Zpc2libGU6IGNvbXB1dGVkLFxuICAgICAgICAgICAgZ2V0UGF5bWVudEFnZW50TGlzdDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgZ2V0UGF5bWVudEFnZW50RGV0YWlsczogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgYWRkU3VwcG9ydGVkQmFuazogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgY2xlYXJTdXBwZXJ0ZWRCYW5rczogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc29ydFN1cHBvcnRlZEJhbmtzOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRMaXN0OiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBjbGVhckxpc3Q6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldFBheW1lbnRBZ2VudExpc3Q6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIGZpbHRlclBheW1lbnRBZ2VudExpc3Q6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldFNlYXJjaFRlcm06IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldElzU2VhcmNoTG9hZGluZzogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0UGF5bWVudEFnZW50U2VhcmNoV2FybmluZzogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgb25DaGFuZ2VQYXltZW50TWV0aG9kOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRJc1dpdGhkcmF3OiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRJc1RyeVdpdGhkcmF3U3VjY2Vzc2Z1bDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0SXNXaXRoZHJhd1N1Y2Nlc3NmdWw6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldENvbmZpcm1hdGlvbjogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0UmVjZWlwdDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgYWRkUGF5bWVudEFnZW50OiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBvbk1vdW50UGF5bWVudEFnZW50V2l0aGRyYXc6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHJlcXVlc3RUcnlQYXltZW50QWdlbnRXaXRoZHJhdzogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgcmVzZXRQYXltZW50QWdlbnQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIG9uTW91bnRQYXltZW50QWdlbnRMaXN0OiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRBbGxQYXltZW50QWdlbnRMaXN0OiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBpc19wYXltZW50X2FnZW50X3Zpc2libGVfaW5fb25ib2FyZGluZzogY29tcHV0ZWQsXG4gICAgICAgICAgICByZXF1ZXN0UGF5bWVudEFnZW50V2l0aGRyYXc6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5yb290X3N0b3JlID0gcm9vdF9zdG9yZTtcbiAgICAgICAgdGhpcy5XUyA9IFdTO1xuICAgIH1cblxuICAgIGxpc3QgPSBbXTtcbiAgICBhZ2VudHMgPSBbXTtcbiAgICBjb250YWluZXIgPSBDb25zdGFudHMuY29udGFpbmVycy5wYXltZW50X2FnZW50O1xuICAgIGVycm9yID0gbmV3IEVycm9yU3RvcmUoKTtcbiAgICBmaWx0ZXJlZF9saXN0ID0gW107XG4gICAgaXNfbmFtZV9zZWxlY3RlZCA9IHRydWU7XG4gICAgaXNfc2VhcmNoX2xvYWRpbmcgPSBmYWxzZTtcbiAgICBpc193aXRoZHJhdyA9IGZhbHNlO1xuICAgIGlzX3RyeV93aXRoZHJhd19zdWNjZXNzZnVsID0gZmFsc2U7XG4gICAgaXNfd2l0aGRyYXdfc3VjY2Vzc2Z1bCA9IGZhbHNlO1xuICAgIGNvbmZpcm0gPSB7fTtcbiAgICByZWNlaXB0ID0ge307XG4gICAgc2VsZWN0ZWRfYmFuayA9IDA7XG4gICAgc3VwcG9ydGVkX2JhbmtzID0gW107XG4gICAgYWN0aXZlX3RhYl9pbmRleCA9IDA7XG4gICAgYWxsX3BheW1lbnRfYWdlbnRfbGlzdCA9IFtdO1xuICAgIHNlYXJjaF90ZXJtID0gJyc7XG4gICAgaGFzX3BheW1lbnRfYWdlbnRfc2VhcmNoX3dhcm5pbmcgPSBmYWxzZTtcblxuICAgIHNldEFjdGl2ZVRhYkluZGV4KGluZGV4KSB7XG4gICAgICAgIHRoaXMuYWN0aXZlX3RhYl9pbmRleCA9IGluZGV4O1xuICAgIH1cblxuICAgIHNldEFjdGl2ZVRhYihpbmRleCkge1xuICAgICAgICB0aGlzLnNldEFjdGl2ZVRhYkluZGV4KGluZGV4KTtcbiAgICB9XG5cbiAgICBnZXQgaXNfcGF5bWVudF9hZ2VudF92aXNpYmxlKCkge1xuICAgICAgICByZXR1cm4gISEodGhpcy5maWx0ZXJlZF9saXN0Lmxlbmd0aCB8fCB0aGlzLmFnZW50cy5sZW5ndGggfHwgdGhpcy5oYXNfcGF5bWVudF9hZ2VudF9zZWFyY2hfd2FybmluZyk7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UGF5bWVudEFnZW50TGlzdCgpIHtcbiAgICAgICAgLy8gd2FpdCBmb3IgZ2V0X3NldHRpbmdzIHNvIHJlc2lkZW5jZSBnZXRzIHBvcHVsYXRlZCBpbiBjbGllbnQtc3RvcmVcbiAgICAgICAgLy8gVE9ETzogc2V0IHJlc2lkZW5jZSBpbiBjbGllbnQtc3RvcmUgZnJvbSBhdXRob3JpemUgc28gaXQncyBmYXN0ZXJcbiAgICAgICAgYXdhaXQgdGhpcy5XUy53YWl0KCdnZXRfc2V0dGluZ3MnKTtcbiAgICAgICAgY29uc3QgeyByZXNpZGVuY2UsIGN1cnJlbmN5IH0gPSB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50O1xuICAgICAgICByZXR1cm4gdGhpcy5XUy5hdXRob3JpemVkLnBheW1lbnRBZ2VudExpc3QocmVzaWRlbmNlLCBjdXJyZW5jeSk7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UGF5bWVudEFnZW50RGV0YWlscygpIHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50YWdlbnRfZGV0YWlscyB9ID0gYXdhaXQgdGhpcy5XUy5hdXRob3JpemVkLnBheW1lbnRBZ2VudERldGFpbHMoKTtcbiAgICAgICAgcmV0dXJuIHBheW1lbnRhZ2VudF9kZXRhaWxzO1xuICAgIH1cblxuICAgIGFkZFN1cHBvcnRlZEJhbmsoYmFuaykge1xuICAgICAgICBjb25zdCBzdXBwb3J0ZWRfYmFua19leGlzdHMgPSB0aGlzLnN1cHBvcnRlZF9iYW5rcy5maW5kKFxuICAgICAgICAgICAgc3VwcG9ydGVkX2JhbmsgPT4gc3VwcG9ydGVkX2JhbmsudmFsdWUgPT09IGJhbmsudG9Mb3dlckNhc2UoKVxuICAgICAgICApO1xuICAgICAgICBpZiAoIXN1cHBvcnRlZF9iYW5rX2V4aXN0cykge1xuICAgICAgICAgICAgdGhpcy5zdXBwb3J0ZWRfYmFua3MucHVzaCh7IHRleHQ6IGJhbmssIHZhbHVlOiBiYW5rLnRvTG93ZXJDYXNlKCkgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjbGVhclN1cHBlcnRlZEJhbmtzKCkge1xuICAgICAgICB0aGlzLnN1cHBvcnRlZF9iYW5rcyA9IFtdO1xuICAgIH1cblxuICAgIHNvcnRTdXBwb3J0ZWRCYW5rcygpIHtcbiAgICAgICAgLy8gc29ydCBzdXBwb3J0ZWQgYmFua3MgYWxwaGFiZXRpY2FsbHkgYnkgdmFsdWUsIHRoZSBvcHRpb24gJ0FsbCBwYXltZW50IGFnZW50cycgd2l0aCB2YWx1ZSAwIHNob3VsZCBiZSBvbiB0b3BcbiAgICAgICAgdGhpcy5zdXBwb3J0ZWRfYmFua3MucmVwbGFjZShcbiAgICAgICAgICAgIHRoaXMuc3VwcG9ydGVkX2JhbmtzLnNsaWNlKCkuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChhLnZhbHVlIDwgYi52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhLnZhbHVlID4gYi52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHNldExpc3QocGFfbGlzdCkge1xuICAgICAgICB0aGlzLmxpc3QucHVzaChwYV9saXN0KTtcbiAgICB9XG5cbiAgICBjbGVhckxpc3QoKSB7XG4gICAgICAgIHRoaXMubGlzdCA9IFtdO1xuICAgIH1cblxuICAgIGFzeW5jIHNldFBheW1lbnRBZ2VudExpc3QocGFfbGlzdCkge1xuICAgICAgICBjb25zdCB7IHNldExvYWRpbmcgfSA9IHRoaXMucm9vdF9zdG9yZS5tb2R1bGVzLmNhc2hpZXIuZ2VuZXJhbF9zdG9yZTtcbiAgICAgICAgY29uc3QgcGF5bWVudF9hZ2VudF9saXN0ID0gcGFfbGlzdCB8fCAoYXdhaXQgdGhpcy5nZXRQYXltZW50QWdlbnRMaXN0KCkpO1xuICAgICAgICB0aGlzLmNsZWFyTGlzdCgpO1xuICAgICAgICB0aGlzLmNsZWFyU3VwcGVydGVkQmFua3MoKTtcbiAgICAgICAgLy8gVE9ETzogT25jZSB0ZWxlcGhvbmUsIHVybCBhbmQgc3VwcG9ydGVkX2JhbmtzIHJlbW92ZWQgZnJvbSBwYXltZW50YWdlbnRfbGlzdC5saXN0IHdlIGNhbiByZW1vdmUgdGhlbSBhbmQganVzdCB1c2UgdGhlIHBsdXJhbCBvbmVzXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBwYXltZW50X2FnZW50X2xpc3QucGF5bWVudGFnZW50X2xpc3Q/Lmxpc3QuZm9yRWFjaChwYXltZW50X2FnZW50ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldExpc3Qoe1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeTogcGF5bWVudF9hZ2VudC5jdXJyZW5jaWVzLFxuICAgICAgICAgICAgICAgICAgICBkZXBvc2l0X2NvbW1pc3Npb246IHBheW1lbnRfYWdlbnQuZGVwb3NpdF9jb21taXNzaW9uLFxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogcGF5bWVudF9hZ2VudC5lbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgZnVydGhlcl9pbmZvcm1hdGlvbjogcGF5bWVudF9hZ2VudC5mdXJ0aGVyX2luZm9ybWF0aW9uLFxuICAgICAgICAgICAgICAgICAgICBtYXhfd2l0aGRyYXdhbDogcGF5bWVudF9hZ2VudC5tYXhfd2l0aGRyYXdhbCxcbiAgICAgICAgICAgICAgICAgICAgbWluX3dpdGhkcmF3YWw6IHBheW1lbnRfYWdlbnQubWluX3dpdGhkcmF3YWwsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHBheW1lbnRfYWdlbnQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudGFnZW50X2xvZ2luaWQ6IHBheW1lbnRfYWdlbnQucGF5bWVudGFnZW50X2xvZ2luaWQsXG4gICAgICAgICAgICAgICAgICAgIHBob25lczogcGF5bWVudF9hZ2VudD8ucGhvbmVfbnVtYmVycyB8fCBwYXltZW50X2FnZW50Py50ZWxlcGhvbmUsXG4gICAgICAgICAgICAgICAgICAgIHN1cHBvcnRlZF9iYW5rczogcGF5bWVudF9hZ2VudD8uc3VwcG9ydGVkX3BheW1lbnRfbWV0aG9kcyxcbiAgICAgICAgICAgICAgICAgICAgdXJsczogcGF5bWVudF9hZ2VudD8udXJscyB8fCBwYXltZW50X2FnZW50Py51cmwsXG4gICAgICAgICAgICAgICAgICAgIHdpdGhkcmF3YWxfY29tbWlzc2lvbjogcGF5bWVudF9hZ2VudC53aXRoZHJhd2FsX2NvbW1pc3Npb24sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3VwcG9ydGVkX2JhbmtzX2FycmF5ID0gcGF5bWVudF9hZ2VudD8uc3VwcG9ydGVkX3BheW1lbnRfbWV0aG9kc1xuICAgICAgICAgICAgICAgICAgICAubWFwKGJhbmsgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGF5bWVudF9tZXRob2QgPSBnZXROb3JtYWxpemVkUGF5bWVudE1ldGhvZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYW5rLnBheW1lbnRfbWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbnN0YW50cy5wYXltZW50X21ldGhvZHNcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL3JlbW92ZSBTa3JpbGwgYW5kIE5ldGVsbGVyIGZyb20gcGF5bWVudCBtZXRob2RzIGxpc3QgKGRyb3Bkb3duIG1lbnUpIGFzIHBlciBtYW5kYXRlIGZyb20gUGF5c2FmZVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsnTmV0ZWxsZXInLCAnU2tyaWxsJ10uaW5jbHVkZXMocGF5bWVudF9tZXRob2QpID8gJycgOiBwYXltZW50X21ldGhvZDtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihCb29sZWFuKTtcbiAgICAgICAgICAgICAgICBzdXBwb3J0ZWRfYmFua3NfYXJyYXkuZm9yRWFjaChiYW5rID0+IHRoaXMuYWRkU3VwcG9ydGVkQmFuayhiYW5rKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNodWZmbGVBcnJheSh0aGlzLmxpc3QpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zb3J0U3VwcG9ydGVkQmFua3MoKTtcbiAgICB9XG5cbiAgICBmaWx0ZXJQYXltZW50QWdlbnRMaXN0KGJhbmspIHtcbiAgICAgICAgdGhpcy5zZXRQYXltZW50QWdlbnRTZWFyY2hXYXJuaW5nKGZhbHNlKTtcbiAgICAgICAgY29uc3QgeyBjb21tb24gfSA9IHRoaXMucm9vdF9zdG9yZTtcblxuICAgICAgICB0aGlzLmZpbHRlcmVkX2xpc3QgPSBbXTtcblxuICAgICAgICBpZiAoYmFuayB8fCB0aGlzLnNlbGVjdGVkX2JhbmspIHtcbiAgICAgICAgICAgIHRoaXMubGlzdC5mb3JFYWNoKHBheW1lbnRfYWdlbnQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN1cHBvcnRlZF9iYW5rcyA9IHBheW1lbnRfYWdlbnQ/LnN1cHBvcnRlZF9iYW5rcztcbiAgICAgICAgICAgICAgICBpZiAoc3VwcG9ydGVkX2JhbmtzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhbmtfaW5kZXggPSBzdXBwb3J0ZWRfYmFua3NcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoc3VwcG9ydGVkX2JhbmsgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXROb3JtYWxpemVkUGF5bWVudE1ldGhvZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VwcG9ydGVkX2JhbmsucGF5bWVudF9tZXRob2QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbnN0YW50cy5wYXltZW50X21ldGhvZHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5pbmRleE9mKGJhbmsgfHwgdGhpcy5zZWxlY3RlZF9iYW5rKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoYmFua19pbmRleCAhPT0gLTEpIHRoaXMuZmlsdGVyZWRfbGlzdC5wdXNoKHBheW1lbnRfYWdlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJlZF9saXN0ID0gdGhpcy5saXN0O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNlYXJjaF90ZXJtKSB7XG4gICAgICAgICAgICB0aGlzLmZpbHRlcmVkX2xpc3QgPSB0aGlzLmZpbHRlcmVkX2xpc3QuZmlsdGVyKHBheW1lbnRfYWdlbnQgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXltZW50X2FnZW50Lm5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKS5pbmNsdWRlcyh0aGlzLnNlYXJjaF90ZXJtLnRvTG9jYWxlTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlcmVkX2xpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQYXltZW50QWdlbnRTZWFyY2hXYXJuaW5nKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRJc1NlYXJjaExvYWRpbmcoZmFsc2UpO1xuXG4gICAgICAgIGlmICghdGhpcy5pc19wYXltZW50X2FnZW50X3Zpc2libGUgJiYgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLmVuZHNXaXRoKHJvdXRlcy5jYXNoaWVyX3BhKSkge1xuICAgICAgICAgICAgY29tbW9uLnJvdXRlVG8ocm91dGVzLmNhc2hpZXJfZGVwb3NpdCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRTZWFyY2hUZXJtKHNlYXJjaF90ZXJtKSB7XG4gICAgICAgIHRoaXMuc2VhcmNoX3Rlcm0gPSBzZWFyY2hfdGVybTtcbiAgICB9XG5cbiAgICBzZXRJc1NlYXJjaExvYWRpbmcodmFsdWUpIHtcbiAgICAgICAgdGhpcy5pc19zZWFyY2hfbG9hZGluZyA9IHZhbHVlO1xuICAgIH1cblxuICAgIHNldFBheW1lbnRBZ2VudFNlYXJjaFdhcm5pbmcodmFsdWUpIHtcbiAgICAgICAgdGhpcy5oYXNfcGF5bWVudF9hZ2VudF9zZWFyY2hfd2FybmluZyA9IHZhbHVlO1xuICAgIH1cblxuICAgIG9uQ2hhbmdlUGF5bWVudE1ldGhvZCh7IHRhcmdldCB9KSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGFyZ2V0LnZhbHVlID09PSAnMCcgPyBwYXJzZUludCh0YXJnZXQudmFsdWUpIDogdGFyZ2V0LnZhbHVlO1xuICAgICAgICB0aGlzLnNlbGVjdGVkX2JhbmsgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5maWx0ZXJQYXltZW50QWdlbnRMaXN0KHZhbHVlKTtcbiAgICB9XG5cbiAgICBzZXRJc1dpdGhkcmF3KGlzX3dpdGhkcmF3ID0gIXRoaXMuaXNfd2l0aGRyYXcpIHtcbiAgICAgICAgdGhpcy5pc193aXRoZHJhdyA9IGlzX3dpdGhkcmF3O1xuICAgIH1cblxuICAgIHNldElzVHJ5V2l0aGRyYXdTdWNjZXNzZnVsKGlzX3RyeV93aXRoZHJhd19zdWNjZXNzZnVsKSB7XG4gICAgICAgIHRoaXMuZXJyb3Iuc2V0RXJyb3JNZXNzYWdlKCcnKTtcbiAgICAgICAgdGhpcy5pc190cnlfd2l0aGRyYXdfc3VjY2Vzc2Z1bCA9IGlzX3RyeV93aXRoZHJhd19zdWNjZXNzZnVsO1xuICAgIH1cblxuICAgIHNldElzV2l0aGRyYXdTdWNjZXNzZnVsKGlzX3dpdGhkcmF3X3N1Y2Nlc3NmdWwpIHtcbiAgICAgICAgdGhpcy5pc193aXRoZHJhd19zdWNjZXNzZnVsID0gaXNfd2l0aGRyYXdfc3VjY2Vzc2Z1bDtcbiAgICB9XG5cbiAgICBzZXRDb25maXJtYXRpb24oeyBhbW91bnQsIGN1cnJlbmN5LCBsb2dpbmlkLCBwYXltZW50X2FnZW50X25hbWUgfSkge1xuICAgICAgICB0aGlzLmNvbmZpcm0gPSB7XG4gICAgICAgICAgICBhbW91bnQsXG4gICAgICAgICAgICBjdXJyZW5jeSxcbiAgICAgICAgICAgIGxvZ2luaWQsXG4gICAgICAgICAgICBwYXltZW50X2FnZW50X25hbWUsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc2V0UmVjZWlwdCh7XG4gICAgICAgIGFtb3VudF90cmFuc2ZlcnJlZCxcbiAgICAgICAgcGF5bWVudF9hZ2VudF9lbWFpbCxcbiAgICAgICAgcGF5bWVudF9hZ2VudF9pZCxcbiAgICAgICAgcGF5bWVudF9hZ2VudF9uYW1lLFxuICAgICAgICBwYXltZW50X2FnZW50X3Bob25lLFxuICAgICAgICBwYXltZW50X2FnZW50X3VybCxcbiAgICB9KSB7XG4gICAgICAgIHRoaXMucmVjZWlwdCA9IHtcbiAgICAgICAgICAgIGFtb3VudF90cmFuc2ZlcnJlZCxcbiAgICAgICAgICAgIHBheW1lbnRfYWdlbnRfZW1haWwsXG4gICAgICAgICAgICBwYXltZW50X2FnZW50X2lkLFxuICAgICAgICAgICAgcGF5bWVudF9hZ2VudF9uYW1lLFxuICAgICAgICAgICAgcGF5bWVudF9hZ2VudF9waG9uZSxcbiAgICAgICAgICAgIHBheW1lbnRfYWdlbnRfdXJsLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFkZFBheW1lbnRBZ2VudChwYXltZW50X2FnZW50KSB7XG4gICAgICAgIHRoaXMuYWdlbnRzLnB1c2goe1xuICAgICAgICAgICAgdGV4dDogcGF5bWVudF9hZ2VudC5uYW1lLFxuICAgICAgICAgICAgdmFsdWU6IHBheW1lbnRfYWdlbnQucGF5bWVudGFnZW50X2xvZ2luaWQsXG4gICAgICAgICAgICBtYXhfd2l0aGRyYXdhbDogcGF5bWVudF9hZ2VudC5tYXhfd2l0aGRyYXdhbCxcbiAgICAgICAgICAgIG1pbl93aXRoZHJhd2FsOiBwYXltZW50X2FnZW50Lm1pbl93aXRoZHJhd2FsLFxuICAgICAgICAgICAgZW1haWw6IHBheW1lbnRfYWdlbnQuZW1haWwsXG4gICAgICAgICAgICBwaG9uZTogcGF5bWVudF9hZ2VudC5waG9uZV9udW1iZXJzLFxuICAgICAgICAgICAgdXJsOiBwYXltZW50X2FnZW50LnVybHMsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIG9uTW91bnRQYXltZW50QWdlbnRXaXRoZHJhdygpIHtcbiAgICAgICAgY29uc3QgeyBjb21tb24sIG1vZHVsZXMgfSA9IHRoaXMucm9vdF9zdG9yZTtcbiAgICAgICAgY29uc3QgeyBzZXRMb2FkaW5nLCBvbk1vdW50Q29tbW9uIH0gPSBtb2R1bGVzLmNhc2hpZXIuZ2VuZXJhbF9zdG9yZTtcblxuICAgICAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgICAgICB0aGlzLm9uUmVtb3VudCA9IHRoaXMub25Nb3VudFBheW1lbnRBZ2VudFdpdGhkcmF3O1xuICAgICAgICBvbk1vdW50Q29tbW9uKCk7XG5cbiAgICAgICAgdGhpcy5zZXRJc1dpdGhkcmF3KHRydWUpO1xuICAgICAgICB0aGlzLnNldElzV2l0aGRyYXdTdWNjZXNzZnVsKGZhbHNlKTtcbiAgICAgICAgdGhpcy5zZXRSZWNlaXB0KHt9KTtcblxuICAgICAgICBpZiAoIXRoaXMuYWdlbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgcGF5bWVudF9hZ2VudF9saXN0ID0gYXdhaXQgdGhpcy5nZXRQYXltZW50QWdlbnRMaXN0KCk7XG4gICAgICAgICAgICBwYXltZW50X2FnZW50X2xpc3QucGF5bWVudGFnZW50X2xpc3QubGlzdC5mb3JFYWNoKHBheW1lbnRfYWdlbnQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkUGF5bWVudEFnZW50KHBheW1lbnRfYWdlbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgIXBheW1lbnRfYWdlbnRfbGlzdC5wYXltZW50YWdlbnRfbGlzdC5saXN0Lmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5lbmRzV2l0aChyb3V0ZXMuY2FzaGllcl9wYSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGNvbW1vbi5yb3V0ZVRvKHJvdXRlcy5jYXNoaWVyX2RlcG9zaXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgIH1cblxuICAgIGFzeW5jIHJlcXVlc3RUcnlQYXltZW50QWdlbnRXaXRoZHJhdyh7IGxvZ2luaWQsIGN1cnJlbmN5LCBhbW91bnQsIHZlcmlmaWNhdGlvbl9jb2RlIH0pIHtcbiAgICAgICAgdGhpcy5lcnJvci5zZXRFcnJvck1lc3NhZ2UoJycpO1xuICAgICAgICBjb25zdCBwYXltZW50X2FnZW50X3dpdGhkcmF3ID0gYXdhaXQgdGhpcy5XUy5hdXRob3JpemVkLnBheW1lbnRBZ2VudFdpdGhkcmF3KHtcbiAgICAgICAgICAgIGxvZ2luaWQsXG4gICAgICAgICAgICBjdXJyZW5jeSxcbiAgICAgICAgICAgIGFtb3VudCxcbiAgICAgICAgICAgIHZlcmlmaWNhdGlvbl9jb2RlLFxuICAgICAgICAgICAgZHJ5X3J1bjogMSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICgrcGF5bWVudF9hZ2VudF93aXRoZHJhdy5wYXltZW50YWdlbnRfd2l0aGRyYXcgPT09IDIpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkX2FnZW50ID0gdGhpcy5hZ2VudHMuZmluZChhZ2VudCA9PiBhZ2VudC52YWx1ZSA9PT0gbG9naW5pZCk7XG4gICAgICAgICAgICB0aGlzLnNldENvbmZpcm1hdGlvbih7XG4gICAgICAgICAgICAgICAgYW1vdW50LFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5LFxuICAgICAgICAgICAgICAgIGxvZ2luaWQsXG4gICAgICAgICAgICAgICAgcGF5bWVudF9hZ2VudF9uYW1lOiBzZWxlY3RlZF9hZ2VudD8udGV4dCB8fCBwYXltZW50X2FnZW50X3dpdGhkcmF3LnBheW1lbnRhZ2VudF9uYW1lLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNldElzVHJ5V2l0aGRyYXdTdWNjZXNzZnVsKHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lcnJvci5zZXRFcnJvck1lc3NhZ2UocGF5bWVudF9hZ2VudF93aXRoZHJhdy5lcnJvciwgdGhpcy5yZXNldFBheW1lbnRBZ2VudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXNldFBheW1lbnRBZ2VudCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgeyBjbGllbnQsIG1vZHVsZXMgfSA9IHRoaXMucm9vdF9zdG9yZTtcbiAgICAgICAgY29uc3QgeyBhY3RpdmVfY29udGFpbmVyIH0gPSBtb2R1bGVzLmNhc2hpZXIuZ2VuZXJhbF9zdG9yZTtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gQ29uc3RhbnRzLm1hcF9hY3Rpb25bYWN0aXZlX2NvbnRhaW5lcl07XG5cbiAgICAgICAgY2xpZW50LnNldFZlcmlmaWNhdGlvbkNvZGUoJycsIGNvbnRhaW5lcik7XG4gICAgICAgIHRoaXMuZXJyb3Iuc2V0RXJyb3JNZXNzYWdlKCcnKTtcbiAgICAgICAgdGhpcy5zZXRJc1dpdGhkcmF3KGZhbHNlKTtcbiAgICAgICAgdGhpcy5zZXRJc1dpdGhkcmF3U3VjY2Vzc2Z1bChmYWxzZSk7XG4gICAgICAgIHRoaXMuc2V0SXNUcnlXaXRoZHJhd1N1Y2Nlc3NmdWwoZmFsc2UpO1xuICAgICAgICB0aGlzLnNldEFjdGl2ZVRhYkluZGV4KDApO1xuICAgIH07XG5cbiAgICBhc3luYyBvbk1vdW50UGF5bWVudEFnZW50TGlzdCgpIHtcbiAgICAgICAgY29uc3QgeyBzZXRMb2FkaW5nLCBvbk1vdW50Q29tbW9uIH0gPSB0aGlzLnJvb3Rfc3RvcmUubW9kdWxlcy5jYXNoaWVyLmdlbmVyYWxfc3RvcmU7XG5cbiAgICAgICAgc2V0TG9hZGluZyh0cnVlKTtcbiAgICAgICAgdGhpcy5vblJlbW91bnQgPSB0aGlzLm9uTW91bnRQYXltZW50QWdlbnRMaXN0O1xuICAgICAgICBhd2FpdCBvbk1vdW50Q29tbW9uKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuZ2V0UGF5bWVudEFnZW50TGlzdCgpO1xuXG4gICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgIH1cblxuICAgIGFzeW5jIGdldEFsbFBheW1lbnRBZ2VudExpc3QoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuV1Mud2FpdCgnZ2V0X3NldHRpbmdzJyk7XG4gICAgICAgIHJldHVybiB0aGlzLldTLmFsbFBheW1lbnRBZ2VudExpc3QodGhpcy5yb290X3N0b3JlLmNsaWVudC5yZXNpZGVuY2UpO1xuICAgIH1cblxuICAgIHNldEFsbFBheW1lbnRBZ2VudExpc3QobGlzdCkge1xuICAgICAgICB0aGlzLmFsbF9wYXltZW50X2FnZW50X2xpc3QgPSBsaXN0O1xuICAgIH1cblxuICAgIGdldCBpc19wYXltZW50X2FnZW50X3Zpc2libGVfaW5fb25ib2FyZGluZygpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5hbGxfcGF5bWVudF9hZ2VudF9saXN0Py5wYXltZW50YWdlbnRfbGlzdD8ubGlzdD8ubGVuZ3RoO1xuICAgIH1cblxuICAgIGFzeW5jIHJlcXVlc3RQYXltZW50QWdlbnRXaXRoZHJhdyh7IGxvZ2luaWQsIGN1cnJlbmN5LCBhbW91bnQsIHZlcmlmaWNhdGlvbl9jb2RlIH0pIHtcbiAgICAgICAgdGhpcy5lcnJvci5zZXRFcnJvck1lc3NhZ2UoJycpO1xuICAgICAgICBjb25zdCBwYXltZW50X2FnZW50X3dpdGhkcmF3ID0gYXdhaXQgdGhpcy5XUy5hdXRob3JpemVkLnBheW1lbnRBZ2VudFdpdGhkcmF3KHtcbiAgICAgICAgICAgIGxvZ2luaWQsXG4gICAgICAgICAgICBjdXJyZW5jeSxcbiAgICAgICAgICAgIGFtb3VudCxcbiAgICAgICAgICAgIHZlcmlmaWNhdGlvbl9jb2RlLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCtwYXltZW50X2FnZW50X3dpdGhkcmF3LnBheW1lbnRhZ2VudF93aXRoZHJhdyA9PT0gMSkge1xuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRfYWdlbnQgPSB0aGlzLmFnZW50cy5maW5kKGFnZW50ID0+IGFnZW50LnZhbHVlID09PSBsb2dpbmlkKTtcbiAgICAgICAgICAgIHRoaXMuc2V0UmVjZWlwdCh7XG4gICAgICAgICAgICAgICAgYW1vdW50X3RyYW5zZmVycmVkOiBmb3JtYXRNb25leShjdXJyZW5jeSwgYW1vdW50LCB0cnVlKSxcbiAgICAgICAgICAgICAgICAuLi4oc2VsZWN0ZWRfYWdlbnQgJiYge1xuICAgICAgICAgICAgICAgICAgICBwYXltZW50X2FnZW50X2VtYWlsOiBzZWxlY3RlZF9hZ2VudC5lbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudF9hZ2VudF9pZDogc2VsZWN0ZWRfYWdlbnQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHBheW1lbnRfYWdlbnRfbmFtZTogc2VsZWN0ZWRfYWdlbnQudGV4dCxcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudF9hZ2VudF9waG9uZTogc2VsZWN0ZWRfYWdlbnQucGhvbmUsXG4gICAgICAgICAgICAgICAgICAgIHBheW1lbnRfYWdlbnRfdXJsOiBzZWxlY3RlZF9hZ2VudC51cmwsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc2V0SXNXaXRoZHJhd1N1Y2Nlc3NmdWwodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLnNldElzVHJ5V2l0aGRyYXdTdWNjZXNzZnVsKGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Q29uZmlybWF0aW9uKHt9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3Iuc2V0RXJyb3JNZXNzYWdlKHBheW1lbnRfYWdlbnRfd2l0aGRyYXcuZXJyb3IsIHRoaXMucmVzZXRQYXltZW50QWdlbnQpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgYWN0aW9uLCBjb21wdXRlZCwgb2JzZXJ2YWJsZSwgbWFrZU9ic2VydmFibGUgfSBmcm9tICdtb2J4JztcbmltcG9ydCB7IHJvdXRlcyB9IGZyb20gJ0BkZXJpdi9zaGFyZWQnO1xuaW1wb3J0IENvbnN0YW50cyBmcm9tICdDb25zdGFudHMvY29uc3RhbnRzJztcbmltcG9ydCBFcnJvclN0b3JlIGZyb20gJy4vZXJyb3Itc3RvcmUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50QWdlbnRUcmFuc2ZlclN0b3JlIHtcbiAgICBjb25zdHJ1Y3Rvcih7IFdTLCByb290X3N0b3JlIH0pIHtcbiAgICAgICAgbWFrZU9ic2VydmFibGUodGhpcywge1xuICAgICAgICAgICAgY29udGFpbmVyOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgZXJyb3I6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBpc19wYXltZW50X2FnZW50OiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgaXNfdHJ5X3RyYW5zZmVyX3N1Y2Nlc3NmdWw6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBpc190cmFuc2Zlcl9zdWNjZXNzZnVsOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgY29uZmlybTogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIHJlY2VpcHQ6IG9ic2VydmFibGUsXG4gICAgICAgICAgICB0cmFuc2Zlcl9saW1pdDogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGlzX3BheW1lbnRfYWdlbnRfdHJhbnNmZXJfdmlzaWJsZTogY29tcHV0ZWQsXG4gICAgICAgICAgICBzZXRJc1BheW1lbnRBZ2VudDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0SXNUcnlUcmFuc2ZlclN1Y2Nlc3NmdWw6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldElzVHJhbnNmZXJTdWNjZXNzZnVsOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRDb25maXJtYXRpb25QYXltZW50QWdlbnRUcmFuc2ZlcjogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0UmVjZWlwdFBheW1lbnRBZ2VudFRyYW5zZmVyOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRNaW5NYXhQYXltZW50QWdlbnRUcmFuc2ZlcjogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgb25Nb3VudFBheW1lbnRBZ2VudFRyYW5zZmVyOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICByZXF1ZXN0VHJ5UGF5bWVudEFnZW50VHJhbnNmZXI6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHJlcXVlc3RQYXltZW50QWdlbnRUcmFuc2ZlcjogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgcmVzZXRQYXltZW50QWdlbnRUcmFuc2ZlcjogYWN0aW9uLmJvdW5kLFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnJvb3Rfc3RvcmUgPSByb290X3N0b3JlO1xuICAgICAgICB0aGlzLldTID0gV1M7XG4gICAgfVxuXG4gICAgY29udGFpbmVyID0gQ29uc3RhbnRzLmNvbnRhaW5lcnMucGF5bWVudF9hZ2VudF90cmFuc2ZlcjtcbiAgICBlcnJvciA9IG5ldyBFcnJvclN0b3JlKCk7XG4gICAgaXNfcGF5bWVudF9hZ2VudCA9IGZhbHNlO1xuICAgIGlzX3RyeV90cmFuc2Zlcl9zdWNjZXNzZnVsID0gZmFsc2U7XG4gICAgaXNfdHJhbnNmZXJfc3VjY2Vzc2Z1bCA9IGZhbHNlO1xuICAgIGNvbmZpcm0gPSB7fTtcbiAgICByZWNlaXB0ID0ge307XG4gICAgdHJhbnNmZXJfbGltaXQgPSB7fTtcblxuICAgIGdldCBpc19wYXltZW50X2FnZW50X3RyYW5zZmVyX3Zpc2libGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzX3BheW1lbnRfYWdlbnQ7XG4gICAgfVxuXG4gICAgYXN5bmMgY2hlY2tJc1BheW1lbnRBZ2VudCgpIHtcbiAgICAgICAgY29uc3QgZ2V0X3NldHRpbmdzID0gKGF3YWl0IHRoaXMuV1MuYXV0aG9yaXplZC5zdG9yYWdlLmdldFNldHRpbmdzKCkpLmdldF9zZXR0aW5ncztcbiAgICAgICAgdGhpcy5zZXRJc1BheW1lbnRBZ2VudChnZXRfc2V0dGluZ3M/LmlzX2F1dGhlbnRpY2F0ZWRfcGF5bWVudF9hZ2VudCA/PyBmYWxzZSk7XG4gICAgfVxuXG4gICAgc2V0SXNQYXltZW50QWdlbnQoaXNfcGF5bWVudF9hZ2VudCkge1xuICAgICAgICBpZiAoIWlzX3BheW1lbnRfYWdlbnQgJiYgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLmVuZHNXaXRoKHJvdXRlcy5jYXNoaWVyX3BhX3RyYW5zZmVyKSkge1xuICAgICAgICAgICAgdGhpcy5yb290X3N0b3JlLmNvbW1vbi5yb3V0ZVRvKHJvdXRlcy5jYXNoaWVyX2RlcG9zaXQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNfcGF5bWVudF9hZ2VudCA9ICEhaXNfcGF5bWVudF9hZ2VudDtcbiAgICB9XG5cbiAgICBzZXRJc1RyeVRyYW5zZmVyU3VjY2Vzc2Z1bChpc190cnlfdHJhbnNmZXJfc3VjY2Vzc2Z1bCkge1xuICAgICAgICB0aGlzLmVycm9yLnNldEVycm9yTWVzc2FnZSgnJyk7XG4gICAgICAgIHRoaXMuaXNfdHJ5X3RyYW5zZmVyX3N1Y2Nlc3NmdWwgPSBpc190cnlfdHJhbnNmZXJfc3VjY2Vzc2Z1bDtcbiAgICB9XG5cbiAgICBzZXRJc1RyYW5zZmVyU3VjY2Vzc2Z1bChpc190cmFuc2Zlcl9zdWNjZXNzZnVsKSB7XG4gICAgICAgIHRoaXMuaXNfdHJhbnNmZXJfc3VjY2Vzc2Z1bCA9IGlzX3RyYW5zZmVyX3N1Y2Nlc3NmdWw7XG4gICAgfVxuXG4gICAgc2V0Q29uZmlybWF0aW9uUGF5bWVudEFnZW50VHJhbnNmZXIoeyBhbW91bnQsIGNsaWVudF9pZCwgY2xpZW50X25hbWUsIGRlc2NyaXB0aW9uIH0pIHtcbiAgICAgICAgdGhpcy5jb25maXJtID0ge1xuICAgICAgICAgICAgYW1vdW50LFxuICAgICAgICAgICAgY2xpZW50X2lkLFxuICAgICAgICAgICAgY2xpZW50X25hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBzZXRSZWNlaXB0UGF5bWVudEFnZW50VHJhbnNmZXIoeyBhbW91bnRfdHJhbnNmZXJyZWQsIGNsaWVudF9pZCwgY2xpZW50X25hbWUgfSkge1xuICAgICAgICB0aGlzLnJlY2VpcHQgPSB7XG4gICAgICAgICAgICBhbW91bnRfdHJhbnNmZXJyZWQsXG4gICAgICAgICAgICBjbGllbnRfaWQsXG4gICAgICAgICAgICBjbGllbnRfbmFtZSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRDdXJyZW50UGF5bWVudEFnZW50KHJlc3BvbnNlX3BheW1lbnRfYWdlbnQpIHtcbiAgICAgICAgY29uc3QgeyBjbGllbnQsIG1vZHVsZXMgfSA9IHRoaXMucm9vdF9zdG9yZTtcbiAgICAgICAgY29uc3QgcGF5bWVudF9hZ2VudF9saXN0ZWQgPSByZXNwb25zZV9wYXltZW50X2FnZW50LnBheW1lbnRhZ2VudF9saXN0Lmxpc3QuZmluZChcbiAgICAgICAgICAgIGFnZW50ID0+IGFnZW50LnBheW1lbnRhZ2VudF9sb2dpbmlkID09PSBjbGllbnQubG9naW5pZFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBjdXJyZW50X3BheW1lbnRfYWdlbnQgPVxuICAgICAgICAgICAgcGF5bWVudF9hZ2VudF9saXN0ZWQgfHwgKGF3YWl0IG1vZHVsZXMuY2FzaGllci5wYXltZW50X2FnZW50LmdldFBheW1lbnRBZ2VudERldGFpbHMoKSk7XG4gICAgICAgIHJldHVybiBjdXJyZW50X3BheW1lbnRfYWdlbnQgPz8ge307XG4gICAgfVxuXG4gICAgc2V0TWluTWF4UGF5bWVudEFnZW50VHJhbnNmZXIoeyBtaW5fd2l0aGRyYXdhbCwgbWF4X3dpdGhkcmF3YWwgfSkge1xuICAgICAgICB0aGlzLnRyYW5zZmVyX2xpbWl0ID0ge1xuICAgICAgICAgICAgbWluOiBtaW5fd2l0aGRyYXdhbCxcbiAgICAgICAgICAgIG1heDogbWF4X3dpdGhkcmF3YWwsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYXN5bmMgb25Nb3VudFBheW1lbnRBZ2VudFRyYW5zZmVyKCkge1xuICAgICAgICBjb25zdCB7IGdlbmVyYWxfc3RvcmUsIHBheW1lbnRfYWdlbnQgfSA9IHRoaXMucm9vdF9zdG9yZS5tb2R1bGVzLmNhc2hpZXI7XG5cbiAgICAgICAgZ2VuZXJhbF9zdG9yZS5zZXRMb2FkaW5nKHRydWUpO1xuICAgICAgICB0aGlzLm9uUmVtb3VudCA9IHRoaXMub25Nb3VudFBheW1lbnRBZ2VudFRyYW5zZmVyO1xuICAgICAgICBhd2FpdCBnZW5lcmFsX3N0b3JlLm9uTW91bnRDb21tb24oKTtcbiAgICAgICAgaWYgKCF0aGlzLnRyYW5zZmVyX2xpbWl0Lm1pbl93aXRoZHJhd2FsKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHBheW1lbnRfYWdlbnQuZ2V0UGF5bWVudEFnZW50TGlzdCgpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudF9wYXltZW50X2FnZW50ID0gYXdhaXQgdGhpcy5nZXRDdXJyZW50UGF5bWVudEFnZW50KHJlc3BvbnNlKTtcbiAgICAgICAgICAgIHRoaXMuc2V0TWluTWF4UGF5bWVudEFnZW50VHJhbnNmZXIoY3VycmVudF9wYXltZW50X2FnZW50KTtcbiAgICAgICAgfVxuICAgICAgICBnZW5lcmFsX3N0b3JlLnNldExvYWRpbmcoZmFsc2UpO1xuICAgIH1cblxuICAgIHJlcXVlc3RUcnlQYXltZW50QWdlbnRUcmFuc2ZlciA9IGFzeW5jICh7IGFtb3VudCwgY3VycmVuY3ksIGRlc2NyaXB0aW9uLCB0cmFuc2Zlcl90byB9KSA9PiB7XG4gICAgICAgIHRoaXMuZXJyb3Iuc2V0RXJyb3JNZXNzYWdlKCcnKTtcbiAgICAgICAgY29uc3QgcGF5bWVudF9hZ2VudF90cmFuc2ZlciA9IGF3YWl0IHRoaXMuV1MuYXV0aG9yaXplZC5wYXltZW50QWdlbnRUcmFuc2Zlcih7XG4gICAgICAgICAgICBhbW91bnQsXG4gICAgICAgICAgICBjdXJyZW5jeSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgdHJhbnNmZXJfdG8sXG4gICAgICAgICAgICBkcnlfcnVuOiAxLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCtwYXltZW50X2FnZW50X3RyYW5zZmVyLnBheW1lbnRhZ2VudF90cmFuc2ZlciA9PT0gMikge1xuICAgICAgICAgICAgLy8gc2hvdyBjb25maXJtYXRpb24gc2NyZWVuXG4gICAgICAgICAgICB0aGlzLnNldENvbmZpcm1hdGlvblBheW1lbnRBZ2VudFRyYW5zZmVyKHtcbiAgICAgICAgICAgICAgICBjbGllbnRfaWQ6IHRyYW5zZmVyX3RvLFxuICAgICAgICAgICAgICAgIGNsaWVudF9uYW1lOiBwYXltZW50X2FnZW50X3RyYW5zZmVyLmNsaWVudF90b19mdWxsX25hbWUsXG4gICAgICAgICAgICAgICAgYW1vdW50LFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNldElzVHJ5VHJhbnNmZXJTdWNjZXNzZnVsKHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lcnJvci5zZXRFcnJvck1lc3NhZ2UocGF5bWVudF9hZ2VudF90cmFuc2Zlci5lcnJvciwgdGhpcy5yZXNldFBheW1lbnRBZ2VudFRyYW5zZmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwYXltZW50X2FnZW50X3RyYW5zZmVyO1xuICAgIH07XG5cbiAgICByZXF1ZXN0UGF5bWVudEFnZW50VHJhbnNmZXIgPSBhc3luYyAoeyBhbW91bnQsIGN1cnJlbmN5LCBkZXNjcmlwdGlvbiwgdHJhbnNmZXJfdG8gfSkgPT4ge1xuICAgICAgICB0aGlzLmVycm9yLnNldEVycm9yTWVzc2FnZSgnJyk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRfYWdlbnRfdHJhbnNmZXIgPSBhd2FpdCB0aGlzLldTLmF1dGhvcml6ZWQucGF5bWVudEFnZW50VHJhbnNmZXIoe1xuICAgICAgICAgICAgYW1vdW50LFxuICAgICAgICAgICAgY3VycmVuY3ksXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHRyYW5zZmVyX3RvLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCtwYXltZW50X2FnZW50X3RyYW5zZmVyLnBheW1lbnRhZ2VudF90cmFuc2ZlciA9PT0gMSkge1xuICAgICAgICAgICAgdGhpcy5zZXRSZWNlaXB0UGF5bWVudEFnZW50VHJhbnNmZXIoe1xuICAgICAgICAgICAgICAgIGFtb3VudF90cmFuc2ZlcnJlZDogYW1vdW50LFxuICAgICAgICAgICAgICAgIGNsaWVudF9pZDogdHJhbnNmZXJfdG8sXG4gICAgICAgICAgICAgICAgY2xpZW50X25hbWU6IHBheW1lbnRfYWdlbnRfdHJhbnNmZXIuY2xpZW50X3RvX2Z1bGxfbmFtZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zZXRJc1RyYW5zZmVyU3VjY2Vzc2Z1bCh0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuc2V0SXNUcnlUcmFuc2ZlclN1Y2Nlc3NmdWwoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5zZXRDb25maXJtYXRpb25QYXltZW50QWdlbnRUcmFuc2Zlcih7fSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yLnNldEVycm9yTWVzc2FnZShwYXltZW50X2FnZW50X3RyYW5zZmVyLmVycm9yLCB0aGlzLnJlc2V0UGF5bWVudEFnZW50VHJhbnNmZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHBheW1lbnRfYWdlbnRfdHJhbnNmZXI7XG4gICAgfTtcblxuICAgIHJlc2V0UGF5bWVudEFnZW50VHJhbnNmZXIgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0SXNUcmFuc2ZlclN1Y2Nlc3NmdWwoZmFsc2UpO1xuICAgICAgICB0aGlzLmVycm9yLnNldEVycm9yTWVzc2FnZSgnJyk7XG4gICAgfTtcbn1cbiIsImltcG9ydCB7IGFjdGlvbiwgb2JzZXJ2YWJsZSwgbWFrZU9ic2VydmFibGUgfSBmcm9tICdtb2J4JztcbmltcG9ydCB7IGlzQ3J5cHRvY3VycmVuY3kgfSBmcm9tICdAZGVyaXYvc2hhcmVkJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVHJhbnNhY3Rpb25IaXN0b3J5U3RvcmUge1xuICAgIGNvbnN0cnVjdG9yKHsgV1MsIHJvb3Rfc3RvcmUgfSkge1xuICAgICAgICBtYWtlT2JzZXJ2YWJsZSh0aGlzLCB7XG4gICAgICAgICAgICBjcnlwdG9fdHJhbnNhY3Rpb25zOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgaXNfY3J5cHRvX3RyYW5zYWN0aW9uc19jYW5jZWxfbW9kYWxfdmlzaWJsZTogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGlzX2NyeXB0b190cmFuc2FjdGlvbnNfc3RhdHVzX21vZGFsX3Zpc2libGU6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBpc19jcnlwdG9fdHJhbnNhY3Rpb25zX3Zpc2libGU6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBpc19sb2FkaW5nOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgc2VsZWN0ZWRfY3J5cHRvX3RyYW5zYWN0aW9uX2lkOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgc2VsZWN0ZWRfY3J5cHRvX3N0YXR1czogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIHNlbGVjdGVkX2NyeXB0b19zdGF0dXNfZGVzY3JpcHRpb246IG9ic2VydmFibGUsXG4gICAgICAgICAgICBvbk1vdW50OiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICB1bnN1YnNjcmliZUNyeXB0b1RyYW5zYWN0aW9uczogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgZ2V0Q3J5cHRvVHJhbnNhY3Rpb25zOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRDcnlwdG9UcmFuc2FjdGlvbnNIaXN0b3J5OiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICB1cGRhdGVDcnlwdG9UcmFuc2FjdGlvbnM6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNvcnRDcnlwdG9UcmFuc2FjdGlvbnM6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIGNhbmNlbENyeXB0b1RyYW5zYWN0aW9uOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRTZWxlY3RlZENyeXB0b1RyYW5zYWN0aW9uSWQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldElzQ3J5cHRvVHJhbnNhY3Rpb25zQ2FuY2VsTW9kYWxWaXNpYmxlOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzaG93Q3J5cHRvVHJhbnNhY3Rpb25zQ2FuY2VsTW9kYWw6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIGhpZGVDcnlwdG9UcmFuc2FjdGlvbnNDYW5jZWxNb2RhbDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0U2VsZWN0ZWRDcnlwdG9TdGF0dXM6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldFNlbGVjdGVkQ3J5cHRvU3RhdHVzRGVzY3JpcHRpb246IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldElzQ3J5cHRvVHJhbnNhY3Rpb25zU3RhdHVzTW9kYWxWaXNpYmxlOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzaG93Q3J5cHRvVHJhbnNhY3Rpb25zU3RhdHVzTW9kYWw6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIGhpZGVDcnlwdG9UcmFuc2FjdGlvbnNTdGF0dXNNb2RhbDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0TG9hZGluZzogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0SXNDcnlwdG9UcmFuc2FjdGlvbnNWaXNpYmxlOiBhY3Rpb24uYm91bmQsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMucm9vdF9zdG9yZSA9IHJvb3Rfc3RvcmU7XG4gICAgICAgIHRoaXMuV1MgPSBXUztcbiAgICB9XG4gICAgY3J5cHRvX3RyYW5zYWN0aW9ucyA9IFtdO1xuICAgIGlzX2NyeXB0b190cmFuc2FjdGlvbnNfY2FuY2VsX21vZGFsX3Zpc2libGUgPSBmYWxzZTtcbiAgICBpc19jcnlwdG9fdHJhbnNhY3Rpb25zX3N0YXR1c19tb2RhbF92aXNpYmxlID0gZmFsc2U7XG4gICAgaXNfY3J5cHRvX3RyYW5zYWN0aW9uc192aXNpYmxlID0gZmFsc2U7XG4gICAgaXNfbG9hZGluZyA9IGZhbHNlO1xuICAgIHNlbGVjdGVkX2NyeXB0b190cmFuc2FjdGlvbl9pZCA9ICcnO1xuICAgIHNlbGVjdGVkX2NyeXB0b19zdGF0dXMgPSAnJztcbiAgICBzZWxlY3RlZF9jcnlwdG9fc3RhdHVzX2Rlc2NyaXB0aW9uID0gJyc7XG5cbiAgICBhc3luYyBvbk1vdW50KCkge1xuICAgICAgICBjb25zdCB7IGN1cnJlbmN5LCBzd2l0Y2hlZCB9ID0gdGhpcy5yb290X3N0b3JlLmNsaWVudDtcbiAgICAgICAgY29uc3QgaXNfY3J5cHRvID0gISFjdXJyZW5jeSAmJiBpc0NyeXB0b2N1cnJlbmN5KGN1cnJlbmN5KTtcblxuICAgICAgICBpZiAoaXNfY3J5cHRvICYmICFzd2l0Y2hlZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRMb2FkaW5nKHRydWUpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy51bnN1YnNjcmliZUNyeXB0b1RyYW5zYWN0aW9ucygpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRDcnlwdG9UcmFuc2FjdGlvbnMoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyB1bnN1YnNjcmliZUNyeXB0b1RyYW5zYWN0aW9ucygpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5XUy5hdXRob3JpemVkLmNhc2hpZXJQYXltZW50cyh7IHByb3ZpZGVyOiAnY3J5cHRvJywgdHJhbnNhY3Rpb25fdHlwZTogJ2FsbCcgfSkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBjcnlwdG8gfSA9IHJlc3BvbnNlLmNhc2hpZXJfcGF5bWVudHM7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDcnlwdG9UcmFuc2FjdGlvbnNIaXN0b3J5KGNyeXB0byk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIGdldENyeXB0b1RyYW5zYWN0aW9ucygpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5XUy5zdWJzY3JpYmVDYXNoaWVyUGF5bWVudHMocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5lcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgY3J5cHRvIH0gPSByZXNwb25zZS5jYXNoaWVyX3BheW1lbnRzO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ3J5cHRvVHJhbnNhY3Rpb25zKGNyeXB0byk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNldENyeXB0b1RyYW5zYWN0aW9uc0hpc3RvcnkodHJhbnNhY3Rpb25zKSB7XG4gICAgICAgIHRoaXMuY3J5cHRvX3RyYW5zYWN0aW9ucyA9IHRyYW5zYWN0aW9ucztcbiAgICAgICAgdGhpcy5zb3J0Q3J5cHRvVHJhbnNhY3Rpb25zKCk7XG4gICAgfVxuXG4gICAgdXBkYXRlQ3J5cHRvVHJhbnNhY3Rpb25zKHRyYW5zYWN0aW9ucykge1xuICAgICAgICB0cmFuc2FjdGlvbnMuZm9yRWFjaCh0cmFuc2FjdGlvbiA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuY3J5cHRvX3RyYW5zYWN0aW9ucy5maW5kSW5kZXgoY3J5cHRvID0+IGNyeXB0by5pZCA9PT0gdHJhbnNhY3Rpb24uaWQpO1xuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3J5cHRvX3RyYW5zYWN0aW9ucy5wdXNoKHRyYW5zYWN0aW9uKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmNyeXB0b190cmFuc2FjdGlvbnNbaW5kZXhdLCB0cmFuc2FjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNvcnRDcnlwdG9UcmFuc2FjdGlvbnMoKTtcbiAgICB9XG5cbiAgICBzb3J0Q3J5cHRvVHJhbnNhY3Rpb25zKCkge1xuICAgICAgICB0aGlzLmNyeXB0b190cmFuc2FjdGlvbnMucmVwbGFjZShcbiAgICAgICAgICAgIHRoaXMuY3J5cHRvX3RyYW5zYWN0aW9ucy5zbGljZSgpLnNvcnQoKGEsIGIpID0+IGIuc3VibWl0X2RhdGUgLSBhLnN1Ym1pdF9kYXRlKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGFzeW5jIGNhbmNlbENyeXB0b1RyYW5zYWN0aW9uKHRyYW5zYWN0aW9uX2lkKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuV1MuY2FuY2VsQ3J5cHRvVHJhbnNhY3Rpb24odHJhbnNhY3Rpb25faWQpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5lcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRDcnlwdG9UcmFuc2FjdGlvbklkKCcnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldElzQ3J5cHRvVHJhbnNhY3Rpb25zQ2FuY2VsTW9kYWxWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXNwb25zZS5lcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNldFNlbGVjdGVkQ3J5cHRvVHJhbnNhY3Rpb25JZChpZCkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkX2NyeXB0b190cmFuc2FjdGlvbl9pZCA9IGlkO1xuICAgIH1cblxuICAgIHNldElzQ3J5cHRvVHJhbnNhY3Rpb25zQ2FuY2VsTW9kYWxWaXNpYmxlKGlzX3Zpc2libGUpIHtcbiAgICAgICAgdGhpcy5pc19jcnlwdG9fdHJhbnNhY3Rpb25zX2NhbmNlbF9tb2RhbF92aXNpYmxlID0gaXNfdmlzaWJsZTtcbiAgICB9XG5cbiAgICBzaG93Q3J5cHRvVHJhbnNhY3Rpb25zQ2FuY2VsTW9kYWwoaWQpIHtcbiAgICAgICAgdGhpcy5zZXRTZWxlY3RlZENyeXB0b1RyYW5zYWN0aW9uSWQoaWQpO1xuICAgICAgICB0aGlzLnNldElzQ3J5cHRvVHJhbnNhY3Rpb25zQ2FuY2VsTW9kYWxWaXNpYmxlKHRydWUpO1xuICAgIH1cblxuICAgIGhpZGVDcnlwdG9UcmFuc2FjdGlvbnNDYW5jZWxNb2RhbCgpIHtcbiAgICAgICAgdGhpcy5zZXRTZWxlY3RlZENyeXB0b1RyYW5zYWN0aW9uSWQoJycpO1xuICAgICAgICB0aGlzLnNldElzQ3J5cHRvVHJhbnNhY3Rpb25zQ2FuY2VsTW9kYWxWaXNpYmxlKGZhbHNlKTtcbiAgICB9XG5cbiAgICBzZXRTZWxlY3RlZENyeXB0b1N0YXR1cyhzdGF0dXMpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZF9jcnlwdG9fc3RhdHVzID0gc3RhdHVzO1xuICAgIH1cblxuICAgIHNldFNlbGVjdGVkQ3J5cHRvU3RhdHVzRGVzY3JpcHRpb24oZGVzY3JpcHRpb24pIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZF9jcnlwdG9fc3RhdHVzX2Rlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgfVxuXG4gICAgc2V0SXNDcnlwdG9UcmFuc2FjdGlvbnNTdGF0dXNNb2RhbFZpc2libGUoaXNfdmlzaWJsZSkge1xuICAgICAgICB0aGlzLmlzX2NyeXB0b190cmFuc2FjdGlvbnNfc3RhdHVzX21vZGFsX3Zpc2libGUgPSBpc192aXNpYmxlO1xuICAgIH1cblxuICAgIHNob3dDcnlwdG9UcmFuc2FjdGlvbnNTdGF0dXNNb2RhbChkZXNjcmlwdGlvbiwgbmFtZSkge1xuICAgICAgICB0aGlzLnNldFNlbGVjdGVkQ3J5cHRvU3RhdHVzRGVzY3JpcHRpb24oZGVzY3JpcHRpb24pO1xuICAgICAgICB0aGlzLnNldFNlbGVjdGVkQ3J5cHRvU3RhdHVzKG5hbWUpO1xuICAgICAgICB0aGlzLnNldElzQ3J5cHRvVHJhbnNhY3Rpb25zU3RhdHVzTW9kYWxWaXNpYmxlKHRydWUpO1xuICAgIH1cblxuICAgIGhpZGVDcnlwdG9UcmFuc2FjdGlvbnNTdGF0dXNNb2RhbCgpIHtcbiAgICAgICAgdGhpcy5zZXRJc0NyeXB0b1RyYW5zYWN0aW9uc1N0YXR1c01vZGFsVmlzaWJsZShmYWxzZSk7XG4gICAgfVxuXG4gICAgc2V0TG9hZGluZyhpc19sb2FkaW5nKSB7XG4gICAgICAgIHRoaXMuaXNfbG9hZGluZyA9IGlzX2xvYWRpbmc7XG4gICAgfVxuXG4gICAgc2V0SXNDcnlwdG9UcmFuc2FjdGlvbnNWaXNpYmxlKGlzX3Zpc2libGUpIHtcbiAgICAgICAgdGhpcy5pc19jcnlwdG9fdHJhbnNhY3Rpb25zX3Zpc2libGUgPSBpc192aXNpYmxlO1xuICAgIH1cbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBhY3Rpb24sIGNvbXB1dGVkLCBvYnNlcnZhYmxlLCBtYWtlT2JzZXJ2YWJsZSB9IGZyb20gJ21vYngnO1xuaW1wb3J0IHsgZm9ybWF0TW9uZXksIGdldERlY2ltYWxQbGFjZXMsIGdldE1pbldpdGhkcmF3YWwsIGlzTW9iaWxlLCB2YWxpZE51bWJlciB9IGZyb20gJ0BkZXJpdi9zaGFyZWQnO1xuaW1wb3J0IHsgbG9jYWxpemUgfSBmcm9tICdAZGVyaXYvdHJhbnNsYXRpb25zJztcbmltcG9ydCB7IFJlYWRNb3JlIH0gZnJvbSAnQGRlcml2L2NvbXBvbmVudHMnO1xuaW1wb3J0IENvbnN0YW50cyBmcm9tICdDb25zdGFudHMvY29uc3RhbnRzJztcbmltcG9ydCBFcnJvclN0b3JlIGZyb20gJy4vZXJyb3Itc3RvcmUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXaXRoZHJhd1N0b3JlIHtcbiAgICBjb25zdHJ1Y3Rvcih7IFdTLCByb290X3N0b3JlIH0pIHtcbiAgICAgICAgbWFrZU9ic2VydmFibGUodGhpcywge1xuICAgICAgICAgICAgYmxvY2tjaGFpbl9hZGRyZXNzOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgY29udGFpbmVyOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgZXJyb3I6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBpc18xMGtfd2l0aGRyYXdhbF9saW1pdF9yZWFjaGVkOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgaXNfd2l0aGRyYXdfY29uZmlybWVkOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgd2l0aGRyYXdfYW1vdW50OiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgbWF4X3dpdGhkcmF3X2Ftb3VudDogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGNyeXB0b19jb25maWc6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBzZXRJc1dpdGhkcmF3Q29uZmlybWVkOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRXaXRoZHJhd0Ftb3VudDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgcmVxdWVzdFdpdGhkcmF3OiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzYXZlV2l0aGRyYXc6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHJlc2V0V2l0aHJhd0Zvcm06IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldEJsb2NrY2hhaW5BZGRyZXNzOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBvbk1vdW50V2l0aGRyYXc6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIG9uTW91bnRDcnlwdG9XaXRoZHJhdzogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgaXNfd2l0aGRyYXdhbF9sb2NrZWQ6IGNvbXB1dGVkLFxuICAgICAgICAgICAgc2V0TWF4V2l0aGRyYXdBbW91bnQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIGNoZWNrMTBrTGltaXQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldDEwa0xpbWl0YXRpb246IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldENyeXB0b0NvbmZpZzogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0V2l0aGRyYXdQZXJjZW50YWdlU2VsZWN0b3JSZXN1bHQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHZhbGlkYXRlV2l0aGRyYXdGcm9tQW1vdW50OiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICB2YWxpZGF0ZVdpdGhkcmF3VG9BbW91bnQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIGFjY291bnRfcGxhdGZvcm1faWNvbjogY29tcHV0ZWQsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMucm9vdF9zdG9yZSA9IHJvb3Rfc3RvcmU7XG4gICAgICAgIHRoaXMuV1MgPSBXUztcbiAgICB9XG5cbiAgICBibG9ja2NoYWluX2FkZHJlc3MgPSAnJztcbiAgICBjb250YWluZXIgPSBDb25zdGFudHMuY29udGFpbmVycy53aXRoZHJhdztcbiAgICBlcnJvciA9IG5ldyBFcnJvclN0b3JlKCk7XG4gICAgaXNfMTBrX3dpdGhkcmF3YWxfbGltaXRfcmVhY2hlZCA9IHVuZGVmaW5lZDtcbiAgICBpc193aXRoZHJhd19jb25maXJtZWQgPSBmYWxzZTtcbiAgICB3aXRoZHJhd19hbW91bnQgPSAnJztcbiAgICBtYXhfd2l0aGRyYXdfYW1vdW50ID0gMDtcbiAgICBjcnlwdG9fY29uZmlnID0ge307XG5cbiAgICBzZXRJc1dpdGhkcmF3Q29uZmlybWVkKGlzX3dpdGhkcmF3X2NvbmZpcm1lZCkge1xuICAgICAgICBjb25zdCB7IGNvbnZlcnRlcl9mcm9tX2Ftb3VudCB9ID0gdGhpcy5yb290X3N0b3JlLm1vZHVsZXMuY2FzaGllci5jcnlwdG9fZmlhdF9jb252ZXJ0ZXI7XG4gICAgICAgIHRoaXMuaXNfd2l0aGRyYXdfY29uZmlybWVkID0gaXNfd2l0aGRyYXdfY29uZmlybWVkO1xuXG4gICAgICAgIGlmIChpc193aXRoZHJhd19jb25maXJtZWQpIHRoaXMuc2V0V2l0aGRyYXdBbW91bnQoY29udmVydGVyX2Zyb21fYW1vdW50KTtcblxuICAgICAgICBpZiAoIWlzX3dpdGhkcmF3X2NvbmZpcm1lZCkge1xuICAgICAgICAgICAgY29uc3QgeyBjbGllbnQsIG1vZHVsZXMgfSA9IHRoaXMucm9vdF9zdG9yZTtcbiAgICAgICAgICAgIGNvbnN0IHsgYWN0aXZlX2NvbnRhaW5lciB9ID0gbW9kdWxlcy5jYXNoaWVyLmdlbmVyYWxfc3RvcmU7XG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBDb25zdGFudHMubWFwX2FjdGlvblthY3RpdmVfY29udGFpbmVyXTtcblxuICAgICAgICAgICAgY2xpZW50LnNldFZlcmlmaWNhdGlvbkNvZGUoJycsIGNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRXaXRoZHJhd0Ftb3VudChhbW91bnQpIHtcbiAgICAgICAgdGhpcy53aXRoZHJhd19hbW91bnQgPSBhbW91bnQ7XG4gICAgfVxuXG4gICAgYXN5bmMgcmVxdWVzdFdpdGhkcmF3KHZlcmlmaWNhdGlvbl9jb2RlKSB7XG4gICAgICAgIGNvbnN0IHsgY2xpZW50LCBtb2R1bGVzIH0gPSB0aGlzLnJvb3Rfc3RvcmU7XG4gICAgICAgIGNvbnN0IHsgY3J5cHRvX2ZpYXRfY29udmVydGVyIH0gPSBtb2R1bGVzLmNhc2hpZXI7XG5cbiAgICAgICAgaWYgKCFjbGllbnQuaXNfbG9nZ2VkX2luKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNyeXB0b19maWF0X2NvbnZlcnRlci5jb252ZXJ0ZXJfZnJvbV9hbW91bnQpIHtcbiAgICAgICAgICAgIGNyeXB0b19maWF0X2NvbnZlcnRlci5zZXRDb252ZXJ0ZXJGcm9tRXJyb3IobG9jYWxpemUoJ1RoaXMgZmllbGQgaXMgcmVxdWlyZWQuJykpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5XUy5jcnlwdG9XaXRoZHJhdyh7XG4gICAgICAgICAgICBhZGRyZXNzOiB0aGlzLmJsb2NrY2hhaW5fYWRkcmVzcyxcbiAgICAgICAgICAgIGFtb3VudDogK2NyeXB0b19maWF0X2NvbnZlcnRlci5jb252ZXJ0ZXJfZnJvbV9hbW91bnQsXG4gICAgICAgICAgICB2ZXJpZmljYXRpb25fY29kZSxcbiAgICAgICAgICAgIGRyeV9ydW46IDEsXG4gICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lcnJvci5zZXRFcnJvck1lc3NhZ2UoeyBjb2RlOiAnQ3J5cHRvV2l0aGRyYXdhbEVycm9yJywgbWVzc2FnZTogcmVzcG9uc2UuZXJyb3IubWVzc2FnZSB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENyeXB0b0NvbmZpZygpLnRoZW4oKCkgPT4gdGhpcy52YWxpZGF0ZVdpdGhkcmF3RnJvbUFtb3VudCgpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zYXZlV2l0aGRyYXcodmVyaWZpY2F0aW9uX2NvZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBzYXZlV2l0aGRyYXcodmVyaWZpY2F0aW9uX2NvZGUpIHtcbiAgICAgICAgY29uc3QgeyBjb252ZXJ0ZXJfZnJvbV9hbW91bnQgfSA9IHRoaXMucm9vdF9zdG9yZS5tb2R1bGVzLmNhc2hpZXIuY3J5cHRvX2ZpYXRfY29udmVydGVyO1xuXG4gICAgICAgIHRoaXMuZXJyb3Iuc2V0RXJyb3JNZXNzYWdlKCcnKTtcbiAgICAgICAgYXdhaXQgdGhpcy5XUy5jcnlwdG9XaXRoZHJhdyh7XG4gICAgICAgICAgICBhZGRyZXNzOiB0aGlzLmJsb2NrY2hhaW5fYWRkcmVzcyxcbiAgICAgICAgICAgIGFtb3VudDogK2NvbnZlcnRlcl9mcm9tX2Ftb3VudCxcbiAgICAgICAgICAgIHZlcmlmaWNhdGlvbl9jb2RlLFxuICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuZXJyb3Iuc2V0RXJyb3JNZXNzYWdlKHJlc3BvbnNlLmVycm9yKTtcbiAgICAgICAgICAgICAgICBpZiAodmVyaWZpY2F0aW9uX2NvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBjbGllbnQsIG1vZHVsZXMgfSA9IHRoaXMucm9vdF9zdG9yZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBhY3RpdmVfY29udGFpbmVyIH0gPSBtb2R1bGVzLmNhc2hpZXIuZ2VuZXJhbF9zdG9yZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gQ29uc3RhbnRzLm1hcF9hY3Rpb25bYWN0aXZlX2NvbnRhaW5lcl07XG5cbiAgICAgICAgICAgICAgICAgICAgY2xpZW50LnNldFZlcmlmaWNhdGlvbkNvZGUoJycsIGNvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucmVzZXRXaXRocmF3Rm9ybSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldElzV2l0aGRyYXdDb25maXJtZWQodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlc2V0V2l0aHJhd0Zvcm0oKSB7XG4gICAgICAgIGNvbnN0IHsgc2V0Q29udmVydGVyRnJvbUFtb3VudCwgc2V0Q29udmVydGVyVG9BbW91bnQgfSA9IHRoaXMucm9vdF9zdG9yZS5tb2R1bGVzLmNhc2hpZXIuY3J5cHRvX2ZpYXRfY29udmVydGVyO1xuICAgICAgICBjb25zdCB7IGNsaWVudCwgbW9kdWxlcyB9ID0gdGhpcy5yb290X3N0b3JlO1xuICAgICAgICBjb25zdCB7IGFjdGl2ZV9jb250YWluZXIgfSA9IG1vZHVsZXMuY2FzaGllci5nZW5lcmFsX3N0b3JlO1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSBDb25zdGFudHMubWFwX2FjdGlvblthY3RpdmVfY29udGFpbmVyXTtcblxuICAgICAgICB0aGlzLnNldEJsb2NrY2hhaW5BZGRyZXNzKCcnKTtcbiAgICAgICAgc2V0Q29udmVydGVyRnJvbUFtb3VudCgnJyk7XG4gICAgICAgIHNldENvbnZlcnRlclRvQW1vdW50KCcnKTtcbiAgICAgICAgY2xpZW50LnNldFZlcmlmaWNhdGlvbkNvZGUoJycsIGNvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgc2V0QmxvY2tjaGFpbkFkZHJlc3MoYWRkcmVzcykge1xuICAgICAgICB0aGlzLmJsb2NrY2hhaW5fYWRkcmVzcyA9IGFkZHJlc3M7XG4gICAgfVxuXG4gICAgd2lsbE1vdW50V2l0aGRyYXcodmVyaWZpY2F0aW9uX2NvZGUpIHtcbiAgICAgICAgaWYgKHRoaXMgJiYgdGhpcy5yb290X3N0b3JlICYmIHZlcmlmaWNhdGlvbl9jb2RlKSB7XG4gICAgICAgICAgICBjb25zdCB7IGNsaWVudCwgbW9kdWxlcyB9ID0gdGhpcy5yb290X3N0b3JlO1xuICAgICAgICAgICAgY29uc3QgeyBhY3RpdmVfY29udGFpbmVyIH0gPSBtb2R1bGVzLmNhc2hpZXIuZ2VuZXJhbF9zdG9yZTtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IENvbnN0YW50cy5tYXBfYWN0aW9uW2FjdGl2ZV9jb250YWluZXJdO1xuXG4gICAgICAgICAgICBjbGllbnQuc2V0VmVyaWZpY2F0aW9uQ29kZSgnJywgY29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIG9uTW91bnRXaXRoZHJhdyh2ZXJpZmljYXRpb25fY29kZSkge1xuICAgICAgICBjb25zdCB7IGNsaWVudCwgbW9kdWxlcyB9ID0gdGhpcy5yb290X3N0b3JlO1xuICAgICAgICBjb25zdCB7IGFjdGl2ZV9jb250YWluZXIsIGlzX2NyeXB0bywgb25Nb3VudENvbW1vbiwgc2V0TG9hZGluZywgc2V0T25SZW1vdW50IH0gPSBtb2R1bGVzLmNhc2hpZXIuZ2VuZXJhbF9zdG9yZTtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgY2hlY2tJZnJhbWVMb2FkZWQsXG4gICAgICAgICAgICBjbGVhclRpbWVvdXRDYXNoaWVyVXJsLFxuICAgICAgICAgICAgY2xlYXJJZnJhbWUsXG4gICAgICAgICAgICBpc19zZXNzaW9uX3RpbWVvdXQsXG4gICAgICAgICAgICBzZXRDb250YWluZXJIZWlnaHQsXG4gICAgICAgICAgICBzZXRJZnJhbWVVcmwsXG4gICAgICAgICAgICBzZXRTZXNzaW9uVGltZW91dCxcbiAgICAgICAgICAgIHNldFRpbWVvdXRDYXNoaWVyVXJsLFxuICAgICAgICB9ID0gbW9kdWxlcy5jYXNoaWVyLmlmcmFtZTtcbiAgICAgICAgY29uc3QgeyBpc192aXJ0dWFsIH0gPSBjbGllbnQ7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRfY29udGFpbmVyID0gYWN0aXZlX2NvbnRhaW5lcjtcblxuICAgICAgICBzZXRPblJlbW91bnQodGhpcy5vbk1vdW50V2l0aGRyYXcpO1xuICAgICAgICBhd2FpdCBvbk1vdW50Q29tbW9uKCk7XG5cbiAgICAgICAgdGhpcy5lcnJvci5zZXRFcnJvck1lc3NhZ2UoJycpO1xuICAgICAgICBzZXRDb250YWluZXJIZWlnaHQoMCk7XG4gICAgICAgIGNsZWFySWZyYW1lKCk7XG4gICAgICAgIHNldExvYWRpbmcodHJ1ZSk7XG5cbiAgICAgICAgaWYgKCFpc19zZXNzaW9uX3RpbWVvdXQpIHtcbiAgICAgICAgICAgIGNoZWNrSWZyYW1lTG9hZGVkKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiBzZXNzaW9uIGhhcyB0aW1lZCBvdXQgcmVzZXQgZXZlcnl0aGluZ1xuICAgICAgICBzZXRJZnJhbWVVcmwoJycpO1xuICAgICAgICBpZiAoIXZlcmlmaWNhdGlvbl9jb2RlIHx8IGlzX3ZpcnR1YWwpIHtcbiAgICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgLy8gaWYgdmlydHVhbCwgY2xlYXIgZXZlcnl0aGluZyBhbmQgZG9uJ3QgcHJvY2VlZCBmdXJ0aGVyXG4gICAgICAgICAgICAvLyBpZiBubyB2ZXJpZmljYXRpb24gY29kZSwgd2Ugc2hvdWxkIHJlcXVlc3QgYWdhaW5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlX2Nhc2hpZXIgPSBhd2FpdCB0aGlzLldTLmF1dGhvcml6ZWQuY2FzaGllcihhY3RpdmVfY29udGFpbmVyLCB7XG4gICAgICAgICAgICB2ZXJpZmljYXRpb25fY29kZSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gaWYgdGFiIGNoYW5nZWQgd2hpbGUgd2FpdGluZyBmb3IgcmVzcG9uc2UsIGlnbm9yZSBpdFxuICAgICAgICBpZiAoY3VycmVudF9jb250YWluZXIgIT09IGFjdGl2ZV9jb250YWluZXIpIHtcbiAgICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXNwb25zZV9jYXNoaWVyLmVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yLmhhbmRsZUNhc2hpZXJFcnJvcihyZXNwb25zZV9jYXNoaWVyLmVycm9yKTtcbiAgICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgc2V0U2Vzc2lvblRpbWVvdXQodHJ1ZSk7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXRDYXNoaWVyVXJsKCk7XG4gICAgICAgICAgICBpZiAodmVyaWZpY2F0aW9uX2NvZGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBDb25zdGFudHMubWFwX2FjdGlvblthY3RpdmVfY29udGFpbmVyXTtcblxuICAgICAgICAgICAgICAgIGNsaWVudC5zZXRWZXJpZmljYXRpb25Db2RlKCcnLCBjb250YWluZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGlzX2NyeXB0bykge1xuICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCBjaGVja0lmcmFtZUxvYWRlZCgpO1xuICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICBzZXRJZnJhbWVVcmwocmVzcG9uc2VfY2FzaGllci5jYXNoaWVyKTtcbiAgICAgICAgICAgIHNldFNlc3Npb25UaW1lb3V0KGZhbHNlKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXRDYXNoaWVyVXJsKHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgb25Nb3VudENyeXB0b1dpdGhkcmF3KHZlcmlmaWNhdGlvbl9jb2RlKSB7XG4gICAgICAgIGNvbnN0IHsgY3J5cHRvX2ZpYXRfY29udmVydGVyLCBnZW5lcmFsX3N0b3JlLCBpZnJhbWUgfSA9IHRoaXMucm9vdF9zdG9yZS5tb2R1bGVzLmNhc2hpZXI7XG5cbiAgICAgICAgZ2VuZXJhbF9zdG9yZS5zZXRMb2FkaW5nKHRydWUpO1xuICAgICAgICBjb25zdCBzdHJfcmVnX2V4cCA9IC9eXFx3ezgsMTI4fSQvO1xuICAgICAgICBsZXQgcmVzcG9uc2VfY2FzaGllcjtcblxuICAgICAgICBpZiAoc3RyX3JlZ19leHAudGVzdCh2ZXJpZmljYXRpb25fY29kZSkpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlX2Nhc2hpZXIgPSBhd2FpdCB0aGlzLldTLmNyeXB0b1dpdGhkcmF3KHtcbiAgICAgICAgICAgICAgICBhZGRyZXNzOiB0aGlzLmJsb2NrY2hhaW5fYWRkcmVzcyxcbiAgICAgICAgICAgICAgICBhbW91bnQ6ICtjcnlwdG9fZmlhdF9jb252ZXJ0ZXIuY29udmVydGVyX2Zyb21fYW1vdW50LFxuICAgICAgICAgICAgICAgIHZlcmlmaWNhdGlvbl9jb2RlLFxuICAgICAgICAgICAgICAgIGRyeV9ydW46IDEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3BvbnNlX2Nhc2hpZXIgPSB7IGVycm9yOiB7IGNvZGU6ICdJbnZhbGlkVG9rZW4nLCBtZXNzYWdlOiAnWW91ciB0b2tlbiBoYXMgZXhwaXJlZCBvciBpcyBpbnZhbGlkLicgfSB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlc3BvbnNlX2Nhc2hpZXIuZXJyb3I/LmNvZGUgPT09ICdJbnZhbGlkVG9rZW4nKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yLmhhbmRsZUNhc2hpZXJFcnJvcihyZXNwb25zZV9jYXNoaWVyLmVycm9yKTtcbiAgICAgICAgICAgIGdlbmVyYWxfc3RvcmUuc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICBpZnJhbWUuc2V0U2Vzc2lvblRpbWVvdXQodHJ1ZSk7XG4gICAgICAgICAgICBpZnJhbWUuY2xlYXJUaW1lb3V0Q2FzaGllclVybCgpO1xuICAgICAgICAgICAgaWYgKHZlcmlmaWNhdGlvbl9jb2RlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBjbGllbnQsIG1vZHVsZXMgfSA9IHRoaXMucm9vdF9zdG9yZTtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGFjdGl2ZV9jb250YWluZXIgfSA9IG1vZHVsZXMuY2FzaGllci5nZW5lcmFsX3N0b3JlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IENvbnN0YW50cy5tYXBfYWN0aW9uW2FjdGl2ZV9jb250YWluZXJdO1xuXG4gICAgICAgICAgICAgICAgY2xpZW50LnNldFZlcmlmaWNhdGlvbkNvZGUoJycsIGNvbnRhaW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNldENyeXB0b0NvbmZpZygpO1xuICAgICAgICAgICAgZ2VuZXJhbF9zdG9yZS5zZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHNldENyeXB0b0NvbmZpZygpIHtcbiAgICAgICAgdGhpcy5jcnlwdG9fY29uZmlnID0gKGF3YWl0IHRoaXMuV1MuY3J5cHRvQ29uZmlnKCkpPy5jcnlwdG9fY29uZmlnO1xuICAgIH1cblxuICAgIGdldCBpc193aXRoZHJhd2FsX2xvY2tlZCgpIHtcbiAgICAgICAgY29uc3QgeyBjbGllbnQgfSA9IHRoaXMucm9vdF9zdG9yZTtcbiAgICAgICAgY29uc3QgeyBhdXRoZW50aWNhdGlvbiB9ID0gY2xpZW50LmFjY291bnRfc3RhdHVzO1xuXG4gICAgICAgIGlmICghY2xpZW50LmFjY291bnRfc3RhdHVzPy5zdGF0dXMpIHJldHVybiBmYWxzZTtcbiAgICAgICAgY29uc3QgbmVlZF9wb2kgPSBhdXRoZW50aWNhdGlvbi5uZWVkc192ZXJpZmljYXRpb24uaW5jbHVkZXMoJ2lkZW50aXR5Jyk7XG4gICAgICAgIGNvbnN0IG5lZWRfYXV0aGVudGljYXRpb24gPSB0aGlzLmVycm9yLmlzX2Fza19hdXRoZW50aWNhdGlvbiAmJiBuZWVkX3BvaTtcblxuICAgICAgICByZXR1cm4gY2xpZW50LmlzX3dpdGhkcmF3YWxfbG9jayB8fCBuZWVkX2F1dGhlbnRpY2F0aW9uIHx8IHRoaXMuZXJyb3IuaXNfYXNrX2ZpbmFuY2lhbF9yaXNrX2FwcHJvdmFsO1xuICAgIH1cblxuICAgIHNldE1heFdpdGhkcmF3QW1vdW50KGFtb3VudCkge1xuICAgICAgICB0aGlzLm1heF93aXRoZHJhd19hbW91bnQgPSBhbW91bnQ7XG4gICAgfVxuXG4gICAgYXN5bmMgY2hlY2sxMGtMaW1pdCgpIHtcbiAgICAgICAgY29uc3QgeyBjbGllbnQgfSA9IHRoaXMucm9vdF9zdG9yZTtcblxuICAgICAgICBjb25zdCByZW1haW5kZXIgPSAoYXdhaXQgY2xpZW50LmdldExpbWl0cygpKT8uZ2V0X2xpbWl0cz8ucmVtYWluZGVyO1xuICAgICAgICB0aGlzLnNldE1heFdpdGhkcmF3QW1vdW50KHJlbWFpbmRlcik7XG4gICAgICAgIGNvbnN0IG1pbl93aXRoZHJhd2FsID0gZ2V0TWluV2l0aGRyYXdhbChjbGllbnQuY3VycmVuY3kpO1xuICAgICAgICBjb25zdCBpc19saW1pdF9yZWFjaGVkID0gISEodHlwZW9mIHJlbWFpbmRlciAhPT0gJ3VuZGVmaW5lZCcgJiYgK3JlbWFpbmRlciA8IG1pbl93aXRoZHJhd2FsKTtcbiAgICAgICAgdGhpcy5zZXQxMGtMaW1pdGF0aW9uKGlzX2xpbWl0X3JlYWNoZWQpO1xuICAgIH1cblxuICAgIHNldDEwa0xpbWl0YXRpb24oaXNfbGltaXRfcmVhY2hlZCkge1xuICAgICAgICB0aGlzLmlzXzEwa193aXRoZHJhd2FsX2xpbWl0X3JlYWNoZWQgPSBpc19saW1pdF9yZWFjaGVkO1xuICAgIH1cblxuICAgIHNldFdpdGhkcmF3UGVyY2VudGFnZVNlbGVjdG9yUmVzdWx0KGFtb3VudCkge1xuICAgICAgICBjb25zdCB7IGNsaWVudCwgbW9kdWxlcyB9ID0gdGhpcy5yb290X3N0b3JlO1xuICAgICAgICBjb25zdCB7IGNyeXB0b19maWF0X2NvbnZlcnRlciwgZ2VuZXJhbF9zdG9yZSB9ID0gbW9kdWxlcy5jYXNoaWVyO1xuICAgICAgICBjb25zdCB7IGN1cnJlbmN5LCBjdXJyZW50X2ZpYXRfY3VycmVuY3kgfSA9IGNsaWVudDtcblxuICAgICAgICBpZiAoYW1vdW50ID4gMCkge1xuICAgICAgICAgICAgY3J5cHRvX2ZpYXRfY29udmVydGVyLnNldENvbnZlcnRlckZyb21BbW91bnQoYW1vdW50KTtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVXaXRoZHJhd0Zyb21BbW91bnQoKTtcbiAgICAgICAgICAgIGNyeXB0b19maWF0X2NvbnZlcnRlci5vbkNoYW5nZUNvbnZlcnRlckZyb21BbW91bnQoXG4gICAgICAgICAgICAgICAgeyB0YXJnZXQ6IHsgdmFsdWU6IGFtb3VudCB9IH0sXG4gICAgICAgICAgICAgICAgY3VycmVuY3ksXG4gICAgICAgICAgICAgICAgY3VycmVudF9maWF0X2N1cnJlbmN5IHx8ICdVU0QnXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3J5cHRvX2ZpYXRfY29udmVydGVyLnJlc2V0Q29udmVydGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgY3J5cHRvX2ZpYXRfY29udmVydGVyLnNldElzVGltZXJWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgZ2VuZXJhbF9zdG9yZS5wZXJjZW50YWdlU2VsZWN0b3JTZWxlY3Rpb25TdGF0dXMoZmFsc2UpO1xuICAgIH1cblxuICAgIHZhbGlkYXRlV2l0aGRyYXdGcm9tQW1vdW50KCkge1xuICAgICAgICBsZXQgZXJyb3JfbWVzc2FnZSA9ICcnO1xuXG4gICAgICAgIGNvbnN0IHsgY2xpZW50LCBtb2R1bGVzIH0gPSB0aGlzLnJvb3Rfc3RvcmU7XG4gICAgICAgIGNvbnN0IHsgYmFsYW5jZSwgY3VycmVuY3kgfSA9IGNsaWVudDtcbiAgICAgICAgY29uc3QgeyBjcnlwdG9fZmlhdF9jb252ZXJ0ZXIgfSA9IG1vZHVsZXMuY2FzaGllcjtcbiAgICAgICAgY29uc3QgeyBjb252ZXJ0ZXJfZnJvbV9hbW91bnQsIHNldENvbnZlcnRlckZyb21FcnJvciB9ID0gY3J5cHRvX2ZpYXRfY29udmVydGVyO1xuXG4gICAgICAgIGNvbnN0IG1pbl93aXRoZHJhd19hbW91bnQgPSB0aGlzLmNyeXB0b19jb25maWc/LmN1cnJlbmNpZXNfY29uZmlnPy5bY3VycmVuY3ldPy5taW5pbXVtX3dpdGhkcmF3YWw7XG4gICAgICAgIGNvbnN0IG1heF93aXRoZHJhd19hbW91bnQgPSArdGhpcy5tYXhfd2l0aGRyYXdfYW1vdW50ID4gK2JhbGFuY2UgPyArYmFsYW5jZSA6ICt0aGlzLm1heF93aXRoZHJhd19hbW91bnQ7XG5cbiAgICAgICAgY29uc3QgZm9ybWF0X2JhbGFuY2UgPSBmb3JtYXRNb25leShjdXJyZW5jeSwgYmFsYW5jZSwgdHJ1ZSk7XG4gICAgICAgIGNvbnN0IGZvcm1hdF9taW5fd2l0aGRyYXdfYW1vdW50ID0gZm9ybWF0TW9uZXkoY3VycmVuY3ksIG1pbl93aXRoZHJhd19hbW91bnQsIHRydWUpO1xuICAgICAgICBjb25zdCBmb3JtYXRfbWF4X3dpdGhkcmF3X2Ftb3VudCA9IGZvcm1hdE1vbmV5KGN1cnJlbmN5LCBtYXhfd2l0aGRyYXdfYW1vdW50LCB0cnVlKTtcblxuICAgICAgICBpZiAoY29udmVydGVyX2Zyb21fYW1vdW50KSB7XG4gICAgICAgICAgICBjb25zdCB7IGlzX29rLCBtZXNzYWdlIH0gPSB2YWxpZE51bWJlcihjb252ZXJ0ZXJfZnJvbV9hbW91bnQsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZmxvYXQnLFxuICAgICAgICAgICAgICAgIGRlY2ltYWxzOiBnZXREZWNpbWFsUGxhY2VzKGN1cnJlbmN5KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFpc19vaykgZXJyb3JfbWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgICAgICBlbHNlIGlmICgrYmFsYW5jZSA8ICtjb252ZXJ0ZXJfZnJvbV9hbW91bnQpIGVycm9yX21lc3NhZ2UgPSBsb2NhbGl6ZSgnSW5zdWZmaWNpZW50IGZ1bmRzJyk7XG4gICAgICAgICAgICBlbHNlIGlmICgrYmFsYW5jZSA8ICttaW5fd2l0aGRyYXdfYW1vdW50KSB7XG4gICAgICAgICAgICAgICAgZXJyb3JfbWVzc2FnZSA9IGxvY2FsaXplKFxuICAgICAgICAgICAgICAgICAgICAnWW91ciBiYWxhbmNlICh7e2Zvcm1hdF9iYWxhbmNlfX0ge3tjdXJyZW5jeX19KSBpcyBsZXNzIHRoYW4gdGhlIGN1cnJlbnQgbWluaW11bSB3aXRoZHJhd2FsIGFsbG93ZWQgKHt7Zm9ybWF0X21pbl93aXRoZHJhd19hbW91bnR9fSB7e2N1cnJlbmN5fX0pLiBQbGVhc2UgdG9wIHVwIHlvdXIgYWNjb3VudCB0byBjb250aW51ZSB3aXRoIHlvdXIgd2l0aGRyYXdhbC4nLFxuICAgICAgICAgICAgICAgICAgICB7IGZvcm1hdF9iYWxhbmNlLCBjdXJyZW5jeSwgZm9ybWF0X21pbl93aXRoZHJhd19hbW91bnQgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCtjb252ZXJ0ZXJfZnJvbV9hbW91bnQgPCArbWluX3dpdGhkcmF3X2Ftb3VudCB8fCArY29udmVydGVyX2Zyb21fYW1vdW50ID4gK21heF93aXRoZHJhd19hbW91bnQpIHtcbiAgICAgICAgICAgICAgICBlcnJvcl9tZXNzYWdlID0gbG9jYWxpemUoXG4gICAgICAgICAgICAgICAgICAgICdUaGUgY3VycmVudCBhbGxvd2VkIHdpdGhkcmF3IGFtb3VudCBpcyB7e2Zvcm1hdF9taW5fd2l0aGRyYXdfYW1vdW50fX0gdG8ge3tmb3JtYXRfbWF4X3dpdGhkcmF3X2Ftb3VudH19IHt7Y3VycmVuY3l9fScsXG4gICAgICAgICAgICAgICAgICAgIHsgZm9ybWF0X21pbl93aXRoZHJhd19hbW91bnQsIGZvcm1hdF9tYXhfd2l0aGRyYXdfYW1vdW50LCBjdXJyZW5jeSB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGlzTW9iaWxlKCkgJiYgZXJyb3JfbWVzc2FnZS5sZW5ndGggPiAzNSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yX2NvbnRlbnQgPSBlcnJvcl9tZXNzYWdlO1xuICAgICAgICAgICAgICAgIGVycm9yX21lc3NhZ2UgPSAoXG4gICAgICAgICAgICAgICAgICAgIDxSZWFkTW9yZVxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwYW5kX3RleHQ9e2xvY2FsaXplKCdtb3JlJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0PXtlcnJvcl9jb250ZW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGFwc2VfbGVuZ3RoPXsyOH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5EaWFsb2c9eygpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvci5zZXRFcnJvck1lc3NhZ2UoeyBjb2RlOiAnQ3J5cHRvV2l0aGRyYXdhbFJlYWRNb3JlJywgbWVzc2FnZTogZXJyb3JfY29udGVudCB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd19kaWFsb2dcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNldENvbnZlcnRlckZyb21FcnJvcihlcnJvcl9tZXNzYWdlKTtcbiAgICB9XG5cbiAgICB2YWxpZGF0ZVdpdGhkcmF3VG9BbW91bnQoKSB7XG4gICAgICAgIGxldCBlcnJvcl9tZXNzYWdlID0gJyc7XG4gICAgICAgIGNvbnN0IHsgY2xpZW50LCBtb2R1bGVzIH0gPSB0aGlzLnJvb3Rfc3RvcmU7XG4gICAgICAgIGNvbnN0IHsgY3VycmVudF9maWF0X2N1cnJlbmN5IH0gPSBjbGllbnQ7XG4gICAgICAgIGNvbnN0IHsgY29udmVydGVyX3RvX2Ftb3VudCwgc2V0Q29udmVydGVyVG9FcnJvciB9ID0gbW9kdWxlcy5jYXNoaWVyLmNyeXB0b19maWF0X2NvbnZlcnRlcjtcblxuICAgICAgICBpZiAoY29udmVydGVyX3RvX2Ftb3VudCkge1xuICAgICAgICAgICAgY29uc3QgeyBpc19vaywgbWVzc2FnZSB9ID0gdmFsaWROdW1iZXIoY29udmVydGVyX3RvX2Ftb3VudCwge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdmbG9hdCcsXG4gICAgICAgICAgICAgICAgZGVjaW1hbHM6IGdldERlY2ltYWxQbGFjZXMoY3VycmVudF9maWF0X2N1cnJlbmN5KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFpc19vaykgZXJyb3JfbWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIH1cblxuICAgICAgICBzZXRDb252ZXJ0ZXJUb0Vycm9yKGVycm9yX21lc3NhZ2UpO1xuICAgIH1cblxuICAgIGdldCBhY2NvdW50X3BsYXRmb3JtX2ljb24oKSB7XG4gICAgICAgIGNvbnN0IHsgYWNjb3VudF9saXN0LCBsb2dpbmlkIH0gPSB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50O1xuICAgICAgICBjb25zdCBwbGF0Zm9ybV9pY29uID0gYWNjb3VudF9saXN0LmZpbmQoYWNjID0+IGxvZ2luaWQgPT09IGFjYy5sb2dpbmlkKS5pY29uO1xuXG4gICAgICAgIHJldHVybiBwbGF0Zm9ybV9pY29uO1xuICAgIH1cbn1cbiIsImltcG9ydCBBY2NvdW50UHJvbXB0RGlhbG9nU3RvcmUgZnJvbSAnLi9hY2NvdW50LXByb21wdC1kaWFsb2ctc3RvcmUnO1xuaW1wb3J0IEFjY291bnRUcmFuc2ZlclN0b3JlIGZyb20gJy4vYWNjb3VudC10cmFuc2Zlci1zdG9yZSc7XG5pbXBvcnQgQ3J5cHRvRmlhdENvbnZlcnRlclN0b3JlIGZyb20gJy4vY3J5cHRvLWZpYXQtY29udmVydGVyLXN0b3JlJztcbmltcG9ydCBEZXBvc2l0U3RvcmUgZnJvbSAnLi9kZXBvc2l0LXN0b3JlJztcbmltcG9ydCBFcnJvckRpYWxvZ1N0b3JlIGZyb20gJy4vZXJyb3ItZGlhbG9nLXN0b3JlJztcbmltcG9ydCBFcnJvclN0b3JlIGZyb20gJy4vZXJyb3Itc3RvcmUnO1xuaW1wb3J0IEdlbmVyYWxTdG9yZSBmcm9tICcuL2dlbmVyYWwtc3RvcmUnO1xuaW1wb3J0IElmcmFtZVN0b3JlIGZyb20gJy4vaWZyYW1lLXN0b3JlJztcbmltcG9ydCBPblJhbXBTdG9yZSBmcm9tICcuL29uLXJhbXAtc3RvcmUnO1xuaW1wb3J0IFBheW1lbnRBZ2VudFN0b3JlIGZyb20gJy4vcGF5bWVudC1hZ2VudC1zdG9yZSc7XG5pbXBvcnQgUGF5bWVudEFnZW50VHJhbnNmZXJTdG9yZSBmcm9tICcuL3BheW1lbnQtYWdlbnQtdHJhbnNmZXItc3RvcmUnO1xuaW1wb3J0IFRyYW5zYWN0aW9uSGlzdG9yeVN0b3JlIGZyb20gJy4vdHJhbnNhY3Rpb24taGlzdG9yeS1zdG9yZSc7XG5pbXBvcnQgV2l0aGRyYXdTdG9yZSBmcm9tICcuL3dpdGhkcmF3LXN0b3JlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FzaGllclN0b3JlIHtcbiAgICBjb25zdHJ1Y3Rvcih7IHJvb3Rfc3RvcmUsIFdTIH0pIHtcbiAgICAgICAgdGhpcy5hY2NvdW50X3Byb21wdF9kaWFsb2cgPSBuZXcgQWNjb3VudFByb21wdERpYWxvZ1N0b3JlKHJvb3Rfc3RvcmUpO1xuICAgICAgICB0aGlzLmFjY291bnRfdHJhbnNmZXIgPSBuZXcgQWNjb3VudFRyYW5zZmVyU3RvcmUoeyByb290X3N0b3JlLCBXUyB9KTtcbiAgICAgICAgdGhpcy5jcnlwdG9fZmlhdF9jb252ZXJ0ZXIgPSBuZXcgQ3J5cHRvRmlhdENvbnZlcnRlclN0b3JlKHsgcm9vdF9zdG9yZSwgV1MgfSk7XG4gICAgICAgIHRoaXMuZGVwb3NpdCA9IG5ldyBEZXBvc2l0U3RvcmUoV1MsIHJvb3Rfc3RvcmUpO1xuICAgICAgICB0aGlzLmVycm9yX2RpYWxvZyA9IG5ldyBFcnJvckRpYWxvZ1N0b3JlKCk7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBuZXcgRXJyb3JTdG9yZSgpO1xuICAgICAgICB0aGlzLmdlbmVyYWxfc3RvcmUgPSBuZXcgR2VuZXJhbFN0b3JlKHsgcm9vdF9zdG9yZSwgV1MgfSk7XG4gICAgICAgIHRoaXMuaWZyYW1lID0gbmV3IElmcmFtZVN0b3JlKHJvb3Rfc3RvcmUpO1xuICAgICAgICB0aGlzLm9ucmFtcCA9IG5ldyBPblJhbXBTdG9yZSh7IHJvb3Rfc3RvcmUsIFdTIH0pO1xuICAgICAgICB0aGlzLnBheW1lbnRfYWdlbnQgPSBuZXcgUGF5bWVudEFnZW50U3RvcmUoeyByb290X3N0b3JlLCBXUyB9KTtcbiAgICAgICAgdGhpcy5wYXltZW50X2FnZW50X3RyYW5zZmVyID0gbmV3IFBheW1lbnRBZ2VudFRyYW5zZmVyU3RvcmUoeyByb290X3N0b3JlLCBXUyB9KTtcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbl9oaXN0b3J5ID0gbmV3IFRyYW5zYWN0aW9uSGlzdG9yeVN0b3JlKHsgcm9vdF9zdG9yZSwgV1MgfSk7XG4gICAgICAgIHRoaXMud2l0aGRyYXcgPSBuZXcgV2l0aGRyYXdTdG9yZSh7IHJvb3Rfc3RvcmUsIFdTIH0pO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./stores/cashier-store.js\n");

/***/ }),

/***/ "@deriv/components":
/***/ ((module) => {

module.exports = __WEBPACK_EXTERNAL_MODULE__deriv_components__;

/***/ }),

/***/ "@deriv/shared":
/***/ ((module) => {

module.exports = __WEBPACK_EXTERNAL_MODULE__deriv_shared__;

/***/ }),

/***/ "@deriv/translations":
/***/ ((module) => {

module.exports = __WEBPACK_EXTERNAL_MODULE__deriv_translations__;

/***/ }),

/***/ "mobx":
/***/ ((module) => {

module.exports = __WEBPACK_EXTERNAL_MODULE_mobx__;

/***/ }),

/***/ "react":
/***/ ((module) => {

module.exports = __WEBPACK_EXTERNAL_MODULE_react__;

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/create fake namespace object */
/******/ 	(() => {
/******/ 		var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);
/******/ 		var leafPrototypes;
/******/ 		// create a fake namespace object
/******/ 		// mode & 1: value is a module id, require it
/******/ 		// mode & 2: merge all properties of value into the ns
/******/ 		// mode & 4: return value when already ns object
/******/ 		// mode & 16: return value when it's Promise-like
/******/ 		// mode & 8|1: behave like require
/******/ 		__webpack_require__.t = function(value, mode) {
/******/ 			if(mode & 1) value = this(value);
/******/ 			if(mode & 8) return value;
/******/ 			if(typeof value === 'object' && value) {
/******/ 				if((mode & 4) && value.__esModule) return value;
/******/ 				if((mode & 16) && typeof value.then === 'function') return value;
/******/ 			}
/******/ 			var ns = Object.create(null);
/******/ 			__webpack_require__.r(ns);
/******/ 			var def = {};
/******/ 			leafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];
/******/ 			for(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {
/******/ 				Object.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));
/******/ 			}
/******/ 			def['default'] = () => (value);
/******/ 			__webpack_require__.d(ns, def);
/******/ 			return ns;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/ensure chunk */
/******/ 	(() => {
/******/ 		__webpack_require__.f = {};
/******/ 		// This file contains only the entry chunk.
/******/ 		// The chunk loading function for additional chunks
/******/ 		__webpack_require__.e = (chunkId) => {
/******/ 			return Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {
/******/ 				__webpack_require__.f[key](chunkId, promises);
/******/ 				return promises;
/******/ 			}, []));
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/get javascript chunk filename */
/******/ 	(() => {
/******/ 		// This function allow to reference async chunks
/******/ 		__webpack_require__.u = (chunkId) => {
/******/ 			// return url for filenames based on template
/******/ 			return "cashier/js/cashier." + chunkId + "." + "a007a79dd7345a890a13" + ".js";
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/get mini-css chunk filename */
/******/ 	(() => {
/******/ 		// This function allow to reference all chunks
/******/ 		__webpack_require__.miniCssF = (chunkId) => {
/******/ 			// return url for filenames based on template
/******/ 			return undefined;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/load script */
/******/ 	(() => {
/******/ 		var inProgress = {};
/******/ 		var dataWebpackPrefix = "@deriv/cashier:";
/******/ 		// loadScript function to load a script via script tag
/******/ 		__webpack_require__.l = (url, done, key, chunkId) => {
/******/ 			if(inProgress[url]) { inProgress[url].push(done); return; }
/******/ 			var script, needAttach;
/******/ 			if(key !== undefined) {
/******/ 				var scripts = document.getElementsByTagName("script");
/******/ 				for(var i = 0; i < scripts.length; i++) {
/******/ 					var s = scripts[i];
/******/ 					if(s.getAttribute("src") == url || s.getAttribute("data-webpack") == dataWebpackPrefix + key) { script = s; break; }
/******/ 				}
/******/ 			}
/******/ 			if(!script) {
/******/ 				needAttach = true;
/******/ 				script = document.createElement('script');
/******/ 		
/******/ 				script.charset = 'utf-8';
/******/ 				script.timeout = 120;
/******/ 				if (__webpack_require__.nc) {
/******/ 					script.setAttribute("nonce", __webpack_require__.nc);
/******/ 				}
/******/ 				script.setAttribute("data-webpack", dataWebpackPrefix + key);
/******/ 				script.src = url;
/******/ 			}
/******/ 			inProgress[url] = [done];
/******/ 			var onScriptComplete = (prev, event) => {
/******/ 				// avoid mem leaks in IE.
/******/ 				script.onerror = script.onload = null;
/******/ 				clearTimeout(timeout);
/******/ 				var doneFns = inProgress[url];
/******/ 				delete inProgress[url];
/******/ 				script.parentNode && script.parentNode.removeChild(script);
/******/ 				doneFns && doneFns.forEach((fn) => (fn(event)));
/******/ 				if(prev) return prev(event);
/******/ 			}
/******/ 			;
/******/ 			var timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);
/******/ 			script.onerror = onScriptComplete.bind(null, script.onerror);
/******/ 			script.onload = onScriptComplete.bind(null, script.onload);
/******/ 			needAttach && document.head.appendChild(script);
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		__webpack_require__.p = "/";
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			"cashier-store": 0
/******/ 		};
/******/ 		
/******/ 		__webpack_require__.f.j = (chunkId, promises) => {
/******/ 				// JSONP chunk loading for javascript
/******/ 				var installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;
/******/ 				if(installedChunkData !== 0) { // 0 means "already installed".
/******/ 		
/******/ 					// a Promise means "currently loading".
/******/ 					if(installedChunkData) {
/******/ 						promises.push(installedChunkData[2]);
/******/ 					} else {
/******/ 						if(true) { // all chunks have JS
/******/ 							// setup Promise in chunk cache
/******/ 							var promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));
/******/ 							promises.push(installedChunkData[2] = promise);
/******/ 		
/******/ 							// start chunk loading
/******/ 							var url = __webpack_require__.p + __webpack_require__.u(chunkId);
/******/ 							// create error before stack unwound to get useful stacktrace later
/******/ 							var error = new Error();
/******/ 							var loadingEnded = (event) => {
/******/ 								if(__webpack_require__.o(installedChunks, chunkId)) {
/******/ 									installedChunkData = installedChunks[chunkId];
/******/ 									if(installedChunkData !== 0) installedChunks[chunkId] = undefined;
/******/ 									if(installedChunkData) {
/******/ 										var errorType = event && (event.type === 'load' ? 'missing' : event.type);
/******/ 										var realSrc = event && event.target && event.target.src;
/******/ 										error.message = 'Loading chunk ' + chunkId + ' failed.\n(' + errorType + ': ' + realSrc + ')';
/******/ 										error.name = 'ChunkLoadError';
/******/ 										error.type = errorType;
/******/ 										error.request = realSrc;
/******/ 										installedChunkData[1](error);
/******/ 									}
/******/ 								}
/******/ 							};
/******/ 							__webpack_require__.l(url, loadingEnded, "chunk-" + chunkId, chunkId);
/******/ 						} else installedChunks[chunkId] = 0;
/******/ 					}
/******/ 				}
/******/ 		};
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		// no on chunks loaded
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = (parentChunkLoadingFunction, data) => {
/******/ 			var [chunkIds, moreModules, runtime] = data;
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some((id) => (installedChunks[id] !== 0))) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 		
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = self["webpackChunk_deriv_cashier"] = self["webpackChunk_deriv_cashier"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./stores/cashier-store.js");
/******/ 	__webpack_exports__ = __webpack_exports__["default"];
/******/ 	
/******/ 	return __webpack_exports__;
/******/ })()
;
});