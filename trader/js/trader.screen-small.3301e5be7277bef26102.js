"use strict";(self.webpackChunk_deriv_trader=self.webpackChunk_deriv_trader||[]).push([["screen-small"],{"./src/Modules/Trading/Components/Form/screen-small.jsx":(e,t,r)=>{r.r(t),r.d(t,{default:()=>We});var a=r("../../node_modules/prop-types/index.js"),n=r.n(a),o=r("react"),i=r("@deriv/components"),l=r("./src/App/Components/Elements/ContentLoader/index.js"),u=r("../../node_modules/classnames/index.js"),s=r.n(u),c=r("@deriv/translations"),d=r("./src/Stores/connect.js"),_=function(e){var t=e.onChange,r=e.is_allow_equal,a=e.has_equals_only,n=e.className;return o.createElement("div",{className:s()("allow-equals","mobile-widget",n)},o.createElement(i.Checkbox,{label:(0,c.localize)("Equals"),value:r,name:"is_equal",onChange:function(e){e.persist();var r=e.target,a=r.name,n=r.checked;t({target:{name:a,value:Number(n)}})},disabled:a}),o.createElement(i.Text,{as:"p",size:"xxxs"},o.createElement(c.Localize,{i18n_default_text:"Win payout if exit spot is also equal to entry spot."})))};_.propTypes={className:n().string,is_allow_equal:n().bool,has_equals_only:n().bool,onChange:n().func};const m=(0,d.$j)((function(e){var t=e.modules;return{is_allow_equal:!!t.trade.is_equal,has_equals_only:t.trade.has_equals_only,onChange:t.trade.onChange}}))(_);var p=r("./src/Stores/Modules/Trading/Helpers/allow-equals.js"),f=r("@deriv/shared"),g=r("../../node_modules/lodash.debounce/index.js"),b=r.n(g),v=r("./src/Stores/Modules/Trading/Helpers/proposal.js");function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=b()((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=h(h({},e),t),n=(0,v.RX)(a),o={},i=function(e){e.error||(o[e.subscription.id]=!0,r(e))};if(!(0,f.isEmptyObject)(n)){var l=n;Object.keys(l).forEach((function(e){f.WS.subscribeProposal(l[e],i)}))}return function(){Object.keys(o).forEach((function(e){f.WS.forget(e),delete o[e]}))}}),700),w=(0,d.$j)((function(e){var t=e.modules,r=e.client,a=e.ui;return{onChangeMultiple:t.trade.onChangeMultiple,trade_amount:t.trade.amount,trade_basis:t.trade.basis,trade_duration_unit:t.trade.duration_unit,trade_duration:t.trade.duration,currency:r.currency,addToast:a.addToast}}))((function(e){var t=e.addToast,r=e.duration_unit,a=e.duration_value,n=e.toggleModal,l=e.basis,u=e.has_duration_error,s=e.selected_basis,d=e.setSelectedAmount,_=e.onChangeMultiple,m=e.currency,p=e.trade_amount,g=e.trade_basis,b=e.trade_duration,v=e.trade_duration_unit,y=e.setAmountError,h=(0,f.getDecimalPlaces)(m),E=Number("0").toFixed((0,f.getDecimalPlaces)(m)),x=parseFloat(E.toString().replace(/.$/,"1")),w=function(e){var r=o.createElement(c.Localize,{i18n_default_text:"Should not be 0 or empty"}),a=parseFloat(e.toString());return"0."===e.toString()||0===a?(t({key:"amount_error",content:r,type:"error",timeout:2e3}),y(!0),"error"):isNaN(a)||a<x||e.toString().length<1?(t({key:"amount_error",content:r,type:"error",timeout:2e3}),y(!0),!1):(y(!1),!0)};return o.createElement("div",{className:"trade-params__amount-keypad"},o.createElement(i.Numpad,{value:s,format:function(e){return isNaN(e)||""===e?e:Number(e).toFixed(h)},onSubmit:function(e){var t={};r===v||u||(t.duration_unit=r),a===b||u||(t.duration=a),e===p&&l===g||(t.basis=l,t.amount=e),(0,f.isEmptyObject)(t)||_(t),n()},currency:m,min:x,is_currency:!0,render:function(e){var t=e.value,r=e.className;return o.createElement("div",{className:r},parseFloat(t)>0?o.createElement(i.Money,{currency:m,amount:t,should_format:!1}):t)},reset_press_interval:450,reset_value:"",pip_size:h,onValidate:w,submit_label:(0,c.localize)("OK"),onValueChange:function(e){d(l,e),w(e)}}))}));const k=(0,d.$j)((function(e){var t=e.modules;return{basis:t.trade.basis,basis_list:t.trade.basis_list,onChangeMultiple:t.trade.onChangeMultiple}}))((function(e){var t=e.toggleModal,r=e.basis_list,a=e.basis,n=e.duration_value,l=e.duration_unit,u=e.has_duration_error,s=e.amount_tab_idx,c=e.setAmountError,d=e.setAmountTabIdx,_=e.setSelectedAmount,m=e.stake_value,p=e.payout_value,f=void 0!==s?s:r.findIndex((function(e){return e.value===a}));return 1===r.length?o.createElement(w,{toggleModal:t,duration_value:n,duration_unit:l,has_duration_error:u,basis:r[0].value,setAmountError:c,selected_basis:"stake"===r[0].value?m:p,setSelectedAmount:_}):o.createElement("div",null,o.createElement(i.Tabs,{active_index:f,onTabItemClick:d,top:!0},r.map((function(e){switch(e.value){case"stake":return o.createElement("div",{label:e.text,key:e.value},o.createElement(w,{toggleModal:t,duration_value:n,duration_unit:l,has_duration_error:u,basis:e.value,setAmountError:c,selected_basis:m,setSelectedAmount:_}));case"payout":return o.createElement("div",{label:e.text,key:e.value},o.createElement(w,{toggleModal:t,duration_value:n,duration_unit:l,has_duration_error:u,basis:e.value,setAmountError:c,selected_basis:p,setSelectedAmount:_}));default:return null}}))))}));var C=r("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/info.jsx");function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var a,n,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(a=r.next()).done)&&(o.push(a.value),!t||o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw n}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}const S=(0,d.$j)((function(e){var t=e.client,r=e.modules,a=e.ui;return{amount:r.trade.amount,form_components:r.trade.form_components,currency:t.currency,duration:r.trade.duration,duration_unit:r.trade.duration_unit,duration_units_list:r.trade.duration_units_list,expiry_type:r.trade.expiry_type,enableApp:a.enableApp,disableApp:a.disableApp}}))((function(e){var t=e.is_open,r=e.enableApp,a=e.disableApp,n=e.toggleModal;return(0,i.usePreventIOSZoom)(),o.createElement(o.Fragment,null,o.createElement(i.Modal,{id:"dt_trade_parameters_mobile",className:"trade-params",enableApp:r,is_open:t,is_title_centered:!0,should_header_stick_body:!1,disableApp:a,toggleModal:n,height:"auto",width:"calc(100vw - 32px)",title:(0,c.localize)("Stake")},o.createElement(i.Div100vhContainer,{className:"mobile-widget-dialog__wrapper",max_autoheight_offset:"48px"},o.createElement(M,{toggleModal:n}))))}));var M=(0,d.$j)((function(e){var t=e.ui,r=e.modules;return{amount:r.trade.amount,currency:r.trade.currency,multiplier:r.trade.multiplier,multiplier_range_list:r.trade.multiplier_range_list,trade_stop_out:r.trade.stop_out,onChange:r.trade.onChange,addToast:t.addToast,trade_store:r.trade}}))((function(e){var t=e.amount,r=e.currency,a=e.toggleModal,n=e.trade_store,l=e.trade_stop_out,u=A(o.useState(t),2),s=u[0],d=u[1],_=A(o.useState(null),2),m=_[0],p=_[1],g=A(o.useState(null),2),b=g[0],v=g[1],y=o.useRef(t),h=(0,f.useIsMounted)();o.useEffect((function(){if(s!==t){var e=x(n,{amount:s},(function(e){var t,r,a=e.proposal,n=e.echo_req,o=e.subscription;h()&&a&&"MULTUP"===n.contract_type&&Number(n.amount)===Number(y.current)?(p(a.commission),v(null===(t=a.limit_order)||void 0===t||null===(r=t.stop_out)||void 0===r?void 0:r.order_amount)):null!=o&&o.id&&f.WS.forget(o.id)}));return function(){null==e||e()}}}),[s]);return o.createElement(o.Fragment,null,o.createElement("div",{className:"trade-params__multiplier-ic-info-wrapper"},o.createElement(i.Popover,{alignment:"right",icon:"info",id:"dt_multiplier-stake__tooltip",zIndex:9999,is_bubble_hover_enabled:!0,message:o.createElement(c.Localize,{i18n_default_text:"To ensure your loss does not exceed your stake, your contract will be closed automatically when your loss equals to <0/>.",components:[o.createElement(i.Money,{key:0,amount:b||l,currency:r,show_currency:!0})]})})),o.createElement(k,{toggleModal:a,amount_tab_idx:0,setSelectedAmount:function(e,t){d(t),y.current=t},setAmountError:function(){},stake_value:s}),o.createElement(C.Z,{className:"trade-params__multiplier-trade-info",should_show_tooltip:!0,commission:m,stop_out:b,amount:s}))}));const O=function(e){var t,r=e.items_list,a=e.contract_name,n=e.current_value_object,l=e.onChange,u=e.info,s=e.popover_alignment,c=void 0===s?"right":s,d=e.toggleModal;return o.createElement(o.Fragment,null,o.createElement("div",{className:"trade-params__".concat(a,"-ic-info-wrapper")},o.createElement(i.Popover,{alignment:c,icon:"info",id:"dt_".concat(a,"-stake__tooltip"),is_bubble_hover_enabled:!0,zIndex:9999,message:u})),o.createElement(i.RadioGroup,{className:"trade-params__".concat(a,"-radio-group"),name:"trade-params__".concat(a,"-radio"),selected:Number.isNaN(n.value)?"":null===(t=n.value)||void 0===t?void 0:t.toString(),onToggle:function(e){l({target:{name:n.name,value:Number(e.target.value)}}),d()}},r.map((function(e){var t=e.text,r=e.value;return o.createElement(i.RadioGroup.Item,{key:r,id:t,label:t,value:null==r?void 0:r.toString()})}))))},N=O;function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var a,n,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(a=r.next()).done)&&(o.push(a.value),!t||o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw n}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}const P=(0,d.$j)((function(e){var t=e.modules;return{amount:t.trade.amount,multiplier:t.trade.multiplier,multiplier_range_list:t.trade.multiplier_range_list,onChange:t.trade.onChange,trade_store:t.trade}}))((function(e){var t=e.amount,r=e.multiplier,a=e.multiplier_range_list,n=e.onChange,i=e.toggleModal,l=e.trade_store,u=T(o.useState(null),2),s=u[0],d=u[1],_=T(o.useState(null),2),m=_[0],p=_[1],g=(0,f.useIsMounted)();return o.useEffect((function(){if(t){var e=x(l,{amount:t},(function(e){var r,a,n=e.echo_req,o=e.proposal,i=e.subscription;g()&&o&&"MULTUP"===n.contract_type&&Number(n.amount)===t?(d(o.commission),p(null===(r=o.limit_order)||void 0===r||null===(a=r.stop_out)||void 0===a?void 0:a.order_amount)):null!=i&&i.id&&f.WS.forget(i.id)}));return function(){null==e||e()}}}),[t]),o.createElement(o.Fragment,null,o.createElement(N,{contract_name:"multiplier",current_value_object:{name:"multiplier",value:r},info:(0,c.localize)("Your gross profit is the percentage change in market price times your stake and the multiplier chosen here."),items_list:a,onChange:n,toggleModal:i}),o.createElement(C.Z,{className:"trade-params__multiplier-trade-info",should_show_tooltip:!0,commission:s,stop_out:m,amount:t}))}));const D=(0,d.$j)((function(e){var t=e.modules,r=e.ui;return{accumulator_range_list:t.trade.accumulator_range_list,growth_rate:t.trade.growth_rate,onChange:t.trade.onChange,enableApp:r.enableApp,disableApp:r.disableApp,tick_size_barrier:t.trade.tick_size_barrier}}))((function(e){var t=e.accumulator_range_list,r=e.enableApp,a=e.disableApp,n=e.growth_rate,l=e.is_open,u=e.modal_title,s=e.onChange,d=e.tick_size_barrier,_=e.toggleModal;return(0,i.usePreventIOSZoom)(),o.createElement(o.Fragment,null,o.createElement(i.Modal,{id:"dt_trade_parameters_mobile",className:"trade-params",enableApp:r,is_open:l,is_title_centered:!0,should_header_stick_body:!1,disableApp:a,toggleModal:_,height:"auto",width:"calc(100vw - 32px)",title:u},o.createElement(i.Div100vhContainer,{className:"mobile-widget-dialog__wrapper",max_autoheight_offset:"48px"},"multiplier"===u.toLowerCase()?o.createElement(P,{toggleModal:_}):o.createElement(N,{contract_name:"accumulator",current_value_object:{name:"growth_rate",value:n},info:(0,c.localize)("Your stake will grow by {{growth_rate}}% at every tick starting from the second tick, as long as the price remains within a range of ±{{tick_size_barrier}} from the previous tick price.",{growth_rate:(0,f.getGrowthRatePercentage)(n),tick_size_barrier:(0,f.getTickSizeBarrierPercentage)(d)}),items_list:t.map((function(e){return{text:"".concat((0,f.getGrowthRatePercentage)(e),"%"),value:e}})),onChange:s,popover_alignment:"bottom",toggleModal:_}))))}));var I=r("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/expiration.jsx");const $=(0,d.$j)((function(e){var t=e.ui;return{enableApp:t.enableApp,disableApp:t.disableApp}}))((function(e){var t=e.is_open,r=e.enableApp,a=e.disableApp,n=e.toggleModal;return o.createElement(o.Fragment,null,o.createElement(i.Modal,{enableApp:r,is_open:t,disableApp:a,toggleModal:n,has_close_icon:!1,should_header_stick_body:!1,height:"auto",width:"calc(100vw - 3.2rem)",title:(0,c.localize)("Expiration")},o.createElement(i.Div100vhContainer,{className:"mobile-widget-dialog__wrapper",max_autoheight_offset:"48px"},o.createElement("div",{style:{minHeight:"120px",padding:"1.6rem"}},o.createElement(i.Text,{size:"xs",color:"general"},o.createElement(c.Localize,{i18n_default_text:"Your contract will be closed automatically at the next available asset price on <0></0>.",components:[o.createElement(I.Z,{key:0,is_text_only:!0,text_size:"xs"})]}))),o.createElement(i.Modal.Footer,{has_separator:!0},o.createElement(i.Button,{style:{width:"100%",height:"4rem"},large:!0,primary:!0,has_effect:!0,text:(0,c.localize)("OK"),onClick:n})))))}));function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var a,n,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(a=r.next()).done)&&(o.push(a.value),!t||o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw n}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var Z=(0,d.$j)((function(e){var t=e.modules;return{amount:t.trade.amount,expiration:t.trade.expiration,currency:t.trade.currency,is_crypto_multiplier:t.trade.is_crypto_multiplier,multiplier:t.trade.multiplier}}))((function(e){var t=e.amount,r=e.currency,a=e.expiration,n=e.is_crypto_multiplier,l=F(o.useState(!1),2),u=l[0],s=l[1],d=F(o.useState(!1),2),_=d[0],m=d[1],p=function(){s(!u)},f=function(){m(!_)};return o.createElement(o.Fragment,null,o.createElement(S,{is_open:u,toggleModal:p}),o.createElement("div",{className:"mobile-widget mobile-widget__multiplier",onClick:p},o.createElement("div",{className:"mobile-widget__multiplier-amount"},o.createElement("div",{className:"mobile-widget__item"},o.createElement(i.Text,{weight:"bold",size:"xxs"},o.createElement(i.Money,{amount:t,currency:r,show_currency:!0})))),o.createElement(C.Z,{className:"mobile-widget__multiplier-trade-info",commission_text_size:"xxxxs",stop_out_text_size:"xxxxs"})),n&&o.createElement("div",{className:"mobile-widget",onClick:a?f:null},o.createElement("div",{className:"mobile-widget__multiplier-expiration"},o.createElement(i.Text,{size:"xxs"},(0,c.localize)("Expires on")),o.createElement(I.Z,{is_text_only:!0,text_size:"xxs"})),o.createElement($,{is_open:_,toggleModal:f})))})),L=function(e){var t=e.displayed_trade_param,r=e.modal_title,a=F(o.useState(!1),2),n=a[0],i=a[1],l=function(){i(!n)};return o.createElement(o.Fragment,null,o.createElement(D,{is_open:n,toggleModal:l,modal_title:r}),o.createElement("div",{className:"mobile-widget mobile-widget__multiplier-options",onClick:l},o.createElement("div",{className:"mobile-widget__item"},o.createElement("span",{className:"mobile-widget__item-value"},t))))},U=(0,d.$j)((function(e){var t=e.modules;return{displayed_trade_param:"x".concat(t.trade.multiplier),modal_title:(0,c.localize)("Multiplier")}}))(L),R=(0,d.$j)((function(e){var t=e.modules;return{displayed_trade_param:"".concat((0,f.getGrowthRatePercentage)(t.trade.growth_rate),"%"),modal_title:(0,c.localize)("Accumulate")}}))(L),W=r("./src/Modules/Trading/Components/Form/LabeledQuantityInputMobile/index.js"),V=function(e){var t=e.amount,r=e.currency,a=e.current_focus,n=e.is_nativepicker,l=e.is_single_currency,u=e.onChange,d=e.setCurrentFocus;return o.createElement(o.Fragment,null,o.createElement(i.MobileWrapper,null,o.createElement(W.Z,{input_label:(0,c.localize)("Stake"),className:s()("trade-container__amount","trade-container__amount--accumulator"),classNameInlinePrefix:"trade-container__currency",classNameInput:s()("trade-container__input","trade-container__input--accumulator"),currency:r,current_focus:a,fractional_digits:(0,f.getDecimalPlaces)(r),id:"dt_amount_input",inline_prefix:l?r:null,is_autocomplete_disabled:!0,is_float:!0,is_hj_whitelisted:!0,is_incrementable:!0,is_nativepicker:n,is_negative_disabled:!0,max_length:f.AMOUNT_MAX_LENGTH,name:"amount",onChange:u,type:"tel",value:t,ariaLabel:(0,c.localize)("Amount"),setCurrentFocus:d})))};V.propTypes={amount:n().oneOfType([n().number,n().string]),currency:n().string,current_focus:n().string,is_nativepicker:n().bool,is_single_currency:n().bool,onChange:n().func,setCurrentFocus:n().func};const G=(0,d.$j)((function(e){var t=e.modules,r=e.client,a=e.ui;return{amount:t.trade.amount,currency:t.trade.currency,current_focus:a.current_focus,is_single_currency:r.is_single_currency,onChange:t.trade.onChange,setCurrentFocus:a.setCurrentFocus}}))(V);var B=r("./src/Modules/Trading/Components/Form/TradeParams/Accumulator/accumulators-info-display.jsx"),H=r("mobx-react");function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var a,n,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(a=r.next()).done)&&(o.push(a.value),!t||o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw n}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var Q=(0,c.localize)("OK"),X=function(e,t,r,a,n,o){"stake"===a&&t!==o?(e.basis="stake",e.amount=t):"payout"===a&&r!==o?(e.basis="payout",e.amount=r):n!==a&&(e.basis=a,e.amount=o)},J=(0,d.$j)((function(e){var t=e.modules;return{duration_min_max:t.trade.duration_min_max,onChangeMultiple:t.trade.onChangeMultiple,trade_basis:t.trade.basis,trade_amount:t.trade.amount,trade_duration:t.trade.duration,trade_duration_unit:t.trade.duration_unit}}))((function(e){var t=e.setDurationError,r=e.basis_option,a=e.toggleModal,n=e.onChangeMultiple,l=e.duration_min_max,u=e.has_amount_error,s=e.trade_duration,d=e.trade_basis,_=e.trade_amount,m=e.trade_duration_unit,p=e.payout_value,g=e.stake_value,b=e.selected_duration,v=e.setSelectedDuration;o.useEffect((function(){t(!1)}),[]);var y=K((0,f.getDurationMinMaxValues)(l,"tick","t"),2),h=y[0],E=y[1],x=s<h&&b<h?h:b;return o.createElement("div",{className:"trade-params__duration-tickpicker"},o.createElement(i.TickPicker,{default_value:x,submit_label:Q,max_value:E,min_value:h,onSubmit:function(e){var t=e.target.value,o={};u||X(o,g,p,r,d,_),s===t&&"t"===m||(o.duration_unit="t",o.duration=t),(0,f.isEmptyObject)(o)||n(o),a()},onValueChange:function(e){return v("t",e)},singular_label:(0,c.localize)("Tick"),plural_label:(0,c.localize)("Ticks")}))})),ee=(0,d.$j)((function(e){var t=e.modules,r=e.ui;return{duration_min_max:t.trade.duration_min_max,trade_duration:t.trade.duration,trade_duration_unit:t.trade.duration_unit,trade_basis:t.trade.basis,trade_amount:t.trade.amount,onChangeMultiple:t.trade.onChangeMultiple,addToast:r.addToast}}))((function(e){var t=e.addToast,r=e.setDurationError,a=e.basis_option,n=e.toggleModal,l=e.onChangeMultiple,u=e.duration_min_max,s=e.duration_unit_option,d=e.has_amount_error,_=e.contract_expiry,m=void 0===_?"intraday":_,p=e.payout_value,g=e.stake_value,b=e.trade_amount,v=e.trade_basis,y=e.trade_duration_unit,h=e.trade_duration,E=e.selected_duration,x=e.setSelectedDuration,w=s.value,k=K((0,f.getDurationMinMaxValues)(u,m,w),2),C=k[0],A=k[1],j=function(e){var a=o.createElement(c.Localize,{i18n_default_text:"Should be between {{min}} and {{max}}",values:{min:C,max:(0,f.addComma)(A,0,!1)}});return parseInt(e)<C||parseInt(E)>A?(t({key:"duration_error",content:a,type:"error",timeout:2e3}),r(!0),"error"):parseInt(e)>A?(t({key:"duration_error",content:a,type:"error",timeout:2e3}),"error"):e.toString().length<1?(t({key:"duration_error",content:a,type:"error",timeout:2e3}),r(!0),!1):(r(!1),!0)};return o.createElement("div",{className:"trade-params__amount-keypad"},o.createElement(i.Numpad,{value:E,onSubmit:function(e){var t={};d||X(t,g,p,a,v,b),h===e&&y===w||(t.duration_unit=w,t.duration=e,t.expiry_type="duration"),(0,f.isEmptyObject)(t)||l(t),n()},render:function(e){var t=e.value,r=e.className;return o.createElement("div",{className:r},t)},pip_size:0,submit_label:Q,min:C,max:A,reset_press_interval:350,reset_value:"",onValidate:j,onValueChange:function(e){x(w,e),j(e)}}))}));const te=(0,d.$j)((function(e){var t=e.modules;return{duration_units_list:t.trade.duration_units_list,duration_min_max:t.trade.duration_min_max,duration_unit:t.trade.duration_unit,trade_basis:t.trade.basis}}))((function(e){var t=e.amount_tab_idx,r=e.toggleModal,a=e.duration_units_list,n=e.duration_unit,l=e.duration_tab_idx,u=e.duration_min_max,s=e.has_amount_error,d=e.setDurationTabIdx,_=e.setDurationError,m=e.t_duration,p=e.s_duration,g=e.m_duration,b=e.h_duration,v=e.d_duration,y=e.setSelectedDuration,h=e.trade_basis,E=e.stake_value,x=e.payout_value,w={t_duration:m,s_duration:p,m_duration:g,h_duration:b,d_duration:v},k=void 0!==l?l:a.findIndex((function(e){return e.value===n})),C=K((0,f.getDurationMinMaxValues)(u,"daily","d"),2),A=C[0],j=C[1],S=function(e){y("d",e)},M=function(){return 0===t?"stake":1===t?"payout":h};return o.createElement("div",null,o.createElement(i.Tabs,{active_index:k,onTabItemClick:function(e){return function(e){d(e);var t=a[e].value;y(t,w["".concat(t,"_duration")])}(e)},single_tab_has_no_label:!0,top:!0},a.map((function(e){switch(e.value){case"t":return o.createElement("div",{label:e.text,key:e.value},o.createElement(J,{basis_option:M(),has_amount_error:s,toggleModal:r,selected_duration:m,setDurationError:_,setSelectedDuration:y,stake_value:E,payout_value:x}));case"s":return o.createElement("div",{label:e.text,key:e.value},o.createElement(ee,{basis_option:M(),has_amount_error:s,toggleModal:r,duration_unit_option:e,selected_duration:p,setDurationError:_,setSelectedDuration:y,stake_value:E,payout_value:x}));case"m":return o.createElement("div",{label:e.text,key:e.value},o.createElement(ee,{basis_option:M(),has_amount_error:s,toggleModal:r,duration_unit_option:e,selected_duration:g,setDurationError:_,setSelectedDuration:y,stake_value:E,payout_value:x}));case"h":return o.createElement("div",{label:e.text,key:e.value},o.createElement(ee,{basis_option:M(),has_amount_error:s,toggleModal:r,duration_unit_option:e,selected_duration:b,setDurationError:_,setSelectedDuration:y,stake_value:E,payout_value:x}));case"d":return o.createElement("div",{label:e.text,key:e.value},o.createElement(ee,{basis_option:M(),has_amount_error:s,toggleModal:r,duration_unit_option:e,contract_expiry:"daily",selected_duration:v,setDurationError:_,setSelectedDuration:y,stake_value:E,payout_value:x}),o.createElement(i.RelativeDatepicker,{onChange:S,min_date:A,max_date:j,title:(0,c.localize)("Pick an end date")}));default:return null}}))))}));var re=r("./src/Modules/Trading/Components/Form/TradeParams/barrier.jsx"),ae=r("./src/Modules/Trading/Components/Form/TradeParams/last-digit.jsx");function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var a,n,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(a=r.next()).done)&&(o.push(a.value),!t||o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw n}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){ue(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var se=Object.freeze({t:5,s:15,m:3,h:1,d:1}),ce=function(e,t){return le(le({},e),t)},de=function(e){var t,r,a=e.amount,n=e.duration,l=e.duration_unit,u=e.form_components,s=e.is_open,c=e.enableApp,d=e.disableApp,_=e.toggleModal,m=e.currency,p=e.duration_units_list,f=o.useCallback((t=n,r=l,function(e){return r===e?t:se[e]}),[]),g=ne(o.useReducer(ce,{trade_param_tab_idx:0,duration_tab_idx:void 0,amount_tab_idx:void 0,has_amount_error:!1,has_duration_error:!1,curr_duration_unit:l,curr_duration_value:n,t_duration:f("t"),s_duration:f("s"),m_duration:f("m"),h_duration:f("h"),d_duration:f("d"),stake_value:a,payout_value:a}),2),b=g[0],v=g[1];(0,i.usePreventIOSZoom)(),o.useEffect((function(){h(l,n),y(void 0)}),[n,l]);var y=function(e){return v({duration_tab_idx:e})},h=function(e,t){var r;v((ue(r={},"".concat(e,"_duration"),t),ue(r,"curr_duration_unit",e),ue(r,"curr_duration_value",t),r))};return o.createElement(o.Fragment,null,o.createElement(i.Modal,{id:"dt_trade_parameters_mobile",className:"trade-params",enableApp:c,is_open:s,is_vertical_top:!0,header:o.createElement("div",null),disableApp:d,toggleModal:_,height:"auto",width:"calc(100vw - 32px)"},o.createElement(i.ThemedScrollbars,null,o.createElement(i.Div100vhContainer,{className:"mobile-widget-dialog__wrapper",max_autoheight_offset:"120px"},o.createElement(me,{currency:m,toggleModal:_,isVisible:function(e){return u.includes(e)},setTradeParamTabIdx:function(e){return v({trade_param_tab_idx:e})},trade_param_tab_idx:b.trade_param_tab_idx,setDurationTabIdx:y,duration_tab_idx:b.duration_tab_idx,setAmountTabIdx:function(e){return v({amount_tab_idx:e})},amount_tab_idx:b.amount_tab_idx,setSelectedAmount:function(e,t){return v(ue({},"".concat(e,"_value"),t))},stake_value:b.stake_value,payout_value:b.payout_value,duration_unit:b.curr_duration_unit,duration_value:b.curr_duration_value,duration_units_list:p,has_amount_error:b.has_amount_error,setAmountError:function(e){v({has_amount_error:e})},setSelectedDuration:h,has_duration_error:b.has_duration_error,setDurationError:function(e){v({has_duration_error:e})},t_duration:b.t_duration,s_duration:b.s_duration,m_duration:b.m_duration,h_duration:b.h_duration,d_duration:b.d_duration})))))};de.propTypes={amount:n().oneOfType([n().number,n().string]),duration:n().oneOfType([n().string,n().number]),duration_unit:n().string,duration_units_list:H.PropTypes.arrayOrObservableArray,form_components:H.PropTypes.arrayOrObservableArray,is_open:n().bool,disableApp:n().func,enableApp:n().func,toggleModal:n().func,currency:n().string};const _e=(0,d.$j)((function(e){var t=e.client,r=e.modules,a=e.ui;return{amount:r.trade.amount,form_components:r.trade.form_components,currency:t.currency,duration:r.trade.duration,duration_unit:r.trade.duration_unit,duration_units_list:r.trade.duration_units_list,expiry_type:r.trade.expiry_type,enableApp:a.enableApp,disableApp:a.disableApp}}))(de);var me=(0,d.$j)((function(e){var t=e.modules;return{basis_list:t.trade.basis_list,basis:t.trade.basis}}))((function(e){var t=e.currency,r=e.toggleModal,a=e.isVisible,n=e.setAmountTabIdx,l=e.amount_tab_idx,u=e.setTradeParamTabIdx,d=e.trade_param_tab_idx,_=e.setDurationTabIdx,m=e.duration_unit,p=e.duration_units_list,f=e.duration_value,g=e.duration_tab_idx,b=e.has_amount_error,v=e.has_duration_error,y=e.setAmountError,h=e.setSelectedAmount,E=e.stake_value,x=e.payout_value,w=e.setDurationError,C=e.setSelectedDuration,A=e.t_duration,j=e.s_duration,S=e.m_duration,M=e.h_duration,O=e.d_duration,N=e.basis_list,T=e.basis,z=function(e){switch(e){case"duration":return o.createElement("div",{className:"trade-params__header"},o.createElement("div",{className:"trade-params__header-label"},(0,c.localize)("Duration")),o.createElement("div",{className:s()("trade-params__header-value",{"trade-params__header-value--has-error":v})},v?(0,c.localize)("Error"):(a=p.find((function(e){return e.value===m})),"".concat(f," ").concat(a&&(f>1?(0,c.localize)(a.text):(0,c.localize)(a.text.slice(0,-1)))))));case"amount":return o.createElement("div",{className:"trade-params__header"},o.createElement("div",{className:"trade-params__header-label"},(0,c.localize)("Amount")),o.createElement("div",{className:s()("trade-params__header-value",{"trade-params__header-value--has-error":b})},b?(0,c.localize)("Error"):(r=void 0!==l?l:N.findIndex((function(e){return e.value===T})),o.createElement(i.Money,{currency:t,show_currency:!0,amount:1===r?x:E}))));default:return null}var r,a};return o.createElement(i.Tabs,{active_index:d,className:"trade-params-duration-amount",onTabItemClick:u,top:!0},a("duration")&&o.createElement("div",{header_content:z("duration")},o.createElement(te,{toggleModal:r,amount_tab_idx:l,duration_tab_idx:g,setDurationTabIdx:_,setSelectedDuration:C,setDurationError:w,has_amount_error:b,t_duration:A,s_duration:j,m_duration:S,h_duration:M,d_duration:O,stake_value:E,payout_value:x})),a("amount")&&o.createElement("div",{header_content:z("amount")},o.createElement(k,{duration_unit:m,duration_value:f,toggleModal:r,amount_tab_idx:l,setAmountTabIdx:n,has_duration_error:v,setSelectedAmount:h,setAmountError:y,stake_value:E,payout_value:x})))})),pe=(0,d.$j)((function(e){return{form_components:e.modules.trade.form_components}}))((function(e){return e.form_components.includes("last_digit")&&o.createElement(ae.Z,null)})),fe=(0,d.$j)((function(e){return{form_components:e.modules.trade.form_components}}))((function(e){return e.form_components.includes("barrier")&&o.createElement(re.Z,null)})),ge=r("./src/Modules/Trading/Containers/contract-type.jsx");function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var a,n,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(a=r.next()).done)&&(o.push(a.value),!t||o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw n}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ve(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ve(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}const ye=(0,d.$j)((function(e){var t=e.modules,r=e.ui;return{amount:t.trade.amount,basis:t.trade.basis,currency:t.trade.currency,duration:t.trade.duration,duration_min_max:t.trade.duration_min_max,duration_unit:t.trade.duration_unit,form_components:t.trade.form_components,is_multiplier:t.trade.is_multiplier,last_digit:t.trade.last_digit,onChange:t.trade.onChange,onChangeUiStore:r.onChangeUiStore,trade_store:t.trade}}))((function(e){var t=e.amount,r=e.basis,a=e.currency,n=e.duration,l=e.duration_min_max,u=e.duration_unit,s=e.form_components,d=e.is_collapsed,_=e.is_multiplier,m=e.last_digit,p=e.onChange,g=e.onChangeUiStore,b=e.toggleDigitsWidget,v=e.trade_store,y=be(o.useState(!1),2),h=y[0],E=y[1];o.useEffect((function(){w()}));var x,w=function(){var e=(0,f.getExpiryType)(v),t=be((0,f.getDurationMinMaxValues)(l,e,u),2),r=t[0],a=t[1];"tick"===e&&n<r&&(g({name:"duration_".concat(u),value:r}),p({target:{name:"duration",value:r}})),!(n<r)&&n>a&&(g({name:"duration_".concat(u),value:a}),p({target:{name:"duration",value:a}}))},k=function(){return E(!h)},C=(0,f.getLocalizedBasis)();return o.createElement("div",{className:"mobile-widget__wrapper"},_?o.createElement(Z,null):o.createElement("div",{id:"duration_amount_selector",className:"mobile-widget",onClick:k},o.createElement("div",{className:"mobile-widget__duration"},function(){if(!u)return"";var e={t:[(0,c.localize)("tick"),(0,c.localize)("ticks")],s:[(0,c.localize)("second"),(0,c.localize)("seconds")],m:[(0,c.localize)("min"),(0,c.localize)("mins")],h:[(0,c.localize)("hour"),(0,c.localize)("hours")],d:[(0,c.localize)("day"),(0,c.localize)("days")]};try{if(!u)return"";var t=1==+n?e[u][0]:e[u][1];return"".concat(n," ").concat(t)}catch(e){return""}}()),o.createElement("div",{className:"mobile-widget__amount"},o.createElement(i.Money,{amount:t,currency:a,show_currency:!0})),o.createElement("div",{className:"mobile-widget__type"},function(){switch(r){case"stake":return C.stake;case"payout":return C.payout;default:return r}}())),o.createElement(_e,{is_open:h,toggleModal:k}),(x="last_digit",s.includes(x)&&d&&o.createElement("div",{className:"mobile-widget",onClick:b},o.createElement("div",{className:"mobile-widget__amount"},o.createElement(c.Localize,{i18n_default_text:"Digit: {{last_digit}} ",values:{last_digit:m}})))))}));var he=r("./src/Modules/Trading/Containers/purchase.jsx"),Ee=r("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/stop-loss.jsx"),xe=r("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/take-profit.jsx"),we=r("./src/Stores/Modules/Trading/Helpers/multiplier.js"),ke=r("./src/App/Components/Form/fieldset.jsx");function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var a,n,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(a=r.next()).done)&&(o.push(a.value),!t||o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw n}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var je=(0,d.$j)((function(e){var t=e.ui;return{disableApp:t.disableApp,enableApp:t.enableApp,is_loading:t.is_loading,should_show_cancellation_warning:t.should_show_cancellation_warning,toggleCancellationWarning:t.toggleCancellationWarning}}))((function(e){var t=e.disableApp,r=e.enableApp,a=e.is_visible,n=e.onConfirm,l=e.onCancel,u=e.should_show_cancellation_warning,s=e.toggleCancellationWarning;return o.createElement(i.Dialog,{className:"trade-params__multiplier-deal-cancellation-dialog",title:(0,c.localize)("About deal cancellation"),confirm_button_text:(0,c.localize)("Got it"),cancel_button_text:(0,c.localize)("Cancel"),onConfirm:n,onCancel:l,is_mobile_full_width:!1,is_visible:a,disableApp:t,enableApp:r,portal_element_id:"modal_root"},o.createElement(i.Text,{size:"xxxs",color:"general"},o.createElement(c.Localize,{i18n_default_text:"Take profit and/or stop loss are not available while deal cancellation is active."})),o.createElement(i.Checkbox,{defaultChecked:!u,onChange:function(){return s()},name:"should_show_cancellation_warning",label:(0,c.localize)("Don't show this again")}))}));const Se=(0,d.$j)((function(e){var t=e.ui;return{cancellation_range_list:e.modules.trade.cancellation_range_list,should_show_cancellation_warning:t.should_show_cancellation_warning}}))((function(e){var t=e.has_cancellation,r=e.has_take_profit,a=e.has_stop_loss,n=e.onChangeMultiple,l=e.cancellation_duration,u=e.cancellation_range_list,s=e.should_show_cancellation_warning,d=Ce(o.useState(!1),2),_=d[0],m=d[1];return o.createElement(o.Fragment,null,o.createElement(je,{is_visible:_,onCancel:function(){return m(!1)},onConfirm:function(){m(!1),(0,we.Lf)({has_cancellation:t,onChangeMultiple:n})}}),o.createElement(ke.Z,{className:"trade-container__fieldset"},o.createElement("div",{className:"dc-input-wrapper--inline"},o.createElement(i.Checkbox,{id:"dt_cancellation-checkbox_input",onChange:function(){var e;(e=(r||a)&&s)&&m(e),e||(0,we.Lf)({has_cancellation:t,onChangeMultiple:n})},name:"has_cancellation",label:(0,c.localize)("Deal cancellation"),defaultChecked:t}),o.createElement(i.Popover,{alignment:"left",icon:"info",id:"dt_multiplier-stake__tooltip",is_bubble_hover_enabled:!0,classNameBubble:"trade-container__deal-cancellation-popover",zIndex:9999,message:(0,c.localize)("Cancel your trade anytime within a chosen time-frame. Triggered automatically if your trade reaches the stop out level within the chosen time-frame.")})),t&&o.createElement(o.Fragment,null,o.createElement(i.RadioGroup,{className:"trade-params__multiplier-radio-group",name:"trade-params__multiplier-radio",selected:l,onToggle:function(e){return(0,we.Qu)({event:e,onChangeMultiple:n})}},u.map((function(e){var t=e.text,r=e.value;return o.createElement(i.RadioGroup.Item,{key:r,id:t,label:t,value:r.toString()})}))))))}));function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(r),!0).forEach((function(t){Ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var a,n,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(a=r.next()).done)&&(o.push(a.value),!t||o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw n}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ze(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ze(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}const Pe=(0,d.$j)((function(e){var t=e.modules;return{take_profit:t.trade.take_profit,has_take_profit:t.trade.has_take_profit,stop_loss:t.trade.stop_loss,has_stop_loss:t.trade.has_stop_loss,has_cancellation:t.trade.has_cancellation,cancellation_range_list:t.trade.cancellation_range_list,cancellation_duration:t.trade.cancellation_duration,onChangeMultiple:t.trade.onChangeMultiple}}))((function(e){var t,r,a=e.is_open,n=e.onClose,l=e.take_profit,u=e.stop_loss,d=e.has_take_profit,_=e.has_stop_loss,m=e.has_cancellation,p=e.cancellation_duration,g=e.cancellation_range_list,b=e.onChangeMultiple,v=e.toggleDialog,y={take_profit:l,stop_loss:u,has_take_profit:d,has_stop_loss:_,has_cancellation:m,cancellation_duration:p},h=Te(o.useState(y),2),E=h[0],x=h[1],w=Te(o.useState({}),2),k=w[0],C=w[1],A=(null==g?void 0:g.length)>0,j=function(e){var t=["has_take_profit","has_stop_loss","has_cancellation",e.has_take_profit&&"take_profit",e.has_stop_loss&&"stop_loss",e.has_cancellation&&"cancellation_duration"];return(0,f.pick)(e,t)},S=function(e){C({take_profit:e.has_take_profit&&!e.take_profit?[(0,c.localize)("Please enter a take profit amount.")]:[],stop_loss:e.has_stop_loss&&!e.stop_loss?[(0,c.localize)("Please enter a stop loss amount.")]:[]})},M=function(e){var t=e.target,r=t.name,a=t.value,n=Oe({},E);n[r]=a,x(n),S(n)},O=function(e){var t=Oe({},E);Object.assign(t,e),x(t),S(t)};return o.createElement(o.Fragment,null,o.createElement(i.MobileDialog,{portal_element_id:"modal_root",visible:a,has_content_scroll:!0,onClose:function(){x(y),n.apply(void 0,arguments)}},o.createElement(i.Div100vhContainer,{className:s()("trade-params__multiplier-risk-management-dialog",{"trade-params__multiplier-risk-management-dialog--no-cancel":!A}),height_offset:"54px"},o.createElement(xe.Z,{take_profit:E.take_profit,has_take_profit:E.has_take_profit,onChange:M,onChangeMultiple:O,validation_errors:k}),o.createElement(Ee.Z,{stop_loss:E.stop_loss,has_stop_loss:E.has_stop_loss,onChange:M,onChangeMultiple:O,validation_errors:k}),A&&o.createElement(Se,{has_take_profit:E.has_take_profit,has_stop_loss:E.has_stop_loss,has_cancellation:E.has_cancellation,cancellation_duration:E.cancellation_duration,onChangeMultiple:O}),o.createElement("div",{className:"trade-params__multiplier-risk-management-dialog-bottom-separator"}),o.createElement("div",{className:"trade-params__multiplier-risk-management-dialog-apply-button"},o.createElement(i.Button,{text:(0,c.localize)("Apply"),onClick:function(){b(E),v()},primary:!0,is_disabled:(null===(t=k.take_profit)||void 0===t?void 0:t.length)>0||(null===(r=k.stop_loss)||void 0===r?void 0:r.length)>0||(0,f.isDeepEqual)(j(E),j(y))})))))}));function De(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var a,n,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(a=r.next()).done)&&(o.push(a.value),!t||o.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw n}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}const $e=(0,d.$j)((function(e){var t=e.modules;return{currency:t.trade.currency,stop_loss:t.trade.stop_loss,has_stop_loss:t.trade.has_stop_loss,take_profit:t.trade.take_profit,has_take_profit:t.trade.has_take_profit,cancellation_duration:t.trade.cancellation_duration,cancellation_range_list:t.trade.cancellation_range_list,has_cancellation:t.trade.has_cancellation}}))((function(e){var t,r=e.currency,a=e.stop_loss,n=e.take_profit,l=e.has_take_profit,u=e.has_stop_loss,s=e.cancellation_duration,d=e.cancellation_range_list,_=e.has_cancellation,m=De(o.useState(!1),2),p=m[0],f=m[1],g=l||u||_,b=null===(t=d.find((function(e){return e.value===s})))||void 0===t?void 0:t.text;return o.createElement(o.Fragment,null,o.createElement(Pe,{is_open:p,toggleDialog:function(){f(!p)},onClose:function(){return f(!1)}}),o.createElement("div",{className:"mobile-widget mobile-widget__multiplier-risk-management",onClick:function(){return f(!p)}},!g&&o.createElement("div",{className:"mobile-widget__item"},o.createElement("div",{className:"mobile-widget__item-label"},(0,c.localize)("Risk management")),o.createElement("div",{className:"mobile-widget__item-value"},(0,c.localize)("Not set"))),l&&o.createElement("div",{className:"mobile-widget__item"},o.createElement("div",{className:"mobile-widget__item-label"},(0,c.localize)("Take profit")),o.createElement("div",{className:"mobile-widget__item-value"},o.createElement(i.Money,{amount:n,currency:r,show_currency:!0}))),u&&o.createElement("div",{className:"mobile-widget__item"},o.createElement("div",{className:"mobile-widget__item-label"},(0,c.localize)("Stop loss")),o.createElement("div",{className:"mobile-widget__item-value"},o.createElement(i.Money,{amount:a,currency:r,show_currency:!0}))),_&&o.createElement("div",{className:"mobile-widget__item"},o.createElement("div",{className:"mobile-widget__item-label"},(0,c.localize)("Deal Cancellation")),o.createElement("div",{className:"mobile-widget__item-value"},b))))}));var Fe=r("./src/Modules/Contract/Components/AccumulatorsStats/index.js"),qe=["is_trade_enabled","duration_unit","contract_types_list","contract_type","expiry_type","contract_start_type"];function Ze(){return Ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ze.apply(this,arguments)}function Le(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var Ue=function(e){var t=e.form_components,r=e.has_allow_equals,a=e.has_take_profit,n=e.previous_symbol,l=e.is_allow_equal,u=e.is_accumulator,c=e.is_trade_params_expanded,d=e.is_multiplier,_=e.onChange,p=e.take_profit,f=e.setIsTradeParamsExpanded;o.useEffect((function(){n&&l&&r&&f(!0)}),[n]);var g=!c,b=function(e){return t.includes(e)};return o.createElement(i.Collapsible,{position:"top",is_collapsed:g,onClick:function(e){f(e)}},u&&g&&o.createElement(Fe.Z,null),o.createElement("div",{className:"trade-params__contract-type-container"},o.createElement(ge.Z,null),d&&o.createElement(U,null),u&&o.createElement(R,null)),b("last_digit")&&o.createElement("div",{collapsible:"true"},o.createElement(pe,null)),b("barrier")&&o.createElement("div",{collapsible:"true"},o.createElement(fe,null)),!u&&o.createElement(ye,{is_collapsed:g,toggleDigitsWidget:function(){f(!0)}}),r&&o.createElement(m,{collapsible:"true"}),d&&o.createElement("div",{collapsible:"true"},o.createElement($e,null)),u&&[o.createElement(G,{key:"accu_amount"}),o.createElement("div",{collapsible:"true",key:"accu_take_profit",className:s()("take-profit","mobile-widget")},o.createElement(xe.Z,{take_profit:p,has_take_profit:a,onChange:_,has_info:!1})),o.createElement("div",{collapsible:"true",key:"accu_info"},o.createElement(B.Z,null))],o.createElement("div",{className:"purchase-container".concat(u?"--accumulator":"")},o.createElement(he.Z,null)))},Re=function(e){var t=e.is_trade_enabled,r=e.duration_unit,a=e.contract_types_list,n=e.contract_type,i=e.expiry_type,u=e.contract_start_type,s=Le(e,qe),c=(0,p.OW)(a,r,u),d=(0,p.vy)(a),_=(0,p.i$)(n)&&(c||"endtime"===i)&&d;return t?o.createElement(Ue,Ze({has_allow_equals:_},s)):o.createElement("div",{className:"mobile-wrapper__content-loader"},o.createElement(l.G,{speed:2}))};Re.propTypes={contract_start_type:n().string,contract_type:n().string,contract_types_list:n().object,duration_unit:n().string,expiry_type:n().string,is_trade_enabled:n().bool};const We=(0,d.$j)((function(e){var t=e.modules;return{is_accumulator:t.trade.is_accumulator,is_allow_equal:!!t.trade.is_equal,is_multiplier:t.trade.is_multiplier,duration_unit:t.trade.duration_unit,contract_types_list:t.trade.contract_types_list,contract_type:t.trade.contract_type,expiry_type:t.trade.expiry_type,contract_start_type:t.trade.contract_start_type,form_components:t.trade.form_components,has_take_profit:t.trade.has_take_profit,onChange:t.trade.onChange,previous_symbol:t.trade.previous_symbol,is_trade_params_expanded:t.trade.is_trade_params_expanded,setIsTradeParamsExpanded:t.trade.setIsTradeParamsExpanded,take_profit:t.trade.take_profit}}))(Re)}}]);