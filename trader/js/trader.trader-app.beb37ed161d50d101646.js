(self.webpackChunk_deriv_trader=self.webpackChunk_deriv_trader||[]).push([["trader-app"],{"./src/App/Components/Animations/index.js":(e,t,r)=>{"use strict";r.d(t,{s:()=>c,o:()=>p});var n=r("../../node_modules/prop-types/index.js"),o=r.n(n),i=r("react"),a=r("../../node_modules/framer-motion/dist/es/render/dom/motion.mjs"),s={animate:{y:0,opacity:1},initial:{y:35,opacity:0},transition:{type:"spring",stiffness:500,damping:15,duration:.3}},c=function(e){var t=e.children,r=e.className,n=e.is_visible,o=e.keyname;return n?i.createElement(a.E.div,{initial:s.initial,animate:s.animate,transition:s.transition,className:r,key:o},t):null};c.propTypes={children:o().node,className:o().string,is_visible:o().bool,keyname:o().string};var l={initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.2}},u={initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.2}},p=function(e){var t=e.children,r=e.className,n=e.keyname,o=e.is_visible;return"bottom"===e.type?i.createElement(i.Fragment,null,o&&i.createElement(a.E.div,{initial:u.initial,animate:u.animate,transition:u.transition,className:r,key:n},t)):i.createElement(i.Fragment,null,o&&i.createElement(a.E.div,{initial:l.initial,animate:l.animate,transition:l.transition,className:r,key:n},t))};p.propTypes={children:o().node,className:o().string,is_visible:o().bool,keyname:o().string,type:o().string}},"./src/App/Components/Elements/ContentLoader/index.js":(e,t,r)=>{"use strict";r.d(t,{r:()=>s,G:()=>l});var n=r("../../node_modules/react-content-loader/dist/react-content-loader.es.js"),o=r("react"),i=r("../../node_modules/prop-types/index.js"),a=r.n(i),s=function(e){var t=e.speed;return o.createElement(n.ZP,{height:173,width:218,speed:t,backgroundColor:"var(--general-section-1)",foregroundColor:"var(--general-hover)"},o.createElement("rect",{x:"43",y:"19",rx:"0",ry:"0",width:"56",height:"8"}),o.createElement("rect",{x:"147",y:"19",rx:"0",ry:"0",width:"56",height:"8"}),o.createElement("rect",{x:"12",y:"50",rx:"0",ry:"0",width:"44",height:"8"}),o.createElement("rect",{x:"13",y:"68",rx:"0",ry:"0",width:"192",height:"8"}),o.createElement("rect",{x:"5",y:"89",rx:"0",ry:"0",width:"208",height:"1"}),o.createElement("rect",{x:"12",y:"104",rx:"0",ry:"0",width:"44",height:"8"}),o.createElement("rect",{x:"12",y:"9",rx:"0",ry:"0",width:"24",height:"24"}),o.createElement("rect",{x:"116",y:"11",rx:"0",ry:"0",width:"24",height:"24"}),o.createElement("rect",{x:"12",y:"118",rx:"0",ry:"0",width:"88",height:"8"}),o.createElement("rect",{x:"116",y:"104",rx:"0",ry:"0",width:"44",height:"8"}),o.createElement("rect",{x:"116",y:"118",rx:"0",ry:"0",width:"88",height:"8"}),o.createElement("rect",{x:"12",y:"139",rx:"0",ry:"0",width:"44",height:"8"}),o.createElement("rect",{x:"12",y:"153",rx:"0",ry:"0",width:"88",height:"8"}),o.createElement("rect",{x:"116",y:"139",rx:"0",ry:"0",width:"44",height:"8"}),o.createElement("rect",{x:"116",y:"153",rx:"0",ry:"0",width:"88",height:"8"}))};s.propTypes={speed:a().number};var c=r("@deriv/components"),l=function(e){var t=e.speed;return o.createElement(o.Fragment,null,o.createElement(c.MobileWrapper,null,o.createElement(n.ZP,{height:214,width:344,speed:t,backgroundColor:"var(--general-section-1)",foregroundColor:"var(--general-hover)",viewBox:"0 0 344 176"},o.createElement("rect",{x:"148",y:"24",rx:"3",ry:"3",width:"40",height:"4"}),o.createElement("rect",{x:"8",y:"40",rx:"4",ry:"4",width:"328",height:"40"}),o.createElement("rect",{x:"8",y:"88",rx:"4",ry:"4",width:"328",height:"40"}),o.createElement("rect",{x:"8",y:"136",rx:"4",ry:"4",width:"160",height:"70"}),o.createElement("rect",{x:"176",y:"136",rx:"4",ry:"4",width:"160",height:"70"}))),o.createElement(c.DesktopWrapper,null,o.createElement(n.ZP,{height:548,width:240,speed:t,backgroundColor:"var(--general-section-1)",foregroundColor:"var(--general-hover)"},o.createElement("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"240",height:"76"}),o.createElement("rect",{x:"0",y:"84",rx:"4",ry:"4",width:"240",height:"132"}),o.createElement("rect",{x:"0",y:"224",rx:"4",ry:"4",width:"240",height:"120"}),o.createElement("rect",{x:"0",y:"352",rx:"4",ry:"4",width:"240",height:"194"}))))};l.propTypes={speed:a().number}},"./src/App/Components/Elements/PositionsDrawer/helpers/index.js":(e,t,r)=>{"use strict";r.d(t,{Ew:()=>n.Ew,_M:()=>n._M,Bs:()=>n.Bs,rh:()=>n.rh,qm:()=>n.qm});var n=r("./src/App/Components/Elements/PositionsDrawer/helpers/positions-helper.js")},"./src/App/Components/Elements/PositionsDrawer/helpers/positions-helper.js":(e,t,r)=>{"use strict";r.d(t,{Ew:()=>i,Bs:()=>a,rh:()=>s,qm:()=>c,_M:()=>u});var n=r("@deriv/translations"),o=r("@deriv/shared"),i=function(e,t){if(!e||isNaN(e))return e;var r=String(t?(+e).toFixed(t):e),n=r.indexOf(".");return r.replace(/\d(?=(?:\d{3})+(?:\.|$))/g,(function(e,t){return n<=0||t<n?"".concat(e,","):e}))},a=function(e){return c(e.contract_type)?(0,n.localize)("Target"):(0,n.localize)("Barrier")},s=function(e){return c(e.contract_type)?l(e)[e.contract_type]:i(e.barrier)},c=function(e){return/digit/.test(e.toLowerCase())},l=function(e){return{DIGITDIFF:(0,n.localize)("Not {{barrier}}",{barrier:e.barrier}),DIGITEVEN:(0,n.localize)("Even"),DIGITMATCH:(0,n.localize)("Equals {{barrier}}",{barrier:e.barrier}),DIGITODD:(0,n.localize)("Odd"),DIGITOVER:(0,n.localize)("Over {{barrier}}",{barrier:e.barrier}),DIGITUNDER:(0,n.localize)("Under {{barrier}}",{barrier:e.barrier})}},u=function(e,t){var r,n=e.contract_type,i=e.shortcode,a=(0,o.isCallPut)(t),s=(0,o.isHighLow)({shortcode:i}),c=a?["CALL","CALLE","PUT","PUTE"]:null===(r=(0,o.getContractTypesConfig)()[t])||void 0===r?void 0:r.trade_types,l=null==c?void 0:c.includes(n);return"high_low"===t?s:l&&!s}},"./src/App/Components/Elements/chart-loader.jsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r("../../node_modules/prop-types/index.js"),o=r.n(n),i=r("react"),a=r("../../node_modules/classnames/index.js"),s=r.n(a);const c=function(e){var t=e.className,r=e.is_invisible,n=e.theme,o=e.id;return i.createElement("div",{id:o,className:s()("barspinner","barspinner--".concat(n||"dark"),{invisible:r},t)},Array.from(new Array(5)).map((function(e,t){return i.createElement("div",{key:t,className:"barspinner__rect barspinner__rect--".concat(t+1," rect").concat(t+1)})})))};var l=function(e){var t=e.is_dark;return e.is_visible?i.createElement("div",{className:"chart-container__loader"},i.createElement(c,{theme:t?"dark":"light"})):null};l.propTypes={is_dark:o().bool,is_visible:o().bool};const u=l},"./src/App/Components/Elements/market-countdown-timer.jsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>k});var n=r("../../node_modules/classnames/index.js"),o=r.n(n),i=r("react"),a=r("../../node_modules/prop-types/index.js"),s=r.n(a),c=r("../../node_modules/moment/moment.js"),l=r.n(c),u=r("@deriv/components"),p=r("@deriv/shared"),_=r("@deriv/translations"),d=r("./src/Stores/connect.js");function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){h(i,n,o,a,s,"next",e)}function s(e){h(i,n,o,a,s,"throw",e)}a(void 0)}))}}var b=function(){var e=y(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.WS.tradingTimes(t);case 2:if(!(r=e.sent).error){e.next=5;break}return e.abrupt("return",{api_initial_load_error:r.error.message});case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(e,t){for(var r,n=t.markets,o=0;o<n.length;o++)for(var i=n[o].submarkets,a=0;a<i.length;a++){if(void 0!==(r=i[a].symbols.find((function(t){return t.symbol===e}))))return r}},v=function(e){var t=e-Date.now();return t>0?{days:Math.floor(t/864e5),hours:Math.floor(t/36e5%24),minutes:Math.floor(t/1e3/60%60),seconds:Math.floor(t/1e3%60)}:{}},w=function(e){var t=e.active_symbols,r=e.is_main_page,n=e.setIsTimerLoading,a=e.onMarketOpen,s=e.symbol,c=(0,p.useIsMounted)(),d=m(i.useState({}),2),f=d[0],h=d[1],w=m(i.useState(v(null==f?void 0:f.remaining_time_to_open)),2),k=w[0],E=w[1],S=m(i.useState(!0),2),x=S[0],O=S[1];i.useEffect((function(){if(!r||r&&(0,p.isMarketClosed)(t,s)){O(!0);var e=function(){var t=y(regeneratorRuntime.mark((function t(r,n){var o,i,a,u,p,_,d,m,f,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r>7)){t.next=2;break}return t.abrupt("return",{});case 2:return i=l()(new Date).add(r,"days"),t.next=5,b(i.format("YYYY-MM-DD"));case 5:if((a=t.sent).api_initial_load_error){t.next=25;break}if(u=g(n,a.trading_times),p=u.times,_=p.open,d=p.close,!(1===(null==_?void 0:_.length)&&"--"===_[0]&&"--"===d[0])){t.next=12;break}return t.abrupt("return",e(r+1,n));case 12:m=i.toISOString().substring(0,11),f=function(e){return new Date("".concat(m).concat(e,"Z"))},y=0;case 15:if(!(y<(null==_?void 0:_.length))){t.next=24;break}if(!(+f(_[y])-Date.now()>0)){t.next=21;break}if(o=+f(_[y]),!c()||n!==s){t.next=21;break}return t.abrupt("return",h({days_offset:r,opening_time:_[y],remaining_time_to_open:o}));case 21:y++,t.next=15;break;case 24:e(r+1,n);case 25:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();e(0,s)}}),[s]),i.useEffect((function(){var e;return null!=f&&f.remaining_time_to_open&&(e=setTimeout((function(){E(v(f.remaining_time_to_open)),new Date(f.remaining_time_to_open)-+new Date<1e3&&(O(!0),r&&a(!1))}),1e3)),function(){e&&clearTimeout(e)}}),[k,f,a,r]),i.useEffect((function(){x||n(!1)}),[x,n]);var C="";if(Object.keys(k).length){var P=(24*k.days+k.hours).toString().padStart(2,"0"),T=k.minutes.toString().padStart(2,"0"),j=k.seconds.toString().padStart(2,"0");C="".concat(P,":").concat(T,":").concat(j)}if(!f||!C)return null;var A=f.opening_time,D=f.days_offset,I=null;if(A){var R=(0,p.convertTimeFormat)(A),M=l()(new Date).add(D,"days"),L=M.format("DD MMM YYYY"),N=M.format("dddd");I=i.createElement(u.Text,{align:"center",as:"p",className:"market-is-closed-overlay__open-date",line_height:"m",color:"prominent",size:r?"s":"xs",weight:"bold"},i.createElement(_.Localize,{i18n_default_text:"{{formatted_opening_time}} (GMT) on {{opening_day}},<0></0> {{opening_date}}.",components:[i.createElement("div",{key:0})],values:{formatted_opening_time:R,opening_day:N,opening_date:L}}))}return x&&O(!1),i.createElement(i.Fragment,null,i.createElement(u.Text,{as:"p",className:o()("market-is-closed-overlay__open-at",{"market-is-closed-overlay__open-at--main-page":r}),line_height:"x",size:r?"xs":"xxs"},i.createElement(_.Localize,{i18n_default_text:"It will reopen at"})),I,i.createElement(u.Text,{align:"center",as:"p",className:o()("market-is-closed-overlay__come-back",{"market-is-closed-overlay__come-back--main-page":r}),line_height:"x",size:r?"xs":"xxs"},i.createElement(_.Localize,{i18n_default_text:"Please come back in"})),i.createElement(u.Text,{as:"p",className:o()("market-is-closed-overlay__timer",{"market-is-closed-overlay__timer--main-page":r}),line_height:"m",color:"prominent",size:r?"s":"xs",weight:"bold"},C),i.createElement("div",{className:"market-is-closed-overlay__separator"}))};w.propTypes={active_symbols:s().array,is_main_page:s().bool,setIsTimerLoading:s().func,onMarketOpen:s().func,symbol:s().string.isRequired};const k=(0,d.$j)((function(e){return{active_symbols:e.modules.trade.active_symbols}}))(w)},"./src/App/index.tsx":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Pn});var n=r("../../node_modules/prop-types/index.js"),o=r.n(n),i=r("react"),a=r("../../node_modules/react-loadable/lib/index.js"),s=r.n(a),c=r("mobx-react"),l=r("react-router"),u=r("@deriv/components"),p=r("@deriv/shared"),_=r("react-router-dom"),d=function e(t,r){var n;return r.some((function(r){var o;try{o=(0,l.matchPath)(t,r)}catch(e){if(/undefined/.test(e.message))return}return o?(n=r,!0):!!r.routes&&(n=e(t,r.routes))})),n},m=r("@deriv/translations"),f=r("./src/App/Components/Elements/chart-loader.jsx"),h=r("./src/Modules/Trading/Helpers/digits.js"),y=r("./src/Stores/connect.js"),b=r("../../node_modules/classnames/index.js"),g=r.n(b),v=r("../../node_modules/react-transition-group/esm/CSSTransition.js");const w=function(e){var t=e.error;return i.createElement("div",{className:"portfolio-empty"},i.createElement("div",{className:"portfolio-empty__wrapper"},t?i.createElement(u.Text,{color:"disabled",size:"xs"},t):i.createElement(i.Fragment,null,i.createElement(u.Icon,{icon:"IcPortfolio",className:"portfolio-empty__icon",size:96,color:"disabled"}),i.createElement(u.Text,{align:"center",className:"portfolio-empty__text",color:"disabled",size:"xs"},(0,m.localize)("You have no open positions for this asset. To view other open positions, click Go to Reports")))))};var k=r("./src/App/Components/Elements/PositionsDrawer/helpers/index.js"),E=["row","measure","onHoverPosition","symbol","is_new_row"],S=["all_positions","error","is_positions_drawer_on","onHoverPosition","symbol","toggleDrawer","trade_contract_type","onMount"];function x(){return x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x.apply(this,arguments)}function O(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var C=function(e){var t=e.row,r=e.measure,n=e.onHoverPosition,o=e.symbol,a=e.is_new_row,s=O(e,E),c=(0,p.useNewRowTransition)(a).in_prop;return i.useEffect((function(){r()}),[t.contract_info.is_sold,r]),i.createElement(v.Z,{in:c,timeout:150,classNames:{appear:"dc-contract-card__wrapper--enter",enter:"dc-contract-card__wrapper--enter",enterDone:"dc-contract-card__wrapper--enter-done",exit:"dc-contract-card__wrapper--exit"},onEntered:r,unmountOnExit:!0},i.createElement("div",{className:"dc-contract-card__wrapper"},i.createElement(u.PositionsDrawerCard,x({},t,s,{onMouseEnter:function(){n(!0,t,o)},onMouseLeave:function(){n(!1,t,o)},onFooterEntered:r,should_show_transition:a}))))},P=function(e){var t=e.all_positions,r=e.error,n=e.is_positions_drawer_on,o=e.onHoverPosition,a=e.symbol,s=e.toggleDrawer,c=e.trade_contract_type,l=e.onMount,d=O(e,S),f=i.useRef(null),h=i.useRef(null),y=i.useRef(null);i.useEffect((function(){l()}),[l]),i.useEffect((function(){var e,t;null==h||null===(e=h.current)||void 0===e||e.scrollTo(0),null==y||null===(t=y.current)||void 0===t||t.scrollToTop()}),[a,c]);var b=t.filter((function(e){return e.contract_info&&a===e.contract_info.underlying&&(0,k._M)(e.contract_info,c)})),v=i.createElement(u.DataList,{data_source:b,rowRenderer:function(e){return i.createElement(C,x({onHoverPosition:o,symbol:a},e,d))},keyMapper:function(e){return e.id},row_gap:8});return i.createElement(i.Fragment,null,i.createElement("div",{className:g()("positions-drawer__bg",{"positions-drawer__bg--open":n})}),i.createElement("div",{id:"dt_positions_drawer",className:g()("positions-drawer",{"positions-drawer--open":n})},i.createElement("div",{className:"positions-drawer__header"},i.createElement(u.Text,{color:"prominent",weight:"bold",size:"xs"},(0,m.localize)("Recent positions")),i.createElement("div",{id:"dt_positions_drawer_close_icon",className:"positions-drawer__icon-close",onClick:s},i.createElement(u.Icon,{icon:"IcMinusBold"}))),i.createElement("div",{className:"positions-drawer__body",ref:f},0===b.length||r?i.createElement(w,{error:r}):v),i.createElement("div",{className:"positions-drawer__footer"},i.createElement(_.NavLink,{id:"dt_positions_drawer_report_button",className:"dc-btn dc-btn--secondary dc-btn__large",to:p.routes.reports},i.createElement(u.Text,{size:"xs",weight:"bold"},(0,m.localize)("Go to Reports"))))))};P.propTypes={all_positions:c.PropTypes.arrayOrObservableArray,children:o().node,error:o().string,is_mobile:o().bool,is_positions_drawer_on:o().bool,onChangeContractUpdate:o().func,onClickContractUpdate:o().func,onHoverPosition:o().func,onMount:o().func,symbol:o().string,toggleDrawer:o().func,currency:o().string,server_time:o().object,addToast:o().func,current_focus:o().string,onClickCancel:o().func,onClickSell:o().func,onClickRemove:o().func,getContractById:o().func,removeToast:o().func,setCurrentFocus:o().func,should_show_cancellation_warning:o().bool,toggleCancellationWarning:o().func,toggleUnsupportedContractModal:o().func,trade_contract_type:o().string};const T=(0,y.$j)((function(e){var t=e.modules,r=e.ui,n=e.client,o=e.common,i=e.portfolio,a=e.contract_trade;return{all_positions:i.all_positions,error:i.error,onHoverPosition:i.onHoverPosition,onMount:i.onMount,symbol:t.trade.symbol,trade_contract_type:t.trade.contract_type,is_mobile:r.is_mobile,is_positions_drawer_on:r.is_positions_drawer_on,toggleDrawer:r.togglePositionsDrawer,currency:n.currency,server_time:o.server_time,addToast:r.addToast,current_focus:r.current_focus,onClickCancel:i.onClickCancel,onClickSell:i.onClickSell,onClickRemove:i.removePositionById,getContractById:a.getContractById,removeToast:r.removeToast,setCurrentFocus:r.setCurrentFocus,should_show_cancellation_warning:r.should_show_cancellation_warning,toggleCancellationWarning:r.toggleCancellationWarning,toggleUnsupportedContractModal:r.toggleUnsupportedContractModal}}))(P);var j=r("./src/App/Components/Elements/market-countdown-timer.jsx");function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var I=function(e){var t=e.is_eu,r=e.is_synthetics_trading_market_available,n=e.onClick,o=e.onMarketOpen,a=e.symbol,s=A(i.useState(!0),2),c=s[0],l=s[1],p=i.createElement(m.Localize,{i18n_default_text:"In the meantime, try our synthetic indices. They simulate real-market volatility and are open 24/7."}),_=(0,m.localize)("Try Synthetic Indices");return r||(p=null,_=(0,m.localize)("See open markets")),i.createElement("div",{className:g()("market-is-closed-overlay",{"market-is-closed-overlay--loading":c})},i.createElement(u.Text,{as:"p",className:"market-is-closed-overlay__main-heading",color:"prominent",weight:"bold"},i.createElement(m.Localize,{i18n_default_text:"This market is closed"})),i.createElement(j.Z,{is_main_page:!0,setIsTimerLoading:l,onMarketOpen:o,symbol:a}),p&&i.createElement(u.Text,{align:"center",as:"p",className:"market-is-closed-overlay__main-message",size:"xs"},p),(!t||t&&r)&&i.createElement(u.Button,{className:"market-is-closed-overlay__button",onClick:n,text:_,primary:!0}))};I.propTypes={is_eu:o().bool,is_synthetics_trading_market_available:o().bool,onClick:o().func,onMarketOpen:o().func,symbol:o().string};const R=I;var M=r("mobx");function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var H={container:{fontSize:"10px",lineHeight:"15px",position:"absolute",zIndex:1,background:"rgba(0, 0, 0, 0.8)",color:"#ccc",padding:"10px",marginTop:"-10px",display:"none",overflowY:"auto",height:"100%",width:"100%"},prop_name:{color:"yellowgreen"},tabs:{display:"flex",textAlign:"center",marginBottom:"10px"},tab:{fontSize:"18px",border:"1px solid grey",width:"100%",padding:"10px"}},G=function(e){var t=B(i.useState(!1),2),r=t[0],n=t[1],o=B(i.useState("trade"),2),a=o[0],s=o[1];i.useEffect((function(){return document.addEventListener("keyup",c,!1),function(){document.removeEventListener("keyup",c)}}));var c=function(e){e.ctrlKey&&83===e.keyCode&&n(!r)},l=H.container,u=H.tab,p=H.tabs;return i.createElement("code",{id:"state_info",style:N(N({},l),{},{display:r?"block":"none"})},i.createElement("div",{style:p},Object.keys(e).map((function(e){return i.createElement("p",{key:e,onClick:function(){return s(e)},style:N(N({},u),{},{fontWeight:e===a&&"bold"})},e)}))),e[a].sort().map((function(e){var t=B(e,2),r=t[0],n=t[1];return"root_store"!==r&&"function"!=typeof n&&i.createElement("div",{key:r},i.createElement("span",{style:H.prop_name},r,":")," ",n&&"object"===U(n)?JSON.stringify((0,M.toJS)(n),null,1):n)})))};G.propTypes={entries:o().array};const V=(0,y.$j)((function(e){var t=e.modules,r=e.client,n=e.ui,o=e.portfolio;return{trade:Object.entries(t.trade),client:Object.entries(r),ui:Object.entries(n),portfolio:Object.entries(o)}}))(G);var W=r("./src/Modules/Contract/Components/Digits/index.js"),q=r("./src/Modules/Contract/Components/AccumulatorsStats/index.js"),Y=r("./src/Modules/SmartChart/Components/bottom-widgets.jsx"),Z=r("./src/Modules/SmartChart/index.js"),X=function(e){var t=e.updateChartType,r=e.updateGranularity;return i.createElement(i.Fragment,null,i.createElement(u.DesktopWrapper,null,i.createElement(Z.oY,{portalNodeId:"modal_root",onChartType:function(e){return t(e)},onGranularity:function(e){return r(e)}}),i.createElement(Z.as,{portalNodeId:"modal_root",searchInputClassName:"data-hj-whitelist"}),i.createElement(Z.NU,{portalNodeId:"modal_root"}),i.createElement(Z.kO,{portalNodeId:"modal_root",searchInputClassName:"data-hj-whitelist"}),i.createElement(Z.mB,{portalNodeId:"modal_root"})))};X.propTypes={updateChartType:o().func,updateGranularity:o().func};const $=X;var J=r("./src/Modules/SmartChart/Components/top-widgets.jsx"),K=function(e){return e&&function(t){e({target:{name:"symbol",value:t}})}},Q=(0,y.$j)((function(e){var t=e.modules,r=e.contract_trade;return{contract_info:r.last_contract.contract_info||{},digits_info:r.last_contract.digits_info||{},display_status:r.last_contract.display_status,is_digit_contract:r.last_contract.is_digit_contract,is_ended:r.last_contract.is_ended,selected_digit:t.trade.last_digit,onDigitChange:t.trade.onChange,underlying:t.trade.symbol,trade_type:t.trade.contract_type}}))((function(e){var t=e.contract_info,r=e.digits,n=e.digits_info,o=e.display_status,a=e.is_digit_contract,s=e.is_ended,c=e.onDigitChange,l=e.selected_digit,u=e.tick,p=e.trade_type,_=e.underlying;return i.createElement(W.Z,{contract_info:t,digits_array:r,digits_info:n,display_status:o,is_digit_contract:a,is_ended:s,onDigitChange:c,is_trade_page:!0,tick:u,trade_type:p,selected_digit:l,underlying:_})})),ee=(0,y.$j)((function(e){var t=e.modules,r=e.ui;return{onSymbolChange:t.trade.onChange,theme:r.is_dark_mode_on?"dark":"light"}}))((function(e){var t,r=e.onSymbolChange,n=e.charts_ref,o=e.theme,a=e.is_digits_widget_active,s=e.open_market,c=e.open;return n&&n.chart&&(t=n.chart.yAxiswidth),i.createElement(J.Z,{open_market:s,open:c,is_mobile:(0,p.isMobile)(),is_digits_widget_active:a,onSymbolChange:K(r),theme:o,y_axis_width:t})})),te=function(e){var t=e.digits,r=e.tick,n=e.show_accumulators_stats;return i.createElement(Y.Z,{Widget:n?i.createElement(q.Z,null):i.createElement(Q,{digits:t,tick:r})})},re=((0,y.$j)((function(e){var t=e.contract_trade;return{updateChartType:t.updateChartType,updateGranularity:t.updateGranularity}}))((function(e){var t=e.updateChartType,r=e.updateGranularity;return i.createElement($,{updateChartType:t,updateGranularity:r})})),s()({loader:function(){return(0,p.isMobile)()?Promise.all([r.e("src_Modules_Trading_Components_Form_TradeParams_Accumulator_accumulators-info-display_jsx-src-b56a9d"),r.e("screen-small")]).then(r.bind(r,"./src/Modules/Trading/Components/Form/screen-small.jsx")):Promise.all([r.e("src_Modules_Trading_Components_Form_TradeParams_Accumulator_accumulators-info-display_jsx-src-b56a9d"),r.e("screen-large")]).then(r.bind(r,"./src/Modules/Trading/Components/Form/screen-large.jsx"))},loading:function(){return null},render:function(e,t){var r=e.default;return i.createElement(r,t)}})),ne=function(e){var t=e.is_market_closed,r=e.is_trade_enabled;return i.createElement(i.Fragment,null,i.createElement(re,{is_trade_enabled:r,is_market_closed:(0,p.isMobile)()?void 0:t}))};ne.propTypes={is_market_closed:o().bool,is_trade_enabled:o().bool};const oe=i.memo(ne);var ie=r("./src/Modules/SmartChart/Components/all-markers.jsx"),ae=r("./src/App/Components/Elements/PositionsDrawer/helpers/positions-helper.js");function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var le="increment",ue="decrement",pe="add10",_e=function(e){var t,r=e.current_spot,n=e.current_spot_time,o=e.currency,a=e.className,s=void 0===a?"sc-accumulators-profit-loss-text":a,c=e.profit,l=se(i.useState(!1),2),p=l[0],_=l[1],d=se(i.useState(!1),2),m=d[0],f=d[1],h=+(null===(t=i.useRef(c).current)||void 0===t?void 0:t.toFixed(2).split(".")[1][0]),y=se(i.useState(h),2),b=y[0],v=y[1],w=i.useRef(),k=i.useRef(null),E=i.useRef(),S=i.useRef(),x=c.toFixed(2).split("."),O=+x[0],C=+x[1][0],P=+x[1].slice(1),T=c>=0,j=c>0?"+":"",A=function(e,t,r,n){clearInterval(k.current);var o=setInterval((function(){e===le&&w.current<n?w.current=(w.current+1)%10:e===ue&&w.current>n?w.current=Math.abs(w.current-1)%10:e===pe&&w.current<r+10?w.current+=1:(e===pe?w.current===r+10:w.current===n)&&clearInterval(o),v(w.current%10)}),t);k.current=o};i.useEffect((function(){return function(){clearTimeout(E.current),clearTimeout(S.current),clearInterval(k.current)}}),[]),i.useEffect((function(){if(c&&(_(!0),f(!0),E.current=setTimeout((function(){_(!1)}),600),S.current=setTimeout((function(){f(!1)}),300)),0!==c){e=h,t=C,r=Math.abs(t-e),w.current=e,e<t?A(le,300/r,e,t):e>t?A(ue,300/r,e,t):A(pe,30,e,t)}var e,t,r}),[c,h,C]);var D,I,R;return i.createElement(Z.KW,{markerRef:function(e){e&&(r||e.setPosition({epoch:null,price:null}),e.setPosition({epoch:+n,price:+r}))},className:g()(s,T?"won":"lost")},i.createElement(u.Text,{weight:"bold",size:"m",color:T?"profit-success":"loss-danger",className:g()("".concat(s,"__profit"),(D={},I="".concat(s,"__profit--fading-in"),R=p,I in D?Object.defineProperty(D,I,{value:R,enumerable:!0,configurable:!0,writable:!0}):D[I]=R,D)),"data-testid":"dt_accumulator_profit_text"},"".concat(j).concat(O,"."),i.createElement("div",{className:m?"".concat(s,"__sliding-tenth"):""},b),"".concat(P)),i.createElement(u.Text,{size:"xxs",as:"div",className:"".concat(s,"__currency")},o))};_e.propTypes={className:o().string,currency:o().string,current_spot:o().number,current_spot_time:o().number,profit:o().number};const de=i.memo(_e);function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var he=function(e){var t=e.alignment,r=void 0===t?"right":t,n=e.current_spot,o=e.current_spot_time,a=e.className,s=void 0===a?"sc-accumulators-profit-loss-tooltip":a,c=e.currency,l=e.exit_tick,p=e.exit_tick_time,_=e.is_sold,d=e.profit,f=me(i.useState(!1),2),h=f[0],y=f[1],b=d>=0,w=d>0?"+":"",k=i.useRef(null);i.useEffect((function(){return function(){clearTimeout(k.current)}}),[]),i.useEffect((function(){_&&(y(!0),k.current=E(3e3))}),[_]);var E=function(e){return setTimeout((function(){y(!1)}),e)},S=function(){clearTimeout(k.current),k.current=E(1500)},x=i.useMemo((function(){var e=["left","right"];return e.includes(r)?e.find((function(e){return e!==r})):["top","bottom"].find((function(e){return e!==r}))}),[r]);return"number"!=typeof d?null:!_&&o?i.createElement(de,{currency:c,current_spot:n,current_spot_time:o,profit:d}):_&&p?i.createElement(Z.KW,{markerRef:function(e){e&&(l||e.setPosition({epoch:null,price:null}),e.setPosition({epoch:+p,price:+l}))},className:g()(s,b?"won":"lost")},i.createElement("span",{className:"".concat(s,"__spot-circle"),onMouseEnter:function(){return y(!0)},onMouseLeave:S,onTouchStart:function(){return y(!0)},onTouchEnd:S,"data-testid":"dt_accumulator_tooltip_spot"}),i.createElement(v.Z,{in:h,timeout:{exit:500},unmountOnExit:!0,classNames:"".concat(s,"__content")},i.createElement("div",{className:g()("".concat(s,"__content"),"arrow-".concat(x))},i.createElement(u.Text,{size:"xxs",className:"".concat(s,"__text")},(0,m.localize)("Total profit/loss:")),i.createElement(u.Text,{size:"xs",className:"".concat(s,"__text"),weight:"bold"},"".concat(w).concat(d," ").concat(c))))):null};he.propTypes={alignment:o().string,current_spot:o().number,current_spot_time:o().number,className:o().string,currency:o().string,exit_tick:o().number,exit_tick_time:o().number,is_sold:o().number,profit:o().number};const ye=i.memo(he);var be=function(e){var t=e.current_spot,r=e.current_spot_time;return i.createElement(Z.KW,{markerRef:function(e){e&&(t||e.setPosition({epoch:null,price:null}),e.setPosition({epoch:+r,price:+t}))},className:"sc-current-spot-emphasizer"})};be.propTypes={current_spot:o().number,current_spot_time:o().number};const ge=i.memo(be);function ve(){return ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ve.apply(this,arguments)}var we=function(e){var t,r=e.all_positions,n=e.current_symbol_spot,o=e.current_symbol_spot_time,a=e.is_stats_highlighted,s=e.symbol,c=r.filter((function(e){var t=e.contract_info;return t&&s===t.underlying&&(0,ae._M)(t,"accumulator")})),l=null===(t=c.slice().pop())||void 0===t?void 0:t.contract_info,u=!!o&&a,p="lost"===(null==l?void 0:l.status)&&o===(null==l?void 0:l.exit_tick_time),_=u||p,d=p?null==l?void 0:l.exit_tick:n,m=p?null==l?void 0:l.exit_tick_time:o;return i.createElement(i.Fragment,null,!!c.length&&c.map((function(e){var t=e.contract_info;return i.createElement(ye,ve({key:t.contract_id},t))})),_&&m&&i.createElement(ge,{current_spot:d,current_spot_time:m}))};we.propTypes={all_positions:o().array,current_symbol_spot:o().number,current_symbol_spot_time:o().number,is_stats_highlighted:o().bool,symbol:o().string};const ke=i.memo(we);var Ee=function(e){var t=e.is_accumulator,r=e.position,n=e.updateChartType,o=e.updateGranularity;return i.createElement(Z.av,{position:r||(0,p.isMobile)()?"bottom":null},!t&&i.createElement(Z.oY,{portalNodeId:"modal_root",onChartType:n,onGranularity:o}),(0,p.isDesktop)()&&i.createElement(Z.as,{portalNodeId:"modal_root",searchInputClassName:"data-hj-whitelist"}),(0,p.isDesktop)()&&i.createElement(Z.kO,{portalNodeId:"modal_root",searchInputClassName:"data-hj-whitelist"}),(0,p.isDesktop)()&&i.createElement(Z.NU,{portalNodeId:"modal_root"}),(0,p.isDesktop)()&&i.createElement(Z.mB,{portalNodeId:"modal_root"}))};Ee.propTypes={position:o().string,updateChartType:o().func,updateGranularity:o().func,is_accumulator:o().func};const Se=i.memo((0,y.$j)((function(e){return{is_accumulator:e.modules.trade.is_accumulator}}))(Ee));function xe(e){return function(e){if(Array.isArray(e))return Ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||je(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(){return Oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oe.apply(this,arguments)}function Ce(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Pe(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Ce(i,n,o,a,s,"next",e)}function s(e){Ce(i,n,o,a,s,"throw",e)}a(void 0)}))}}function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||je(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){if(e){if("string"==typeof e)return Ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ae(e,t):void 0}}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var De=function(e){var t=e.tick,r=e.digits,n=e.setTick,o=e.setDigits;return i.useEffect((function(){n(t)}),[t]),i.useEffect((function(){o(r)}),[r]),null};const Ie=(0,y.$j)((function(e){var t=e.client,r=e.common,n=e.modules,o=e.ui;return{getFirstOpenMarket:n.trade.getFirstOpenMarket,is_accumulator:n.trade.is_accumulator,is_eu:t.is_eu,is_synthetics_available:n.trade.is_synthetics_available,is_synthetics_trading_market_available:n.trade.is_synthetics_trading_market_available,network_status:r.network_status,contract_type:n.trade.contract_type,form_components:n.trade.form_components,should_show_active_symbols_loading:n.trade.should_show_active_symbols_loading,is_chart_loading:n.trade.is_chart_loading,is_market_closed:n.trade.is_market_closed,show_digits_stats:n.trade.show_digits_stats,is_trade_enabled:n.trade.is_trade_enabled,prepareTradeStore:n.trade.prepareTradeStore,setMobileDigitView:n.trade.setMobileDigitView,symbol:n.trade.symbol,onMount:n.trade.onMount,onUnmount:n.trade.onUnmount,purchase_info:n.trade.purchase_info,NotificationMessages:o.notification_messages_ui,is_market_unavailable_visible:o.has_only_forward_starting_contracts,should_show_multipliers_onboarding:o.should_show_multipliers_onboarding,onChange:n.trade.onChange,setContractTypes:n.trade.setContractTypes}}))((function(e){var t=e.contract_type,r=e.form_components,n=e.getFirstOpenMarket,o=e.should_show_active_symbols_loading,a=e.is_chart_loading,s=e.is_dark_theme,c=e.is_eu,l=e.is_market_closed,_=e.is_market_unavailable_visible,d=e.is_trade_enabled,m=e.network_status,y=e.NotificationMessages,b=e.onChange,v=e.onMount,w=e.onUnmount,k=e.prepareTradeStore,E=e.setContractTypes,S=e.setMobileDigitView,x=e.is_accumulator,O=e.show_digits_stats,C=e.should_show_multipliers_onboarding,P=e.symbol,j=e.is_synthetics_available,A=e.is_synthetics_trading_market_available,D=Te(i.useState([]),2),I=D[0],M=D[1],L=Te(i.useState({}),2),N=L[0],z=L[1],U=Te(i.useState(!1),2),B=U[0],F=U[1],H=Te(i.useState(!1),2),G=H[0],W=H[1],q=Te(i.useState(null),2),Y=q[0],Z=q[1],X=Te(i.useState(null),2),$=X[0],J=X[1],K=Te(i.useState(!1),2),te=K[0],re=K[1],ne=i.useRef(),ie=i.useMemo((function(){return B?{category:"synthetics"}:G&&Y?{category:Y,subcategory:$}:null}),[B,G,Y,$]);i.useEffect((function(){if(v(),!j){var e=function(){var e=Pe(regeneratorRuntime.mark((function e(){var t,r,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=["forex","indices","commodities"],e.next=3,n(r);case 3:if(e.t1=t=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==t;case 7:if(!e.t0){e.next=11;break}e.t2=t,e.next=12;break;case 11:e.t2={};case 12:o=e.t2,i=o.category,a=o.subcategory,i&&(Z(i),J(a));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}return function(){return w()}}),[v,w,n,j]),i.useEffect((function(){(0,p.isMobile)()&&M([]),F(!1),W(!1)}),[P,M,F,j]),i.useEffect((function(){var e=function(){var e=Pe(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:b({target:{name:"contract_type",value:"multiplier"}});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!C||a||!j&&l||e()}),[C,a]);var ae=i.useCallback((function(e){var t=e.digits,r=e.tick;return i.createElement(De,{digits:t,tick:r,setTick:z,setDigits:M})}),[]),se=function(){var e=Pe(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j?(F(!0),setTimeout((function(){return F(!1)}))):(W(!0),setTimeout((function(){return W(!1)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=i.useCallback((function(e){var t=Oe({},e);return i.createElement(ee,Oe({open_market:ie,open:B||G,charts_ref:ne,is_digits_widget_active:te},t))}),[ie,B,G,ne,te]),le=(0,p.isMobile)()?"mobile-wrapper":"sidebar__container desktop-only";return i.createElement("div",{id:"trade_container",className:g()("trade-container",{"trade-container--accumulators":x})},i.createElement(u.DesktopWrapper,null,i.createElement(T,null)),i.createElement(u.Div100vhContainer,{id:"chart_container",className:"chart-container",is_disabled:(0,p.isDesktop)(),height_offset:x?"295px":"259px"},i.createElement(y,null),i.createElement(i.Suspense,{fallback:i.createElement(f.Z,{is_dark:s,is_visible:!P||a})},i.createElement(u.DesktopWrapper,null,i.createElement("div",{className:"chart-container__wrapper"},i.createElement(f.Z,{is_visible:a||o}),i.createElement(Ne,{topWidgets:ce,charts_ref:ne,is_accumulator:x}))),i.createElement(u.MobileWrapper,null,i.createElement(f.Z,{is_visible:a||o||(0,h.A)(t)&&!I[0]}),i.createElement(u.SwipeableWrapper,{onChange:function(e){S(0===e),re(0===e)},is_disabled:!O||!d||0===r.length||a||o},O&&i.createElement(Q,{digits:I,tick:N}),i.createElement(Ne,{topWidgets:ce,charts_ref:ne,bottomWidgets:O?ae:void 0,is_accumulator:x})))),i.createElement(V,null)),i.createElement("div",{className:le},l&&!_&&i.createElement(R,Oe({is_eu:c,is_synthetics_trading_market_available:A},c&&Y,{onClick:se,onMarketOpen:k,symbol:P})),i.createElement(oe,{is_market_closed:l,is_trade_enabled:d&&r.length>0&&"online"===m.class})))}));var Re=i.forwardRef((function(e,t){return i.createElement(Z.Xb,Oe({innerRef:t},e))})),Me=(0,y.$j)((function(e){var t=e.ui,r=e.client,n=e.contract_trade;return{markers_array:n.markers_array,is_digit_contract:n.is_digit_contract,granularity:n.granularity,is_dark_theme:t.is_dark_mode_on,currency:r.currency}}))((function(e){var t=e.markers_array,r=e.is_dark_theme,n=e.granularity,o=e.currency,a=e.config;return t.map((function(e){var t=ie.Z[e.type];return i.createElement(t,Oe({key:e.key,is_dark_theme:r,granularity:n,currency:o,config:a},e))}))})),Le=function(e){var t,r=e.all_positions,n=e.topWidgets,o=e.charts_ref,a=e.updateGranularity,s=e.updateChartType,c=e.active_symbols,l=e.chart_layout,u=e.chart_type,_=e.chartStateChange,d=e.current_symbol_spot,m=e.current_symbol_spot_time,f=e.ticks_history_stats,h=e.exportLayout,y=e.extra_barriers,b=void 0===y?[]:y,g=e.end_epoch,v=e.granularity,w=e.has_alternative_source,k=e.is_accumulator,E=e.is_trade_enabled,S=e.is_socket_opened,x=e.main_barrier,O=e.refToAddTick,C=e.setChartStatus,P=e.settings,T=e.show_digits_stats,j=e.symbol,A=e.wsForget,D=e.wsForgetStream,I=e.wsSendRequest,R=e.wsSubscribe,M=i.useCallback((function(e){var t=e.digits,r=e.tick;return i.createElement(te,{digits:t,tick:r,show_accumulators_stats:k,is_trade_page:!0})}),[k]),L=x?[x].concat(xe(b)):b,N=0===v?8:24;return j&&0!==c.length?i.createElement(Re,{ref:o,barriers:L,bottomWidgets:(k||T)&&(0,p.isDesktop)()?M:e.bottomWidgets,crosshair:(0,p.isMobile)()?0:void 0,crosshairTooltipLeftAllow:560,showLastDigitStats:!!(0,p.isDesktop)()&&T,chartControlsWidgets:null,chartStatusListener:function(e){return C(!e)},chartType:k?"mountain":u,initialData:{activeSymbols:JSON.parse(JSON.stringify(c))},chartData:{activeSymbols:JSON.parse(JSON.stringify(c))},feedCall:{activeSymbols:!1},enabledNavigationWidget:(0,p.isDesktop)(),enabledChartFooter:!1,id:"trade",isMobile:(0,p.isMobile)(),maxTick:(0,p.isMobile)()?N:void 0,granularity:!k&&v,requestAPI:I,requestForget:A,requestForgetStream:D,requestSubscribe:R,settings:P,stateChangeListener:_,symbol:j,topWidgets:E?n:null,isConnectionOpened:S,clearChart:!1,toolbarWidget:function(){return i.createElement(Se,{updateChartType:s,updateGranularity:a})},importedLayout:l,onExportLayout:h,shouldFetchTradingTimes:!g,hasAlternativeSource:w,refToAddTick:O,getMarketsOrder:function(e){var t="synthetic_index",r=!!e.find((function(e){return e.market===t}));return e.slice().sort((function(e,t){return e.display_name<t.display_name?-1:1})).map((function(e){return e.market})).reduce((function(e,t){return-1===e.indexOf(t)&&e.push(t),e}),r?[t]:[])},yAxisMargin:{top:(0,p.isMobile)()?76:106}},i.createElement(Me,null),k&&i.createElement(ke,{all_positions:r,current_symbol_spot:d,current_symbol_spot_time:m,is_stats_highlighted:0===(null==f||null===(t=f.ticks_stayed_in)||void 0===t?void 0:t[0]),symbol:j})):null};Le.propTypes={all_positions:o().array,topWidgets:o().func,charts_ref:o().object,bottomWidgets:o().func,chart_type:o().string,chart_layout:o().any,chartStateChange:o().func,current_symbol_spot:o().number,current_symbol_spot_time:o().number,exportLayout:o().func,end_epoch:o().number,granularity:o().number,is_accumulator:o().bool,is_trade_enabled:o().bool,is_socket_opened:o().bool,has_alternative_source:o().bool,main_barrier:o().any,refToAddTick:o().func,setChartStatus:o().func,settings:o().object,symbol:o().string,ticks_history_stats:o().array,wsForget:o().func,wsForgetStream:o().func,wsSendRequest:o().func,wsSubscribe:o().func};var Ne=(0,y.$j)((function(e){var t=e.modules,r=e.ui,n=e.common,o=e.contract_trade;return{all_positions:e.portfolio.all_positions,is_socket_opened:n.is_socket_opened,granularity:o.granularity,chart_type:o.chart_type,chartStateChange:t.trade.chartStateChange,current_symbol_spot:o.current_symbol_spot,current_symbol_spot_time:o.current_symbol_spot_time,updateChartType:o.updateChartType,updateGranularity:o.updateGranularity,settings:{assetInformation:!1,countdown:r.is_chart_countdown_visible,isHighestLowestMarkerEnabled:!1,language:n.current_language.toLowerCase(),position:r.is_chart_layout_default?"bottom":"left",theme:r.is_dark_mode_on?"dark":"light"},last_contract:{is_digit_contract:o.last_contract.is_digit_contract,is_ended:o.last_contract.is_ended},is_trade_enabled:t.trade.is_trade_enabled,main_barrier:t.trade.main_barrier_flattened,extra_barriers:t.trade.barriers_flattened,show_digits_stats:t.trade.show_digits_stats,contract_type:t.trade.contract_type,symbol:t.trade.symbol,exportLayout:t.trade.exportLayout,setChartStatus:t.trade.setChartStatus,ticks_history_stats:t.trade.ticks_history_stats,chart_layout:t.trade.chart_layout,wsForget:t.trade.wsForget,wsForgetStream:t.trade.wsForgetStream,wsSendRequest:t.trade.wsSendRequest,wsSubscribe:t.trade.wsSubscribe,active_symbols:t.trade.active_symbols,has_alternative_source:t.trade.has_alternative_source,refToAddTick:t.trade.refToAddTick}}))(Le);const ze=Ie;var Ue,Be=i.lazy((function(){return(0,p.moduleLoader)((function(){return r.e("contract").then(r.bind(r,"./src/Modules/Contract/index.js"))}))})),Fe={component:i.lazy((function(){return(0,p.moduleLoader)((function(){return Promise.resolve().then(r.bind(r,"./src/Modules/Page404/index.js"))}))})),getTitle:function(){return(0,m.localize)("Error 404")}};const He=function(){return Ue||(Ue=[{path:p.routes.contract,component:Be,getTitle:function(){return(0,m.localize)("Contract Details")},is_authenticated:!0},{path:p.routes.trade,component:ze,getTitle:function(){return(0,m.localize)("Trader")},exact:!0}]).push(Fe),Ue};var Ge=["active_class","to","children"];function Ve(){return Ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ve.apply(this,arguments)}function We(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var qe=function(e){var t=e.active_class,r=e.to,n=e.children,o=We(e,Ge),a=function(e){return/^\//.test(e)?e:"/".concat(e||"")}(r),s=d(a,He());if(!s)throw new Error("Route not found: ".concat(r));return r?i.createElement(_.NavLink,Ve({"data-testid":"dt_binary_link",to:a,activeClassName:t||"active",exact:s.exact},o),n):i.createElement("a",Ve({"data-testid":"dt_binary_link"},o),n)};qe.propTypes={active_class:o().string,children:o().oneOfType([o().object,o().array,o().string]),to:o().string};const Ye=qe;var Ze=r("./src/Modules/Page404/index.js");function Xe(){return Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xe.apply(this,arguments)}const $e=function(e){return i.createElement(_.Route,{exact:e.exact,path:e.path,render:function(t){var r,n=null,o=(0,p.removeBranchName)(location.pathname).replace(/\/$/,""),a=function(t){var r;return""===t||(null!==(r=e.path)&&void 0!==r&&r.includes(":")?t.substring(0,t.lastIndexOf("/")+1)===e.path.substring(0,e.path.indexOf(":")):e.path===t||!(!e.routes||!e.routes.find((function(e){return t===e.path}))))}(o);if(e.component===_.Redirect){var s=e.to;if(e.path===p.routes.index)s=t.location.pathname.toLowerCase().replace(e.path,"");n=i.createElement(_.Redirect,{to:s})}else if(a&&e.is_authenticated&&!e.is_logging_in&&!e.is_logged_in)(0,p.redirectToLogin)(e.is_logged_in,(0,m.getLanguage)());else{var c=e.routes?e.routes.find((function(e){return e.default})):{},l=!(0,p.isEmptyObject)(c);n=i.createElement(i.Fragment,null,l&&o===e.path&&i.createElement(_.Redirect,{to:c.path}),a?i.createElement(e.component,Xe({},t,{routes:e.routes})):i.createElement(Ze.default,null))}var u=(null===(r=e.getTitle)||void 0===r?void 0:r.call(e))||"";return document.title="".concat(u," | ").concat(p.default_title),(0,p.alternateLinkTagChange)(),(0,p.canonicalLinkTagChange)(),n}})};function Je(){return Je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Je.apply(this,arguments)}const Ke=function(e){return i.createElement(i.Suspense,{fallback:i.createElement("div",null)},i.createElement(_.Switch,null,He().map((function(t,r){return i.createElement($e,Je({key:r},t,e))}))))};var Qe=function(e,t){return e.some((function(e){return!!(0,l.matchPath)(t,{path:e,exact:!0})}))},et=function(e){var t=e.path_from,r=e.path_to,n=e.action,o=e.match_patterns,i=e.callback;"PUSH"!==n&&"POP"!==n||i(o.some((function(e){return Qe(e.from,t)&&Qe(e.to,r)})));return!0},tt=s()({loader:function(){return r.e("error-component").then(r.bind(r,"./src/App/Components/Elements/Errors/index.js"))},loading:u.UILoader,render:function(e,t){var r=e.default;return i.createElement(r,t)}}),rt=function(e){var t=e.onUnmountPortfolio,r=e.error,n=e.has_error,o=e.history,a=e.is_logged_in,s=e.is_logging_in,c=e.passthrough,l=e.setPromptHandler,u=e.setTradeMountingPolicy;return i.useEffect((function(){return l&&l(!0,(function(e,r){return et({path_from:o.location.pathname,path_to:e.pathname,match_patterns:[{from:He().flatMap((function(e){return e.routes?e.routes.map((function(e){return e.path})):[e.path]})).filter((function(e){return e&&e!==p.routes.mt5&&e!==p.routes.dxtrade})),to:[p.routes.mt5,p.routes.dxtrade]}],action:r,callback:function(e){e&&t()}}),et({path_from:o.location.pathname,path_to:e.pathname,match_patterns:[{from:[p.routes.contract],to:[p.routes.trade]},{from:[p.routes.trade],to:[p.routes.contract]}],action:r,callback:u})})),function(){null==l||l(!1)}}),[]),i.useEffect((function(){return function(){return t()}}),[t]),n?i.createElement(tt,r):i.createElement(Ke,{is_logged_in:a,is_logging_in:s,passthrough:c})};rt.propTypes={error:c.PropTypes.objectOrObservableObject,has_error:o().bool,history:o().object,is_logged_in:o().bool,is_logging_in:o().bool,onUnmountPortfolio:o().func,passthrough:o().object,setPromptHandler:o().func,setTradeMountingPolicy:o().func};const nt=(0,l.withRouter)((0,y.$j)((function(e){var t=e.client,r=e.common,n=e.modules,o=e.ui;return{onUnmountPortfolio:e.portfolio.onUnmount,error:r.error,has_error:r.has_error,is_logged_in:t.is_logged_in,is_logging_in:t.is_logging_in,setPromptHandler:o.setPromptHandler,setTradeMountingPolicy:n.trade.setSkipPrePostLifecycle}}))(rt));var ot=r("../../node_modules/react-transition-group/esm/TransitionGroup.js"),it=r("./src/Stores/Modules/Trading/Helpers/multiplier.js"),at=r("./src/App/Components/Elements/ContentLoader/index.js"),st=r("./src/Constants/contract.js"),ct=r("./src/Utils/Helpers/market-underlying.js"),lt=function(e){var t=e.is_visible,r="won"===e.result;return i.createElement(i.Fragment,null,i.createElement(v.Z,{in:t,timeout:250,classNames:{enter:"positions-modal-card__result--enter",enterDone:"positions-modal-card__result--enter-done",exit:"positions-modal-card__result--exit"},unmountOnExit:!0},i.createElement("div",{className:"positions-modal-card__caption-wrapper","data-testid":"result_mobile"},i.createElement("span",{className:g()("positions-modal-card__caption",{"positions-modal-card__caption--won":r,"positions-modal-card__caption--lost":!r})},r?i.createElement(i.Fragment,null,(0,m.localize)("Won"),i.createElement(u.Icon,{icon:"IcCheckmarkCircle",className:"positions-modal-card__icon",color:"green"})):i.createElement(i.Fragment,null,(0,m.localize)("Lost"),i.createElement(u.Icon,{icon:"IcCrossCircle",className:"positions-modal-card__icon",color:"red"}))))))};lt.propTypes={is_visible:o().bool,result:o().string};const ut=lt;var pt=function(e){var t,r=e.active_symbols,n=e.addToast,o=e.className,a=e.contract_info,s=e.contract_update,c=e.currency,l=e.current_focus,_=e.current_tick,d=e.getContractById,f=e.id,h=e.indicative,y=e.is_loading,b=e.is_mobile,w=e.is_sell_requested,k=e.is_unsupported,E=e.onClickSell,S=e.profit_loss,x=e.onClickCancel,O=e.removeToast,C=e.result,P=e.sell_price,T=e.server_time,j=e.setCurrentFocus,A=e.should_show_cancellation_warning,D=e.status,I=e.toggleCancellationWarning,R=e.togglePositions,M=e.toggleUnsupportedContractModal,L=e.type,N=i.createElement("div",{className:"positions-modal-card__content-loader"},i.createElement(at.r,{speed:2})),z=(0,p.isMultiplierContract)(a.contract_type),U=(0,p.isAccumulatorContract)(a.contract_type),B=(0,p.isCryptoContract)(a.underlying),F=!z||B&&z,H=!!(0,p.getEndTime)(a),G=S>=0?"won":"lost",V=(0,p.hasContractEntered)(a)&&(0,p.isOpen)(a),W=(0,p.getSymbolDisplayName)(r,(0,ct.cS)(a.shortcode).underlying),q=i.createElement(i.Fragment,null,i.createElement("div",{className:g()("positions-modal-card__grid","positions-modal-card__grid-header")},i.createElement("div",{className:"positions-modal-card__underlying-name"},i.createElement(u.Icon,{icon:a.underlying?"IcUnderlying".concat(a.underlying):"IcUnknown",size:34}),i.createElement(u.Text,{size:"xxs",className:"positions-modal-card__symbol",weight:"bold"},a.display_name)),i.createElement("div",{className:"positions-modal-card__type"},i.createElement(u.ContractCard.ContractTypeCell,{getContractTypeDisplay:st.h8,is_high_low:(0,p.isHighLow)({shortcode:a.shortcode}),multiplier:a.multiplier,type:L})),i.createElement(v.Z,{in:V,timeout:250,classNames:{enter:"positions-modal-card__sell-button--enter",enterDone:"positions-modal-card__sell-button--enter-done",exit:"positions-modal-card__sell-button--exit"},unmountOnExit:!0},i.createElement("div",{className:"positions-modal-card__sell-button"},i.createElement(u.ContractCard.Sell,{contract_info:a,is_sell_requested:w,getCardLabels:st.gk,onClickSell:E})))),i.createElement(u.CurrencyBadge,{currency:null!==(t=null==a?void 0:a.currency)&&void 0!==t?t:""}),i.createElement("div",{className:g()("positions-modal-card__grid","positions-modal-card__grid-body")},i.createElement("div",{className:g()("positions-modal-card__grid-profit-payout")},i.createElement("div",{className:g()("positions-modal-card__profit-loss","positions-modal-card__profit-loss-label")},C?(0,m.localize)("Profit/Loss:"):(0,m.localize)("Potential profit/loss:")),i.createElement("div",{className:g()("positions-modal-card__indicative","positions-modal-card__indicative-label")},C?(0,m.localize)("Payout:"):(0,m.localize)("Indicative price:")),i.createElement("div",{className:g()("positions-modal-card__profit-loss",{"positions-modal-card__profit-loss--is-crypto":(0,p.isCryptocurrency)(c),"positions-modal-card__profit-loss--negative":S<0,"positions-modal-card__profit-loss--positive":S>0})},i.createElement(u.Money,{amount:Math.abs(S),currency:c}),i.createElement("div",{className:g()("positions-modal-card__indicative--movement",{"positions-modal-card__indicative--movement-complete":!!C})},"profit"===D&&i.createElement(u.Icon,{icon:"IcProfit"}),"loss"===D&&i.createElement(u.Icon,{icon:"IcLoss"}))),i.createElement("div",{className:"positions-modal-card__indicative"},i.createElement(u.Money,{amount:P||h,currency:c}),i.createElement("div",{className:g()("positions-modal-card__indicative--movement",{"positions-modal-card__indicative--movement-complete":!!C})},"profit"===D&&i.createElement(u.Icon,{icon:"IcProfit"}),"loss"===D&&i.createElement(u.Icon,{icon:"IcLoss"})))),i.createElement("div",{className:g()("positions-modal-card__grid-price-payout")},i.createElement("div",{className:"positions-modal-card__purchase-price"},i.createElement(u.Text,{size:"xxxs",className:"positions-modal-card__purchase-label"},(0,m.localize)("Purchase price:")),i.createElement(u.Text,{weight:"bold",size:"xxs",className:"positions-modal-card__purchase-value"},i.createElement(u.Money,{amount:a.buy_price,currency:c}))),i.createElement("div",{className:"positions-modal-card__payout-price"},i.createElement(u.Text,{size:"xxxs",className:"positions-modal-card__payout-label"},(0,m.localize)("Potential payout:")),i.createElement(u.Text,{weight:"bold",size:"xxs",className:"positions-modal-card__payout-value"},a.payout?i.createElement(u.Money,{amount:a.payout,currency:c}):i.createElement("strong",null,"-i")))),C||a.is_sold?i.createElement(ut,{contract_id:f,is_visible:!!a.is_sold,result:C||G}):i.createElement(u.ProgressSliderMobile,{className:"positions-modal-card__progress",current_tick:_,getCardLabels:st.gk,is_loading:y,start_time:a.date_start,expiry_time:a.date_expiry,server_time:T,ticks_count:a.tick_count}))),Y=i.createElement(u.ContractCard.Header,{contract_info:a,display_name:W,getCardLabels:st.gk,getContractTypeDisplay:st.h8,has_progress_slider:!b&&F||U,is_mobile:b,is_sell_requested:w,onClickSell:E,server_time:T}),Z=i.createElement(u.ContractCard.Body,{addToast:n,connectWithContractUpdate:it.tP,contract_info:a,contract_update:s,currency:c,current_focus:l,getCardLabels:st.gk,getContractById:d,is_accumulator:U,is_mobile:b,is_multiplier:z,is_positions:!0,is_sold:!!a.is_sold,has_progress_slider:b&&F&&!H,removeToast:O,server_time:T,setCurrentFocus:j,should_show_cancellation_warning:A,status:D,toggleCancellationWarning:I}),X=i.createElement(u.ContractCard.Footer,{contract_info:a,getCardLabels:st.gk,is_multiplier:z,is_sell_requested:w,onClickCancel:x,onClickSell:E,server_time:T,status:D}),$=i.createElement(i.Fragment,null,i.createElement(u.ContractCard,{contract_info:a,getCardLabels:st.gk,is_multiplier:z,profit_loss:S,should_show_result_overlay:!1},Y,Z,X)),J=z||U?$:q;return i.createElement("div",{id:"dt_drawer_card_".concat(f),className:g()("positions-modal-card__wrapper",o)},k?i.createElement("div",{className:g()("positions-modal-card"),onClick:function(){return M(!0)}},a.underlying?J:N):i.createElement(i.Fragment,null,i.createElement(Ye,{onClick:R,className:g()("positions-modal-card",{"positions-modal-card--multiplier":z}),to:(0,p.getContractPath)(f)},a.underlying?J:N)))};pt.propTypes={active_symbols:o().array,addToast:o().func,className:o().string,contract_info:o().object,contract_update:o().object,currency:o().string,current_focus:o().string,current_tick:o().number,duration:o().oneOfType([o().number,o().string]),duration_unit:o().string,exit_spot:o().oneOfType([o().number,o().string]),getContractById:o().func,id:o().number,indicative:o().number,is_loading:o().bool,is_mobile:o().bool,is_sell_requested:o().bool,is_unsupported:o().bool,is_valid_to_sell:o().oneOfType([o().number,o().bool]),onClickRemove:o().func,onClickSell:o().func,onClickCancel:o().func,profit_loss:o().number,removeToast:o().func,result:o().string,sell_price:o().number,sell_time:o().number,server_time:o().object,setCurrentFocus:o().func,should_show_cancellation_warning:o().bool,status:o().string,toggleCancellationWarning:o().func,togglePositions:o().func,toggleUnsupportedContractModal:o().func,type:o().string};const _t=(0,y.$j)((function(e){var t=e.common,r=e.ui,n=e.contract_trade;return{active_symbols:e.modules.trade.active_symbols,addToast:r.addToast,current_focus:r.current_focus,getContractById:n.getContractById,is_mobile:r.is_mobile,removeToast:r.removeToast,server_time:t.server_time,setCurrentFocus:r.setCurrentFocus,should_show_cancellation_warning:r.should_show_cancellation_warning,toggleCancellationWarning:r.toggleCancellationWarning,updateLimitOrder:n.updateLimitOrder}}))(pt);var dt=function(e){var t=e.positions_count,r=e.is_open,n=e.togglePositions,o=g()("positions-toggle",{"positions-toggle--active":r,"positions-toggle--has-count":t>0});return i.createElement("a",{id:"dt_positions_toggle","data-testid":"dt_positions_toggle",className:o,onClick:n,"data-count":t},i.createElement(u.Icon,{data_testid:"dt_icon",icon:"IcPortfolio",className:"positions-toggle__icon"}))};dt.propTypes={is_open:o().bool,is_positions_drawer_on:o().bool,positions_count:o().number,togglePositions:o().func,togglePositionsDrawer:o().func};const mt=dt;function ft(){return ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ft.apply(this,arguments)}const ht=(0,y.$j)((function(e){var t=e.modules,r=e.ui,n=e.portfolio;return{symbol:t.trade.symbol,trade_contract_type:t.trade.contract_type,onClickRemove:n.removePositionById,togglePositionsDrawer:r.togglePositionsDrawer,is_positions_drawer_on:r.is_positions_drawer_on}}))((function(e){var t=e.active_positions_count,r=e.all_positions,n=e.currency,o=e.disableApp,a=e.enableApp,s=e.error,c=e.is_empty,l=e.is_positions_drawer_on,d=e.onClickSell,f=e.onClickRemove,h=e.onClickCancel,y=e.symbol,b=e.togglePositionsDrawer,g=e.toggleUnsupportedContractModal,E=e.trade_contract_type,S=[],x=function(){S.slice(0,5).map((function(e){var t=e.contract_info;null!=t&&t.is_sold&&f(t.contract_id)})),b()};S=r.filter((function(e){return e.contract_info&&y===e.contract_info.underlying&&(0,k._M)(e.contract_info,E)}));var O=i.createElement(i.Fragment,null,i.createElement(ot.Z,{component:"div"},S.slice(0,5).map((function(e){return i.createElement(v.Z,{appear:!0,key:e.id,in:!0,timeout:150,classNames:{appear:"dc-contract-card__wrapper--enter",enter:"dc-contract-card__wrapper--enter",enterDone:"dc-contract-card__wrapper--enter-done",exit:"dc-contract-card__wrapper--exit"},unmountOnExit:!0},i.createElement(_t,ft({onClickSell:d,onClickCancel:h,onClickRemove:f,key:e.id,currency:n,toggleUnsupportedContractModal:g,togglePositions:b},e)))}))));return i.createElement(i.Fragment,null,i.createElement(mt,{is_open:l,togglePositions:b,positions_count:t}),i.createElement(u.Modal,{is_open:l,toggleModal:x,id:"dt_mobile_positions",is_vertical_top:!0,has_close_icon:!0,enableApp:a,disableApp:o,width:"calc(100vw - 32px)"},i.createElement(u.Div100vhContainer,{className:"positions-modal",height_offset:"48px"},i.createElement("div",{className:"positions-modal__header"},i.createElement(u.Text,{size:"xxxs",className:"positions-modal__title"},i.createElement(u.Icon,{icon:"IcPortfolio",className:"positions-modal__title-icon"}),(0,m.localize)("Recent positions")),i.createElement("div",{className:"positions-modal__close-btn",onClick:x},i.createElement(u.Icon,{icon:"IcMinusBold"}))),i.createElement("div",{className:"positions-modal__body"},c||s?i.createElement(w,{error:s}):O),i.createElement("div",{className:"positions-modal__footer"},i.createElement(_.NavLink,{onClick:x,className:"dc-btn dc-btn--secondary dc-btn__large positions-modal__footer-btn",to:p.routes.positions},i.createElement(u.Text,{size:"xs",weight:"bold"},(0,m.localize)("Go to Reports")))))))}));var yt=function(e){var t=e.active_positions_count,r=e.positions,n=e.positions_currency,o=e.disableApp,a=e.enableApp,s=e.positions_error,c=e.onPositionsSell,l=e.onPositionsRemove,u=e.onPositionsCancel,p=e.symbol,_=e.trade_contract_type,d=r.filter((function(e){return e.contract_info&&p===e.contract_info.underlying&&(0,k._M)(e.contract_info,_)}));return i.createElement(ht,{active_positions_count:t,all_positions:r,currency:n,disableApp:o,is_empty:!d.length,enableApp:a,error:s,onClickSell:c,onClickRemove:l,onClickCancel:u})};yt.propTypes={active_positions_count:o().number,positions:c.PropTypes.arrayOrObservableArray,positions_currency:o().string,disableApp:o().func,enableApp:o().func,positions_error:o().string,onPositionsSell:o().func,onPositionsRemove:o().func,onPositionsCancel:o().func,symbol:o().string,trade_contract_type:o().string};const bt=(0,y.$j)((function(e){var t=e.client,r=e.modules,n=e.ui,o=e.portfolio;return{active_positions_count:o.active_positions_count,positions:o.all_positions,positions_currency:t.currency,disableApp:n.disableApp,enableApp:n.enableApp,positions_error:o.error,onPositionsSell:o.onClickSell,onPositionsRemove:o.removePositionById,onPositionsCancel:o.onClickCancel,symbol:r.trade.symbol,trade_contract_type:r.trade.contract_type}}))(yt);function gt(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var vt=function(e){var t=e.populateHeaderExtensions,r=e.store,n=e.is_logged_in,o=e.is_populating_account_list,a=e.onMountPositions,s=e.onMountCashier,c=e.setAccountSwitchListener,l=location.pathname!==p.routes.mt5,_=n&&l,d=i.useCallback((function(){var e=_&&i.createElement(u.MobileWrapper,null,i.createElement(y.z1,{store:r},i.createElement(bt,null)));t(e)}),[t,r,l,o]);return i.useEffect((function(){var e=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,p.isMobile)()||!l){e.next=9;break}return e.next=3,(0,M.when)((function(){return!o}));case 3:if(!n){e.next=9;break}return e.next=6,p.WS.wait("authorize");case 6:a(),s(!0),c();case 9:d();case 10:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){gt(i,n,o,a,s,"next",e)}function s(e){gt(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return e(),function(){return t(null)}}),[s,a,d,t,c,r,l]),i.useEffect((function(){d()})),null};vt.propTypes={populateHeaderExtensions:o().func,store:o().object,is_logged_in:o().bool,is_populating_account_list:o().bool,onMountPositions:o().func,onMountCashier:o().func,setAccountSwitchListener:o().func};const wt=(0,y.$j)((function(e){var t=e.client,r=e.modules,n=e.ui,o=e.portfolio;return{populateHeaderExtensions:n.populateHeaderExtensions,is_logged_in:t.is_logged_in,is_populating_account_list:t.is_populating_account_list,onMountPositions:o.onMount,onMountCashier:r.cashier.general_store.onMountCommon,setAccountSwitchListener:r.cashier.general_store.setAccountSwitchListener}}))(vt),kt=mt;var Et=function(e){var t=e.active_positions_count,r=e.is_logged_in,n=e.is_positions_drawer_on,o=e.location,a=e.populateFooterExtensions,s=e.togglePositionsDrawer;i.useEffect((function(){return l()})),i.useEffect((function(){return function(){return a([])}}),[]);var c=function(){return i.createElement(kt,{is_open:n,togglePositions:s,positions_count:t})},l=function(){var e=o.pathname===p.routes.trade;a(r&&e?[{position:"left",Component:c}]:[])};return null};Et.propTypes={active_positions_count:o().number,is_logged_in:o().bool,is_positions_drawer_on:o().bool,location:o().object,populateFooterExtensions:o().func,togglePositionsDrawer:o().func};const St=(0,y.$j)((function(e){var t=e.client,r=e.ui;return{active_positions_count:e.portfolio.active_positions_count,is_logged_in:t.is_logged_in,is_positions_drawer_on:r.is_positions_drawer_on,populateFooterExtensions:r.populateFooterExtensions,togglePositionsDrawer:r.togglePositionsDrawer}}))((0,_.withRouter)(Et));var xt=s()({loader:function(){return r.e("settings-chart").then(r.bind(r,"./src/App/Containers/SettingsModal/settings-chart.jsx"))},loading:u.UILoader}),Ot=function(e){var t=e.populateSettingsExtensions,r=e.store,n=function(){var e=[{icon:"IcChart",label:(0,m.localize)("Charts"),value:function(e){return function(e,t){return i.createElement(y.z1,{store:t},i.createElement(xt,e))}(e,r)}}];t(e)};return i.useEffect((function(){return function(){return t(null)}}),[t]),i.useEffect((function(){return n()})),null};Ot.propTypes={populateSettingsExtensions:o().func,store:o().object};const Ct=(0,y.$j)((function(e){return{populateSettingsExtensions:e.ui.populateSettingsExtensions}}))(Ot);var Pt=r("./src/Modules/Trading/Containers/toast-popup.jsx"),Tt=r("../../node_modules/lodash.debounce/index.js"),jt=r.n(Tt),At=r("./src/Stores/Modules/Trading/Helpers/start-date.js");function Dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return It(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return It(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Lt=function(){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(r),!0).forEach((function(t){Mt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({amount:{rules:[["req",{message:(0,m.localize)("Amount is a required field.")}],["number",{min:0,type:"float"}]]},barrier_1:{rules:[["req",{condition:function(e){return e.barrier_count&&e.form_components.indexOf("barrier")>-1},message:(0,m.localize)("Barrier is a required field.")}],["barrier",{condition:function(e){return e.barrier_count}}],["custom",{func:function(e,t,r,n){return!(r.barrier_count>1)||+e>+n.barrier_2},message:(0,m.localize)("Higher barrier must be higher than lower barrier.")}],["custom",{func:function(e,t,r,n){return!/^[+-]/.test(n.barrier_1)||0!=+n.barrier_1},message:(0,m.localize)("Barrier cannot be zero.")}]],trigger:"barrier_2"},barrier_2:{rules:[["req",{condition:function(e){return e.barrier_count>1&&e.form_components.indexOf("barrier")>-1},message:(0,m.localize)("Barrier is a required field.")}],["barrier",{condition:function(e){return e.barrier_count}}],["custom",{func:function(e,t,r,n){return/^[+-]/g.test(n.barrier_1)&&/^[+-]/g.test(e)||/^(?![+-])/g.test(n.barrier_1)&&/^(?![+-])/g.test(e)},message:(0,m.localize)("Both barriers should be relative or absolute")}],["custom",{func:function(e,t,r,n){return+n.barrier_1>+e},message:(0,m.localize)("Lower barrier must be lower than higher barrier.")}]],trigger:"barrier_1"},duration:{rules:[["req",{message:(0,m.localize)("Duration is a required field.")}]]},start_date:{trigger:"start_time"},expiry_date:{trigger:"expiry_time"},start_time:{rules:[["custom",{func:function(e,t,r){return"spot"===r.contract_start_type||(0,p.isTimeValid)(e)},message:(0,m.localize)('Please enter the start time in the format "HH:MM".')}],["custom",{func:function(e,t,r){return"spot"===r.contract_start_type||(0,p.isHourValid)(e)},message:(0,m.localize)("Hour must be between 0 and 23.")}],["custom",{func:function(e,t,r){return"spot"===r.contract_start_type||(0,p.isMinuteValid)(e)},message:(0,m.localize)("Minute must be between 0 and 59.")}],["custom",{func:function(e,t,r){if("spot"===r.contract_start_type)return!0;if(!(0,p.isTimeValid)(e))return!1;var n=(0,p.toMoment)(r.start_date),o=n.clone(),i=Dt(e.split(":"),2),a=i[0],s=i[1];return(0,At.Y)(r.sessions,o.hour(a).minute(s),n)},message:(0,m.localize)("Start time cannot be in the past.")}]]},expiry_time:{rules:[["custom",{func:function(e,t,r){return"spot"===r.contract_start_type||(0,p.isTimeValid)(e)},message:(0,m.localize)('Please enter the start time in the format "HH:MM".')}],["custom",{func:function(e,t,r){return"spot"===r.contract_start_type||(0,p.isHourValid)(e)},message:(0,m.localize)("Hour must be between 0 and 23.")}],["custom",{func:function(e,t,r){return"spot"===r.contract_start_type||(0,p.isMinuteValid)(e)},message:(0,m.localize)("Minute must be between 0 and 59.")}],["custom",{func:function(e,t,r){if("spot"===r.contract_start_type)return!0;if(!(0,p.isTimeValid)(e))return!1;var n=(0,p.toMoment)(r.start_date),o=n.clone(),i=Dt(e.split(":"),2),a=i[0],s=i[1];return(0,At.Y)(r.sessions,o.hour(a).minute(s),n)},message:(0,m.localize)("Expiry time cannot be in the past.")}]]}},Nt())},Nt=function(){return{stop_loss:{rules:[["req",{condition:function(e){return e.has_stop_loss&&!e.stop_loss},message:(0,m.localize)("Please enter a stop loss amount.")}]]},take_profit:{rules:[["req",{condition:function(e){return e.has_take_profit&&!e.take_profit},message:(0,m.localize)("Please enter a take profit amount.")}]]}}},zt=r("./src/Stores/Modules/Trading/Helpers/contract-type.js"),Ut=r("./src/_common/base/server_time.js"),Bt=r.n(Ut);function Ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ht(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(r),!0).forEach((function(t){Gt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Gt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vt(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var Wt=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.WS.buy(Ht({proposal_id:t,price:r},n&&{passthrough:n})));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Vt(i,n,o,a,s,"next",e)}function s(e){Vt(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e,r,n){return t.apply(this,arguments)}}();function qt(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var Yt=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zt.R.buildContractTypesConfig(t);case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){qt(i,n,o,a,s,"next",e)}function s(e){qt(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();function Zt(e){return function(e){if(Array.isArray(e))return Xt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Xt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $t=function(e){var t=e.contract_types_list,r=e.contract_type;return zt.R.getContractType(t,r)},Jt=function(e){return zt.R.getContractValues(e)};function Kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Qt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function er(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?er(Object(r),!0).forEach((function(t){rr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):er(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function rr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var nr=function(e){var t=(0,p.getExpiryType)(e);return tr({contract_expiry_type:t},e.contract_expiry_type!==t&&zt.R.getBarriers(e.contract_type,t))},or=function(e){var t=(0,p.getExpiryType)(e),r=e.duration,n=e.duration_min_max,o=e.duration_unit;return tr({},ir({contract_expiry_type:t,duration:r,duration_min_max:n,duration_unit:o}))},ir=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.contract_expiry_type,r=e.duration,n=e.duration_min_max,o=e.duration_unit,i=(0,p.getDurationMinMaxValues)(n,t,o),a=Kt(i,2),s=a[0],c=a[1];return r<s?{duration:s}:r>c?{duration:c}:{}};function ar(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ar(Object(r),!0).forEach((function(t){cr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ar(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function cr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lr(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function ur(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){lr(i,n,o,a,s,"next",e)}function s(e){lr(i,n,o,a,s,"throw",e)}a(void 0)}))}}var pr=function(){var e=ur(regeneratorRuntime.mark((function e(t){var r,n,o,i,a,s,c,l,u,p,_,d,m,f,h,y,b,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.contract_type,n=t.duration_unit,o=t.start_date,i=t.root_store.common.server_time,a=t.start_time,s=t.expiry_date,c=t.expiry_type,a=a||i.clone().add(6,"minute").format("HH:mm"),l=zt.R.getStartType(o),u=l.contract_start_type,p=zt.R.getSessions(r,o),_=p.sessions,d=zt.R.getStartTime(_,o,a),a=d.start_time,m=zt.R.getDurationUnitsList(r,u),f=m.duration_units_list,h=zt.R.getDurationUnit(n,r,u),y=zt.R.getExpiryType(f,c),c=y.expiry_type,b=zt.R.getExpiryDate(f,s,c,o),s=b.expiry_date,g=zt.R.getDurationMinMax(r,u),e.abrupt("return",sr(sr(sr(sr(sr(sr(sr(sr({},l),m),g),h),p),d),b),y));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_r=function(){var e=ur(regeneratorRuntime.mark((function e(t){var r,n,o,i,a,s,c,l,u,p,_,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.start_time,n=t.expiry_date,o=t.expiry_type,i=t.expiry_time,a=t.start_date,s=t.symbol,c=t.sessions,e.next=3,zt.R.getTradingTimes(n,s);case 3:return l=e.sent,u={market_open_times:l.open},p={market_close_times:l.close},_=p.market_close_times,d=zt.R.getExpiryTime(n,i,o,_,c,a,r),e.abrupt("return",sr(sr(sr({},d),u),p));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function dr(e){return function(e){if(Array.isArray(e))return mr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return mr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fr(Object(r),!0).forEach((function(t){yr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function br(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function gr(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){br(i,n,o,a,s,"next",e)}function s(e){br(i,n,o,a,s,"throw",e)}a(void 0)}))}}var vr=function(){var e=gr(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.getSnapshot(),o=0;case 2:if(!(o<r.length)){e.next=12;break}return e.t0=Object,e.t1=n,e.next=7,r[o](n);case 7:e.t2=e.sent,e.t0.assign.call(e.t0,e.t1,e.t2);case 9:o++,e.next=2;break;case 12:t.updateStore(hr({},n));case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),wr=function(){var e=gr(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=kr(t,r),e.next=3,vr(t,n);case 3:return o=Er(),e.next=6,vr(t,o);case 6:t.updateStore({is_trade_enabled:!0});case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),kr=function(e,t){return[zt.R.getContractCategories,$t].concat(dr(/\b(symbol|contract_type|is_equal)\b/.test(Object.keys(t))||!e.contract_type?[Jt]:[]),[pr,nr],dr(/\b(symbol|contract_type|is_equal)\b/.test(Object.keys(t))||!e.contract_type?[or]:[]))},Er=function(){return[_r]},Sr=r("./src/Stores/Modules/Trading/Helpers/proposal.js"),xr={CALL:"ABOVE",PUT:"BELOW",CALLE:"ABOVE",PUTE:"BELOW",EXPIRYRANGE:"BETWEEN",EXPIRYMISS:"OUTSIDE",RANGE:"BETWEEN",UPORDOWN:"OUTSIDE",ONETOUCH:"NONE_SINGLE",NOTOUCH:"NONE_SINGLE",ASIANU:"ABOVE",ASIAND:"BELOW",MULTUP:"ABOVE",MULTDOWN:"BELOW",ACCU:"NONE_DOUBLE"},Or={1:"NONE_SINGLE",2:"NONE_DOUBLE"},Cr="#4bb4b3",Pr="#ff6444",Tr="#999999",jr="#6E6E6E",Ar="dotted",Dr="solid",Ir=function(e,t){var r=e.findIndex((function(e){return e.key===t}));r>-1&&e.splice(r,1)};function Rr(e){return function(e){if(Array.isArray(e))return Mr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Mr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Lr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var zr=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.color,a=o.line_style,s=o.not_draggable;Lr(this,e),this.color=void 0,this.lineStyle=void 0,this.shade=void 0,this.shadeColor=void 0,this.high=void 0,this.low=void 0,this.relative=void 0,this.draggable=void 0,this.hidePriceLines=void 0,this.hideBarrierLine=void 0,this.hideOffscreenLine=void 0,this.title=void 0,this.onChartBarrierChange=void 0,(0,M.makeObservable)(this,{color:M.observable,lineStyle:M.observable,shade:M.observable,shadeColor:M.observable,high:M.observable,low:M.observable,relative:M.observable,draggable:M.observable,hidePriceLines:M.observable,hideBarrierLine:M.observable,hideOffscreenLine:M.observable,title:M.observable,updateBarriers:M.action.bound,updateBarrierShade:M.action.bound,onBarrierChange:M.action.bound,updateBarrierColor:M.action.bound,barrier_count:M.computed,default_shade:M.computed}),this.color=i,this.lineStyle=a||Dr,this.onChange=this.onBarrierChange,this.onChartBarrierChange="function"==typeof n?n.bind(this):function(){},this.high=t||0,r&&(this.low=r),this.shade=this.default_shade;var c=!!t;this.relative=!c||/^[+-]/.test(t),this.draggable=!s&&c,this.hidePriceLines=!c}var t,r,n;return t=e,r=[{key:"updateBarriers",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r||(this.relative=/^[+-]/.test(e)),this.high=e||void 0,this.low=t||void 0}},{key:"updateBarrierShade",value:function(e,t){this.shade=e&&xr[t]||this.default_shade}},{key:"onBarrierChange",value:function(e){var t=e.high,r=e.low;this.updateBarriers(t,r,!0),this.onChartBarrierChange.apply(this,Rr(function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.filter((function(e){return null!=e})).map((function(t){return"".concat(e&&!/^[+-]/.test(t)?"+":"").concat(t)}))}(this.relative,t,r)))}},{key:"updateBarrierColor",value:function(e){this.color=e?jr:Tr}},{key:"barrier_count",get:function(){return(void 0!==this.high)+(void 0!==this.low)}},{key:"default_shade",get:function(){return Or[this.barrier_count]}}],r&&Nr(t.prototype,r),n&&Nr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Ur={STOP_OUT:"stop_out",TAKE_PROFIT:"take_profit",STOP_LOSS:"stop_loss"},Br=function(e){var t=e.barriers,r=e.contract_type,n=e.contract_info,o=void 0===n?{}:n;if(e.is_over&&function(e,t){return(0,p.isMultiplierContract)(e)&&t.limit_order}(r,o)){var i=Object.values(Ur),a=Object.keys(o.limit_order).some((function(e){return e===Ur.STOP_LOSS&&o.limit_order[e].value}));i.forEach((function(e){var r=o.limit_order[e];if(r&&r.value){var n=t.find((function(t){return t.key===e}));if(n){if(n.high===+r.value)return;n.onChange({high:r.value})}else{var i={key:e,title:"".concat(r.display_name),color:e===Ur.TAKE_PROFIT?Cr:Pr,draggable:!1,lineStyle:e===Ur.STOP_OUT?Ar:Dr,hidePriceLines:a&&e===Ur.STOP_OUT,hideOffscreenLine:!0,showOffscreenArrows:!0,isSingleBarrier:!0,opacityOnOverlap:e===Ur.STOP_OUT&&.15};n=new zr(r.value),Object.assign(n,i),t.push(n)}}else Ir(t,e)}))}else{Object.values(Ur).forEach((function(e){return Ir(t,e)}))}},Fr=r("./src/_common/utility.js");function Hr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const Gr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errors={}}var t,r,n;return t=e,(r=[{key:"add",value:function(e,t){this.has(e)||(this.errors[e]=[]),-1===this.errors[e].indexOf(t)&&this.errors[e].push(t)}},{key:"all",value:function(){return this.errors}},{key:"first",value:function(e){return this.has(e)?this.errors[e][0]:null}},{key:"get",value:function(e){return this.has(e)?this.errors[e]:[]}},{key:"has",value:function(e){return Object.prototype.hasOwnProperty.call(this.errors,e)}}])&&Hr(t.prototype,r),n&&Hr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Vr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const qr=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Vr(this,e),this.input=t,this.rules=r,this.store=n,this.errors=new Gr,this.error_count=0}var t,r,n;return t=e,n=[{key:"getRuleObject",value:function(e){var t="string"==typeof e,r={name:t?e:e[0],options:t?{}:e[1]||{}};return r.validator="custom"===r.name?e[1].func:(0,p.getPreBuildDVRs)()[r.name].func,r}}],(r=[{key:"addFailure",value:function(e,t,r){var n=r||t.options.message||(0,p.getPreBuildDVRs)()[t.name].message();"length"===t.name?n=(0,Fr.template)(n,[t.options.min===t.options.max?t.options.min:"".concat(t.options.min,"-").concat(t.options.max)]):"min"===t.name?n=(0,Fr.template)(n,[t.options.min]):"not_equal"===t.name&&(n=(0,Fr.template)(n,[t.options.name1,t.options.name2])),this.errors.add(e,n),this.error_count++}},{key:"check",value:function(){var t=this;return Object.keys(this.input).forEach((function(r){Object.prototype.hasOwnProperty.call(t.rules,r)&&t.rules[r].forEach((function(n){var o=e.getRuleObject(n);if((o.validator||"function"==typeof o.validator)&&(!o.options.condition||o.options.condition(t.store))&&(""!==t.input[r]||"req"===o.name)){var i,a;if("number"===o.name){var s=o.validator(t.input[r],o.options,t.store,t.input);i=s.is_ok,a=s.message}else i=o.validator(t.input[r],o.options,t.store,t.input);i||t.addFailure(r,o,a)}}))})),!this.error_count}},{key:"isPassed",value:function(){return this.check()}}])&&Wr(t.prototype,r),n&&Wr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Yr(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Zr(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Yr(i,n,o,a,s,"next",e)}function s(e){Yr(i,n,o,a,s,"throw",e)}a(void 0)}))}}function Xr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xr(Object(r),!0).forEach((function(t){Jr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var en=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Kr(this,e),this.validation_errors={},this.validation_rules={},this.preSwitchAccountDisposer=null,this.pre_switch_account_listener=null,this.switchAccountDisposer=null,this.switch_account_listener=null,this.logoutDisposer=null,this.logout_listener=null,this.clientInitDisposer=null,this.client_init_listener=null,this.networkStatusChangeDisposer=null,this.network_status_change_listener=null,this.themeChangeDisposer=null,this.theme_change_listener=null,this.realAccountSignupEndedDisposer=null,this.real_account_signup_ended_listener=null,this.partial_fetch_time=0,(0,M.makeObservable)(this,{validation_errors:M.observable,validation_rules:M.observable,partial_fetch_time:M.observable,retrieveFromStorage:M.action,setValidationErrorMessages:M.action,setValidationRules:M.action,addRule:M.action,validateProperty:M.action,validateAllProperties:M.action,onSwitchAccount:M.action.bound,onPreSwitchAccount:M.action.bound,onLogout:M.action.bound,onClientInit:M.action.bound,onNetworkStatusChange:M.action.bound,onThemeChange:M.action.bound,onRealAccountSignupEnd:M.action.bound,disposePreSwitchAccount:M.action.bound,disposeSwitchAccount:M.action.bound,disposeLogout:M.action.bound,disposeClientInit:M.action.bound,disposeNetworkStatusChange:M.action.bound,disposeThemeChange:M.action.bound,disposeRealAccountSignupEnd:M.action.bound,onUnmount:M.action.bound,assertHasValidCache:M.action.bound});var n=r.root_store,o=r.local_storage_properties,i=r.session_storage_properties,a=r.validation_rules,s=r.store_name;Object.defineProperty(this,"root_store",{enumerable:!1,writable:!0}),Object.defineProperty(this,"local_storage_properties",{enumerable:!1,writable:!0}),Object.defineProperty(this,"session_storage_properties",{enumerable:!1,writable:!0});var c=o&&o.length||i&&i.length;if(c){if(!s)throw new Error("store_name is required for local/session storage");Object.defineProperty(this,"store_name",{value:s,enumerable:!1,writable:!1})}this.root_store=n,this.local_storage_properties=o||[],this.session_storage_properties=i||[],setTimeout((function(){t.setValidationRules(a),t.setupReactionForLocalStorage(),t.setupReactionForSessionStorage(),t.retrieveFromStorage()}),0)}var t,r,n;return t=e,r=[{key:"getSnapshot",value:function(e){var t=(0,M.toJS)(this);return(0,p.isEmptyObject)(this.root_store)||(t.root_store=this.root_store),e&&e.length&&(t=e.reduce((function(e,r){return Object.assign(e,Jr({},r,t[r]))}),{})),t}},{key:"setupReactionForLocalStorage",value:function(){var t=this;this.local_storage_properties.length&&(0,M.reaction)((function(){return t.local_storage_properties.map((function(e){return t[e]}))}),(function(){return t.saveToStorage(t.local_storage_properties,e.STORAGES.LOCAL_STORAGE)}))}},{key:"setupReactionForSessionStorage",value:function(){var t=this;this.session_storage_properties.length&&(0,M.reaction)((function(){return t.session_storage_properties.map((function(e){return t[e]}))}),(function(){return t.saveToStorage(t.session_storage_properties,e.STORAGES.SESSION_STORAGE)}))}},{key:"saveToStorage",value:function(t,r){var n=JSON.stringify(this.getSnapshot(t),(function(e,t){if(null!==t)return t}));r===e.STORAGES.LOCAL_STORAGE?localStorage.setItem(this.store_name,n):r===e.STORAGES.SESSION_STORAGE&&sessionStorage.setItem(this.store_name,n)}},{key:"retrieveFromStorage",value:function(){var e=this,t=JSON.parse(localStorage.getItem(this.store_name,{})),r=JSON.parse(sessionStorage.getItem(this.store_name,{})),n=$r($r({},t),r);Object.keys(n).forEach((function(t){return e[t]=n[t]}))}},{key:"setValidationErrorMessages",value:function(e,t){var r=this;this.validation_errors[e]&&!r.validation_errors[e].filter((function(e){return!t.includes(e)})).concat(t.filter((function(t){return!r.validation_errors[e].includes(t)}))).length||(this.validation_errors[e]=t)}},{key:"setValidationRules",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(t).forEach((function(r){e.addRule(r,t[r])}))}},{key:"addRule",value:function(e,t){var r=this;this.validation_rules[e]=t,(0,M.intercept)(this,e,(function(t){return r.validateProperty(e,t.newValue),t}))}},{key:"validateProperty",value:function(e,t){var r=this,n=this.validation_rules[e].trigger,o=Jr({},e,void 0!==t?t:this[e]),i=Jr({},e,this.validation_rules[e].rules||[]);n&&Object.hasOwnProperty.call(this,n)&&(o[n]=this[n],i[n]=this.validation_rules[n].rules||[]);var a=new qr(o,i,this);a.isPassed(),Object.keys(o).forEach((function(e){r.setValidationErrorMessages(e,a.errors.get(e))}))}},{key:"validateAllProperties",value:function(){var e=this,t=Object.keys(this.validation_rules),r=Object.keys(this.validation_errors);t.forEach((function(t){e.validateProperty(t,e[t])})),r.forEach((function(r){t.includes(r)||delete e.validation_errors[r]}))}},{key:"onSwitchAccount",value:function(e){var t=this;e&&(this.switch_account_listener=e,this.switchAccountDisposer=(0,M.when)((function(){return t.root_store.client.switch_broadcast}),(function(){try{var e=t.switch_account_listener();if(!e||!e.then||"function"!=typeof e.then)throw new Error("Switching account listeners are required to return a promise.");e.then((function(){t.root_store.client.switchEndSignal(),t.onSwitchAccount(t.switch_account_listener)}))}catch(e){(0,p.isProduction)()||console.error(e)}})))}},{key:"onPreSwitchAccount",value:function(e){var t=this;e&&(this.pre_switch_account_listener=e,this.preSwitchAccountDisposer=(0,M.when)((function(){return t.root_store.client.pre_switch_broadcast}),(function(){try{var e=t.pre_switch_account_listener();if(!e||!e.then||"function"!=typeof e.then)throw new Error("Pre-switch account listeners are required to return a promise.");e.then((function(){t.root_store.client.setPreSwitchAccount(!1),t.onPreSwitchAccount(t.pre_switch_account_listener)}))}catch(e){(0,p.isProduction)()||console.error(e)}})))}},{key:"onLogout",value:function(e){var t=this;this.logoutDisposer=(0,M.when)((function(){return t.root_store.client.has_logged_out}),Zr(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r=t.logout_listener())||!r.then||"function"!=typeof r.then){e.next=6;break}r.then((function(){t.root_store.client.setLogout(!1),t.onLogout(t.logout_listener)})),e.next=7;break;case 6:throw new Error("Logout listeners are required to return a promise.");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,p.isProduction)()||console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))),this.logout_listener=e}},{key:"onClientInit",value:function(e){var t=this;this.clientInitDisposer=(0,M.when)((function(){return t.root_store.client.initialized_broadcast}),Zr(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r=t.client_init_listener())||!r.then||"function"!=typeof r.then){e.next=6;break}r.then((function(){t.root_store.client.setInitialized(!1),t.onClientInit(t.client_init_listener)})),e.next=7;break;case 6:throw new Error("Client init listeners are required to return a promise.");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,p.isProduction)()||console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))),this.client_init_listener=e}},{key:"onNetworkStatusChange",value:function(e){var t=this;this.networkStatusChangeDisposer=(0,M.reaction)((function(){return t.root_store.common.is_network_online}),(function(e){try{t.network_status_change_listener(e)}catch(e){(0,p.isProduction)()||console.error(e)}})),this.network_status_change_listener=e}},{key:"onThemeChange",value:function(e){var t=this;this.themeChangeDisposer=(0,M.reaction)((function(){return t.root_store.ui.is_dark_mode_on}),(function(e){try{t.theme_change_listener(e)}catch(e){(0,p.isProduction)()||console.error(e)}})),this.theme_change_listener=e}},{key:"onRealAccountSignupEnd",value:function(e){var t=this;this.realAccountSignupEndedDisposer=(0,M.when)((function(){return t.root_store.ui.has_real_account_signup_ended}),(function(){try{var e=t.real_account_signup_ended_listener();if(!e||!e.then||"function"!=typeof e.then)throw new Error("Real account signup listeners are required to return a promise.");e.then((function(){t.root_store.ui.setRealAccountSignupEnd(!1),t.onRealAccountSignupEnd(t.real_account_signup_ended_listener)}))}catch(e){(0,p.isProduction)()||console.error(e)}})),this.real_account_signup_ended_listener=e}},{key:"disposePreSwitchAccount",value:function(){"function"==typeof this.preSwitchAccountDisposer&&this.preSwitchAccountDisposer(),this.pre_switch_account_listener=null}},{key:"disposeSwitchAccount",value:function(){"function"==typeof this.switchAccountDisposer&&this.switchAccountDisposer(),this.switch_account_listener=null}},{key:"disposeLogout",value:function(){"function"==typeof this.logoutDisposer&&this.logoutDisposer(),this.logout_listener=null}},{key:"disposeClientInit",value:function(){"function"==typeof this.clientInitDisposer&&this.clientInitDisposer(),this.client_init_listener=null}},{key:"disposeNetworkStatusChange",value:function(){"function"==typeof this.networkStatusChangeDisposer&&this.networkStatusChangeDisposer(),this.network_status_change_listener=null}},{key:"disposeThemeChange",value:function(){"function"==typeof this.themeChangeDisposer&&this.themeChangeDisposer(),this.theme_change_listener=null}},{key:"disposeRealAccountSignupEnd",value:function(){"function"==typeof this.realAccountSignupEndedDisposer&&this.realAccountSignupEndedDisposer(),this.real_account_signup_ended_listener=null}},{key:"onUnmount",value:function(){this.disposePreSwitchAccount(),this.disposeSwitchAccount(),this.disposeLogout(),this.disposeClientInit(),this.disposeNetworkStatusChange(),this.disposeThemeChange(),this.disposeRealAccountSignupEnd()}},{key:"assertHasValidCache",value:function(e){if(this.root_store.client.loginid!==e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];r.forEach((function(e){return e()})),this.partial_fetch_time=!1}}}],r&&Qr(t.prototype,r),n&&Qr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function tn(e){return tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tn(e)}function rn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(r),!0).forEach((function(t){on(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function on(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function an(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function sn(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){an(i,n,o,a,s,"next",e)}function s(e){an(i,n,o,a,s,"throw",e)}a(void 0)}))}}function cn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ln(e,t){return ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ln(e,t)}function un(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=dn(e);if(t){var o=dn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return pn(this,r)}}function pn(e,t){if(t&&("object"===tn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _n(e)}function _n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dn(e){return dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},dn(e)}en.STORAGES=Object.freeze({LOCAL_STORAGE:Symbol("LOCAL_STORAGE"),SESSION_STORAGE:Symbol("SESSION_STORAGE")});var mn={},fn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ln(e,t)}(w,e);var t,r,n,o,i,a,s,c,l,u,_,d,f,y,b,g,v=un(w);function w(e){var t,r=e.root_store;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w);return(t=v.call(this,{root_store:r,local_storage_properties:["amount","currency","barrier_1","barrier_2","basis","contract_start_type","contract_type","duration","duration_unit","expiry_date","expiry_type","growth_rate","has_take_profit","has_stop_loss","has_cancellation","is_equal","last_digit","multiplier","start_date","start_time","symbol","stop_loss","take_profit","is_trade_params_expanded"],store_name:"trade_store",validation_rules:Lt()})).is_trade_component_mounted=!1,t.is_purchase_enabled=!1,t.is_trade_enabled=!1,t.is_equal=0,t.has_equals_only=!1,t.symbol=void 0,t.is_market_closed=!1,t.previous_symbol="",t.active_symbols=[],t.form_components=[],t.contract_expiry_type="",t.contract_start_type="",t.contract_type="",t.contract_types_list={},t.trade_types={},t.amount=10,t.basis="",t.basis_list=[],t.currency="",t.duration=5,t.duration_unit="",t.duration_units_list=[],t.duration_min_max={},t.expiry_date="",t.expiry_time="",t.expiry_type="duration",t.barrier_1="",t.barrier_2="",t.barrier_count=0,t.main_barrier=null,t.barriers=[],t.start_date=Number(0),t.start_dates_list=[],t.start_time=null,t.sessions=[],t.market_open_times=[],t.market_close_times=[],t.last_digit=5,t.is_mobile_digit_view_selected=!1,t.proposal_info={},t.purchase_info={},t.is_chart_loading=void 0,t.should_show_active_symbols_loading=!1,t.accumulator_range_list=[],t.growth_rate=.03,t.maximum_payout=0,t.maximum_ticks=0,t.ticks_history_stats={},t.tick_size_barrier=0,t.multiplier=void 0,t.multiplier_range_list=[],t.stop_loss=void 0,t.take_profit=void 0,t.has_stop_loss=!1,t.has_take_profit=!1,t.has_cancellation=!1,t.commission=void 0,t.cancellation_price=void 0,t.stop_out=void 0,t.expiration=void 0,t.hovered_contract_type=void 0,t.cancellation_duration="60m",t.cancellation_range_list=[],t.is_trade_params_expanded=!0,t.addTickByProposal=function(){return null},t.debouncedProposal=jt()(t.requestProposal,500),t.proposal_requests={},t.is_purchasing_contract=!1,t.initial_barriers=void 0,t.is_initial_barrier_applied=!1,t.should_skip_prepost_lifecycle=!1,t.clearContracts=function(){t.root_store.contract_trade.contracts=[]},t.setMainBarrier=function(e){if(e){var r=e.contract_type,n=e.barrier,o=e.high_barrier,i=e.low_barrier;if((0,p.isBarrierSupported)(r)){var a=t.root_store.ui.is_dark_mode_on?jr:Tr;t.main_barrier=new zr(n||o,i,t.onChartBarrierChange,{color:a})}else t.main_barrier=null}},t.onPurchase=jt()(t.processPurchase,300),t.disablePurchaseButtons=function(){var e=document.getElementsByClassName("trade-container__price-info"),t=document.getElementsByClassName("btn-purchase");[].forEach.bind(t,(function(e){e.classList.add("btn-purchase--disabled")}))(),[].forEach.bind(e,(function(e){e.classList.add("trade-container__price-info--fade")}))()},t.prev_chart_layout=null,t.wsSubscribe=function(e,t){if(1===e.subscribe){var r=JSON.stringify(e),n=p.WS.subscribeTicksHistory(e,t);mn[r]=n}},t.wsForget=function(e){var t=JSON.stringify(e);mn[t]&&(mn[t].unsubscribe(),delete mn[t])},t.wsForgetStream=function(e){p.WS.forgetStream(e)},t.wsSendRequest=function(e){return e.time?Bt().timePromise().then((function(e){return e?{msg_type:"time",time:e.unix()}:p.WS.time()})):e.active_symbols?p.WS.activeSymbols("brief"):e.trading_times?p.WS.tradingTimes(e.trading_times):p.WS.storage.send(e)},t.refToAddTick=function(e){t.addTickByProposal=e},(0,M.makeObservable)(_n(t),{accumulator_range_list:M.observable,growth_rate:M.observable,maximum_payout:M.observable,maximum_ticks:M.observable,ticks_history_stats:M.observable,tick_size_barrier:M.observable,is_trade_component_mounted:M.observable,is_purchase_enabled:M.observable,is_trade_enabled:M.observable,is_equal:M.observable,has_equals_only:M.observable,symbol:M.observable,is_market_closed:M.observable,previous_symbol:M.observable,active_symbols:M.observable,form_components:M.observable,contract_expiry_type:M.observable,contract_start_type:M.observable,contract_type:M.observable,contract_types_list:M.observable,trade_types:M.observable,amount:M.observable,basis:M.observable,basis_list:M.observable,currency:M.observable,duration:M.observable,duration_unit:M.observable,duration_units_list:M.observable,duration_min_max:M.observable,expiry_date:M.observable,expiry_time:M.observable,expiry_type:M.observable,barrier_1:M.observable,barrier_2:M.observable,barrier_count:M.observable,main_barrier:M.observable,barriers:M.observable,start_date:M.observable,start_dates_list:M.observable,start_time:M.observable,sessions:M.observable,market_open_times:M.observable,market_close_times:M.observable,last_digit:M.observable,is_mobile_digit_view_selected:M.observable,proposal_info:M.observable.ref,purchase_info:M.observable.ref,is_chart_loading:M.observable,should_show_active_symbols_loading:M.observable,multiplier:M.observable,multiplier_range_list:M.observable,stop_loss:M.observable,take_profit:M.observable,has_stop_loss:M.observable,has_take_profit:M.observable,has_cancellation:M.observable,commission:M.observable,cancellation_price:M.observable,stop_out:M.observable,expiration:M.observable,hovered_contract_type:M.observable,cancellation_duration:M.observable,cancellation_range_list:M.observable,is_trade_params_expanded:M.observable,should_skip_prepost_lifecycle:M.observable,is_symbol_in_active_symbols:M.computed,setSkipPrePostLifecycle:M.action.bound,setTradeStatus:M.action.bound,refresh:M.action.bound,clearContracts:M.action.bound,loadActiveSymbols:M.action.bound,setDefaultSymbol:M.action.bound,setActiveSymbols:M.action.bound,setContractTypes:M.action.bound,prepareTradeStore:M.action.bound,onChangeMultiple:M.action.bound,onChange:M.action.bound,setDefaultGrowthRate:M.action.bound,setPreviousSymbol:M.action.bound,setAllowEqual:M.action.bound,setIsTradeParamsExpanded:M.action.bound,resetPreviousSymbol:M.action.bound,updateBarrierColor:M.action.bound,onHoverPurchase:M.action.bound,setPurchaseSpotBarrier:M.action.bound,updateLimitOrderBarriers:M.action.bound,clearLimitOrderBarriers:M.action.bound,barrier_pipsize:M.computed,main_barrier_flattened:M.computed,barriers_flattened:M.computed,onPurchase:M.action.bound,processPurchase:M.action.bound,enablePurchase:M.action.bound,updateStore:M.action.bound,is_synthetics_available:M.computed,show_digits_stats:M.computed,setMobileDigitView:M.action.bound,pushPurchaseDataToGtm:M.action.bound,clearPurchaseInfo:M.action.bound,requestProposal:M.action.bound,forgetAllProposal:M.action.bound,setMarketStatus:M.action.bound,onProposalResponse:M.action.bound,onChartBarrierChange:M.action.bound,onAllowEqualsChange:M.action.bound,updateSymbol:M.action.bound,changeDurationValidationRules:M.action.bound,accountSwitcherListener:M.action.bound,preSwitchAccountListener:M.action.bound,logoutListener:M.action.bound,clientInitListener:M.action.bound,networkStatusChangeListener:M.action.bound,themeChangeListener:M.action.bound,resetErrorServices:M.action.bound,onMount:M.action.bound,manageMxMltRemovalNotification:M.action.bound,setChartStatus:M.action.bound,initAccountCurrency:M.action.bound,onUnmount:M.override,exportLayout:M.action.bound,chartStateChange:M.action.bound,has_alternative_source:M.computed,is_accumulator:M.computed,is_multiplier:M.computed,getFirstOpenMarket:M.action.bound}),(0,M.reaction)((function(){return[t.contract_expiry_type,t.duration_min_max,t.duration_unit,t.expiry_type]}),(function(){t.changeDurationValidationRules()})),(0,M.reaction)((function(){return t.is_equal}),(function(){t.onAllowEqualsChange()})),(0,M.reaction)((function(){return t.symbol}),(function(){var e=(0,p.resetEndTimeOnVolatilityIndices)(t.symbol,t.expiry_type);e&&(t.expiry_date=e),t.setDefaultGrowthRate()})),(0,M.reaction)((function(){return t.duration_unit}),(function(){t.contract_expiry_type="t"===t.duration_unit?"tick":"intraday"})),(0,M.reaction)((function(){return[t.has_stop_loss,t.has_take_profit]}),(function(){t.has_stop_loss||(t.validation_errors.stop_loss=[]),t.has_take_profit||(t.validation_errors.take_profit=[])})),(0,M.reaction)((function(){return[t.contract_type]}),(function(){t.root_store.portfolio.setContractType(t.contract_type),"multiplier"===t.contract_type||"accumulator"===t.contract_type?Object.assign(t.validation_rules,Nt()):(delete t.validation_rules.stop_loss,delete t.validation_rules.take_profit)})),(0,M.when)((function(){return t.accumulator_range_list.length}),(function(){return t.setDefaultGrowthRate()})),t}return t=w,r=[{key:"is_symbol_in_active_symbols",get:function(){var e=this;return this.active_symbols.some((function(t){return t.symbol===e.symbol&&1===t.exchange_is_open}))}},{key:"setDefaultGrowthRate",value:function(){"accumulator"===this.contract_type&&!this.accumulator_range_list.includes(this.growth_rate)&&this.accumulator_range_list.length&&(this.growth_rate=this.accumulator_range_list[0])}},{key:"setSkipPrePostLifecycle",value:function(e){!!e!=!!this.should_skip_prepost_lifecycle&&(this.should_skip_prepost_lifecycle=e)}},{key:"setTradeStatus",value:function(e){this.is_trade_enabled=e}},{key:"refresh",value:function(){this.forgetAllProposal(),this.proposal_info={},this.purchase_info={},this.proposal_requests={}}},{key:"loadActiveSymbols",value:(g=sn(regeneratorRuntime.mark((function e(){var t,r,n,o,i,a=this,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(s.length>0&&void 0!==s[0])||s[0],n=!(s.length>1&&void 0!==s[1])||s[1],this.should_show_active_symbols_loading=n,e.next=5,this.setActiveSymbols();case 5:return e.next=7,this.root_store.active_symbols.setActiveSymbols();case 7:if(!r){e.next=10;break}return e.next=10,this.setDefaultSymbol();case 10:return e.next=12,p.WS.storage.contractsFor(this.symbol);case 12:if(o=e.sent,!["InvalidSymbol","InputValidationFailed"].includes(null===(t=o.error)||void 0===t?void 0:t.code)){e.next=19;break}return e.next=16,(0,p.pickDefaultSymbol)(this.active_symbols);case 16:return i=e.sent,e.next=19,this.processNewValuesAsync({symbol:i});case 19:(0,M.runInAction)((function(){a.should_show_active_symbols_loading=!1}));case 20:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"setDefaultSymbol",value:(b=sn(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.is_symbol_in_active_symbols){e.next=7;break}return this.is_trade_enabled=!1,e.next=4,(0,p.pickDefaultSymbol)(this.active_symbols);case 4:return t=e.sent,e.next=7,this.processNewValuesAsync({symbol:t});case 7:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)})},{key:"setActiveSymbols",value:(y=sn(regeneratorRuntime.mark((function e(){var t,r,n,o,i,a,s,c,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="maltainvest"===this.root_store.client.landing_company_shortcode,r=!!parseInt(localStorage.getItem("hide_close_mx_mlt_account_notification")),n=this.root_store.client.is_logged_in,o=this.root_store.client.clients_country,i=this.root_store.common.showError,a=this.root_store.common.setError,["be","im"].includes(o)&&!n&&(0,p.showUnavailableLocationError)(i,n),e.next=9,p.WS.authorized.activeSymbols();case 9:if(s=e.sent,c=s.active_symbols,!s.error){e.next=15;break}return i({message:(0,m.localize)("Trading is unavailable at this time.")}),e.abrupt("return");case 15:if(c&&c.length){e.next=37;break}return e.next=18,p.WS.wait("get_settings");case 18:if(l=this.root_store.client.can_have_mx_account,!(u=this.root_store.client.can_have_mlt_account)&&!l||!n||r){e.next=25;break}a(!0,{type:"mx_mlt_removal"}),e.next=37;break;case 25:if(!n||!r){e.next=29;break}(0,p.showMxMltUnavailableError)(i,u,l),e.next=37;break;case 29:if(t){e.next=34;break}return r?(0,p.showUnavailableLocationError)(i,n):a(!0,{type:"mx_mlt_removal"}),e.abrupt("return");case 34:if(!t){e.next=37;break}return(0,p.showDigitalOptionsUnavailableError)(i,{text:(0,m.localize)("Were working to have this available for you soon. If you have another account, switch to that account to continue trading. You may add a Deriv MT5 Financial."),title:(0,m.localize)("{{platform_name_trader}} is not available for this account",{platform_name_trader:(0,p.getPlatformSettings)("trader").name}),link:(0,m.localize)("Go to {{platform_name_mt5}} dashboard",{platform_name_mt5:(0,p.getPlatformSettings)("mt5").name})}),e.abrupt("return");case 37:return e.next=39,this.processNewValuesAsync({active_symbols:c});case 39:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"setContractTypes",value:(f=sn(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.symbol||!this.is_symbol_in_active_symbols){e.next=4;break}return e.next=3,Yt(this.symbol);case 3:(0,M.runInAction)((function(){var e=zt.R.getContractCategories();t.is_accumulator&&!t.root_store.client.is_virtual&&e.contract_types_list.Accumulators?(delete e.contract_types_list.Accumulators,t.processNewValuesAsync(nn(nn({},e),zt.R.getContractType(e.contract_types_list)))):t.processNewValuesAsync(nn(nn({},e),zt.R.getContractType(e.contract_types_list,t.contract_type))),t.processNewValuesAsync(zt.R.getContractValues(t))}));case 4:this.root_store.common.setSelectedContractType(this.contract_type),this.root_store.portfolio.setContractType(this.contract_type);case 6:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"prepareTradeStore",value:(d=sn(regeneratorRuntime.mark((function e(){var t,r=this,n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(n.length>0&&void 0!==n[0])||n[0],this.initial_barriers={barrier_1:this.barrier_1,barrier_2:this.barrier_2},e.next=4,(0,M.when)((function(){return!r.root_store.client.is_populating_account_list}));case 4:return e.next=6,p.WS.wait("website_status");case 6:return e.next=8,(0,M.runInAction)(sn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.processNewValuesAsync({currency:r.root_store.client.currency||r.root_store.client.default_currency},!0,null,!1);case 2:case"end":return e.stop()}}),e)}))));case 8:return e.next=10,this.loadActiveSymbols(t);case 10:return e.next=12,this.setContractTypes();case 12:return e.next=14,this.processNewValuesAsync({is_market_closed:(0,p.isMarketClosed)(this.active_symbols,this.symbol)},!0,null,!1);case 14:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"onChangeMultiple",value:(_=sn(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object.keys(t).forEach((function(e){if(!(e in r))throw new Error("Invalid Argument: ".concat(e))})),e.next=3,this.processNewValuesAsync(nn({},t),!0);case 3:this.validateAllProperties();case 4:case"end":return e.stop()}}),e,this)}))),function(e){return _.apply(this,arguments)})},{key:"onChange",value:(u=sn(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target,n=r.name,o=r.value,"symbol"!==n||!o){e.next=7;break}this.setChartStatus(!0),this.setMarketStatus(!1),this.is_trade_enabled=!1,e.next=17;break;case 7:if("currency"!==n){e.next=11;break}this.root_store.client.is_logged_in||this.root_store.client.selectCurrency(o),e.next=17;break;case 11:if("expiry_date"!==n){e.next=15;break}this.expiry_time=null,e.next=17;break;case 15:if(n in this){e.next=17;break}throw new Error("Invalid Argument: ".concat(n));case 17:return e.next=19,this.processNewValuesAsync(on({},n,o),!0,"contract_type"===n?{contract_type:this.contract_type}:{},!0);case 19:this.validateAllProperties(),this.root_store.common.setSelectedContractType(this.contract_type);case 21:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"setPreviousSymbol",value:function(e){this.previous_symbol!==e&&(this.previous_symbol=e)}},{key:"setAllowEqual",value:function(e){this.is_equal=e}},{key:"setIsTradeParamsExpanded",value:function(e){this.is_trade_params_expanded=e}},{key:"resetPreviousSymbol",value:(l=sn(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setMarketStatus((0,p.isMarketClosed)(this.active_symbols,this.previous_symbol)),e.next=3,Yt(this.previous_symbol);case 3:return e.next=5,this.updateSymbol(this.symbol);case 5:this.setChartStatus(!1),(0,M.runInAction)((function(){t.previous_symbol=""}));case 7:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"updateBarrierColor",value:function(e){this.main_barrier&&this.main_barrier.updateBarrierColor(e)}},{key:"onHoverPurchase",value:function(e,t){this.is_accumulator||(this.is_purchase_enabled&&this.main_barrier&&!this.is_multiplier?this.main_barrier.updateBarrierShade(e,t):e||!this.main_barrier||this.is_multiplier||this.main_barrier.updateBarrierShade(!1,t),this.hovered_contract_type=e?t:null,Br({barriers:this.root_store.portfolio.barriers,is_over:e,contract_type:t,contract_info:this.proposal_info[t]}))}},{key:"setPurchaseSpotBarrier",value:function(e,t){var r="PURCHASE_SPOT_BARRIER";if(e){var n=this.root_store.portfolio.barriers.find((function(e){return e.key===r}));n?n.high!==+t.contract_info.entry_spot&&n.onChange({high:t.contract_info.entry_spot}):((n=new zr(t.contract_info.entry_spot)).key=r,n.draggable=!1,n.hideOffscreenBarrier=!0,n.isSingleBarrier=!0,n.updateBarrierColor(this.root_store.ui.is_dark_mode_on),this.barriers.push(n),this.root_store.portfolio.barriers.push(n))}else(0,p.removeBarrier)(this.root_store.portfolio.barriers,r)}},{key:"updateLimitOrderBarriers",value:function(e,t){var r=t.contract_info,n=this.barriers;Br({barriers:n,contract_info:r,contract_type:r.contract_type,is_over:e})}},{key:"clearLimitOrderBarriers",value:function(){this.hovered_contract_type=null;var e=this.barriers;Br({barriers:e,is_over:!1})}},{key:"barrier_pipsize",get:function(){return(0,p.getBarrierPipSize)(this.barrier_1)}},{key:"main_barrier_flattened",get:function(){return(0,h.A)(this.contract_type)?null:(0,M.toJS)(this.main_barrier)}},{key:"barriers_flattened",get:function(){return this.root_store.portfolio.barriers&&(0,M.toJS)(this.root_store.portfolio.barriers)}},{key:"processPurchase",value:function(e,t,r){var n=this;if(this.is_purchase_enabled&&e){this.is_purchase_enabled=!1,this.is_purchasing_contract=!0;var o="t"===this.duration_unit;Wt(e,t).then((0,M.action)((function(t){if(!n.is_trade_component_mounted)return n.enablePurchase(),void(n.is_purchasing_contract=!1);var i,a,s=+n.last_digit;if(t.error)n.disablePurchaseButtons(),"InvalidToken"!==t.error.code&&(n.root_store.common.setServicesError(nn({type:t.msg_type},t.error)),(0,p.isMobile)()&&"buy"===(null===(i=n.root_store.common)||void 0===i||null===(a=i.services_error)||void 0===a?void 0:a.type)&&setTimeout((function(){n.clearPurchaseInfo(),n.requestProposal()}),3500));else if(t.buy){if(n.proposal_info[r]&&n.proposal_info[r].id!==e)throw new Error("Proposal ID does not match.");var c=nn(nn(nn({},n.proposal_requests[r]),n.proposal_info[r]),{},{buy_price:t.buy.buy_price}),l=t.buy,u=l.contract_id,_=l.longcode,d=l.start_time;if(u){var m=t.buy.shortcode,f=(0,p.extractInfoFromShortcode)(m),y=f.category,b=f.underlying,g=(0,h.H)(y.toUpperCase()),v=y.toUpperCase();return n.root_store.contract_trade.addContract({contract_id:u,start_time:d,longcode:_,underlying:b,barrier:g?s:null,contract_type:v,is_tick_contract:o}),n.root_store.portfolio.onBuyResponse({contract_id:u,longcode:_,contract_type:v}),((0,p.isDesktop)()||(0,p.isMobile)()&&(n.is_multiplier||n.is_accumulator))&&n.root_store.ui.openPositionsDrawer(),n.proposal_info={},n.forgetAllProposal(),n.purchase_info=t,n.proposal_requests={},n.debouncedProposal(),n.clearLimitOrderBarriers(),n.pushPurchaseDataToGtm(c),void(n.is_purchasing_contract=!1)}}n.forgetAllProposal(),n.purchase_info=t,n.enablePurchase(),n.is_purchasing_contract=!1})))}}},{key:"enablePurchase",value:function(){this.root_store.client.is_unwelcome||(this.is_purchase_enabled=!0)}},{key:"updateStore",value:function(e){var t=this;return Object.keys((0,p.cloneObject)(e)||{}).forEach((function(r){"root_store"===r||["validation_rules","validation_errors","currency"].indexOf(r)>-1||(JSON.stringify(t[r])===JSON.stringify(e[r])?delete e[r]:("symbol"===r&&(t.is_purchase_enabled=!1,t.is_trade_enabled=!1),e.start_date&&"string"==typeof e.start_date&&(e.start_date=parseInt(e.start_date)),t[r]=e[r],"barrier_2"===r&&e.barrier_1&&(t.barrier_1=e.barrier_1)))})),e}},{key:"processNewValuesAsync",value:(c=sn(regeneratorRuntime.mark((function e(){var t,r,n,o,i,a,s,c,l,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},r=u.length>1&&void 0!==u[1]&&u[1],n=u.length>2&&void 0!==u[2]?u[2]:{},o=!(u.length>3&&void 0!==u[3])||u[3],t.contract_type&&"rise_fall"===t.contract_type&&this.is_equal&&(t.contract_type="rise_fall_equal"),/\bduration\b/.test(Object.keys(t))&&"string"==typeof t.duration&&(t.duration=+t.duration),o&&(this.forgetAllProposal(),this.proposal_requests={}),r&&/\bcurrency\b/.test(Object.keys(t))&&(i=(null==n?void 0:n.currency)||this.currency,a=t.currency!==i,s=(0,p.isCryptocurrency)(t.currency)||(0,p.isCryptocurrency)(t.currency)!==(0,p.isCryptocurrency)(i),a&&s&&(t.amount=t.amount||(0,p.getMinPayout)(t.currency)),this.currency=t.currency),!Object.keys(t).includes("symbol")){e.next=14;break}return this.setPreviousSymbol(this.symbol),e.next=12,Yt(t.symbol);case 12:this.setMarketStatus((0,p.isMarketClosed)(this.active_symbols,t.symbol)),c=zt.R.getContractCategories().has_only_forward_starting_contracts;case 14:if(this.root_store.ui.setHasOnlyForwardingContracts(c),!c){e.next=17;break}return e.abrupt("return");case 17:if(l=this.updateStore((0,p.cloneObject)(t)),!r&&!/\b(symbol|contract_types_list)\b/.test(Object.keys(l))){e.next=27;break}return this.updateStore({is_purchase_enabled:!1,proposal_info:{}}),t.contract_type&&this.root_store.ui.is_advanced_duration&&(0,h.A)(t.contract_type)&&(this.barrier_1="",this.barrier_2="",this.expiry_type="duration",this.root_store.ui.is_advanced_duration=!1),e.next=23,wr(this,l);case 23:this.updateStore(nn({},this.is_initial_barrier_applied?{}:this.initial_barriers)),this.is_initial_barrier_applied=!0,/\bcontract_type\b/.test(Object.keys(l))&&this.validateAllProperties(),this.debouncedProposal();case 27:this.root_store.client.is_virtual||delete this.contract_types_list.Accumulators;case 28:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"is_synthetics_available",get:function(){var e;return!(null===(e=this.active_symbols)||void 0===e||!e.find((function(e){return"synthetic_index"===e.market})))}},{key:"is_synthetics_trading_market_available",get:function(){var e,t=this;return!(null===(e=this.active_symbols)||void 0===e||!e.find((function(e){return"synthetic_index"===e.market&&!(0,p.isMarketClosed)(t.active_symbols,e.symbol)})))}},{key:"show_digits_stats",get:function(){return(0,h.A)(this.contract_type)}},{key:"setMobileDigitView",value:function(e){this.is_mobile_digit_view_selected=e}},{key:"pushPurchaseDataToGtm",value:function(e){var t={event:"buy_contract",bom_ui:"new",contract:{amount:e.amount,barrier1:e.barrier,barrier2:e.barrier2,basis:e.basis,buy_price:e.buy_price,contract_type:e.contract_type,currency:e.currency,date_expiry:e.date_expiry,date_start:e.date_start,duration:e.duration,duration_unit:e.duration_unit,payout:e.payout,symbol:e.symbol},settings:{theme:this.root_store.ui.is_dark_mode_on?"dark":"light",positions_drawer:this.root_store.ui.is_positions_drawer_on?"open":"closed",chart:{toolbar_position:this.root_store.ui.is_chart_layout_default?"bottom":"left",chart_asset_info:this.root_store.ui.is_chart_asset_info_visible?"visible":"hidden",chart_type:this.root_store.contract_trade.chart_type,granularity:this.root_store.contract_trade.granularity}}};this.root_store.gtm.pushDataLayer(t)}},{key:"clearPurchaseInfo",value:function(){this.purchase_info={},this.proposal_requests={},this.proposal_info={}}},{key:"requestProposal",value:function(){var e=this,t=(0,Sr.RX)(this);if(Object.values(this.validation_errors).some((function(e){return e.length})))return this.proposal_info={},this.purchase_info={},void this.forgetAllProposal();(0,p.isEmptyObject)(t)||(this.proposal_requests=t,this.purchase_info={},Object.keys(this.proposal_requests).forEach((function(t){p.WS.subscribeProposal(e.proposal_requests[t],e.onProposalResponse)}))),this.root_store.ui.resetPurchaseStates()}},{key:"forgetAllProposal",value:function(){Object.keys(this.proposal_requests).length>0&&p.WS.forgetAll("proposal")}},{key:"setMarketStatus",value:function(e){this.is_market_closed=e}},{key:"onProposalResponse",value:function(e){var t,r,n=e.echo_req.contract_type,o=(0,p.getPropertyValue)(this.proposal_info,n)||{},i=(0,p.getPropertyValue)(o,"obj_contract_basis")||{},a=null===(t=e.proposal)||void 0===t?void 0:t.date_expiry;if(!e.error&&a&&this.is_crypto_multiplier&&(this.expiration=a),this.proposal_info=nn(nn({},this.proposal_info),{},on({},n,(0,Sr._N)(this,e,i))),this.is_multiplier&&this.proposal_info&&this.proposal_info.MULTUP){var s,c=this.proposal_info.MULTUP,l=c.commission,u=c.cancellation,_=c.limit_order;l&&(this.commission=l),u&&(this.cancellation_price=u.ask_price),this.stop_out=null==_||null===(s=_.stop_out)||void 0===s?void 0:s.order_amount}if(this.is_accumulator&&this.proposal_info&&this.proposal_info.ACCU){var d=this.proposal_info.ACCU,m=d.maximum_ticks,f=d.ticks_stayed_in,h=d.tick_size_barrier,y=d.last_tick_epoch,b=d.maximum_payout,g=d.high_barrier,v=d.low_barrier,w=d.spot,k=d.spot_time;this.root_store.contract_trade.current_symbol_spot=w,this.root_store.contract_trade.current_symbol_spot_time=k,this.ticks_history_stats=function(e){var t=e.previous_ticks_history_stats,r=void 0===t?{}:t,n=e.new_ticks_history_stats,o=void 0===n?[]:n,i=e.last_tick_epoch,a=r.ticks_stayed_in||[],s=r.last_tick_epoch;return o.length&&i?{ticks_stayed_in:o.length>1?Zt(o).reverse():o[0]<=a[0]&&i>s?[o[0]].concat(Zt(a.slice(0,a.length-1))):i===s?a:[o[0]].concat(Zt(a.slice(1))),last_tick_epoch:i}:r}({previous_ticks_history_stats:this.ticks_history_stats,new_ticks_history_stats:f,last_tick_epoch:y}),this.tick_size_barrier=h,this.maximum_ticks=m,this.maximum_payout=b,this.root_store.contract_trade.accumulators_high_barrier=g,this.root_store.contract_trade.accumulators_low_barrier=v}if((!this.main_barrier||null!==(r=this.main_barrier)&&void 0!==r&&r.shade)&&this.setMainBarrier(e.echo_req),this.hovered_contract_type===n&&(this.addTickByProposal(e),Br({barriers:this.root_store.portfolio.barriers,contract_info:this.proposal_info[this.hovered_contract_type],contract_type:n,is_over:!0})),e.error){var E=(0,Sr.yr)(e);if(E&&this.setValidationErrorMessages(E,[e.error.message]),this.is_multiplier){var S=e.error,x=S.message,O=S.details,C=(x||"").match(/\((\d+\.*\d*)\)/);"stop_loss"===(null==O?void 0:O.field)&&null!=C&&C[1]&&(this.commission=C[1])}if("AlreadySubscribed"===e.error.code)return this.refresh(),void(this.is_trade_component_mounted&&this.debouncedProposal())}else this.validateAllProperties();this.is_purchasing_contract||this.enablePurchase()}},{key:"onChartBarrierChange",value:function(e,t){this.processNewValuesAsync({barrier_1:e,barrier_2:t},!0)}},{key:"onAllowEqualsChange",value:function(){this.processNewValuesAsync({contract_type:parseInt(this.is_equal)?"rise_fall_equal":"rise_fall"},!0)}},{key:"updateSymbol",value:function(e){e&&this.onChange({target:{name:"symbol",value:e}})}},{key:"changeDurationValidationRules",value:function(){if("endtime"!==this.expiry_type){if(this.validation_rules.duration){var e=this.validation_rules.duration.rules.findIndex((function(e){return"number"===e[0]})),t=this.duration_min_max[this.contract_expiry_type]||!1;if(t){var r={min:(0,p.convertDurationLimit)(+t.min,this.duration_unit),max:(0,p.convertDurationLimit)(+t.max,this.duration_unit)};e>-1?this.validation_rules.duration.rules[e][1]=r:this.validation_rules.duration.rules.push(["number",r]),this.validateProperty("duration",this.duration)}}}else this.validation_errors.duration=[]}},{key:"accountSwitcherListener",value:(s=sn(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.root_store.common.is_language_changing){e.next=6;break}return e.next=3,this.loadActiveSymbols(!1,!1);case 3:this.root_store.common.is_language_changing=!1,e.next=8;break;case 6:return e.next=8,this.loadActiveSymbols(!0,!1);case 8:return this.resetErrorServices(),e.next=11,this.setContractTypes();case 11:return(0,M.runInAction)(sn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.processNewValuesAsync({currency:t.root_store.client.currency||t.root_store.client.default_currency},!0,{currency:t.currency},!1);case 1:case"end":return e.stop()}}),e)})))),e.abrupt("return",Promise.resolve());case 13:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"preSwitchAccountListener",value:function(){return this.clearContracts(),this.is_trade_enabled=!1,Promise.resolve()}},{key:"logoutListener",value:(a=sn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.clearContracts(),this.refresh(),this.resetErrorServices(),!this.root_store.common.is_language_changing){e.next=9;break}return e.next=6,this.loadActiveSymbols(!1);case 6:this.root_store.common.is_language_changing=!1,e.next=11;break;case 9:return e.next=11,this.loadActiveSymbols();case 11:return e.next=13,this.setContractTypes();case 13:this.debouncedProposal();case 14:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"clientInitListener",value:function(){return this.initAccountCurrency(this.root_store.client.currency||this.root_store.client.default_currency),Promise.resolve()}},{key:"networkStatusChangeListener",value:function(e){this.setTradeStatus(e)}},{key:"themeChangeListener",value:function(e){this.updateBarrierColor(e)}},{key:"resetErrorServices",value:function(){this.root_store.ui.toggleServicesErrorModal(!1)}},{key:"onMount",value:function(){var e=this;this.is_trade_component_mounted&&this.should_skip_prepost_lifecycle||(this.root_store.notifications.setShouldShowPopups(!1),this.onPreSwitchAccount(this.preSwitchAccountListener),this.onSwitchAccount(this.accountSwitcherListener),this.onLogout(this.logoutListener),this.onClientInit(this.clientInitListener),this.onNetworkStatusChange(this.networkStatusChangeListener),this.onThemeChange(this.themeChangeListener),this.setChartStatus(!0),(0,M.runInAction)(sn(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.is_trade_component_mounted=!0,t.next=3,e.prepareTradeStore();case 3:e.root_store.notifications.setShouldShowPopups(!0);case 4:case"end":return t.stop()}}),t)})))),this.manageMxMltRemovalNotification())}},{key:"manageMxMltRemovalNotification",value:function(){var e=this.root_store.notifications,t=e.addNotificationMessage,r=e.client_notifications,n=e.notification_messages,o=e.unmarkNotificationMessage,i=JSON.parse(localStorage.getItem("notification_messages")),a=this.root_store.client,s=a.has_iom_account,c=a.has_malta_account,l=a.is_logged_in;o({key:"close_mx_mlt_account"}),null!==i&&l&&(s||c)&&(0,M.when)((function(){return l&&0===n.length}),(function(){var e=1===parseInt(localStorage.getItem("hide_close_mx_mlt_account_notification"));(s||c)&&!e&&t(r.close_mx_mlt_account)}))}},{key:"setChartStatus",value:function(e){this.is_chart_loading=e}},{key:"initAccountCurrency",value:(i=sn(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currency!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.processNewValuesAsync({currency:t},!0,{currency:this.currency},!1);case 4:this.refresh(),this.debouncedProposal();case 6:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"onUnmount",value:function(){this.should_skip_prepost_lifecycle||(this.disposePreSwitchAccount(),this.disposeSwitchAccount(),this.disposeLogout(),this.disposeClientInit(),this.disposeNetworkStatusChange(),this.disposeThemeChange(),this.is_trade_component_mounted=!1,this.root_store.contract_trade.onUnmount(),this.refresh(),this.resetErrorServices(),this.root_store.notifications.is_notifications_visible&&this.root_store.notifications.toggleNotificationsModal(),this.prev_chart_layout&&(this.prev_chart_layout.is_used=!1))}},{key:"chart_layout",get:function(){var e=null;return this.prev_chart_layout&&!1===this.prev_chart_layout.is_used&&(e=this.prev_chart_layout),e}},{key:"is_crypto_multiplier",get:function(){return"multiplier"===this.contract_type&&/^cry/.test(this.symbol)}},{key:"exportLayout",value:function(e){var t=this;delete e.previousMaxTicks,this.prev_chart_layout=e,this.prev_chart_layout.isDone=function(){t.prev_chart_layout.is_used=!0,t.setChartStatus(!1)}}},{key:"chartStateChange",value:function(e,t){var r="isClosed";"MARKET_STATE_CHANGE"===e&&t&&r in t&&this.is_trade_component_mounted&&t.isClosed!==this.is_market_closed&&this.prepareTradeStore(!1)}},{key:"has_alternative_source",get:function(){return this.is_multiplier&&!!this.hovered_contract_type}},{key:"is_accumulator",get:function(){return"accumulator"===this.contract_type}},{key:"is_multiplier",get:function(){return"multiplier"===this.contract_type}},{key:"getFirstOpenMarket",value:(o=sn(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(r=this.active_symbols)||void 0===r||!r.length){e.next=2;break}return e.abrupt("return",(0,p.findFirstOpenMarket)(this.active_symbols,t));case 2:return e.next=4,p.WS.authorized.activeSymbols();case 4:if(n=e.sent,o=n.active_symbols,!n.error){e.next=10;break}return this.root_store.common.showError({message:(0,m.localize)("Trading is unavailable at this time.")}),e.abrupt("return",void 0);case 10:return e.abrupt("return",(0,p.findFirstOpenMarket)(o,t));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})}],r&&cn(t.prototype,r),n&&cn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),w}(en);function hn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yn(e,t,r){return t&&hn(e.prototype,t),r&&hn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var bn=yn((function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cashier=r.modules.cashier,this.trade=new fn({root_store:t})}));function gn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vn(e,t,r){return t&&gn(e.prototype,t),r&&gn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var wn,kn=vn((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.client=t.client,this.common=t.common,this.modules=new bn(this,t),this.ui=t.ui,this.gtm=t.gtm,this.rudderstack=t.rudderstack,this.pushwoosh=t.pushwoosh,this.notifications=t.notifications,this.contract_replay=t.contract_replay,this.contract_trade=t.contract_trade,this.portfolio=t.portfolio,this.chart_barrier_store=t.chart_barrier_store,this.active_symbols=t.active_symbols}));(0,M.configure)({enforceActions:"observed"});const En=function(e,t){return wn||(Bt().init(e.common),(0,p.setWebsocket)(t),wn=new kn(e))};function Sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var On=s()({loader:function(){return r.e("trade-modals").then(r.bind(r,"./src/App/Containers/Modals/index.js"))},loading:function(){return null}}),Cn=function(e){var t=e.passthrough,r=Sn(i.useState(En(t.root_store,t.WS)),1)[0];return i.useEffect((function(){return function(){return r.ui.setPromptHandler(!1)}}),[r]),i.createElement(y.z1,{store:r},i.createElement(i.Fragment,null,i.createElement(nt,null),i.createElement(On,null),i.createElement(Pt.S,null),i.createElement(wt,{store:r}),i.createElement(St,null),i.createElement(Ct,{store:r})))};Cn.propTypes={passthrough:o().shape({root_store:o().object,WS:o().object})};const Pn=Cn},"./src/Constants/contract.js":(e,t,r)=>{"use strict";r.d(t,{gk:()=>c,lA:()=>l,h8:()=>p,ng:()=>_});var n=r("react"),o=r("@deriv/translations");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=function(){return{APPLY:(0,o.localize)("Apply"),STAKE:(0,o.localize)("Stake:"),CLOSE:(0,o.localize)("Close"),CANCEL:(0,o.localize)("Cancel"),CURRENT_STAKE:(0,o.localize)("Current stake:"),DEAL_CANCEL_FEE:(0,o.localize)("Deal cancel. fee:"),TAKE_PROFIT:(0,o.localize)("Take profit:"),BUY_PRICE:(0,o.localize)("Buy price:"),STOP_LOSS:(0,o.localize)("Stop loss:"),TOTAL_PROFIT_LOSS:(0,o.localize)("Total profit/loss:"),PROFIT_LOSS:(0,o.localize)("Profit/Loss:"),POTENTIAL_PROFIT_LOSS:(0,o.localize)("Potential profit/loss:"),INDICATIVE_PRICE:(0,o.localize)("Indicative price:"),PAYOUT:(0,o.localize)("Sell price:"),PURCHASE_PRICE:(0,o.localize)("Buy price:"),POTENTIAL_PAYOUT:(0,o.localize)("Payout limit:"),TICK:(0,o.localize)("Tick "),TICKS:(0,o.localize)("Ticks"),WON:(0,o.localize)("Won"),LOST:(0,o.localize)("Lost"),DAYS:(0,o.localize)("days"),DAY:(0,o.localize)("day"),SELL:(0,o.localize)("Sell"),INCREMENT_VALUE:(0,o.localize)("Increment value"),DECREMENT_VALUE:(0,o.localize)("Decrement value"),TAKE_PROFIT_LOSS_NOT_AVAILABLE:(0,o.localize)("Take profit and/or stop loss are not available while deal cancellation is active."),DONT_SHOW_THIS_AGAIN:(0,o.localize)("Don't show this again"),RESALE_NOT_OFFERED:(0,o.localize)("Resale not offered"),NOT_AVAILABLE:(0,o.localize)("N/A")}},l=function(){return{FRXAUDCAD:(0,o.localize)("AUD/CAD"),FRXAUDCHF:(0,o.localize)("AUD/CHF"),FRXAUDJPY:(0,o.localize)("AUD/JPY"),FRXAUDNZD:(0,o.localize)("AUD/NZD"),FRXAUDPLN:(0,o.localize)("AUD/PLN"),FRXAUDUSD:(0,o.localize)("AUD/USD"),FRXBROUSD:(0,o.localize)("Oil/USD"),FRXEURAUD:(0,o.localize)("EUR/AUD"),FRXEURCAD:(0,o.localize)("EUR/CAD"),FRXEURCHF:(0,o.localize)("EUR/CHF"),FRXEURGBP:(0,o.localize)("EUR/GBP"),FRXEURJPY:(0,o.localize)("EUR/JPY"),FRXEURNZD:(0,o.localize)("EUR/NZD"),FRXEURUSD:(0,o.localize)("EUR/USD"),FRXGBPAUD:(0,o.localize)("GBP/AUD"),FRXGBPCAD:(0,o.localize)("GBP/CAD"),FRXGBPCHF:(0,o.localize)("GBP/CHF"),FRXGBPJPY:(0,o.localize)("GBP/JPY"),FRXGBPNOK:(0,o.localize)("GBP/NOK"),FRXGBPUSD:(0,o.localize)("GBP/USD"),FRXNZDJPY:(0,o.localize)("NZD/JPY"),FRXNZDUSD:(0,o.localize)("NZD/USD"),FRXUSDCAD:(0,o.localize)("USD/CAD"),FRXUSDCHF:(0,o.localize)("USD/CHF"),FRXUSDJPY:(0,o.localize)("USD/JPY"),FRXUSDNOK:(0,o.localize)("USD/NOK"),FRXUSDPLN:(0,o.localize)("USD/PLN"),FRXUSDSEK:(0,o.localize)("USD/SEK"),FRXXAGUSD:(0,o.localize)("Silver/USD"),FRXXAUUSD:(0,o.localize)("Gold/USD"),FRXXPDUSD:(0,o.localize)("Palladium/USD"),FRXXPTUSD:(0,o.localize)("Platinum/USD"),OTC_AEX:(0,o.localize)("Dutch Index"),OTC_AS51:(0,o.localize)("Australian Index"),OTC_DJI:(0,o.localize)("Wall Street Index"),OTC_FCHI:(0,o.localize)("French Index"),OTC_FTSE:(0,o.localize)("UK Index"),OTC_GDAXI:(0,o.localize)("German Index"),OTC_HSI:(0,o.localize)("Hong Kong Index"),OTC_IBEX35:(0,o.localize)("Spanish Index"),OTC_N225:(0,o.localize)("Japanese Index"),OTC_NDX:(0,o.localize)("US Tech Index"),OTC_SPC:(0,o.localize)("US Index"),OTC_SSMI:(0,o.localize)("Swiss Index"),OTC_SX5E:(0,o.localize)("Euro 50 Index"),R_10:(0,o.localize)("Volatility 10 Index"),R_25:(0,o.localize)("Volatility 25 Index"),R_50:(0,o.localize)("Volatility 50 Index"),R_75:(0,o.localize)("Volatility 75 Index"),R_100:(0,o.localize)("Volatility 100 Index"),BOOM300N:(0,o.localize)("Boom 300 Index"),BOOM500:(0,o.localize)("Boom 500 Index"),BOOM1000:(0,o.localize)("Boom 1000 Index"),CRASH300N:(0,o.localize)("Crash 300 Index"),CRASH500:(0,o.localize)("Crash 500 Index"),CRASH1000:(0,o.localize)("Crash 1000 Index"),RDBEAR:(0,o.localize)("Bear Market Index"),RDBULL:(0,o.localize)("Bull Market Index"),STPRNG:(0,o.localize)("Step Index"),WLDAUD:(0,o.localize)("AUD Basket"),WLDEUR:(0,o.localize)("EUR Basket"),WLDGBP:(0,o.localize)("GBP Basket"),WLDXAU:(0,o.localize)("Gold Basket"),WLDUSD:(0,o.localize)("USD Basket"),"1HZ10V":(0,o.localize)("Volatility 10 (1s) Index"),"1HZ100V":(0,o.localize)("Volatility 100 (1s) Index"),"1HZ200V":(0,o.localize)("Volatility 200 (1s) Index"),"1HZ300V":(0,o.localize)("Volatility 300 (1s) Index"),JD10:(0,o.localize)("Jump 10 Index"),JD25:(0,o.localize)("Jump 25 Index"),JD50:(0,o.localize)("Jump 50 Index"),JD75:(0,o.localize)("Jump 75 Index"),JD100:(0,o.localize)("Jump 100 Index"),JD150:(0,o.localize)("Jump 150 Index"),JD200:(0,o.localize)("Jump 200 Index"),CRYBCHUSD:(0,o.localize)("BCH/USD"),CRYBNBUSD:(0,o.localize)("BNB/USD"),CRYBTCLTC:(0,o.localize)("BTC/LTC"),CRYIOTUSD:(0,o.localize)("IOT/USD"),CRYNEOUSD:(0,o.localize)("NEO/USD"),CRYOMGUSD:(0,o.localize)("OMG/USD"),CRYTRXUSD:(0,o.localize)("TRX/USD"),CRYBTCETH:(0,o.localize)("BTC/ETH"),CRYZECUSD:(0,o.localize)("ZEC/USD"),CRYXMRUSD:(0,o.localize)("ZMR/USD"),CRYXMLUSD:(0,o.localize)("XLM/USD"),CRYXRPUSD:(0,o.localize)("XRP/USD"),CRYBTCUSD:(0,o.localize)("BTC/USD"),CRYDSHUSD:(0,o.localize)("DSH/USD"),CRYETHUSD:(0,o.localize)("ETH/USD"),CRYEOSUSD:(0,o.localize)("EOS/USD"),CRYLTCUSD:(0,o.localize)("LTC/USD")}},u=function(e){return a(a({},function(e){return{ACCU:{name:n.createElement(o.Localize,{i18n_default_text:"Buy"}),position:"top"},CALL:{name:e?n.createElement(o.Localize,{i18n_default_text:"Higher"}):n.createElement(o.Localize,{i18n_default_text:"Rise"}),position:"top"},PUT:{name:e?n.createElement(o.Localize,{i18n_default_text:"Lower"}):n.createElement(o.Localize,{i18n_default_text:"Fall"}),position:"bottom"},CALLE:{name:n.createElement(o.Localize,{i18n_default_text:"Rise"}),position:"top"},PUTE:{name:n.createElement(o.Localize,{i18n_default_text:"Fall"}),position:"bottom"},DIGITMATCH:{name:n.createElement(o.Localize,{i18n_default_text:"Matches"}),position:"top"},DIGITDIFF:{name:n.createElement(o.Localize,{i18n_default_text:"Differs"}),position:"bottom"},DIGITEVEN:{name:n.createElement(o.Localize,{i18n_default_text:"Even"}),position:"top"},DIGITODD:{name:n.createElement(o.Localize,{i18n_default_text:"Odd"}),position:"bottom"},DIGITOVER:{name:n.createElement(o.Localize,{i18n_default_text:"Over"}),position:"top"},DIGITUNDER:{name:n.createElement(o.Localize,{i18n_default_text:"Under"}),position:"bottom"},ONETOUCH:{name:n.createElement(o.Localize,{i18n_default_text:"Touch"}),position:"top"},NOTOUCH:{name:n.createElement(o.Localize,{i18n_default_text:"No Touch"}),position:"bottom"},MULTUP:{name:n.createElement(o.Localize,{i18n_default_text:"Up"}),position:"top"},MULTDOWN:{name:n.createElement(o.Localize,{i18n_default_text:"Down"}),position:"bottom"}}}(e)),{EXPIRYMISS:{name:n.createElement(o.Localize,{i18n_default_text:"Ends Outside"}),position:"top"},EXPIRYRANGE:{name:n.createElement(o.Localize,{i18n_default_text:"Ends Between"}),position:"bottom"},RANGE:{name:n.createElement(o.Localize,{i18n_default_text:"Stays Between"}),position:"top"},UPORDOWN:{name:n.createElement(o.Localize,{i18n_default_text:"Goes Outside"}),position:"bottom"},RESETCALL:{name:n.createElement(o.Localize,{i18n_default_text:"Reset Call"}),position:"top"},RESETPUT:{name:n.createElement(o.Localize,{i18n_default_text:"Reset Put"}),position:"bottom"},TICKHIGH:{name:n.createElement(o.Localize,{i18n_default_text:"High Tick"}),position:"top"},TICKLOW:{name:n.createElement(o.Localize,{i18n_default_text:"Low Tick"}),position:"bottom"},ASIANU:{name:n.createElement(o.Localize,{i18n_default_text:"Asian Up"}),position:"top"},ASIAND:{name:n.createElement(o.Localize,{i18n_default_text:"Asian Down"}),position:"bottom"},LBFLOATCALL:{name:n.createElement(o.Localize,{i18n_default_text:"Close-to-Low"}),position:"top"},LBFLOATPUT:{name:n.createElement(o.Localize,{i18n_default_text:"High-to-Close"}),position:"top"},LBHIGHLOW:{name:n.createElement(o.Localize,{i18n_default_text:"High-to-Low"}),position:"top"},CALLSPREAD:{name:n.createElement(o.Localize,{i18n_default_text:"Spread Up"}),position:"top"},PUTSPREAD:{name:n.createElement(o.Localize,{i18n_default_text:"Spread Down"}),position:"bottom"},RUNHIGH:{name:n.createElement(o.Localize,{i18n_default_text:"Only Ups"}),position:"top"},RUNLOW:{name:n.createElement(o.Localize,{i18n_default_text:"Only Downs"}),position:"bottom"}})},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return u(t)[e]?u(t)[e.toUpperCase()].name:""},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return u(t)[e]?u(t)[e.toUpperCase()].position:"top"}},"./src/Constants/index.js":(e,t,r)=>{"use strict";r.d(t,{lA:()=>n.lA});var n=r("./src/Constants/contract.js")},"./src/Modules/Contract/Components/AccumulatorsStats/index.js":(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var n=r("react"),o=r("../../node_modules/classnames/index.js"),i=r.n(o),a=r("../../node_modules/prop-types/index.js"),s=r.n(a),c=r("@deriv/components"),l=r("@deriv/shared"),u=r("@deriv/translations"),p=r("./src/Stores/connect.js"),_=function(e){var t=e.has_progress_dots,r=e.value;return n.createElement("div",{"data-testid":"dt_accu_stats_history_counter",className:i()("accumulators-stats__history-counter",{"accumulators-stats__history-counter--emphasized":t&&0===r})},r,t&&n.createElement("div",{className:"accumulators-stats__progress-dots"},[1,2,3].map((function(e){return n.createElement("span",{key:e,className:"dot-".concat(e)})}))))};_.propTypes={has_progress_dots:s().bool,value:s().number};const d=n.memo(_);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h=function(e){var t=e.icon_classname,r=e.is_dark_theme,o=e.is_manual_open,i=e.title,a=e.toggleManual,s=m(n.useState(!0),2),p=s[0],_=s[1],d=(0,l.isMobile)(),f=n.useCallback((function(e){return(0,l.getUrlBase)("/public/images/common/accumulators_manual_".concat(d?"mobile":"desktop").concat(r?"_dark":"",".").concat(e))}),[d,r]),h=n.useMemo((function(){return f("mp4")}),[f]),y=n.useMemo((function(){return f("webm")}),[f]);return n.createElement(n.Fragment,null,n.createElement(c.Icon,{icon:"IcInfoOutline",onClick:a,size:16,className:t}),n.createElement(c.Modal,{is_open:o&&!!h&&!!y,should_header_stick_body:!1,title:i,toggleModal:a,width:d?"328px":"596px",className:"accumulators-stats-manual-modal"},n.createElement(c.Modal.Body,{className:"accumulators-stats-modal-body"},n.createElement("div",{className:"accumulators-stats-modal-body__video"},p&&n.createElement(c.Loading,{is_fullscreen:!1}),n.createElement("video",{autoPlay:!0,"data-testid":"dt_accumulators_stats_manual_video",loop:!0,onLoadedData:function(){return _(!1)},playsInline:!0,preload:"auto",width:d?296:563},n.createElement("source",{src:h,type:"video/mp4"}),n.createElement("source",{src:y,type:"video/webm"}),(0,u.localize)("Unfortunately, your browser does not support the video."))),n.createElement(c.Text,{as:"p",size:d?"xs":"s",color:"prominent",className:"accumulators-stats-modal-body__text"},(0,u.localize)("Stats show the history of consecutive tick counts, i.e. the number of ticks the price remained within range continuously.")))))};function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}h.propTypes={icon_classname:s().string,is_dark_theme:s().bool,is_manual_open:s().bool,title:s().string,toggleManual:s().func};var g=10,v=10,w=15,k=5,E=function(e){var t,r=e.is_dark_theme,o=e.is_expandable,a=void 0===o||o,s=e.ticks_history_stats,p=void 0===s?{}:s,_=y(n.useState(!0),2),m=_[0],f=_[1],b=y(n.useState(!1),2),E=b[0],S=b[1],x=(0,u.localize)("Stats"),O=(null==p?void 0:p.ticks_stayed_in)||[],C=(0,l.isDesktop)()||!m?"xxs":"xxxs",P=O.reduce((function(e,t,r){var n=m?g:v,o=m?w:k,i=(0,l.isDesktop)()?n:o;return r%i==0&&e.push(O.slice(r,r+i)),e}),[]),T={Component:(0,l.isMobile)()?c.MobileDialog:n.Fragment,props:(0,l.isMobile)()?{onClose:function(){return f(!m)},portal_element_id:"modal_root",title:x,visible:!m,wrapper_classname:"accumulators-stats"}:null};return O.length?n.createElement("div",{className:"accumulators-stats"},n.createElement("div",{className:i()("accumulators-stats__container--collapsed")},n.createElement("div",{className:"accumulators-stats__title"},n.createElement(h,{is_dark_theme:r,icon_classname:"info",is_manual_open:E,title:x,toggleManual:function(){return S(!E)}}),n.createElement(c.Text,{weight:"bold",size:(0,l.isMobile)()?"xxxs":"xxs",className:"accumulators-stats__title-text"},x)),n.createElement(c.Text,{size:C,className:"accumulators-stats__history"},m?null===(t=P[0])||void 0===t?void 0:t.map((function(e,t){return n.createElement(d,{key:t,value:e,has_progress_dots:0===t})})):n.createElement("div",{className:"accumulators-stats__history-heading"},(0,u.localize)("Number of ticks")))),a&&!m&&n.createElement(T.Component,T.props,n.createElement(c.Text,{size:C,className:"accumulators-stats__history--expanded"},P.map((function(e,t){return n.createElement("div",{key:t,"data-testid":"dt_accu_stats_history_row",className:"accumulators-stats__row"},e.map((function(e,r){return n.createElement(d,{key:r,value:e,has_progress_dots:0===t&&0===r})})))})))),a&&n.createElement(c.Icon,{icon:m?"IcArrowUp":"IcArrowDown",onClick:function(){return f(!m)},className:"accordion-toggle-arrow"})):null};E.propTypes={is_dark_theme:s().bool,is_expandable:s().bool,ticks_history_stats:s().object};const S=(0,p.$j)((function(e){var t=e.modules;return{is_dark_theme:e.ui.is_dark_mode_on,ticks_history_stats:t.trade.ticks_history_stats}}))(E)},"./src/Modules/Contract/Components/Digits/index.js":(e,t,r)=>{"use strict";r.d(t,{Z:()=>U});var n=r("../../node_modules/classnames/index.js"),o=r.n(n),i=r("../../node_modules/prop-types/index.js"),a=r.n(i),s=r("react"),c=r("mobx"),l=r("@deriv/components"),u=r("@deriv/shared"),p=r("@deriv/translations"),_=r("./src/App/Components/Animations/index.js"),d=r("./src/Constants/index.js"),m=r("mobx-react"),f=function(e){var t=e.is_latest,r=e.is_lost,n=e.is_selected,i=e.is_won,a=e.percentage,c=e.value,l=a&&!isNaN(a)?parseFloat(a).toFixed(1):null;return s.createElement(s.Fragment,null,s.createElement("span",{className:o()("digits__digit-value",{"digits__digit-value--latest":t,"digits__digit-value--selected":n,"digits__digit-value--win":i&&t,"digits__digit-value--loss":r&&t})},s.createElement("i",{className:o()("digits__digit-display-value",{"digits__digit-display-value--no-stats":!l})},c),!!l&&s.createElement("i",{className:"digits__digit-display-percentage"},l,"%")))};f.propTypes={is_latest:a().bool,is_lost:a().bool,is_selected:a().bool,is_trade_page:a().bool,is_won:a().bool,percentage:a().number,value:a().number};const h=f;var y=function(e){var t=e.current_spot,r=e.is_selected_winning,n=e.is_lost,i=e.is_won;return s.createElement(s.Fragment,null,s.createElement(l.Text,{size:"xs",align:"center",weight:"bold",className:"digits__digit-spot-value"},t.slice(0,-1)),s.createElement("span",{className:o()("digits__digit-spot-last",{"digits__digit-spot-last--selected-win":r,"digits__digit-spot-last--win":i,"digits__digit-spot-last--loss":n})},t.slice(-1)))};y.propTypes={current_spot:a().string,is_lost:a().bool,is_selected_winning:a().bool,is_won:a().bool};const b=y;var g=function(e){var t=e.is_max,r=e.is_min,n=e.is_selected,i=e.percentage,a=(i-10)/4;a=((a=Math.min(Math.max(a,-1),1))+1)/2*.85+.15;var c=339.292,l=(20*i-102)/3/100;return l=Math.max(Math.min(l,.66),.06),s.createElement("div",{className:o()("digits__pie-container",{"digits__pie-container--selected":n})},s.createElement("svg",{className:"digits__pie-progress",width:"120",height:"120",viewBox:"0 0 120 120"},s.createElement("circle",{className:"progress__bg",cx:"60",cy:"60",r:"54",fill:"none",stroke:"#E8EEFC",strokeWidth:"12"}),i&&s.createElement("circle",{className:o()("progress__value",{"progress__value--is-max":t,"progress__value--is-min":r}),cx:"60",cy:"60",r:"54",fill:"none",strokeOpacity:t||r?1:a,strokeWidth:"12",strokeDasharray:[c*l,c*(1-l)],strokeDashoffset:c*((l+1)/2)})))};g.propTypes={is_max:a().bool,is_min:a().bool,is_selected:a().bool,percentage:a().number};const v=g;var w=function(e){var t=e.barrier,r=e.is_digit_contract,n=e.has_entry_spot,i=e.is_lost,a=e.is_max,c=e.is_min,p=e.is_won,d=e.onSelect,m=e.latest_digit,f=e.selected_digit,y=e.status,g=e.stats,w=e.value,k=e.onLastDigitSpot,E=m.digit,S=m.spot,x=w===E,O=w===t,C=E===t,P=g?100*g/1e3:null;s.useEffect((function(){k&&k({spot:S,is_lost:i,is_selected_winning:C,is_latest:x,is_won:p})}),[m,S,t,w,i,C,x,p,k]);var T=(0,u.isMobile)()&&"function"==typeof d&&!y,j=(0,u.isMobile)()&&w===f&&!y;return s.createElement("div",{className:o()("digits__digit",{"digits__digit--latest":x,"digits__digit--win":p&&x,"digits__digit--loss":i&&x,"digits__digit--is-selectable":T,"digits__digit--is-selected":j}),onClick:function(){T&&d(w)}},s.createElement(v,{is_min:c,is_max:a,is_selected:O,percentage:P}),s.createElement(l.DesktopWrapper,null,s.createElement(_.s,{is_visible:!!(r&&x&&S&&y&&n),className:"digits__digit-spot",keyname:"digits__digit-spot"},s.createElement(b,{current_spot:S,is_lost:i,is_selected_winning:C,is_visible:!(!x||!S),is_won:p}))),s.createElement(h,{is_latest:x,is_lost:i,is_selected:O,is_won:p,percentage:P,value:w}))};w.propTypes={barrier:a().number,has_entry_spot:a().bool,is_digit_contract:a().bool,is_lost:a().bool,is_max:a().bool,is_min:a().bool,is_won:a().bool,latest_digit:a().object,onLastDigitSpot:a().func,onSelect:a().func,selected_digit:a().number,stats:a().number,status:a().string,value:a().number};const k=(0,m.observer)(w);var E=function(e){var t=e.is_lost,r=e.is_trade_page,n=e.is_won,i=e.position;return s.createElement(s.Fragment,null,!!i&&s.createElement("span",{className:"digits__pointer",style:{transform:"translate3d(calc(".concat(i.left,"px), ").concat(i.top,"px, 0px)")}},s.createElement(l.Icon,{icon:"IcProfit",className:o()("digits__icon",{"digits__icon--win":n&&!r,"digits__icon--loss":t&&!r}),color:n?"green":"red",custom_color:n||t?void 0:"var(--brand-orange)"})))};E.propTypes={is_lost:a().bool,is_trade_page:a().bool,is_won:a().bool,position:a().object};const S=E;function x(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||C(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||C(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){if(e){if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var T=Array.from(Array(10).keys()),j=function(e){var t=e.barrier,r=e.contract_type,n=e.digits,i=e.digits_info,a=e.dimension,c=e.is_digit_contract,l=e.has_entry_spot,p=e.is_ended,_=e.is_trade_page,d=e.onDigitChange,m=e.onLastDigitSpot,f=e.selected_digit,h=e.status,y=e.tick,b=e.trade_type,g=O(s.useState({0:{left:6,top:0},1:{left:6+1*a,top:0},2:{left:6+2*a,top:0},3:{left:6+3*a,top:0},4:{left:6+4*a,top:0},5:{left:6+5*a,top:0},6:{left:6+6*a,top:0},7:{left:6+7*a,top:0},8:{left:6+8*a,top:0},9:{left:6+9*a,top:0}}),1)[0],v=O(s.useState({0:{left:6,top:-60},1:{left:6+1*a,top:-60},2:{left:6+2*a,top:-60},3:{left:6+3*a,top:-60},4:{left:6+4*a,top:-60},5:{left:6+0*a,top:8},6:{left:6+1*a,top:8},7:{left:6+2*a,top:8},8:{left:6+3*a,top:8},9:{left:6+4*a,top:8}}),1)[0],w=function(e){C()&&e!==f&&"function"==typeof d&&d({target:{name:"last_digit",value:e}})},E=function(){return(0,u.isMobile)()?v:g},C=function(){return!!(0,u.isMobile)()&&"even_odd"!==b},P=Object.keys(i).sort().map((function(e){return i[e]})).slice(-1)[0]||{},j=p&&"won"===h&&c,A=p&&"lost"===h&&c,D=n?Math.min.apply(Math,x(n)):null,I=n?Math.max.apply(Math,x(n)):null,R=y?+y.pip_size:null,M=y&&y.ask?y.ask.toFixed(R):null,L=M?+M.split("").pop():null,N=y?E()[L]:E()[P.digit],z=j||A?P:{digit:L,spot:M};return s.createElement("div",{className:o()("digits",{"digits--trade":_})},T.map((function(e){return s.createElement(k,{barrier:(o=e,i={DIGITMATCH:function(e){return e===t},DIGITDIFF:function(e){return e!==t&&!isNaN(t)},DIGITOVER:function(e){return e>t},DIGITUNDER:function(e){return e<t},DIGITODD:function(e){return e%2},DIGITEVEN:function(e){return!(e%2)}},r&&i[r]&&i[r](o)?o:null),has_entry_spot:l,is_digit_contract:c,is_lost:A,is_trade_page:_,is_won:j,key:e,is_max:n?n[e]===I:null,is_min:n?n[e]===D:null,stats:n?n[e]:null,status:h,latest_digit:_?z:P,value:e,onLastDigitSpot:m,onSelect:C()?w:null,selected_digit:!!C()&&f});var o,i})),s.createElement(S,{is_lost:A,is_trade_page:_,is_won:j,position:N}))};j.propTypes={barrier:a().number,contract_type:a().string,digits:a().array,digits_info:a().object,dimension:a().number,has_entry_spot:a().bool,is_digit_contract:a().bool,is_ended:a().bool,is_trade_page:a().bool,status:a().string,trade_type:a().string,onDigitChange:a().func,onLastDigitSpot:a().func,selected_digit:a().number,tick:a().object};const A=(0,m.observer)(j);var D=["contract_info","digits_array","digits_info","display_status","is_digit_contract","is_ended","is_trade_page","onDigitChange","selected_digit","trade_type","onChangeStatus"];function I(){return I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I.apply(this,arguments)}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function L(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var N=function(e){var t=e.contract_info,r=e.digits_array,n=e.digits_info,o=e.display_status,i=e.is_digit_contract,a=e.is_ended,l=e.is_trade_page,p=e.onDigitChange,_=e.selected_digit,d=e.trade_type,m=e.onChangeStatus,f=L(e,D),h=t.date_start,y=f.tick,b=!l||!!y,g=!!l&&(0,u.isContractElapsed)(t,y),v=!g&&b?o:null;if(h&&!g){y=null;var w=t.tick_stream;if(w&&w.length){var k=(0,c.toJS)(w.slice(-1)[0]);y={ask:k.tick,bid:k.tick,epoch:k.epoch,pip_size:k.tick_display_value.split(".")[1].length,current_tick:w.length}}}return s.useEffect((function(){m&&m({status:v,current_tick:y?y.current_tick:null})}),[y,l,o,m,v]),s.createElement(A,{dimension:(0,u.isMobile)()?64:52,has_entry_spot:!!t.entry_tick,barrier:!g&&b?+t.barrier:null,contract_type:!g&&b?t.contract_type:null,digits:r,digits_info:!g&&b?n:{},is_digit_contract:i,is_ended:a,is_trade_page:l,status:v,tick:y,trade_type:d,onDigitChange:p,selected_digit:_,onLastDigitSpot:f.onLastDigitSpot})},z=s.memo((function(e){var t,r=R(s.useState(),2),n=r[0],i=r[1],a=R(s.useState(),2),c=a[0],m=a[1],f=R(s.useState(),2),h=f[0],y=f[1],g=R(s.useState(),2),v=g[0],w=g[1],k=R(s.useState(),2),E=k[0],S=k[1],x=R(s.useState(),2),O=x[0],C=x[1],P=R(s.useState(),2),T=P[0],j=P[1],A=(0,u.useIsMounted)(),D=e.contract_info,M=e.digits_array,L=e.is_digit_contract,z=e.is_trade_page,U=e.underlying;return s.createElement(s.Fragment,null,s.createElement(l.DesktopWrapper,null,s.createElement(_.o,{is_visible:(M||L)&&A(),className:"digits__container",keyname:"digits",type:"bottom"},z&&s.createElement("div",{className:"digits__tooltip-container"},s.createElement(l.Popover,{alignment:"top",classNameBubble:"digits__tooltip-bubble",icon:"info",id:"dt_last_digits_info_tooltip",margin:4,message:(t=z?U:D.underlying,(0,p.localize)("Last digit stats for latest 1000 ticks for {{underlying_name}}",{underlying_name:(0,d.lA)()[t.toUpperCase()]}))})),s.createElement(N,e))),s.createElement(l.MobileWrapper,null,s.createElement("div",{className:"digits__container"},s.createElement(_.s,{is_visible:!!(L&&n&&h&&D.entry_tick),className:o()("digits__digit-spot",{"digits__digit-spot--is-trading":z}),keyname:"digits__digit-spot"},z&&s.createElement(l.Text,{size:"xs",align:"center",className:"digits__digit-spot-value"},s.createElement(p.Localize,{i18n_default_text:"Tick {{current_tick}} - ",values:{current_tick:c}})),s.createElement(b,{current_spot:h,is_lost:T,is_selected_winning:v,is_visible:!(!E||!h),is_won:O})),s.createElement(N,I({},e,{onChangeStatus:function(e){i(e.status),m(e.current_tick)},onLastDigitSpot:function(e){y(e.spot),j(e.is_lost),w(e.is_selected_winning),S(e.is_latest),C(e.is_won)}})))))}));z.displayName="Digits",z.propTypes={contract_info:a().object,digits_array:a().array,digits_info:a().object,display_status:a().string,is_digit_contract:a().bool,is_ended:a().bool,is_trade_page:a().bool,trade_type:a().string,onDigitChange:a().func,selected_digit:a().number,underlying:a().string};const U=z},"./src/Modules/Page404/index.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r("react"),o=r("@deriv/components"),i=r("@deriv/shared"),a=r("@deriv/translations");const s=function(){return n.createElement(o.PageError,{header:(0,a.localize)("We couldnt find that page"),messages:[(0,a.localize)("You may have followed a broken link, or the page has moved to a new address."),(0,a.localize)("Error code: {{error_code}} page not found",{error_code:404})],redirect_urls:[i.routes.trade],redirect_labels:[(0,a.localize)("Return to trade")],classNameImage:"page-404__image",image_url:(0,i.getUrlBase)("/public/images/common/404.png")})}},"./src/Modules/SmartChart/Components/all-markers.jsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>D});var n=r("react"),o=r("@deriv/shared"),i=r("./src/Modules/SmartChart/index.js"),a=function(e){if(!window.DOMParser)return null;var t=(new window.DOMParser).parseFromString(e,"image/svg+xml").children[0],r=t.attributes,n=r.width,o=r.height;n=1*n.value,o=1*o.value;var i=[];return[].forEach.call(t.children,(function(e){var t=e.attributes,r=t.d,n=t.fill,o=t.stroke;i.push({points:r.value.match(/M|C|H|A|L|V|-?\d*(\.\d+)?/g).filter((function(e){return e})).map((function(e){return-1==="MCHALV".indexOf(e)?1*e:e})),fill:n&&n.value,stroke:o&&o.value})})),{width:n,height:o,paths:i,with_color:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"white";return{width:n,height:o,paths:i.map((function(r){var n=r.points,o=r.fill;return{points:n,stroke:r.stroke,fill:"white"!==o?e:t}}))}}}},s=a('\n<svg width="15" height="20" viewBox="0 0 15 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M7,20 C11.2,14.4 14,10.8659932 14,7 C14,3.13400675 10.8659932,0 7,0 C3.13400675,0 0,3.13400675 0,7 C0,10.8659932 2.8,14.4 7,20 Z" fill="#333333"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="A7 7 4.2 0 6.283185307179586" fill="white" />\n</svg>'),c=a('\n<svg width="19" height="20" viewBox="0 0 19 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M2 2L18 2L18 12L2 12Z" fill="white" />\n<path fill-rule="evenodd" clip-rule="evenodd" d="M2,0 L2,1 L19,1 L19,12 L2,12 L2,20 L1,20 L1,0 L2,0 Z M18,8 L15,8 L15,11 L18,11 L18,8 Z M12,8 L9,8 L9,11 L12,11 L12,8 Z M6,8 L3,8 L3,11 L6,11 L6,8 Z M15,5 L12,5 L12,8 L15,8 L15,5 Z M9,5 L6,5 L6,8 L9,8 L9,5 Z M6,2 L3,2 L3,5 L6,5 L6,2 Z M18,2 L15,2 L15,5 L18,5 L18,2 Z M12,2 L9,2 L9,5 L12,5 L12,2 Z" fill="#333333"/>\n</svg>\n'),l=["epoch_array","price_array"];function u(e,t){return f(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||d(e,t)||_()}function p(e){return f(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||_()}function _(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e){if(Array.isArray(e))return e}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var v=navigator.userAgent.search("Firefox")>0,w=function(e){return function(t){var r=t.epoch_array,o=t.price_array,a=g(t,l);return n.createElement(i.If,{epoch_array:r,price_array:o,draw_callback:function(t){return e(y(y({},t),a))}})}};function k(e){var t=e.status,r=e.profit,n=e.is_dark_theme?{open:"#377cfc",won:"#00a79e",lost:"#cc2e3d",sold:"#ffad3a",fg:"#ffffff",bg:"#0e0e0e",dashed_border:"#6E6E6E"}:{open:"#377cfc",won:"#4bb4b3",lost:"#ec3f3f",sold:"#ffad3a",fg:"#333333",bg:"#ffffff",dashed_border:"#999999"},o=n[t||"open"];return"open"===t&&r&&(o=n[r>0?"won":"lost"]),o}var E=function(e){return e?Math.max(Math.min(Math.sqrt(e/18),1.2),.8):1},S=[],x=function(e,t){if(0===S.length)for(var r=255;r>=0;--r)S[r]=(r<16?"0":"")+r.toString(16);var n=Math.floor(255*Math.min(Math.max(t-e-10,0)/6,1));return S[n]},O=function(e,t){var r=t.zoom,n=t.top,o=t.left,i=t.icon;e.save();var a=E(r);e.translate(o-i.width*a/2,n-i.height*a/2),e.scale(a,a),i.paths.forEach((function(t){var r,n,o=t.points,i=t.fill,a=t.stroke;i&&(e.fillStyle=i),a&&(e.strokeStyle=a),e.beginPath();for(var s=0;s<o.length;s++){var c=void 0,l=void 0,u=void 0,p=void 0,_=void 0,d=void 0,m=void 0;if("M"===o[s])c=o[++s],l=o[++s],e.moveTo(c,l);else if("L"===o[s])c=o[++s],l=o[++s],e.lineTo(c,l);else if("V"===o[s])l=o[++s],e.lineTo(r,l);else if("H"===o[s])c=o[++s],e.lineTo(c,n);else if("Q"===o[s])u=o[++s],_=o[++s],c=o[++s],l=o[++s],e.quadraticCurveTo(u,_,c,l);else if("C"===o[s])u=o[++s],_=o[++s],p=o[++s],d=o[++s],c=o[++s],l=o[++s],e.bezierCurveTo(u,_,p,d,c,l);else if("A"===o[s]){c=o[++s],l=o[++s],m=o[++s];var f=o[++s],h=o[++s];e.arc(c,l,m,f,h)}r=c,n=l}e.closePath(),i&&e.fill(),a&&e.stroke()})),e.scale(1,1),e.restore()},C=function(e){var t=e.ctx,r=e.start_left,n=e.top,o=e.bottom,i=e.stroke_color,a=e.fill_color,s=e.scale,c=t.canvas.offsetWidth-t.canvas.parentElement.stx.panels.chart.yaxisTotalWidthRight,l=t.canvas.offsetHeight-t.canvas.parentElement.stx.xaxisHeight,u=n<l,p=o<l,_=u?n:l,d=p?o:l;r<c&&(t.lineWidth=1,t.strokeStyle=i,u&&(t.beginPath(),t.setLineDash([]),t.arc(r,n,1.5,0,2*Math.PI),t.stroke(),t.beginPath(),t.setLineDash([2,3]),t.moveTo(r+1.5*s,n),t.lineTo(c,n),t.stroke()),p&&(t.beginPath(),t.setLineDash([]),t.arc(r,o,1.5,0,2*Math.PI),t.stroke(),t.beginPath(),t.setLineDash([2,3]),t.moveTo(r+1.5*s,o),t.lineTo(c,o),t.stroke()),t.fillStyle=a,t.fillRect(r,_,c-r,Math.abs(d-_)))},P=function(e){var t=e.ctx,r=e.text,n=e.tick,o=n.zoom,i=n.left,a=n.top,s=E(o),c=Math.floor(3*s+7);t.font="".concat(c,"px Roboto"),r.split(/\n/).forEach((function(e,r){var n=Math.ceil(t.measureText(e).width);t.fillText(e,i-5-n,a+r*c+1)}))},T=function(e){var t=e.ctx,r=e.is_dark_theme,n=e.text,o=e.left,i=e.top,a=e.scale;t.textAlign="center";var s=Math.floor(12*a);t.font="bold ".concat(s,"px BinarySymbols, Roboto"),v||(t.shadowColor=r?"rgba(16,19,31,1)":"rgba(255,255,255,1)",t.shadowBlur=12);for(var c=0;c<(v?1:5);++c)t.fillText(n,o,i)},j=w((function(e){var t=e.ctx,r=e.canvas_height,n=p(e.points),i=n[0],a=n.slice(1),l=u(e.prices,2),_=l[0],d=l[1],m=e.is_last_contract,f=e.is_dark_theme,h=e.is_in_contract_details,y=e.granularity,b=e.contract_info,g=b.contract_type,v=b.status,w=b.profit,S=b.is_accumulators_trade_without_contract,j=b.is_sold,A=b.is_expired,D=b.tick_count,I=t,R=k({is_dark_theme:f,status:v,profit:j?w:null});I.strokeStyle=R,I.fillStyle=R,I.save();var M=m&&i.visible&&!j,L=(0,o.isAccumulatorContract)(g),N=E(i.zoom),z=r/window.devicePixelRatio;[_,d].filter(Boolean).forEach((function(e){e=Math.min(Math.max(e,2),z-32)}));var U=a[0],B=a[a.length-1],F=a[a.length-2]||B,H=j?x(i.left,B.left):"";if(i&&S)C({ctx:I,start_left:i.left,fill_color:"rgba(55, 124, 252, 0.08)",stroke_color:k({status:"dashed_border",is_dark_theme:f}),top:_,bottom:d,scale:N});else if(!L||(_&&d&&F&&("open"===v||h)&&C({ctx:I,start_left:F.left,fill_color:"rgba(0, 167, 158, 0.08)",stroke_color:k({status:"dashed_border",is_dark_theme:f}),top:_,bottom:d,scale:N}),!h))if(I.restore(),M&&(P({ctx:I,text:"Start\nTime",tick:{zoom:i.zoom,left:i.left-1*N,top:z-50}}),I.beginPath(),I.setLineDash([3,3]),I.moveTo(i.left-1*N,0),a.length&&_&&!L&&(I.lineTo(i.left-1*N,_-34*N),I.moveTo(i.left-1*N,_+4*N)),I.lineTo(i.left-1*N,r),I.stroke()),a.length&&_){if(i.visible||U.visible||B.visible){var G=L?U.top:_;I.strokeStyle=R+H,I.beginPath(),I.setLineDash([1,1]),I.moveTo(i.left,G),I.lineTo(U.left,G),I.stroke(),I.beginPath(),I.setLineDash([]),I.moveTo(U.left,G),I.lineTo(B.left,G),I.stroke(),I.strokeStyle=R}m&&0===y&&!j&&(a.filter((function(e,t){return L?t>=a.length-2&&e.visible:e.visible})).forEach((function(e){var t=e===B?R:k({status:"fg",is_dark_theme:f});I.fillStyle=t+H,I.beginPath(),I.arc(e.left-1*N,e.top,1.5*N,0,2*Math.PI),I.fill()})),I.fillStyle=R),0===y&&([U,A?B:null].forEach((function(e){e&&e.visible&&(I.strokeStyle=R+H,I.setLineDash([2,2]),I.beginPath(),I.moveTo(e.left-1*N,e.top),e===U&&L?I.lineTo(i.left-1*N,U.top):e===B&&L?(I.moveTo(B.left,U.top),I.lineTo(B.left,B.top)):I.lineTo(e.left-1*N,_),I.stroke(),I.fillStyle=R+H,I.beginPath(),I.arc(e.left-1*N,e.top,3*N,0,2*Math.PI),I.fill(),e===U&&(I.beginPath(),I.fillStyle=k({status:"bg",is_dark_theme:f})+H,I.arc(e.left-1*N,e.top,2*N,0,2*Math.PI),I.fill()))})),I.strokeStyle=R,I.fillStyle=R),!i.visible||j||L||T({ctx:I,scale:N,is_dark_theme:f,text:"".concat(a.length-1,"/").concat(D),left:i.left,top:_-27*N}),i.visible&&O(I,{top:L?U.top-9*N:_-9*N,left:i.left-1*N,zoom:i.zoom,icon:s.with_color(R+(j?H:""),k({status:"bg",is_dark_theme:f})+(j?H:""))}),B.visible&&j&&O(I,{top:L?U.top-9*N:_-9*N,left:B.left+8*N,zoom:B.zoom,icon:c.with_color(R,k({status:"bg",is_dark_theme:f}))}),I.restore()}else I.restore()})),A={AUD:"A$",EUR:"",GBP:"",JPY:"",USD:"$",BTC:"",BCH:"",ETH:"E",ETC:"",LTC:"",UST:""};const D={TickContract:j,NonTickContract:w((function(e){var t=e.ctx,r=e.canvas_height,n=u(e.points,4),i=n[0],a=n[1],l=n[2],p=n[3],_=e.is_last_contract,d=u(e.prices,3),m=d[0],f=d[1],h=d[2],y=e.is_dark_theme,b=e.granularity,g=e.currency,v=e.contract_info,w=v.is_sold,S=v.status,C=v.profit,j=t;0!==b&&(l&&(l.top=f),p&&(p.top=h));var D=k({status:S,profit:C,is_dark_theme:y});j.save(),j.strokeStyle=D,j.fillStyle=D;var I=_&&i.visible&&!w,R=_&&!w&&C&&i.visible&&m,M=E(i.zoom),L=w?x(i.left,a.left):"",N=r/window.devicePixelRatio;if(m&&(m=Math.min(Math.max(m,2),N-32)),I&&(P({ctx:j,text:"Start\nTime",tick:{zoom:i.zoom,left:i.left-1*M,top:N-50}}),j.beginPath(),j.setLineDash([3,3]),j.moveTo(i.left-1*M,0),m&&(j.lineTo(i.left-1*M,m-(R?38:20)*M),j.moveTo(i.left-1*M,m+4*M)),j.lineTo(i.left-1*M,r),j.stroke()),m&&l&&(i.visible||a.visible||Math.sign(i.left)!==Math.sign(a.left))&&(j.strokeStyle=D+L,j.beginPath(),j.setLineDash([1,1]),j.moveTo(i.left,m),j.lineTo(l.left,m),j.stroke(),j.beginPath(),j.setLineDash([]),j.moveTo(l.left,m),j.lineTo(a.left,m),j.stroke(),j.strokeStyle=D),[l,p].forEach((function(e){e&&e.visible&&(j.strokeStyle=D+L,j.setLineDash([2,2]),j.beginPath(),j.moveTo(e.left-1*M,e.top),j.lineTo(e.left-1*M,m),j.stroke(),j.fillStyle=D+L,j.beginPath(),j.arc(e.left-1*M,e.top,3*M,0,2*Math.PI),j.fill(),e===l&&(j.beginPath(),j.fillStyle=k({status:"bg",is_dark_theme:y})+L,j.arc(e.left-1*M,e.top,2*M,0,2*Math.PI),j.fill()),j.fillStyle=D,j.strokeStyle=D)})),i&&i.visible&&m&&O(j,{top:m-9*M,left:i.left-1*M,zoom:i.zoom,icon:s.with_color(D+L)}),R){var z=A[g]||"",U=(0,o.getDecimalPlaces)(g),B="".concat(C<0?"-":C>0?"+":" ").concat(z).concat(Math.abs(C).toFixed(U));T({ctx:j,scale:M,text:B,is_dark_theme:y,left:i.left,top:m-28*M})}a.visible&&O(j,{top:m-9*M,left:a.left+8*M,zoom:a.zoom,icon:c.with_color(D,k({status:"bg",is_dark_theme:y}))}),j.restore()})),DigitContract:w((function(e){var t=e.ctx,r=p(e.points),n=r[0],o=r.slice(1),i=u(e.prices,2),a=i[0],l=i[1],_=e.is_last_contract,d=e.is_dark_theme,m=e.granularity,f=e.contract_info,h=f.status,y=f.profit,b=f.is_sold,g=f.tick_stream,v=f.tick_count,w=t,S=k({is_dark_theme:d,status:h,profit:b?y:null});w.save(),w.strokeStyle=S,w.fillStyle=S;var C=_&&n.visible&&!b,P=E(n.zoom);if(0!==m&&n&&a&&(n.top=a),C&&(w.beginPath(),w.setLineDash([3,3]),w.moveTo(n.left-1*P,0),o.length&&(w.lineTo(n.left-1*P,n.top-34*P),w.moveTo(n.left-1*P,n.top+4*P)),w.lineTo(n.left-1*P,w.canvas.height),w.stroke()),o.length){var j=o[o.length-1],A=b?x(n.left,j.left):"";0!==m&&j&&l&&(j.top=l),n.visible&&n.top&&!b&&T({ctx:w,scale:P,is_dark_theme:d,text:"".concat(o.length,"/").concat(v),left:n.left-1*P,top:n.top-27*P}),!n.visible||0!==m&&b||O(w,{top:n.top-9*P,left:n.left-1*P,zoom:n.zoom,icon:s.with_color(S+A,k({status:"bg",is_dark_theme:d})+A)}),o.forEach((function(e,t){if(e===j&&e.visible&&(0===m||e===j)&&(0===m||e!==j||b)){var r=e!==j?k({status:"fg",is_dark_theme:d}):S;w.beginPath(),w.fillStyle=r,w.arc(e.left,e.top,7*P,0,2*Math.PI),w.fill(),w.beginPath(),w.fillStyle=b?S:k({status:"bg",is_dark_theme:d}),w.arc(e.left,e.top,6*P,0,2*Math.PI),w.fill();var n=g[t].tick_display_value.slice(-1);w.fillStyle=b?"white":r,w.textAlign="center",w.shadowBlur=0,w.font="bold ".concat(12*P,"px BinarySymbols, Roboto"),w.fillText(n,e.left,e.top)}})),j.visible&&b&&(w.fillStyle=S,O(w,{top:j.top-16*P,left:j.left+8*P,zoom:j.zoom,icon:c.with_color(S,k({status:"bg",is_dark_theme:d}))})),w.restore()}else w.restore()}))}},"./src/Modules/SmartChart/Components/bottom-widgets.jsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r("../../node_modules/prop-types/index.js"),o=r.n(n),i=r("react"),a=function(e){var t=e.Widget;return i.createElement("div",{className:"bottom-widgets"},t)};a.propTypes={Widget:o().node};const s=a},"./src/Modules/SmartChart/Components/top-widgets.jsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r("../../node_modules/prop-types/index.js"),o=r.n(n),i=r("react"),a=r("react-dom"),s=r.n(a),c=r("@deriv/components"),l=r("@deriv/translations"),u=r("@deriv/shared"),p=r("./src/Stores/connect.js"),_=r("./src/Modules/SmartChart/index.js"),d=(0,p.$j)((function(e){var t=e.contract_trade;return{granularity:t.granularity,markers_array:t.markers_array}}))((function(e){var t=e.markers_array,r=e.granularity,n=t[t.length-1];if(!n||!n.contract_info.tick_stream||(0,u.isAccumulatorContract)(n.contract_info.contract_type))return null;if((0,u.isEnded)(n.contract_info)||0!==r)return null;var o=n.contract_info,a=o.contract_type,s=o.tick_stream,p=o.tick_count,_=(0,u.isDigitContract)(a)?s.length:Math.max(s.length-1,0);return i.createElement(c.Text,{weight:"bold",className:"recent-trade-info"},(0,l.localize)("Tick")," ",_,"/",p)})),m=function(e){var t=e.InfoBox,r=e.is_mobile,n=e.is_title_enabled,o=void 0===n||n,a=e.onSymbolChange,l=e.y_axis_width,u=e.theme,p=e.open_market,m=e.open,f=e.is_digits_widget_active,h=i.createElement(_.oP,{open_market:p,open:m,enabled:o,onChange:a,searchInputClassName:"data-hj-whitelist",isNestedList:r,portalNodeId:r?"deriv_app":void 0}),y=s().createPortal(i.createElement("div",{className:"smartcharts-".concat(u)},i.createElement("div",{className:"top-widgets-portal",style:{width:"calc(100% - ".concat(l?l+5:0,"px)")}},h,!f&&i.createElement(d,null))),document.getElementById("app_contents"));return i.createElement(i.Fragment,null,t,i.createElement(c.MobileWrapper,null,y),i.createElement(c.DesktopWrapper,null,h))};m.propTypes={InfoBox:o().node,is_digits_widget_active:o().bool,is_mobile:o().bool,is_title_enabled:o().bool,onSymbolChange:o().func,open:o().bool,open_market:o().object,theme:o().string,y_axis_width:o().number};const f=m},"./src/Modules/SmartChart/index.js":(e,t,r)=>{"use strict";r.d(t,{Xb:()=>s,oP:()=>c,oY:()=>l,NU:()=>u,mB:()=>p,as:()=>_,kO:()=>d,av:()=>m,KW:()=>f,If:()=>h});var n=r("react"),o=r("@deriv/shared"),i=(0,o.moduleLoader)((function(){return Promise.resolve().then(r.t.bind(r,"@deriv/deriv-charts",23))}));i.then((function(e){(0,e.setSmartChartsPublicPath)((0,o.getUrlBase)("/js/smartcharts/"))}));var a=function(e){return function(){return i.then((function(t){return{default:t[e]}}))}},s=n.lazy(a("SmartChart")),c=n.lazy(a("ChartTitle")),l=(a("ChartSize"),n.lazy(a("ChartMode"))),u=n.lazy(a("DrawTools")),p=n.lazy(a("Share")),_=n.lazy(a("StudyLegend")),d=n.lazy(a("Views")),m=n.lazy(a("ToolbarWidget")),f=n.lazy(a("FastMarker")),h=n.lazy(a("RawMarker"))},"./src/Modules/Trading/Containers/toast-popup.jsx":(e,t,r)=>{"use strict";r.d(t,{a:()=>y,S:()=>g});var n=r("../../node_modules/classnames/index.js"),o=r.n(n),i=r("../../node_modules/prop-types/index.js"),a=r.n(i),s=r("react"),c=r("react-dom"),l=r.n(c),u=r("@deriv/components"),p=r("./src/Stores/connect.js"),_=["portal_id","children","className"];function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}function h(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var y=function(e){var t=e.portal_id,r=void 0===t?"popup_root":t,n=e.children,i=e.className,a=h(e,_);return document.getElementById(r)?l().createPortal(s.createElement(u.Toast,f({className:o()("dc-toast-popup",i)},a),n),document.getElementById(r)):null},b=function(e){var t=e.status,r=e.portal_id,n=e.message,i=d(s.useState(!1),2),a=i[0],c=i[1];return document.getElementById(r)&&n?(a||"online"===t?a&&"online"===t&&setTimeout((function(){c(!1)}),1500):c(!0),l().createPortal(s.createElement(u.MobileWrapper,null,s.createElement(u.Toast,{className:o()({"dc-toast--blinker":"blinker"===t}),is_open:a,timeout:0,type:"error"},n)),document.getElementById(r))):null};b.propTypes={portal_id:a().string,status:a().string,message:a().string};var g=(0,p.$j)((function(e){return{network_status:e.common.network_status}}))((function(e){var t=e.network_status;return s.createElement(b,{portal_id:"popup_root",message:t.tooltip,status:t.class})}))},"./src/Modules/Trading/Helpers/digits.js":(e,t,r)=>{"use strict";r.d(t,{A:()=>i,H:()=>a});var n=["even_odd","match_diff","over_under"],o=["DIGITDIFF","DIGITMATCH","DIGITOVER","DIGITUNDER","DIGITEVEN","DIGITODD"],i=function(e){return n.includes(e)},a=function(e){return o.includes(e)}},"./src/Stores/Modules/Trading/Helpers/contract-type.js":(e,t,r)=>{"use strict";r.d(t,{R:()=>Y});var n=r("@deriv/shared"),o=r("./src/_common/base/server_time.js"),i=r.n(o),a=r("@deriv/translations"),s=r("./src/Stores/Modules/Trading/Helpers/start-date.js");function c(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){c(i,n,o,a,s,"next",e)}function s(e){c(i,n,o,a,s,"throw",e)}a(void 0)}))}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}var b,g,v,w,k,E,S,x,O,C,P,T,j,A,D,I,R,M,L,N,z,U,B,F,H,G,V,W,q,Y=(g={},v={},w={},k={},E=!1,S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t[e.contract_type]=e.contract_display,t},x=function(e,t){return-1!==e.indexOf(t)?t:e[0]},O=function(e){return b&&{form_components:["duration","amount"].concat(p(b[e].components)).filter((function(t){return!("duration"===t&&b[e].config&&b[e].config.hide_duration)}))}},C=function(e,t){return{duration_units_list:(0,n.getPropertyValue)(g,[e,"config","durations","units_display",t])||[]}},P=function(e,t,r){var o=(0,n.getPropertyValue)(g,[t,"config","durations","units_display",r])||[],i=[];return o.forEach((function(e){i.push(e.value)})),{duration_unit:x(i,e)}},T=function(e,t,r){var o=(0,n.getPropertyValue)(g,[e,"config","durations","min_max",t])||{};return r&&(o=o[r]||{}),{duration_min_max:o}},j=function(e){return{contract_start_type:e===Number(0)?"spot":"forward"}},A=function(e,t){var r,o=(0,n.getPropertyValue)(g,[e,"config"]),i=[];return null!=o&&o.has_spot&&i.push({text:(0,a.localize)("Now"),value:Number(0)}),null!=o&&o.forward_starting_dates&&i.push.apply(i,p(o.forward_starting_dates)),{start_date:i.find((function(e){return e.value===t}))?t:null===(r=i[0])||void 0===r?void 0:r.value,start_dates_list:i}},D=p(Array(24).keys()).map((function(e){return"0".concat(e).slice(-2)})),I=p(Array(12).keys()).map((function(e){return"0".concat(5*e).slice(-2)})),R=function(e,t,r){return e&&!(0,s.Y)(e,t)&&(t.minute(I.find((function(r){return(0,s.Y)(e,t.minute(r))}))||t.format("mm")),(0,s.Y)(e,t)||(t.minute(0),t.hour(D.find((function(n){return(0,s.Y)(e,t.hour(n),r,!0)}))||t.format("HH")),t.minute(I.find((function(r){return(0,s.Y)(e,t.minute(r))}))||t.format("mm")))),t.format("HH:mm")},M=function(e,t){var r=u((0,n.isTimeValid)(t)?t.split(":"):[0,0],2),o=r[0],a=r[1];return(0,n.toMoment)(e||i().get()).hour(o).minute(a)},L=function(){var e=l(regeneratorRuntime.mark((function e(t){var r,o,i,a,s,c,l,u,p=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p.length>1&&void 0!==p[1]?p[1]:null,t){e.next=3;break}return e.abrupt("return",[]);case 3:if(t in w){e.next=8;break}return e.next=6,n.WS.tradingTimes(t);case 6:if(o=e.sent,(0,n.getPropertyValue)(o,["trading_times","markets"]))for(i=0;i<o.trading_times.markets.length;i++)if(a=o.trading_times.markets[i].submarkets)for(s=0;s<a.length;s++)if(c=a[s].symbols)for(l=0;l<c.length;l++)u=c[l],w[o.echo_req.trading_times]||(w[o.echo_req.trading_times]={}),w[o.echo_req.trading_times][u.symbol]=u.events;case 8:return e.abrupt("return",w[t][r]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=l(regeneratorRuntime.mark((function e(t){var r,o,i,a,s,c,l,u,p=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p.length>1&&void 0!==p[1]?p[1]:null,t){e.next=3;break}return e.abrupt("return",[]);case 3:if(t in k){e.next=8;break}return e.next=6,n.WS.tradingTimes(t);case 6:if(o=e.sent,(0,n.getPropertyValue)(o,["trading_times","markets"]))for(i=0;i<o.trading_times.markets.length;i++)if(a=o.trading_times.markets[i].submarkets)for(s=0;s<a.length;s++)if(c=a[s].symbols)for(l=0;l<c.length;l++)u=c[l],k[o.echo_req.trading_times]||(k[o.echo_req.trading_times]={}),k[o.echo_req.trading_times][u.symbol]={open:u.times.open,close:u.times.close};case 8:return e.abrupt("return",r?k[t][r]:k[t]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(e){return e.minute(5*Math.ceil(e.minute()/5))},B=function(e){return{trade_types:(0,n.getPropertyValue)(g,[e,"config","trade_types"])}},H=function(e,t){var r=(0,n.getPropertyValue)(g,[e,"basis"])||[],o=(0,n.getLocalizedBasis)();return{basis_list:r.reduce((function(e,t){return[].concat(p(e),[{text:o[t],value:t}])}),[]),basis:x(r,t)}},G=function(e){return{accumulator_range_list:(0,n.getPropertyValue)(g,[e,"config","growth_rate_range"])||[]}},V=function(e,t){var r=(0,n.getPropertyValue)(g,[e,"config","multiplier_range"])||[];return{multiplier_range_list:r.map((function(e){return{text:"x".concat(e),value:e}})),multiplier:x(r,t)}},W=function(e,t,r){var o=(0,n.getPropertyValue)(g,[e,"config","cancellation_range"])||[],i=new RegExp("^([0-9]+)|([a-zA-Z]+)$","g"),a=(0,n.shouldShowCancellation)(r);return f({cancellation_duration:x(o,t),cancellation_range_list:o.map((function(e){return{text:"".concat((t=e,r=u(t.match(i),2),o=r[0],a=r[1],s=(0,n.getUnitMap)(),"".concat(o," ").concat(s[a].name_plural))),value:e};var t,r,o,a,s}))},a?{}:{has_cancellation:!1})},q=function(e){var t,r=null===(t=/^(.*)_equal$/.exec(e))||void 0===t?void 0:t[1];return r&&!g[r]?{is_equal:1,has_equals_only:!0}:{}},{buildContractTypesConfig:function(e){return n.WS.storage.contractsFor(e).then((function(t){var r=(0,n.getPropertyValue)(t,["contracts_for"]);if(E=r&&!t.contracts_for.available.find((function(e){return"forward"!==e.start_type})),r&&!E){var o=(0,n.getContractCategoriesConfig)();b=(0,n.getContractTypesConfig)(e),g={},v=(0,n.cloneObject)(o),t.contracts_for.available.forEach((function(e){var t=Object.keys(b).find((function(t){return-1!==b[t].trade_types.indexOf(e.contract_type)&&(void 0===b[t].barrier_count||+b[t].barrier_count===e.barriers)}));if(t){if(!g[t]){var r=v[Object.keys(v).find((function(e){return-1!==v[e].categories.indexOf(t)}))].categories;if(!r)return;r[r.indexOf(t)]={value:t,text:b[t].title},g[t]=(0,n.cloneObject)(b[t])}var o=g[t].config||{};o.has_spot=o.has_spot||"spot"===e.start_type,o.durations=!o.hide_duration&&(0,n.buildDurationConfig)(e,o.durations),o.trade_types=S(e,o.trade_types),o.barriers=(0,n.buildBarriersConfig)(e,o.barriers),o.forward_starting_dates=(0,n.buildForwardStartingConfig)(e,o.forward_starting_dates),o.growth_rate_range=e.growth_rate_range,o.multiplier_range=e.multiplier_range,o.cancellation_range=e.cancellation_range,g[t].config=o}})),Object.keys(v).forEach((function(e){var t,r;v[e].categories=null===(t=v[e].categories)||void 0===t?void 0:t.filter((function(e){return"object"===y(e)})),0===(null===(r=v[e].categories)||void 0===r?void 0:r.length)&&delete v[e]}))}}))},getBarriers:F=function(e,t){var r=(0,n.getPropertyValue)(g,[e,"config","barriers"])||{},o=r[t]||{},i=o.barrier||o.high_barrier||"",a=o.low_barrier||"";return{barrier_count:r.count||0,barrier_1:i.toString(),barrier_2:a.toString()}},getContractType:function(e,t){var r=Object.keys(e||{}).reduce((function(t,r){return[].concat(p(t),p(e[r].categories.map((function(e){return e.value}))))}),[]).filter((function(e){return-1===n.unsupported_contract_types_list.indexOf(e)})).sort((function(e,t){return"multiplier"===e||"multiplier"===t?-1:0}));return{contract_type:x(r,t)}},getContractValues:function(e){var t=e.contract_expiry_type,r=e.contract_type,n=e.basis,o=e.duration_unit,i=e.expiry_type,a=e.multiplier,s=e.start_date,c=e.cancellation_duration,l=e.symbol;if(!r)return{};var u=O(r),p=H(r,n),_=B(r),d=A(r,s),m=j(d.start_date),h=F(r,t),y=P(o,r,m.contract_start_type),b=C(r,m.contract_start_type),g=T(r,m.contract_start_type),v=G(r),w=V(r,a),k=W(r,c,l),E=z(b,i),S=q(r);return f(f(f(f(f(f(f(f(f(f(f(f(f(f({},u),p),_),d),m),h),y),b),g),E),v),w),k),S)},getDurationMinMax:T,getDurationUnit:P,getDurationUnitsList:C,getFullContractTypes:function(){return g},getExpiryDate:function(e,t,r,o){var i=null;if("endtime"===r){var a=(0,n.toMoment)(o),s=(0,n.toMoment)(t);i=(0,n.hasIntradayDurationUnit)(e)?(s.isBefore(a,"day")||o&&s.isAfter(a.clone().add(1,"day"))?a:s).format("YYYY-MM-DD"):(s.isSameOrBefore(a,"day")?a.clone().add(1,"day"):s).format("YYYY-MM-DD")}return{expiry_date:i}},getExpiryTime:function(e,t,r,o,a,c,l){var u=null;if("endtime"===r){var p="23:59:59";if(o&&o.length&&"--"!==o[0]&&(p=o.slice(-1)[0]),!c&&i().get().isBefore(M(e),"day"))u=p;else{var _=c?M(c,l):i().get(),d=M(e,t);u=d.format("HH:mm");var m=[{open:_.clone().add(5,"minute"),close:(0,n.minDate)(_.clone().add(24,"hour"),M(e,p))}];if((0,s.Y)(m,d)||(u=R(m,d.clone(),_.clone())),d.isSameOrBefore(_)||d.diff(_,"minute")<5){var f=23===_.get("hours")&&_.get("minute")>=55,h=a&&!(0,s.Y)(a,_.clone().add(5,"minutes"));u=_.clone().add(f||h?0:5,"minutes"),u=U(u).format("HH:mm")}"00:00"===u&&_.isBefore(d,"day")&&(u=_.clone().subtract(5,"minute").format("HH:mm"))}}return{expiry_time:u}},getExpiryType:z=function(e,t){if(e){if(!t&&e.length>0||1===e.length&&"t"===e[0].value)return{expiry_type:"duration"};if(0===e.length)return{expiry_type:null}}return{expiry_type:t}},getSessions:function(e,t){return{sessions:((((0,n.getPropertyValue)(g,[e,"config"])||{}).forward_starting_dates||[]).find((function(e){return e.value===t}))||{}).sessions}},getStartTime:function(e,t,r){return{start_time:t?R(e,M(t,r)):null}},getStartType:j,getTradingEvents:L,getTradingTimes:N,getContractCategories:function(){return{contract_types_list:v,has_only_forward_starting_contracts:E}}})},"./src/Stores/Modules/Trading/Helpers/multiplier.js":(e,t,r)=>{"use strict";r.d(t,{Lf:()=>a,Qu:()=>s,tP:()=>c});var n=r("./src/Stores/connect.js");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(e){var t=!e.has_cancellation;(0,e.onChangeMultiple)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({has_cancellation:t},t?{has_stop_loss:!1,has_take_profit:!1}:{cancellation_price:void 0}))},s=function(e){var t=e.event;(0,e.onChangeMultiple)({has_cancellation:!0,has_take_profit:!1,has_stop_loss:!1,cancellation_duration:t.target.value})},c=(0,n.$j)((function(e,t){!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e);var r=t.contract,n=void 0===r?{}:r;return{validation_errors:n.validation_errors,contract_update_take_profit:n.contract_update_take_profit,contract_update_stop_loss:n.contract_update_stop_loss,has_contract_update_take_profit:n.has_contract_update_take_profit,has_contract_update_stop_loss:n.has_contract_update_stop_loss}}))},"./src/Stores/Modules/Trading/Helpers/proposal.js":(e,t,r)=>{"use strict";r.d(t,{yr:()=>c,_N:()=>l,RX:()=>u});var n=r("@deriv/shared");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s={barrier:"barrier_1",barrier2:"barrier_2",date_expiry:"expiry_date"},c=function(e){var t=(0,n.getPropertyValue)(e,["error","details","field"]);if(!t)return null;var r,o=s[t]||t,i=document.getElementsByName(o)[0];return i&&((r=i)&&(0!==r.offsetWidth||0!==r.offsetHeight))?o:null},l=function(e,t,r){var o,a,s,l=t.proposal||{},u=l.payout-l.ask_price||0,p=100*u/(l.ask_price||1),_=l.display_value,d=e.basis_list.find((function(t){return t.value!==e.basis}))||{},m="Stake"===d.text?_:l[d.value],f=m>r.value;r.value&&m!==r.value||(f=null);var h={text:d.text||"",value:m||""},y=l.commission,b=l.cancellation,g=i(i({},l.contract_details),{},{growth_rate:e.growth_rate,spot:l.spot,spot_time:l.spot_time});return i({commission:y,cancellation:b,id:l.id||"",has_error:!!t.error,has_error_details:!!c(t),error_code:null==t||null===(o=t.error)||void 0===o?void 0:o.code,error_field:null==t||null===(a=t.error)||void 0===a||null===(s=a.details)||void 0===s?void 0:s.field,has_increased:f,limit_order:l.limit_order,message:l.longcode||t.error.message,obj_contract_basis:h,payout:l.payout,profit:u.toFixed((0,n.getDecimalPlaces)(e.currency)),returns:"".concat(p.toFixed(2),"%"),stake:_},g)},u=function(e){var t={};return Object.keys(e.trade_types).forEach((function(r){var n=p(e,r);t[r]=n})),t},p=function(e,t){var r={},o={},a={};if("endtime"===e.expiry_type){var s=(0,n.toMoment)(e.expiry_date);o.date_expiry=(0,n.convertToUnix)(s.unix(),e.expiry_time)}return"multiplier"===e.contract_type&&function(e,t){t.multiplier=e.multiplier,t.cancellation=e.has_cancellation?e.cancellation_duration:void 0,t.limit_order=e.has_take_profit||e.has_stop_loss?{}:void 0,e.has_take_profit&&e.take_profit&&(t.limit_order.take_profit=+e.take_profit||0),e.has_stop_loss&&e.stop_loss&&(t.limit_order.stop_loss=+e.stop_loss||0)}(e,a),"accumulator"===e.contract_type&&function(e,t){t.growth_rate=e.growth_rate,t.limit_order=e.has_take_profit?{}:void 0,e.has_take_profit&&e.take_profit&&(t.limit_order.take_profit=+e.take_profit||0)}(e,r),i(i(i(i(i(i({proposal:1,subscribe:1,amount:parseFloat(e.amount)||0,basis:e.basis,contract_type:t,currency:e.currency,symbol:e.symbol},e.start_date&&{date_start:(0,n.convertToUnix)(e.start_date,e.start_time)}),"duration"===e.expiry_type?{duration:parseInt(e.duration),duration_unit:e.duration_unit}:o),(e.barrier_count>0||-1!==e.form_components.indexOf("last_digit"))&&!(0,n.isAccumulatorContract)(t)&&{barrier:e.barrier_1||e.last_digit}),2===e.barrier_count&&!(0,n.isAccumulatorContract)(t)&&{barrier2:e.barrier_2}),r),a)}},"./src/Stores/Modules/Trading/Helpers/start-date.js":(e,t,r)=>{"use strict";r.d(t,{Y:()=>s});var n=r("./src/_common/base/server_time.js"),o=r.n(n),i=r("@deriv/shared"),a=function(e,t,r){var n=(0,i.toMoment)(t);return r&&n.minute(0).second(0),e.isBefore(n)&&n.unix()!==e.unix()},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,i.toMoment)(o().get()),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.toMoment)(o().get()),n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return!(a(t,o().get(),n)||a(t,r,n)||e.length&&!e.find((function(e){return t.isBetween(e.open,e.close,n?"hour":null,"[]")})))}},"./src/Stores/connect.js":(e,t,r)=>{"use strict";r.d(t,{z1:()=>l,$j:()=>u});var n=r("mobx-react"),o=r("react");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=o.createContext(null);var l=function(e){var t=e.store,r=e.children;return o.createElement(c.Provider,{value:a(a({},t),{},{mobxStores:t})},r)},u=function(e){return function(t){return function(e,t){var r=function(r){var i=o.useContext(c),s=t;return function(e){return!("function"!=typeof e||!e.prototype||!e.prototype.isReactComponent)}(t)&&(s=function(e){return o.createElement(t,e)}),(0,n.useObserver)((function(){return s(a(a({},r),e(i,r)))}))};return r.displayName=t.name,r}(e,t)}}},"./src/Utils/Helpers/market-underlying.js":(e,t,r)=>{"use strict";r.d(t,{cS:()=>n});r("./src/Constants/contract.js");var n=function(e){var t={category:"",underlying:""},r=new RegExp("^([A-Z]+)_((1HZ[0-9-V]+)|((CRASH|BOOM)[0-9\\d]+[A-Z]?)|(OTC_[A-Z0-9]+)|R_[\\d]{2,3}|[A-Z]+)").exec(e);return null!==r&&(t.category=r[1].toLowerCase(),t.underlying=r[2]),t}},"./src/_common/base/server_time.js":(e,t,r)=>{var n,o,i,a=r("./src/_common/utility.js").PromiseClass,s=(o=!1,i=new a,{init:function(e){o||(n=e,i.resolve(n.server_time),o=!0)},get:function(){return o&&n.server_time?n.server_time.clone():void 0},timePromise:function(){return o?Promise.resolve(n.server_time):i.promise}});e.exports=s},"./src/_common/utility.js":e=>{function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var n,o=r((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.promise=new Promise((function(e,r){t.reject=r,t.resolve=e}))}));e.exports={template:function(e,t){var r=t;return t&&!Array.isArray(t)&&(r=[t]),e.replace(/\[_(\d+)]/g,(function(e,t){return r[+t-1]}))},createElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=document.createElement(e);return Object.keys(t).forEach((function(e){var n=t[e];"text"===e?r.textContent=n:"html"===e?r.html(n):r.setAttribute(e,n)})),r},getStaticHash:function(){return n=n||(document.querySelector('script[src*="main"]').getAttribute("src")||"").split(".")[1]},PromiseClass:o}}}]);